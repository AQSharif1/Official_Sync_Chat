var DS=Object.defineProperty;var xg=e=>{throw TypeError(e)};var OS=(e,t,r)=>t in e?DS(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var ze=(e,t,r)=>OS(e,typeof t!="symbol"?t+"":t,r),pd=(e,t,r)=>t.has(e)||xg("Cannot "+r);var L=(e,t,r)=>(pd(e,t,"read from private field"),r?r.call(e):t.get(e)),Pe=(e,t,r)=>t.has(e)?xg("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),xe=(e,t,r,n)=>(pd(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),_t=(e,t,r)=>(pd(e,t,"access private method"),r);var bl=(e,t,r,n)=>({set _(s){xe(e,t,s,r)},get _(){return L(e,t,n)}});function IS(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in e)){const o=Object.getOwnPropertyDescriptor(n,s);o&&Object.defineProperty(e,s,o.get?o:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(s){if(s.ep)return;s.ep=!0;const o=r(s);fetch(s.href,o)}})();var _r=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function gy(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function LS(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var s=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return e[n]}})}),r}var vy={exports:{}},cu={},xy={exports:{}},be={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ji=Symbol.for("react.element"),$S=Symbol.for("react.portal"),US=Symbol.for("react.fragment"),FS=Symbol.for("react.strict_mode"),zS=Symbol.for("react.profiler"),GS=Symbol.for("react.provider"),BS=Symbol.for("react.context"),VS=Symbol.for("react.forward_ref"),HS=Symbol.for("react.suspense"),WS=Symbol.for("react.memo"),qS=Symbol.for("react.lazy"),yg=Symbol.iterator;function KS(e){return e===null||typeof e!="object"?null:(e=yg&&e[yg]||e["@@iterator"],typeof e=="function"?e:null)}var yy={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},wy=Object.assign,by={};function jo(e,t,r){this.props=e,this.context=t,this.refs=by,this.updater=r||yy}jo.prototype.isReactComponent={};jo.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};jo.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function jy(){}jy.prototype=jo.prototype;function rm(e,t,r){this.props=e,this.context=t,this.refs=by,this.updater=r||yy}var nm=rm.prototype=new jy;nm.constructor=rm;wy(nm,jo.prototype);nm.isPureReactComponent=!0;var wg=Array.isArray,_y=Object.prototype.hasOwnProperty,sm={current:null},Ny={key:!0,ref:!0,__self:!0,__source:!0};function Sy(e,t,r){var n,s={},o=null,i=null;if(t!=null)for(n in t.ref!==void 0&&(i=t.ref),t.key!==void 0&&(o=""+t.key),t)_y.call(t,n)&&!Ny.hasOwnProperty(n)&&(s[n]=t[n]);var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)s[n]===void 0&&(s[n]=l[n]);return{$$typeof:Ji,type:e,key:o,ref:i,props:s,_owner:sm.current}}function YS(e,t){return{$$typeof:Ji,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function am(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ji}function QS(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var bg=/\/+/g;function gd(e,t){return typeof e=="object"&&e!==null&&e.key!=null?QS(""+e.key):t.toString(36)}function Zl(e,t,r,n,s){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(o){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case Ji:case $S:i=!0}}if(i)return i=e,s=s(i),e=n===""?"."+gd(i,0):n,wg(s)?(r="",e!=null&&(r=e.replace(bg,"$&/")+"/"),Zl(s,t,r,"",function(u){return u})):s!=null&&(am(s)&&(s=YS(s,r+(!s.key||i&&i.key===s.key?"":(""+s.key).replace(bg,"$&/")+"/")+e)),t.push(s)),1;if(i=0,n=n===""?".":n+":",wg(e))for(var l=0;l<e.length;l++){o=e[l];var c=n+gd(o,l);i+=Zl(o,t,r,c,s)}else if(c=KS(e),typeof c=="function")for(e=c.call(e),l=0;!(o=e.next()).done;)o=o.value,c=n+gd(o,l++),i+=Zl(o,t,r,c,s);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return i}function jl(e,t,r){if(e==null)return e;var n=[],s=0;return Zl(e,n,"","",function(o){return t.call(r,o,s++)}),n}function XS(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ut={current:null},ec={transition:null},JS={ReactCurrentDispatcher:Ut,ReactCurrentBatchConfig:ec,ReactCurrentOwner:sm};function ky(){throw Error("act(...) is not supported in production builds of React.")}be.Children={map:jl,forEach:function(e,t,r){jl(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return jl(e,function(){t++}),t},toArray:function(e){return jl(e,function(t){return t})||[]},only:function(e){if(!am(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};be.Component=jo;be.Fragment=US;be.Profiler=zS;be.PureComponent=rm;be.StrictMode=FS;be.Suspense=HS;be.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=JS;be.act=ky;be.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=wy({},e.props),s=e.key,o=e.ref,i=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,i=sm.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)_y.call(t,c)&&!Ny.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:Ji,type:e.type,key:s,ref:o,props:n,_owner:i}};be.createContext=function(e){return e={$$typeof:BS,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:GS,_context:e},e.Consumer=e};be.createElement=Sy;be.createFactory=function(e){var t=Sy.bind(null,e);return t.type=e,t};be.createRef=function(){return{current:null}};be.forwardRef=function(e){return{$$typeof:VS,render:e}};be.isValidElement=am;be.lazy=function(e){return{$$typeof:qS,_payload:{_status:-1,_result:e},_init:XS}};be.memo=function(e,t){return{$$typeof:WS,type:e,compare:t===void 0?null:t}};be.startTransition=function(e){var t=ec.transition;ec.transition={};try{e()}finally{ec.transition=t}};be.unstable_act=ky;be.useCallback=function(e,t){return Ut.current.useCallback(e,t)};be.useContext=function(e){return Ut.current.useContext(e)};be.useDebugValue=function(){};be.useDeferredValue=function(e){return Ut.current.useDeferredValue(e)};be.useEffect=function(e,t){return Ut.current.useEffect(e,t)};be.useId=function(){return Ut.current.useId()};be.useImperativeHandle=function(e,t,r){return Ut.current.useImperativeHandle(e,t,r)};be.useInsertionEffect=function(e,t){return Ut.current.useInsertionEffect(e,t)};be.useLayoutEffect=function(e,t){return Ut.current.useLayoutEffect(e,t)};be.useMemo=function(e,t){return Ut.current.useMemo(e,t)};be.useReducer=function(e,t,r){return Ut.current.useReducer(e,t,r)};be.useRef=function(e){return Ut.current.useRef(e)};be.useState=function(e){return Ut.current.useState(e)};be.useSyncExternalStore=function(e,t,r){return Ut.current.useSyncExternalStore(e,t,r)};be.useTransition=function(){return Ut.current.useTransition()};be.version="18.3.1";xy.exports=be;var m=xy.exports;const A=gy(m),Cy=IS({__proto__:null,default:A},[m]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZS=m,ek=Symbol.for("react.element"),tk=Symbol.for("react.fragment"),rk=Object.prototype.hasOwnProperty,nk=ZS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,sk={key:!0,ref:!0,__self:!0,__source:!0};function Ey(e,t,r){var n,s={},o=null,i=null;r!==void 0&&(o=""+r),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(i=t.ref);for(n in t)rk.call(t,n)&&!sk.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)s[n]===void 0&&(s[n]=t[n]);return{$$typeof:ek,type:e,key:o,ref:i,props:s,_owner:nk.current}}cu.Fragment=tk;cu.jsx=Ey;cu.jsxs=Ey;vy.exports=cu;var a=vy.exports,Py={exports:{}},cr={},Ty={exports:{}},Ry={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(R,D){var B=R.length;R.push(D);e:for(;0<B;){var I=B-1>>>1,F=R[I];if(0<s(F,D))R[I]=D,R[B]=F,B=I;else break e}}function r(R){return R.length===0?null:R[0]}function n(R){if(R.length===0)return null;var D=R[0],B=R.pop();if(B!==D){R[0]=B;e:for(var I=0,F=R.length,X=F>>>1;I<X;){var fe=2*(I+1)-1,ve=R[fe],re=fe+1,le=R[re];if(0>s(ve,B))re<F&&0>s(le,ve)?(R[I]=le,R[re]=B,I=re):(R[I]=ve,R[fe]=B,I=fe);else if(re<F&&0>s(le,B))R[I]=le,R[re]=B,I=re;else break e}}return D}function s(R,D){var B=R.sortIndex-D.sortIndex;return B!==0?B:R.id-D.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var i=Date,l=i.now();e.unstable_now=function(){return i.now()-l}}var c=[],u=[],f=1,d=null,h=3,p=!1,g=!1,v=!1,y=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(R){for(var D=r(u);D!==null;){if(D.callback===null)n(u);else if(D.startTime<=R)n(u),D.sortIndex=D.expirationTime,t(c,D);else break;D=r(u)}}function j(R){if(v=!1,b(R),!g)if(r(c)!==null)g=!0,H(_);else{var D=r(u);D!==null&&Y(j,D.startTime-R)}}function _(R,D){g=!1,v&&(v=!1,x(k),k=-1),p=!0;var B=h;try{for(b(D),d=r(c);d!==null&&(!(d.expirationTime>D)||R&&!T());){var I=d.callback;if(typeof I=="function"){d.callback=null,h=d.priorityLevel;var F=I(d.expirationTime<=D);D=e.unstable_now(),typeof F=="function"?d.callback=F:d===r(c)&&n(c),b(D)}else n(c);d=r(c)}if(d!==null)var X=!0;else{var fe=r(u);fe!==null&&Y(j,fe.startTime-D),X=!1}return X}finally{d=null,h=B,p=!1}}var S=!1,N=null,k=-1,C=5,P=-1;function T(){return!(e.unstable_now()-P<C)}function M(){if(N!==null){var R=e.unstable_now();P=R;var D=!0;try{D=N(!0,R)}finally{D?G():(S=!1,N=null)}}else S=!1}var G;if(typeof w=="function")G=function(){w(M)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,Q=$.port2;$.port1.onmessage=M,G=function(){Q.postMessage(null)}}else G=function(){y(M,0)};function H(R){N=R,S||(S=!0,G())}function Y(R,D){k=y(function(){R(e.unstable_now())},D)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(R){R.callback=null},e.unstable_continueExecution=function(){g||p||(g=!0,H(_))},e.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<R?Math.floor(1e3/R):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(R){switch(h){case 1:case 2:case 3:var D=3;break;default:D=h}var B=h;h=D;try{return R()}finally{h=B}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(R,D){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var B=h;h=R;try{return D()}finally{h=B}},e.unstable_scheduleCallback=function(R,D,B){var I=e.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?I+B:I):B=I,R){case 1:var F=-1;break;case 2:F=250;break;case 5:F=1073741823;break;case 4:F=1e4;break;default:F=5e3}return F=B+F,R={id:f++,callback:D,priorityLevel:R,startTime:B,expirationTime:F,sortIndex:-1},B>I?(R.sortIndex=B,t(u,R),r(c)===null&&R===r(u)&&(v?(x(k),k=-1):v=!0,Y(j,B-I))):(R.sortIndex=F,t(c,R),g||p||(g=!0,H(_))),R},e.unstable_shouldYield=T,e.unstable_wrapCallback=function(R){var D=h;return function(){var B=h;h=D;try{return R.apply(this,arguments)}finally{h=B}}}})(Ry);Ty.exports=Ry;var ak=Ty.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ok=m,lr=ak;function z(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var My=new Set,_i={};function ca(e,t){oo(e,t),oo(e+"Capture",t)}function oo(e,t){for(_i[e]=t,e=0;e<t.length;e++)My.add(t[e])}var Mn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),vf=Object.prototype.hasOwnProperty,ik=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,jg={},_g={};function lk(e){return vf.call(_g,e)?!0:vf.call(jg,e)?!1:ik.test(e)?_g[e]=!0:(jg[e]=!0,!1)}function ck(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function uk(e,t,r,n){if(t===null||typeof t>"u"||ck(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ft(e,t,r,n,s,o,i){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=i}var yt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){yt[e]=new Ft(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];yt[t]=new Ft(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){yt[e]=new Ft(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){yt[e]=new Ft(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){yt[e]=new Ft(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){yt[e]=new Ft(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){yt[e]=new Ft(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){yt[e]=new Ft(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){yt[e]=new Ft(e,5,!1,e.toLowerCase(),null,!1,!1)});var om=/[\-:]([a-z])/g;function im(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(om,im);yt[t]=new Ft(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(om,im);yt[t]=new Ft(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(om,im);yt[t]=new Ft(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){yt[e]=new Ft(e,1,!1,e.toLowerCase(),null,!1,!1)});yt.xlinkHref=new Ft("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){yt[e]=new Ft(e,1,!1,e.toLowerCase(),null,!0,!0)});function lm(e,t,r,n){var s=yt.hasOwnProperty(t)?yt[t]:null;(s!==null?s.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(uk(t,r,s,n)&&(r=null),n||s===null?lk(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):s.mustUseProperty?e[s.propertyName]=r===null?s.type===3?!1:"":r:(t=s.attributeName,n=s.attributeNamespace,r===null?e.removeAttribute(t):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Un=ok.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_l=Symbol.for("react.element"),Ea=Symbol.for("react.portal"),Pa=Symbol.for("react.fragment"),cm=Symbol.for("react.strict_mode"),xf=Symbol.for("react.profiler"),Ay=Symbol.for("react.provider"),Dy=Symbol.for("react.context"),um=Symbol.for("react.forward_ref"),yf=Symbol.for("react.suspense"),wf=Symbol.for("react.suspense_list"),dm=Symbol.for("react.memo"),Qn=Symbol.for("react.lazy"),Oy=Symbol.for("react.offscreen"),Ng=Symbol.iterator;function zo(e){return e===null||typeof e!="object"?null:(e=Ng&&e[Ng]||e["@@iterator"],typeof e=="function"?e:null)}var Qe=Object.assign,vd;function ni(e){if(vd===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);vd=t&&t[1]||""}return`
`+vd+e}var xd=!1;function yd(e,t){if(!e||xd)return"";xd=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),o=n.stack.split(`
`),i=s.length-1,l=o.length-1;1<=i&&0<=l&&s[i]!==o[l];)l--;for(;1<=i&&0<=l;i--,l--)if(s[i]!==o[l]){if(i!==1||l!==1)do if(i--,l--,0>l||s[i]!==o[l]){var c=`
`+s[i].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=i&&0<=l);break}}}finally{xd=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?ni(e):""}function dk(e){switch(e.tag){case 5:return ni(e.type);case 16:return ni("Lazy");case 13:return ni("Suspense");case 19:return ni("SuspenseList");case 0:case 2:case 15:return e=yd(e.type,!1),e;case 11:return e=yd(e.type.render,!1),e;case 1:return e=yd(e.type,!0),e;default:return""}}function bf(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Pa:return"Fragment";case Ea:return"Portal";case xf:return"Profiler";case cm:return"StrictMode";case yf:return"Suspense";case wf:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Dy:return(e.displayName||"Context")+".Consumer";case Ay:return(e._context.displayName||"Context")+".Provider";case um:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case dm:return t=e.displayName||null,t!==null?t:bf(e.type)||"Memo";case Qn:t=e._payload,e=e._init;try{return bf(e(t))}catch{}}return null}function fk(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return bf(t);case 8:return t===cm?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ws(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Iy(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function hk(e){var t=Iy(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,o=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(i){n=""+i,o.call(this,i)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(i){n=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Nl(e){e._valueTracker||(e._valueTracker=hk(e))}function Ly(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=Iy(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function yc(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function jf(e,t){var r=t.checked;return Qe({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Sg(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=ws(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function $y(e,t){t=t.checked,t!=null&&lm(e,"checked",t,!1)}function _f(e,t){$y(e,t);var r=ws(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Nf(e,t.type,r):t.hasOwnProperty("defaultValue")&&Nf(e,t.type,ws(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function kg(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Nf(e,t,r){(t!=="number"||yc(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var si=Array.isArray;function Fa(e,t,r,n){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&n&&(e[r].defaultSelected=!0)}else{for(r=""+ws(r),t=null,s=0;s<e.length;s++){if(e[s].value===r){e[s].selected=!0,n&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Sf(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(z(91));return Qe({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Cg(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(z(92));if(si(r)){if(1<r.length)throw Error(z(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:ws(r)}}function Uy(e,t){var r=ws(t.value),n=ws(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function Eg(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Fy(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function kf(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Fy(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Sl,zy=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,s){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Sl=Sl||document.createElement("div"),Sl.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Sl.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Ni(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var ci={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},mk=["Webkit","ms","Moz","O"];Object.keys(ci).forEach(function(e){mk.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ci[t]=ci[e]})});function Gy(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||ci.hasOwnProperty(e)&&ci[e]?(""+t).trim():t+"px"}function By(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=Gy(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,s):e[r]=s}}var pk=Qe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Cf(e,t){if(t){if(pk[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(z(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(z(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(z(61))}if(t.style!=null&&typeof t.style!="object")throw Error(z(62))}}function Ef(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Pf=null;function fm(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Tf=null,za=null,Ga=null;function Pg(e){if(e=tl(e)){if(typeof Tf!="function")throw Error(z(280));var t=e.stateNode;t&&(t=mu(t),Tf(e.stateNode,e.type,t))}}function Vy(e){za?Ga?Ga.push(e):Ga=[e]:za=e}function Hy(){if(za){var e=za,t=Ga;if(Ga=za=null,Pg(e),t)for(e=0;e<t.length;e++)Pg(t[e])}}function Wy(e,t){return e(t)}function qy(){}var wd=!1;function Ky(e,t,r){if(wd)return e(t,r);wd=!0;try{return Wy(e,t,r)}finally{wd=!1,(za!==null||Ga!==null)&&(qy(),Hy())}}function Si(e,t){var r=e.stateNode;if(r===null)return null;var n=mu(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(z(231,t,typeof r));return r}var Rf=!1;if(Mn)try{var Go={};Object.defineProperty(Go,"passive",{get:function(){Rf=!0}}),window.addEventListener("test",Go,Go),window.removeEventListener("test",Go,Go)}catch{Rf=!1}function gk(e,t,r,n,s,o,i,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(f){this.onError(f)}}var ui=!1,wc=null,bc=!1,Mf=null,vk={onError:function(e){ui=!0,wc=e}};function xk(e,t,r,n,s,o,i,l,c){ui=!1,wc=null,gk.apply(vk,arguments)}function yk(e,t,r,n,s,o,i,l,c){if(xk.apply(this,arguments),ui){if(ui){var u=wc;ui=!1,wc=null}else throw Error(z(198));bc||(bc=!0,Mf=u)}}function ua(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function Yy(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Tg(e){if(ua(e)!==e)throw Error(z(188))}function wk(e){var t=e.alternate;if(!t){if(t=ua(e),t===null)throw Error(z(188));return t!==e?null:e}for(var r=e,n=t;;){var s=r.return;if(s===null)break;var o=s.alternate;if(o===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===r)return Tg(s),e;if(o===n)return Tg(s),t;o=o.sibling}throw Error(z(188))}if(r.return!==n.return)r=s,n=o;else{for(var i=!1,l=s.child;l;){if(l===r){i=!0,r=s,n=o;break}if(l===n){i=!0,n=s,r=o;break}l=l.sibling}if(!i){for(l=o.child;l;){if(l===r){i=!0,r=o,n=s;break}if(l===n){i=!0,n=o,r=s;break}l=l.sibling}if(!i)throw Error(z(189))}}if(r.alternate!==n)throw Error(z(190))}if(r.tag!==3)throw Error(z(188));return r.stateNode.current===r?e:t}function Qy(e){return e=wk(e),e!==null?Xy(e):null}function Xy(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Xy(e);if(t!==null)return t;e=e.sibling}return null}var Jy=lr.unstable_scheduleCallback,Rg=lr.unstable_cancelCallback,bk=lr.unstable_shouldYield,jk=lr.unstable_requestPaint,Ze=lr.unstable_now,_k=lr.unstable_getCurrentPriorityLevel,hm=lr.unstable_ImmediatePriority,Zy=lr.unstable_UserBlockingPriority,jc=lr.unstable_NormalPriority,Nk=lr.unstable_LowPriority,e0=lr.unstable_IdlePriority,uu=null,an=null;function Sk(e){if(an&&typeof an.onCommitFiberRoot=="function")try{an.onCommitFiberRoot(uu,e,void 0,(e.current.flags&128)===128)}catch{}}var Br=Math.clz32?Math.clz32:Ek,kk=Math.log,Ck=Math.LN2;function Ek(e){return e>>>=0,e===0?32:31-(kk(e)/Ck|0)|0}var kl=64,Cl=4194304;function ai(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function _c(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,s=e.suspendedLanes,o=e.pingedLanes,i=r&268435455;if(i!==0){var l=i&~s;l!==0?n=ai(l):(o&=i,o!==0&&(n=ai(o)))}else i=r&~s,i!==0?n=ai(i):o!==0&&(n=ai(o));if(n===0)return 0;if(t!==0&&t!==n&&!(t&s)&&(s=n&-n,o=t&-t,s>=o||s===16&&(o&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-Br(t),s=1<<r,n|=e[r],t&=~s;return n}function Pk(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Tk(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,o=e.pendingLanes;0<o;){var i=31-Br(o),l=1<<i,c=s[i];c===-1?(!(l&r)||l&n)&&(s[i]=Pk(l,t)):c<=t&&(e.expiredLanes|=l),o&=~l}}function Af(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function t0(){var e=kl;return kl<<=1,!(kl&4194240)&&(kl=64),e}function bd(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Zi(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Br(t),e[t]=r}function Rk(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var s=31-Br(r),o=1<<s;t[s]=0,n[s]=-1,e[s]=-1,r&=~o}}function mm(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-Br(r),s=1<<n;s&t|e[n]&t&&(e[n]|=t),r&=~s}}var Te=0;function r0(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var n0,pm,s0,a0,o0,Df=!1,El=[],us=null,ds=null,fs=null,ki=new Map,Ci=new Map,Jn=[],Mk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Mg(e,t){switch(e){case"focusin":case"focusout":us=null;break;case"dragenter":case"dragleave":ds=null;break;case"mouseover":case"mouseout":fs=null;break;case"pointerover":case"pointerout":ki.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ci.delete(t.pointerId)}}function Bo(e,t,r,n,s,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:o,targetContainers:[s]},t!==null&&(t=tl(t),t!==null&&pm(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function Ak(e,t,r,n,s){switch(t){case"focusin":return us=Bo(us,e,t,r,n,s),!0;case"dragenter":return ds=Bo(ds,e,t,r,n,s),!0;case"mouseover":return fs=Bo(fs,e,t,r,n,s),!0;case"pointerover":var o=s.pointerId;return ki.set(o,Bo(ki.get(o)||null,e,t,r,n,s)),!0;case"gotpointercapture":return o=s.pointerId,Ci.set(o,Bo(Ci.get(o)||null,e,t,r,n,s)),!0}return!1}function i0(e){var t=Bs(e.target);if(t!==null){var r=ua(t);if(r!==null){if(t=r.tag,t===13){if(t=Yy(r),t!==null){e.blockedOn=t,o0(e.priority,function(){s0(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function tc(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Of(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);Pf=n,r.target.dispatchEvent(n),Pf=null}else return t=tl(r),t!==null&&pm(t),e.blockedOn=r,!1;t.shift()}return!0}function Ag(e,t,r){tc(e)&&r.delete(t)}function Dk(){Df=!1,us!==null&&tc(us)&&(us=null),ds!==null&&tc(ds)&&(ds=null),fs!==null&&tc(fs)&&(fs=null),ki.forEach(Ag),Ci.forEach(Ag)}function Vo(e,t){e.blockedOn===t&&(e.blockedOn=null,Df||(Df=!0,lr.unstable_scheduleCallback(lr.unstable_NormalPriority,Dk)))}function Ei(e){function t(s){return Vo(s,e)}if(0<El.length){Vo(El[0],e);for(var r=1;r<El.length;r++){var n=El[r];n.blockedOn===e&&(n.blockedOn=null)}}for(us!==null&&Vo(us,e),ds!==null&&Vo(ds,e),fs!==null&&Vo(fs,e),ki.forEach(t),Ci.forEach(t),r=0;r<Jn.length;r++)n=Jn[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<Jn.length&&(r=Jn[0],r.blockedOn===null);)i0(r),r.blockedOn===null&&Jn.shift()}var Ba=Un.ReactCurrentBatchConfig,Nc=!0;function Ok(e,t,r,n){var s=Te,o=Ba.transition;Ba.transition=null;try{Te=1,gm(e,t,r,n)}finally{Te=s,Ba.transition=o}}function Ik(e,t,r,n){var s=Te,o=Ba.transition;Ba.transition=null;try{Te=4,gm(e,t,r,n)}finally{Te=s,Ba.transition=o}}function gm(e,t,r,n){if(Nc){var s=Of(e,t,r,n);if(s===null)Rd(e,t,n,Sc,r),Mg(e,n);else if(Ak(s,e,t,r,n))n.stopPropagation();else if(Mg(e,n),t&4&&-1<Mk.indexOf(e)){for(;s!==null;){var o=tl(s);if(o!==null&&n0(o),o=Of(e,t,r,n),o===null&&Rd(e,t,n,Sc,r),o===s)break;s=o}s!==null&&n.stopPropagation()}else Rd(e,t,n,null,r)}}var Sc=null;function Of(e,t,r,n){if(Sc=null,e=fm(n),e=Bs(e),e!==null)if(t=ua(e),t===null)e=null;else if(r=t.tag,r===13){if(e=Yy(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Sc=e,null}function l0(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(_k()){case hm:return 1;case Zy:return 4;case jc:case Nk:return 16;case e0:return 536870912;default:return 16}default:return 16}}var os=null,vm=null,rc=null;function c0(){if(rc)return rc;var e,t=vm,r=t.length,n,s="value"in os?os.value:os.textContent,o=s.length;for(e=0;e<r&&t[e]===s[e];e++);var i=r-e;for(n=1;n<=i&&t[r-n]===s[o-n];n++);return rc=s.slice(e,1<n?1-n:void 0)}function nc(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Pl(){return!0}function Dg(){return!1}function ur(e){function t(r,n,s,o,i){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=o,this.target=i,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(o):o[l]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Pl:Dg,this.isPropagationStopped=Dg,this}return Qe(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Pl)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Pl)},persist:function(){},isPersistent:Pl}),t}var _o={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xm=ur(_o),el=Qe({},_o,{view:0,detail:0}),Lk=ur(el),jd,_d,Ho,du=Qe({},el,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ym,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ho&&(Ho&&e.type==="mousemove"?(jd=e.screenX-Ho.screenX,_d=e.screenY-Ho.screenY):_d=jd=0,Ho=e),jd)},movementY:function(e){return"movementY"in e?e.movementY:_d}}),Og=ur(du),$k=Qe({},du,{dataTransfer:0}),Uk=ur($k),Fk=Qe({},el,{relatedTarget:0}),Nd=ur(Fk),zk=Qe({},_o,{animationName:0,elapsedTime:0,pseudoElement:0}),Gk=ur(zk),Bk=Qe({},_o,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Vk=ur(Bk),Hk=Qe({},_o,{data:0}),Ig=ur(Hk),Wk={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Kk={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Yk(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Kk[e])?!!t[e]:!1}function ym(){return Yk}var Qk=Qe({},el,{key:function(e){if(e.key){var t=Wk[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=nc(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?qk[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ym,charCode:function(e){return e.type==="keypress"?nc(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?nc(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Xk=ur(Qk),Jk=Qe({},du,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Lg=ur(Jk),Zk=Qe({},el,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ym}),eC=ur(Zk),tC=Qe({},_o,{propertyName:0,elapsedTime:0,pseudoElement:0}),rC=ur(tC),nC=Qe({},du,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),sC=ur(nC),aC=[9,13,27,32],wm=Mn&&"CompositionEvent"in window,di=null;Mn&&"documentMode"in document&&(di=document.documentMode);var oC=Mn&&"TextEvent"in window&&!di,u0=Mn&&(!wm||di&&8<di&&11>=di),$g=" ",Ug=!1;function d0(e,t){switch(e){case"keyup":return aC.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function f0(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ta=!1;function iC(e,t){switch(e){case"compositionend":return f0(t);case"keypress":return t.which!==32?null:(Ug=!0,$g);case"textInput":return e=t.data,e===$g&&Ug?null:e;default:return null}}function lC(e,t){if(Ta)return e==="compositionend"||!wm&&d0(e,t)?(e=c0(),rc=vm=os=null,Ta=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return u0&&t.locale!=="ko"?null:t.data;default:return null}}var cC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fg(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!cC[e.type]:t==="textarea"}function h0(e,t,r,n){Vy(n),t=kc(t,"onChange"),0<t.length&&(r=new xm("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var fi=null,Pi=null;function uC(e){N0(e,0)}function fu(e){var t=Aa(e);if(Ly(t))return e}function dC(e,t){if(e==="change")return t}var m0=!1;if(Mn){var Sd;if(Mn){var kd="oninput"in document;if(!kd){var zg=document.createElement("div");zg.setAttribute("oninput","return;"),kd=typeof zg.oninput=="function"}Sd=kd}else Sd=!1;m0=Sd&&(!document.documentMode||9<document.documentMode)}function Gg(){fi&&(fi.detachEvent("onpropertychange",p0),Pi=fi=null)}function p0(e){if(e.propertyName==="value"&&fu(Pi)){var t=[];h0(t,Pi,e,fm(e)),Ky(uC,t)}}function fC(e,t,r){e==="focusin"?(Gg(),fi=t,Pi=r,fi.attachEvent("onpropertychange",p0)):e==="focusout"&&Gg()}function hC(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return fu(Pi)}function mC(e,t){if(e==="click")return fu(t)}function pC(e,t){if(e==="input"||e==="change")return fu(t)}function gC(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Hr=typeof Object.is=="function"?Object.is:gC;function Ti(e,t){if(Hr(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!vf.call(t,s)||!Hr(e[s],t[s]))return!1}return!0}function Bg(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Vg(e,t){var r=Bg(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Bg(r)}}function g0(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?g0(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function v0(){for(var e=window,t=yc();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=yc(e.document)}return t}function bm(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function vC(e){var t=v0(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&g0(r.ownerDocument.documentElement,r)){if(n!==null&&bm(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=r.textContent.length,o=Math.min(n.start,s);n=n.end===void 0?o:Math.min(n.end,s),!e.extend&&o>n&&(s=n,n=o,o=s),s=Vg(r,o);var i=Vg(r,n);s&&i&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),o>n?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var xC=Mn&&"documentMode"in document&&11>=document.documentMode,Ra=null,If=null,hi=null,Lf=!1;function Hg(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Lf||Ra==null||Ra!==yc(n)||(n=Ra,"selectionStart"in n&&bm(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),hi&&Ti(hi,n)||(hi=n,n=kc(If,"onSelect"),0<n.length&&(t=new xm("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Ra)))}function Tl(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Ma={animationend:Tl("Animation","AnimationEnd"),animationiteration:Tl("Animation","AnimationIteration"),animationstart:Tl("Animation","AnimationStart"),transitionend:Tl("Transition","TransitionEnd")},Cd={},x0={};Mn&&(x0=document.createElement("div").style,"AnimationEvent"in window||(delete Ma.animationend.animation,delete Ma.animationiteration.animation,delete Ma.animationstart.animation),"TransitionEvent"in window||delete Ma.transitionend.transition);function hu(e){if(Cd[e])return Cd[e];if(!Ma[e])return e;var t=Ma[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in x0)return Cd[e]=t[r];return e}var y0=hu("animationend"),w0=hu("animationiteration"),b0=hu("animationstart"),j0=hu("transitionend"),_0=new Map,Wg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Cs(e,t){_0.set(e,t),ca(t,[e])}for(var Ed=0;Ed<Wg.length;Ed++){var Pd=Wg[Ed],yC=Pd.toLowerCase(),wC=Pd[0].toUpperCase()+Pd.slice(1);Cs(yC,"on"+wC)}Cs(y0,"onAnimationEnd");Cs(w0,"onAnimationIteration");Cs(b0,"onAnimationStart");Cs("dblclick","onDoubleClick");Cs("focusin","onFocus");Cs("focusout","onBlur");Cs(j0,"onTransitionEnd");oo("onMouseEnter",["mouseout","mouseover"]);oo("onMouseLeave",["mouseout","mouseover"]);oo("onPointerEnter",["pointerout","pointerover"]);oo("onPointerLeave",["pointerout","pointerover"]);ca("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ca("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ca("onBeforeInput",["compositionend","keypress","textInput","paste"]);ca("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ca("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ca("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var oi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),bC=new Set("cancel close invalid load scroll toggle".split(" ").concat(oi));function qg(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,yk(n,t,void 0,e),e.currentTarget=null}function N0(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],s=n.event;n=n.listeners;e:{var o=void 0;if(t)for(var i=n.length-1;0<=i;i--){var l=n[i],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==o&&s.isPropagationStopped())break e;qg(s,l,u),o=c}else for(i=0;i<n.length;i++){if(l=n[i],c=l.instance,u=l.currentTarget,l=l.listener,c!==o&&s.isPropagationStopped())break e;qg(s,l,u),o=c}}}if(bc)throw e=Mf,bc=!1,Mf=null,e}function $e(e,t){var r=t[Gf];r===void 0&&(r=t[Gf]=new Set);var n=e+"__bubble";r.has(n)||(S0(t,e,2,!1),r.add(n))}function Td(e,t,r){var n=0;t&&(n|=4),S0(r,e,n,t)}var Rl="_reactListening"+Math.random().toString(36).slice(2);function Ri(e){if(!e[Rl]){e[Rl]=!0,My.forEach(function(r){r!=="selectionchange"&&(bC.has(r)||Td(r,!1,e),Td(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Rl]||(t[Rl]=!0,Td("selectionchange",!1,t))}}function S0(e,t,r,n){switch(l0(t)){case 1:var s=Ok;break;case 4:s=Ik;break;default:s=gm}r=s.bind(null,t,r,e),s=void 0,!Rf||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),n?s!==void 0?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):s!==void 0?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function Rd(e,t,r,n,s){var o=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var i=n.tag;if(i===3||i===4){var l=n.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(i===4)for(i=n.return;i!==null;){var c=i.tag;if((c===3||c===4)&&(c=i.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;i=i.return}for(;l!==null;){if(i=Bs(l),i===null)return;if(c=i.tag,c===5||c===6){n=o=i;continue e}l=l.parentNode}}n=n.return}Ky(function(){var u=o,f=fm(r),d=[];e:{var h=_0.get(e);if(h!==void 0){var p=xm,g=e;switch(e){case"keypress":if(nc(r)===0)break e;case"keydown":case"keyup":p=Xk;break;case"focusin":g="focus",p=Nd;break;case"focusout":g="blur",p=Nd;break;case"beforeblur":case"afterblur":p=Nd;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=Og;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=Uk;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=eC;break;case y0:case w0:case b0:p=Gk;break;case j0:p=rC;break;case"scroll":p=Lk;break;case"wheel":p=sC;break;case"copy":case"cut":case"paste":p=Vk;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=Lg}var v=(t&4)!==0,y=!v&&e==="scroll",x=v?h!==null?h+"Capture":null:h;v=[];for(var w=u,b;w!==null;){b=w;var j=b.stateNode;if(b.tag===5&&j!==null&&(b=j,x!==null&&(j=Si(w,x),j!=null&&v.push(Mi(w,j,b)))),y)break;w=w.return}0<v.length&&(h=new p(h,g,null,r,f),d.push({event:h,listeners:v}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",h&&r!==Pf&&(g=r.relatedTarget||r.fromElement)&&(Bs(g)||g[An]))break e;if((p||h)&&(h=f.window===f?f:(h=f.ownerDocument)?h.defaultView||h.parentWindow:window,p?(g=r.relatedTarget||r.toElement,p=u,g=g?Bs(g):null,g!==null&&(y=ua(g),g!==y||g.tag!==5&&g.tag!==6)&&(g=null)):(p=null,g=u),p!==g)){if(v=Og,j="onMouseLeave",x="onMouseEnter",w="mouse",(e==="pointerout"||e==="pointerover")&&(v=Lg,j="onPointerLeave",x="onPointerEnter",w="pointer"),y=p==null?h:Aa(p),b=g==null?h:Aa(g),h=new v(j,w+"leave",p,r,f),h.target=y,h.relatedTarget=b,j=null,Bs(f)===u&&(v=new v(x,w+"enter",g,r,f),v.target=b,v.relatedTarget=y,j=v),y=j,p&&g)t:{for(v=p,x=g,w=0,b=v;b;b=va(b))w++;for(b=0,j=x;j;j=va(j))b++;for(;0<w-b;)v=va(v),w--;for(;0<b-w;)x=va(x),b--;for(;w--;){if(v===x||x!==null&&v===x.alternate)break t;v=va(v),x=va(x)}v=null}else v=null;p!==null&&Kg(d,h,p,v,!1),g!==null&&y!==null&&Kg(d,y,g,v,!0)}}e:{if(h=u?Aa(u):window,p=h.nodeName&&h.nodeName.toLowerCase(),p==="select"||p==="input"&&h.type==="file")var _=dC;else if(Fg(h))if(m0)_=pC;else{_=hC;var S=fC}else(p=h.nodeName)&&p.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(_=mC);if(_&&(_=_(e,u))){h0(d,_,r,f);break e}S&&S(e,h,u),e==="focusout"&&(S=h._wrapperState)&&S.controlled&&h.type==="number"&&Nf(h,"number",h.value)}switch(S=u?Aa(u):window,e){case"focusin":(Fg(S)||S.contentEditable==="true")&&(Ra=S,If=u,hi=null);break;case"focusout":hi=If=Ra=null;break;case"mousedown":Lf=!0;break;case"contextmenu":case"mouseup":case"dragend":Lf=!1,Hg(d,r,f);break;case"selectionchange":if(xC)break;case"keydown":case"keyup":Hg(d,r,f)}var N;if(wm)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Ta?d0(e,r)&&(k="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(k="onCompositionStart");k&&(u0&&r.locale!=="ko"&&(Ta||k!=="onCompositionStart"?k==="onCompositionEnd"&&Ta&&(N=c0()):(os=f,vm="value"in os?os.value:os.textContent,Ta=!0)),S=kc(u,k),0<S.length&&(k=new Ig(k,e,null,r,f),d.push({event:k,listeners:S}),N?k.data=N:(N=f0(r),N!==null&&(k.data=N)))),(N=oC?iC(e,r):lC(e,r))&&(u=kc(u,"onBeforeInput"),0<u.length&&(f=new Ig("onBeforeInput","beforeinput",null,r,f),d.push({event:f,listeners:u}),f.data=N))}N0(d,t)})}function Mi(e,t,r){return{instance:e,listener:t,currentTarget:r}}function kc(e,t){for(var r=t+"Capture",n=[];e!==null;){var s=e,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=Si(e,r),o!=null&&n.unshift(Mi(e,o,s)),o=Si(e,t),o!=null&&n.push(Mi(e,o,s))),e=e.return}return n}function va(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Kg(e,t,r,n,s){for(var o=t._reactName,i=[];r!==null&&r!==n;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&u!==null&&(l=u,s?(c=Si(r,o),c!=null&&i.unshift(Mi(r,c,l))):s||(c=Si(r,o),c!=null&&i.push(Mi(r,c,l)))),r=r.return}i.length!==0&&e.push({event:t,listeners:i})}var jC=/\r\n?/g,_C=/\u0000|\uFFFD/g;function Yg(e){return(typeof e=="string"?e:""+e).replace(jC,`
`).replace(_C,"")}function Ml(e,t,r){if(t=Yg(t),Yg(e)!==t&&r)throw Error(z(425))}function Cc(){}var $f=null,Uf=null;function Ff(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var zf=typeof setTimeout=="function"?setTimeout:void 0,NC=typeof clearTimeout=="function"?clearTimeout:void 0,Qg=typeof Promise=="function"?Promise:void 0,SC=typeof queueMicrotask=="function"?queueMicrotask:typeof Qg<"u"?function(e){return Qg.resolve(null).then(e).catch(kC)}:zf;function kC(e){setTimeout(function(){throw e})}function Md(e,t){var r=t,n=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){e.removeChild(s),Ei(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);Ei(t)}function hs(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Xg(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var No=Math.random().toString(36).slice(2),nn="__reactFiber$"+No,Ai="__reactProps$"+No,An="__reactContainer$"+No,Gf="__reactEvents$"+No,CC="__reactListeners$"+No,EC="__reactHandles$"+No;function Bs(e){var t=e[nn];if(t)return t;for(var r=e.parentNode;r;){if(t=r[An]||r[nn]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Xg(e);e!==null;){if(r=e[nn])return r;e=Xg(e)}return t}e=r,r=e.parentNode}return null}function tl(e){return e=e[nn]||e[An],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Aa(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(z(33))}function mu(e){return e[Ai]||null}var Bf=[],Da=-1;function Es(e){return{current:e}}function Ue(e){0>Da||(e.current=Bf[Da],Bf[Da]=null,Da--)}function Ae(e,t){Da++,Bf[Da]=e.current,e.current=t}var bs={},Tt=Es(bs),Kt=Es(!1),ta=bs;function io(e,t){var r=e.type.contextTypes;if(!r)return bs;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in r)s[o]=t[o];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Yt(e){return e=e.childContextTypes,e!=null}function Ec(){Ue(Kt),Ue(Tt)}function Jg(e,t,r){if(Tt.current!==bs)throw Error(z(168));Ae(Tt,t),Ae(Kt,r)}function k0(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in t))throw Error(z(108,fk(e)||"Unknown",s));return Qe({},r,n)}function Pc(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||bs,ta=Tt.current,Ae(Tt,e),Ae(Kt,Kt.current),!0}function Zg(e,t,r){var n=e.stateNode;if(!n)throw Error(z(169));r?(e=k0(e,t,ta),n.__reactInternalMemoizedMergedChildContext=e,Ue(Kt),Ue(Tt),Ae(Tt,e)):Ue(Kt),Ae(Kt,r)}var Sn=null,pu=!1,Ad=!1;function C0(e){Sn===null?Sn=[e]:Sn.push(e)}function PC(e){pu=!0,C0(e)}function Ps(){if(!Ad&&Sn!==null){Ad=!0;var e=0,t=Te;try{var r=Sn;for(Te=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}Sn=null,pu=!1}catch(s){throw Sn!==null&&(Sn=Sn.slice(e+1)),Jy(hm,Ps),s}finally{Te=t,Ad=!1}}return null}var Oa=[],Ia=0,Tc=null,Rc=0,gr=[],vr=0,ra=null,Cn=1,En="";function Us(e,t){Oa[Ia++]=Rc,Oa[Ia++]=Tc,Tc=e,Rc=t}function E0(e,t,r){gr[vr++]=Cn,gr[vr++]=En,gr[vr++]=ra,ra=e;var n=Cn;e=En;var s=32-Br(n)-1;n&=~(1<<s),r+=1;var o=32-Br(t)+s;if(30<o){var i=s-s%5;o=(n&(1<<i)-1).toString(32),n>>=i,s-=i,Cn=1<<32-Br(t)+s|r<<s|n,En=o+e}else Cn=1<<o|r<<s|n,En=e}function jm(e){e.return!==null&&(Us(e,1),E0(e,1,0))}function _m(e){for(;e===Tc;)Tc=Oa[--Ia],Oa[Ia]=null,Rc=Oa[--Ia],Oa[Ia]=null;for(;e===ra;)ra=gr[--vr],gr[vr]=null,En=gr[--vr],gr[vr]=null,Cn=gr[--vr],gr[vr]=null}var or=null,rr=null,Ge=!1,zr=null;function P0(e,t){var r=yr(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function ev(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,or=e,rr=hs(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,or=e,rr=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=ra!==null?{id:Cn,overflow:En}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=yr(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,or=e,rr=null,!0):!1;default:return!1}}function Vf(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Hf(e){if(Ge){var t=rr;if(t){var r=t;if(!ev(e,t)){if(Vf(e))throw Error(z(418));t=hs(r.nextSibling);var n=or;t&&ev(e,t)?P0(n,r):(e.flags=e.flags&-4097|2,Ge=!1,or=e)}}else{if(Vf(e))throw Error(z(418));e.flags=e.flags&-4097|2,Ge=!1,or=e}}}function tv(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;or=e}function Al(e){if(e!==or)return!1;if(!Ge)return tv(e),Ge=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Ff(e.type,e.memoizedProps)),t&&(t=rr)){if(Vf(e))throw T0(),Error(z(418));for(;t;)P0(e,t),t=hs(t.nextSibling)}if(tv(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(z(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){rr=hs(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}rr=null}}else rr=or?hs(e.stateNode.nextSibling):null;return!0}function T0(){for(var e=rr;e;)e=hs(e.nextSibling)}function lo(){rr=or=null,Ge=!1}function Nm(e){zr===null?zr=[e]:zr.push(e)}var TC=Un.ReactCurrentBatchConfig;function Wo(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(z(309));var n=r.stateNode}if(!n)throw Error(z(147,e));var s=n,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(i){var l=s.refs;i===null?delete l[o]:l[o]=i},t._stringRef=o,t)}if(typeof e!="string")throw Error(z(284));if(!r._owner)throw Error(z(290,e))}return e}function Dl(e,t){throw e=Object.prototype.toString.call(t),Error(z(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function rv(e){var t=e._init;return t(e._payload)}function R0(e){function t(x,w){if(e){var b=x.deletions;b===null?(x.deletions=[w],x.flags|=16):b.push(w)}}function r(x,w){if(!e)return null;for(;w!==null;)t(x,w),w=w.sibling;return null}function n(x,w){for(x=new Map;w!==null;)w.key!==null?x.set(w.key,w):x.set(w.index,w),w=w.sibling;return x}function s(x,w){return x=vs(x,w),x.index=0,x.sibling=null,x}function o(x,w,b){return x.index=b,e?(b=x.alternate,b!==null?(b=b.index,b<w?(x.flags|=2,w):b):(x.flags|=2,w)):(x.flags|=1048576,w)}function i(x){return e&&x.alternate===null&&(x.flags|=2),x}function l(x,w,b,j){return w===null||w.tag!==6?(w=Fd(b,x.mode,j),w.return=x,w):(w=s(w,b),w.return=x,w)}function c(x,w,b,j){var _=b.type;return _===Pa?f(x,w,b.props.children,j,b.key):w!==null&&(w.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Qn&&rv(_)===w.type)?(j=s(w,b.props),j.ref=Wo(x,w,b),j.return=x,j):(j=uc(b.type,b.key,b.props,null,x.mode,j),j.ref=Wo(x,w,b),j.return=x,j)}function u(x,w,b,j){return w===null||w.tag!==4||w.stateNode.containerInfo!==b.containerInfo||w.stateNode.implementation!==b.implementation?(w=zd(b,x.mode,j),w.return=x,w):(w=s(w,b.children||[]),w.return=x,w)}function f(x,w,b,j,_){return w===null||w.tag!==7?(w=Xs(b,x.mode,j,_),w.return=x,w):(w=s(w,b),w.return=x,w)}function d(x,w,b){if(typeof w=="string"&&w!==""||typeof w=="number")return w=Fd(""+w,x.mode,b),w.return=x,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case _l:return b=uc(w.type,w.key,w.props,null,x.mode,b),b.ref=Wo(x,null,w),b.return=x,b;case Ea:return w=zd(w,x.mode,b),w.return=x,w;case Qn:var j=w._init;return d(x,j(w._payload),b)}if(si(w)||zo(w))return w=Xs(w,x.mode,b,null),w.return=x,w;Dl(x,w)}return null}function h(x,w,b,j){var _=w!==null?w.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return _!==null?null:l(x,w,""+b,j);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case _l:return b.key===_?c(x,w,b,j):null;case Ea:return b.key===_?u(x,w,b,j):null;case Qn:return _=b._init,h(x,w,_(b._payload),j)}if(si(b)||zo(b))return _!==null?null:f(x,w,b,j,null);Dl(x,b)}return null}function p(x,w,b,j,_){if(typeof j=="string"&&j!==""||typeof j=="number")return x=x.get(b)||null,l(w,x,""+j,_);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case _l:return x=x.get(j.key===null?b:j.key)||null,c(w,x,j,_);case Ea:return x=x.get(j.key===null?b:j.key)||null,u(w,x,j,_);case Qn:var S=j._init;return p(x,w,b,S(j._payload),_)}if(si(j)||zo(j))return x=x.get(b)||null,f(w,x,j,_,null);Dl(w,j)}return null}function g(x,w,b,j){for(var _=null,S=null,N=w,k=w=0,C=null;N!==null&&k<b.length;k++){N.index>k?(C=N,N=null):C=N.sibling;var P=h(x,N,b[k],j);if(P===null){N===null&&(N=C);break}e&&N&&P.alternate===null&&t(x,N),w=o(P,w,k),S===null?_=P:S.sibling=P,S=P,N=C}if(k===b.length)return r(x,N),Ge&&Us(x,k),_;if(N===null){for(;k<b.length;k++)N=d(x,b[k],j),N!==null&&(w=o(N,w,k),S===null?_=N:S.sibling=N,S=N);return Ge&&Us(x,k),_}for(N=n(x,N);k<b.length;k++)C=p(N,x,k,b[k],j),C!==null&&(e&&C.alternate!==null&&N.delete(C.key===null?k:C.key),w=o(C,w,k),S===null?_=C:S.sibling=C,S=C);return e&&N.forEach(function(T){return t(x,T)}),Ge&&Us(x,k),_}function v(x,w,b,j){var _=zo(b);if(typeof _!="function")throw Error(z(150));if(b=_.call(b),b==null)throw Error(z(151));for(var S=_=null,N=w,k=w=0,C=null,P=b.next();N!==null&&!P.done;k++,P=b.next()){N.index>k?(C=N,N=null):C=N.sibling;var T=h(x,N,P.value,j);if(T===null){N===null&&(N=C);break}e&&N&&T.alternate===null&&t(x,N),w=o(T,w,k),S===null?_=T:S.sibling=T,S=T,N=C}if(P.done)return r(x,N),Ge&&Us(x,k),_;if(N===null){for(;!P.done;k++,P=b.next())P=d(x,P.value,j),P!==null&&(w=o(P,w,k),S===null?_=P:S.sibling=P,S=P);return Ge&&Us(x,k),_}for(N=n(x,N);!P.done;k++,P=b.next())P=p(N,x,k,P.value,j),P!==null&&(e&&P.alternate!==null&&N.delete(P.key===null?k:P.key),w=o(P,w,k),S===null?_=P:S.sibling=P,S=P);return e&&N.forEach(function(M){return t(x,M)}),Ge&&Us(x,k),_}function y(x,w,b,j){if(typeof b=="object"&&b!==null&&b.type===Pa&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case _l:e:{for(var _=b.key,S=w;S!==null;){if(S.key===_){if(_=b.type,_===Pa){if(S.tag===7){r(x,S.sibling),w=s(S,b.props.children),w.return=x,x=w;break e}}else if(S.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Qn&&rv(_)===S.type){r(x,S.sibling),w=s(S,b.props),w.ref=Wo(x,S,b),w.return=x,x=w;break e}r(x,S);break}else t(x,S);S=S.sibling}b.type===Pa?(w=Xs(b.props.children,x.mode,j,b.key),w.return=x,x=w):(j=uc(b.type,b.key,b.props,null,x.mode,j),j.ref=Wo(x,w,b),j.return=x,x=j)}return i(x);case Ea:e:{for(S=b.key;w!==null;){if(w.key===S)if(w.tag===4&&w.stateNode.containerInfo===b.containerInfo&&w.stateNode.implementation===b.implementation){r(x,w.sibling),w=s(w,b.children||[]),w.return=x,x=w;break e}else{r(x,w);break}else t(x,w);w=w.sibling}w=zd(b,x.mode,j),w.return=x,x=w}return i(x);case Qn:return S=b._init,y(x,w,S(b._payload),j)}if(si(b))return g(x,w,b,j);if(zo(b))return v(x,w,b,j);Dl(x,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,w!==null&&w.tag===6?(r(x,w.sibling),w=s(w,b),w.return=x,x=w):(r(x,w),w=Fd(b,x.mode,j),w.return=x,x=w),i(x)):r(x,w)}return y}var co=R0(!0),M0=R0(!1),Mc=Es(null),Ac=null,La=null,Sm=null;function km(){Sm=La=Ac=null}function Cm(e){var t=Mc.current;Ue(Mc),e._currentValue=t}function Wf(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Va(e,t){Ac=e,Sm=La=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Wt=!0),e.firstContext=null)}function Nr(e){var t=e._currentValue;if(Sm!==e)if(e={context:e,memoizedValue:t,next:null},La===null){if(Ac===null)throw Error(z(308));La=e,Ac.dependencies={lanes:0,firstContext:e}}else La=La.next=e;return t}var Vs=null;function Em(e){Vs===null?Vs=[e]:Vs.push(e)}function A0(e,t,r,n){var s=t.interleaved;return s===null?(r.next=r,Em(t)):(r.next=s.next,s.next=r),t.interleaved=r,Dn(e,n)}function Dn(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Xn=!1;function Pm(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function D0(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Tn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ms(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,Ce&2){var s=n.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),n.pending=t,Dn(e,r)}return s=n.interleaved,s===null?(t.next=t,Em(n)):(t.next=s.next,s.next=t),n.interleaved=t,Dn(e,r)}function sc(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,mm(e,r)}}function nv(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,o=null;if(r=r.firstBaseUpdate,r!==null){do{var i={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};o===null?s=o=i:o=o.next=i,r=r.next}while(r!==null);o===null?s=o=t:o=o.next=t}else s=o=t;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Dc(e,t,r,n){var s=e.updateQueue;Xn=!1;var o=s.firstBaseUpdate,i=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,i===null?o=u:i.next=u,i=c;var f=e.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==i&&(l===null?f.firstBaseUpdate=u:l.next=u,f.lastBaseUpdate=c))}if(o!==null){var d=s.baseState;i=0,f=u=c=null,l=o;do{var h=l.lane,p=l.eventTime;if((n&h)===h){f!==null&&(f=f.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var g=e,v=l;switch(h=t,p=r,v.tag){case 1:if(g=v.payload,typeof g=="function"){d=g.call(p,d,h);break e}d=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=v.payload,h=typeof g=="function"?g.call(p,d,h):g,h==null)break e;d=Qe({},d,h);break e;case 2:Xn=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,h=s.effects,h===null?s.effects=[l]:h.push(l))}else p={eventTime:p,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(u=f=p,c=d):f=f.next=p,i|=h;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;h=l,l=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(!0);if(f===null&&(c=d),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=f,t=s.shared.interleaved,t!==null){s=t;do i|=s.lane,s=s.next;while(s!==t)}else o===null&&(s.shared.lanes=0);sa|=i,e.lanes=i,e.memoizedState=d}}function sv(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(z(191,s));s.call(n)}}}var rl={},on=Es(rl),Di=Es(rl),Oi=Es(rl);function Hs(e){if(e===rl)throw Error(z(174));return e}function Tm(e,t){switch(Ae(Oi,t),Ae(Di,e),Ae(on,rl),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:kf(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=kf(t,e)}Ue(on),Ae(on,t)}function uo(){Ue(on),Ue(Di),Ue(Oi)}function O0(e){Hs(Oi.current);var t=Hs(on.current),r=kf(t,e.type);t!==r&&(Ae(Di,e),Ae(on,r))}function Rm(e){Di.current===e&&(Ue(on),Ue(Di))}var qe=Es(0);function Oc(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Dd=[];function Mm(){for(var e=0;e<Dd.length;e++)Dd[e]._workInProgressVersionPrimary=null;Dd.length=0}var ac=Un.ReactCurrentDispatcher,Od=Un.ReactCurrentBatchConfig,na=0,Ye=null,lt=null,ft=null,Ic=!1,mi=!1,Ii=0,RC=0;function Nt(){throw Error(z(321))}function Am(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Hr(e[r],t[r]))return!1;return!0}function Dm(e,t,r,n,s,o){if(na=o,Ye=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ac.current=e===null||e.memoizedState===null?OC:IC,e=r(n,s),mi){o=0;do{if(mi=!1,Ii=0,25<=o)throw Error(z(301));o+=1,ft=lt=null,t.updateQueue=null,ac.current=LC,e=r(n,s)}while(mi)}if(ac.current=Lc,t=lt!==null&&lt.next!==null,na=0,ft=lt=Ye=null,Ic=!1,t)throw Error(z(300));return e}function Om(){var e=Ii!==0;return Ii=0,e}function Zr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ft===null?Ye.memoizedState=ft=e:ft=ft.next=e,ft}function Sr(){if(lt===null){var e=Ye.alternate;e=e!==null?e.memoizedState:null}else e=lt.next;var t=ft===null?Ye.memoizedState:ft.next;if(t!==null)ft=t,lt=e;else{if(e===null)throw Error(z(310));lt=e,e={memoizedState:lt.memoizedState,baseState:lt.baseState,baseQueue:lt.baseQueue,queue:lt.queue,next:null},ft===null?Ye.memoizedState=ft=e:ft=ft.next=e}return ft}function Li(e,t){return typeof t=="function"?t(e):t}function Id(e){var t=Sr(),r=t.queue;if(r===null)throw Error(z(311));r.lastRenderedReducer=e;var n=lt,s=n.baseQueue,o=r.pending;if(o!==null){if(s!==null){var i=s.next;s.next=o.next,o.next=i}n.baseQueue=s=o,r.pending=null}if(s!==null){o=s.next,n=n.baseState;var l=i=null,c=null,u=o;do{var f=u.lane;if((na&f)===f)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var d={lane:f,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=d,i=n):c=c.next=d,Ye.lanes|=f,sa|=f}u=u.next}while(u!==null&&u!==o);c===null?i=n:c.next=l,Hr(n,t.memoizedState)||(Wt=!0),t.memoizedState=n,t.baseState=i,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){s=e;do o=s.lane,Ye.lanes|=o,sa|=o,s=s.next;while(s!==e)}else s===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Ld(e){var t=Sr(),r=t.queue;if(r===null)throw Error(z(311));r.lastRenderedReducer=e;var n=r.dispatch,s=r.pending,o=t.memoizedState;if(s!==null){r.pending=null;var i=s=s.next;do o=e(o,i.action),i=i.next;while(i!==s);Hr(o,t.memoizedState)||(Wt=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),r.lastRenderedState=o}return[o,n]}function I0(){}function L0(e,t){var r=Ye,n=Sr(),s=t(),o=!Hr(n.memoizedState,s);if(o&&(n.memoizedState=s,Wt=!0),n=n.queue,Im(F0.bind(null,r,n,e),[e]),n.getSnapshot!==t||o||ft!==null&&ft.memoizedState.tag&1){if(r.flags|=2048,$i(9,U0.bind(null,r,n,s,t),void 0,null),pt===null)throw Error(z(349));na&30||$0(r,t,s)}return s}function $0(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Ye.updateQueue,t===null?(t={lastEffect:null,stores:null},Ye.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function U0(e,t,r,n){t.value=r,t.getSnapshot=n,z0(t)&&G0(e)}function F0(e,t,r){return r(function(){z0(t)&&G0(e)})}function z0(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Hr(e,r)}catch{return!0}}function G0(e){var t=Dn(e,1);t!==null&&Vr(t,e,1,-1)}function av(e){var t=Zr();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Li,lastRenderedState:e},t.queue=e,e=e.dispatch=DC.bind(null,Ye,e),[t.memoizedState,e]}function $i(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=Ye.updateQueue,t===null?(t={lastEffect:null,stores:null},Ye.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function B0(){return Sr().memoizedState}function oc(e,t,r,n){var s=Zr();Ye.flags|=e,s.memoizedState=$i(1|t,r,void 0,n===void 0?null:n)}function gu(e,t,r,n){var s=Sr();n=n===void 0?null:n;var o=void 0;if(lt!==null){var i=lt.memoizedState;if(o=i.destroy,n!==null&&Am(n,i.deps)){s.memoizedState=$i(t,r,o,n);return}}Ye.flags|=e,s.memoizedState=$i(1|t,r,o,n)}function ov(e,t){return oc(8390656,8,e,t)}function Im(e,t){return gu(2048,8,e,t)}function V0(e,t){return gu(4,2,e,t)}function H0(e,t){return gu(4,4,e,t)}function W0(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function q0(e,t,r){return r=r!=null?r.concat([e]):null,gu(4,4,W0.bind(null,t,e),r)}function Lm(){}function K0(e,t){var r=Sr();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Am(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function Y0(e,t){var r=Sr();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Am(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function Q0(e,t,r){return na&21?(Hr(r,t)||(r=t0(),Ye.lanes|=r,sa|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Wt=!0),e.memoizedState=r)}function MC(e,t){var r=Te;Te=r!==0&&4>r?r:4,e(!0);var n=Od.transition;Od.transition={};try{e(!1),t()}finally{Te=r,Od.transition=n}}function X0(){return Sr().memoizedState}function AC(e,t,r){var n=gs(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},J0(e))Z0(t,r);else if(r=A0(e,t,r,n),r!==null){var s=$t();Vr(r,e,n,s),ew(r,t,n)}}function DC(e,t,r){var n=gs(e),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(J0(e))Z0(t,s);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var i=t.lastRenderedState,l=o(i,r);if(s.hasEagerState=!0,s.eagerState=l,Hr(l,i)){var c=t.interleaved;c===null?(s.next=s,Em(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}r=A0(e,t,s,n),r!==null&&(s=$t(),Vr(r,e,n,s),ew(r,t,n))}}function J0(e){var t=e.alternate;return e===Ye||t!==null&&t===Ye}function Z0(e,t){mi=Ic=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function ew(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,mm(e,r)}}var Lc={readContext:Nr,useCallback:Nt,useContext:Nt,useEffect:Nt,useImperativeHandle:Nt,useInsertionEffect:Nt,useLayoutEffect:Nt,useMemo:Nt,useReducer:Nt,useRef:Nt,useState:Nt,useDebugValue:Nt,useDeferredValue:Nt,useTransition:Nt,useMutableSource:Nt,useSyncExternalStore:Nt,useId:Nt,unstable_isNewReconciler:!1},OC={readContext:Nr,useCallback:function(e,t){return Zr().memoizedState=[e,t===void 0?null:t],e},useContext:Nr,useEffect:ov,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,oc(4194308,4,W0.bind(null,t,e),r)},useLayoutEffect:function(e,t){return oc(4194308,4,e,t)},useInsertionEffect:function(e,t){return oc(4,2,e,t)},useMemo:function(e,t){var r=Zr();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Zr();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=AC.bind(null,Ye,e),[n.memoizedState,e]},useRef:function(e){var t=Zr();return e={current:e},t.memoizedState=e},useState:av,useDebugValue:Lm,useDeferredValue:function(e){return Zr().memoizedState=e},useTransition:function(){var e=av(!1),t=e[0];return e=MC.bind(null,e[1]),Zr().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=Ye,s=Zr();if(Ge){if(r===void 0)throw Error(z(407));r=r()}else{if(r=t(),pt===null)throw Error(z(349));na&30||$0(n,t,r)}s.memoizedState=r;var o={value:r,getSnapshot:t};return s.queue=o,ov(F0.bind(null,n,o,e),[e]),n.flags|=2048,$i(9,U0.bind(null,n,o,r,t),void 0,null),r},useId:function(){var e=Zr(),t=pt.identifierPrefix;if(Ge){var r=En,n=Cn;r=(n&~(1<<32-Br(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=Ii++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=RC++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},IC={readContext:Nr,useCallback:K0,useContext:Nr,useEffect:Im,useImperativeHandle:q0,useInsertionEffect:V0,useLayoutEffect:H0,useMemo:Y0,useReducer:Id,useRef:B0,useState:function(){return Id(Li)},useDebugValue:Lm,useDeferredValue:function(e){var t=Sr();return Q0(t,lt.memoizedState,e)},useTransition:function(){var e=Id(Li)[0],t=Sr().memoizedState;return[e,t]},useMutableSource:I0,useSyncExternalStore:L0,useId:X0,unstable_isNewReconciler:!1},LC={readContext:Nr,useCallback:K0,useContext:Nr,useEffect:Im,useImperativeHandle:q0,useInsertionEffect:V0,useLayoutEffect:H0,useMemo:Y0,useReducer:Ld,useRef:B0,useState:function(){return Ld(Li)},useDebugValue:Lm,useDeferredValue:function(e){var t=Sr();return lt===null?t.memoizedState=e:Q0(t,lt.memoizedState,e)},useTransition:function(){var e=Ld(Li)[0],t=Sr().memoizedState;return[e,t]},useMutableSource:I0,useSyncExternalStore:L0,useId:X0,unstable_isNewReconciler:!1};function Dr(e,t){if(e&&e.defaultProps){t=Qe({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function qf(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:Qe({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var vu={isMounted:function(e){return(e=e._reactInternals)?ua(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=$t(),s=gs(e),o=Tn(n,s);o.payload=t,r!=null&&(o.callback=r),t=ms(e,o,s),t!==null&&(Vr(t,e,s,n),sc(t,e,s))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=$t(),s=gs(e),o=Tn(n,s);o.tag=1,o.payload=t,r!=null&&(o.callback=r),t=ms(e,o,s),t!==null&&(Vr(t,e,s,n),sc(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=$t(),n=gs(e),s=Tn(r,n);s.tag=2,t!=null&&(s.callback=t),t=ms(e,s,n),t!==null&&(Vr(t,e,n,r),sc(t,e,n))}};function iv(e,t,r,n,s,o,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,o,i):t.prototype&&t.prototype.isPureReactComponent?!Ti(r,n)||!Ti(s,o):!0}function tw(e,t,r){var n=!1,s=bs,o=t.contextType;return typeof o=="object"&&o!==null?o=Nr(o):(s=Yt(t)?ta:Tt.current,n=t.contextTypes,o=(n=n!=null)?io(e,s):bs),t=new t(r,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=vu,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=o),t}function lv(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&vu.enqueueReplaceState(t,t.state,null)}function Kf(e,t,r,n){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs={},Pm(e);var o=t.contextType;typeof o=="object"&&o!==null?s.context=Nr(o):(o=Yt(t)?ta:Tt.current,s.context=io(e,o)),s.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(qf(e,t,o,r),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&vu.enqueueReplaceState(s,s.state,null),Dc(e,r,s,n),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function fo(e,t){try{var r="",n=t;do r+=dk(n),n=n.return;while(n);var s=r}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:s,digest:null}}function $d(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Yf(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var $C=typeof WeakMap=="function"?WeakMap:Map;function rw(e,t,r){r=Tn(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Uc||(Uc=!0,ah=n),Yf(e,t)},r}function nw(e,t,r){r=Tn(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var s=t.value;r.payload=function(){return n(s)},r.callback=function(){Yf(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(r.callback=function(){Yf(e,t),typeof n!="function"&&(ps===null?ps=new Set([this]):ps.add(this));var i=t.stack;this.componentDidCatch(t.value,{componentStack:i!==null?i:""})}),r}function cv(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new $C;var s=new Set;n.set(t,s)}else s=n.get(t),s===void 0&&(s=new Set,n.set(t,s));s.has(r)||(s.add(r),e=JC.bind(null,e,t,r),t.then(e,e))}function uv(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function dv(e,t,r,n,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Tn(-1,1),t.tag=2,ms(r,t,1))),r.lanes|=1),e)}var UC=Un.ReactCurrentOwner,Wt=!1;function Ot(e,t,r,n){t.child=e===null?M0(t,null,r,n):co(t,e.child,r,n)}function fv(e,t,r,n,s){r=r.render;var o=t.ref;return Va(t,s),n=Dm(e,t,r,n,o,s),r=Om(),e!==null&&!Wt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,On(e,t,s)):(Ge&&r&&jm(t),t.flags|=1,Ot(e,t,n,s),t.child)}function hv(e,t,r,n,s){if(e===null){var o=r.type;return typeof o=="function"&&!Hm(o)&&o.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=o,sw(e,t,o,n,s)):(e=uc(r.type,null,n,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&s)){var i=o.memoizedProps;if(r=r.compare,r=r!==null?r:Ti,r(i,n)&&e.ref===t.ref)return On(e,t,s)}return t.flags|=1,e=vs(o,n),e.ref=t.ref,e.return=t,t.child=e}function sw(e,t,r,n,s){if(e!==null){var o=e.memoizedProps;if(Ti(o,n)&&e.ref===t.ref)if(Wt=!1,t.pendingProps=n=o,(e.lanes&s)!==0)e.flags&131072&&(Wt=!0);else return t.lanes=e.lanes,On(e,t,s)}return Qf(e,t,r,n,s)}function aw(e,t,r){var n=t.pendingProps,s=n.children,o=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ae(Ua,er),er|=r;else{if(!(r&1073741824))return e=o!==null?o.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ae(Ua,er),er|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=o!==null?o.baseLanes:r,Ae(Ua,er),er|=n}else o!==null?(n=o.baseLanes|r,t.memoizedState=null):n=r,Ae(Ua,er),er|=n;return Ot(e,t,s,r),t.child}function ow(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Qf(e,t,r,n,s){var o=Yt(r)?ta:Tt.current;return o=io(t,o),Va(t,s),r=Dm(e,t,r,n,o,s),n=Om(),e!==null&&!Wt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,On(e,t,s)):(Ge&&n&&jm(t),t.flags|=1,Ot(e,t,r,s),t.child)}function mv(e,t,r,n,s){if(Yt(r)){var o=!0;Pc(t)}else o=!1;if(Va(t,s),t.stateNode===null)ic(e,t),tw(t,r,n),Kf(t,r,n,s),n=!0;else if(e===null){var i=t.stateNode,l=t.memoizedProps;i.props=l;var c=i.context,u=r.contextType;typeof u=="object"&&u!==null?u=Nr(u):(u=Yt(r)?ta:Tt.current,u=io(t,u));var f=r.getDerivedStateFromProps,d=typeof f=="function"||typeof i.getSnapshotBeforeUpdate=="function";d||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==n||c!==u)&&lv(t,i,n,u),Xn=!1;var h=t.memoizedState;i.state=h,Dc(t,n,i,s),c=t.memoizedState,l!==n||h!==c||Kt.current||Xn?(typeof f=="function"&&(qf(t,r,f,n),c=t.memoizedState),(l=Xn||iv(t,r,l,n,h,c,u))?(d||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),i.props=n,i.state=c,i.context=u,n=l):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{i=t.stateNode,D0(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:Dr(t.type,l),i.props=u,d=t.pendingProps,h=i.context,c=r.contextType,typeof c=="object"&&c!==null?c=Nr(c):(c=Yt(r)?ta:Tt.current,c=io(t,c));var p=r.getDerivedStateFromProps;(f=typeof p=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==d||h!==c)&&lv(t,i,n,c),Xn=!1,h=t.memoizedState,i.state=h,Dc(t,n,i,s);var g=t.memoizedState;l!==d||h!==g||Kt.current||Xn?(typeof p=="function"&&(qf(t,r,p,n),g=t.memoizedState),(u=Xn||iv(t,r,u,n,h,g,c)||!1)?(f||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(n,g,c),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(n,g,c)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=g),i.props=n,i.state=g,i.context=c,n=u):(typeof i.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),n=!1)}return Xf(e,t,r,n,o,s)}function Xf(e,t,r,n,s,o){ow(e,t);var i=(t.flags&128)!==0;if(!n&&!i)return s&&Zg(t,r,!1),On(e,t,o);n=t.stateNode,UC.current=t;var l=i&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&i?(t.child=co(t,e.child,null,o),t.child=co(t,null,l,o)):Ot(e,t,l,o),t.memoizedState=n.state,s&&Zg(t,r,!0),t.child}function iw(e){var t=e.stateNode;t.pendingContext?Jg(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Jg(e,t.context,!1),Tm(e,t.containerInfo)}function pv(e,t,r,n,s){return lo(),Nm(s),t.flags|=256,Ot(e,t,r,n),t.child}var Jf={dehydrated:null,treeContext:null,retryLane:0};function Zf(e){return{baseLanes:e,cachePool:null,transitions:null}}function lw(e,t,r){var n=t.pendingProps,s=qe.current,o=!1,i=(t.flags&128)!==0,l;if((l=i)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),Ae(qe,s&1),e===null)return Hf(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(i=n.children,e=n.fallback,o?(n=t.mode,o=t.child,i={mode:"hidden",children:i},!(n&1)&&o!==null?(o.childLanes=0,o.pendingProps=i):o=wu(i,n,0,null),e=Xs(e,n,r,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Zf(r),t.memoizedState=Jf,e):$m(t,i));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return FC(e,t,i,n,l,s,r);if(o){o=n.fallback,i=t.mode,s=e.child,l=s.sibling;var c={mode:"hidden",children:n.children};return!(i&1)&&t.child!==s?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=vs(s,c),n.subtreeFlags=s.subtreeFlags&14680064),l!==null?o=vs(l,o):(o=Xs(o,i,r,null),o.flags|=2),o.return=t,n.return=t,n.sibling=o,t.child=n,n=o,o=t.child,i=e.child.memoizedState,i=i===null?Zf(r):{baseLanes:i.baseLanes|r,cachePool:null,transitions:i.transitions},o.memoizedState=i,o.childLanes=e.childLanes&~r,t.memoizedState=Jf,n}return o=e.child,e=o.sibling,n=vs(o,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function $m(e,t){return t=wu({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Ol(e,t,r,n){return n!==null&&Nm(n),co(t,e.child,null,r),e=$m(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function FC(e,t,r,n,s,o,i){if(r)return t.flags&256?(t.flags&=-257,n=$d(Error(z(422))),Ol(e,t,i,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=n.fallback,s=t.mode,n=wu({mode:"visible",children:n.children},s,0,null),o=Xs(o,s,i,null),o.flags|=2,n.return=t,o.return=t,n.sibling=o,t.child=n,t.mode&1&&co(t,e.child,null,i),t.child.memoizedState=Zf(i),t.memoizedState=Jf,o);if(!(t.mode&1))return Ol(e,t,i,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var l=n.dgst;return n=l,o=Error(z(419)),n=$d(o,n,void 0),Ol(e,t,i,n)}if(l=(i&e.childLanes)!==0,Wt||l){if(n=pt,n!==null){switch(i&-i){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|i)?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,Dn(e,s),Vr(n,e,s,-1))}return Vm(),n=$d(Error(z(421))),Ol(e,t,i,n)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=ZC.bind(null,e),s._reactRetry=t,null):(e=o.treeContext,rr=hs(s.nextSibling),or=t,Ge=!0,zr=null,e!==null&&(gr[vr++]=Cn,gr[vr++]=En,gr[vr++]=ra,Cn=e.id,En=e.overflow,ra=t),t=$m(t,n.children),t.flags|=4096,t)}function gv(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),Wf(e.return,t,r)}function Ud(e,t,r,n,s){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=n,o.tail=r,o.tailMode=s)}function cw(e,t,r){var n=t.pendingProps,s=n.revealOrder,o=n.tail;if(Ot(e,t,n.children,r),n=qe.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&gv(e,r,t);else if(e.tag===19)gv(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Ae(qe,n),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(r=t.child,s=null;r!==null;)e=r.alternate,e!==null&&Oc(e)===null&&(s=r),r=r.sibling;r=s,r===null?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),Ud(t,!1,s,r,o);break;case"backwards":for(r=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Oc(e)===null){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}Ud(t,!0,r,null,o);break;case"together":Ud(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ic(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function On(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),sa|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(z(153));if(t.child!==null){for(e=t.child,r=vs(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=vs(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function zC(e,t,r){switch(t.tag){case 3:iw(t),lo();break;case 5:O0(t);break;case 1:Yt(t.type)&&Pc(t);break;case 4:Tm(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,s=t.memoizedProps.value;Ae(Mc,n._currentValue),n._currentValue=s;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(Ae(qe,qe.current&1),t.flags|=128,null):r&t.child.childLanes?lw(e,t,r):(Ae(qe,qe.current&1),e=On(e,t,r),e!==null?e.sibling:null);Ae(qe,qe.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return cw(e,t,r);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ae(qe,qe.current),n)break;return null;case 22:case 23:return t.lanes=0,aw(e,t,r)}return On(e,t,r)}var uw,eh,dw,fw;uw=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};eh=function(){};dw=function(e,t,r,n){var s=e.memoizedProps;if(s!==n){e=t.stateNode,Hs(on.current);var o=null;switch(r){case"input":s=jf(e,s),n=jf(e,n),o=[];break;case"select":s=Qe({},s,{value:void 0}),n=Qe({},n,{value:void 0}),o=[];break;case"textarea":s=Sf(e,s),n=Sf(e,n),o=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Cc)}Cf(r,n);var i;r=null;for(u in s)if(!n.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(i in l)l.hasOwnProperty(i)&&(r||(r={}),r[i]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(_i.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in n){var c=n[u];if(l=s!=null?s[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(i in l)!l.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(r||(r={}),r[i]="");for(i in c)c.hasOwnProperty(i)&&l[i]!==c[i]&&(r||(r={}),r[i]=c[i])}else r||(o||(o=[]),o.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(o=o||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(o=o||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(_i.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&$e("scroll",e),o||l===c||(o=[])):(o=o||[]).push(u,c))}r&&(o=o||[]).push("style",r);var u=o;(t.updateQueue=u)&&(t.flags|=4)}};fw=function(e,t,r,n){r!==n&&(t.flags|=4)};function qo(e,t){if(!Ge)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function St(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function GC(e,t,r){var n=t.pendingProps;switch(_m(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return St(t),null;case 1:return Yt(t.type)&&Ec(),St(t),null;case 3:return n=t.stateNode,uo(),Ue(Kt),Ue(Tt),Mm(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Al(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,zr!==null&&(lh(zr),zr=null))),eh(e,t),St(t),null;case 5:Rm(t);var s=Hs(Oi.current);if(r=t.type,e!==null&&t.stateNode!=null)dw(e,t,r,n,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(z(166));return St(t),null}if(e=Hs(on.current),Al(t)){n=t.stateNode,r=t.type;var o=t.memoizedProps;switch(n[nn]=t,n[Ai]=o,e=(t.mode&1)!==0,r){case"dialog":$e("cancel",n),$e("close",n);break;case"iframe":case"object":case"embed":$e("load",n);break;case"video":case"audio":for(s=0;s<oi.length;s++)$e(oi[s],n);break;case"source":$e("error",n);break;case"img":case"image":case"link":$e("error",n),$e("load",n);break;case"details":$e("toggle",n);break;case"input":Sg(n,o),$e("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!o.multiple},$e("invalid",n);break;case"textarea":Cg(n,o),$e("invalid",n)}Cf(r,o),s=null;for(var i in o)if(o.hasOwnProperty(i)){var l=o[i];i==="children"?typeof l=="string"?n.textContent!==l&&(o.suppressHydrationWarning!==!0&&Ml(n.textContent,l,e),s=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(o.suppressHydrationWarning!==!0&&Ml(n.textContent,l,e),s=["children",""+l]):_i.hasOwnProperty(i)&&l!=null&&i==="onScroll"&&$e("scroll",n)}switch(r){case"input":Nl(n),kg(n,o,!0);break;case"textarea":Nl(n),Eg(n);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(n.onclick=Cc)}n=s,t.updateQueue=n,n!==null&&(t.flags|=4)}else{i=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Fy(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=i.createElement(r,{is:n.is}):(e=i.createElement(r),r==="select"&&(i=e,n.multiple?i.multiple=!0:n.size&&(i.size=n.size))):e=i.createElementNS(e,r),e[nn]=t,e[Ai]=n,uw(e,t,!1,!1),t.stateNode=e;e:{switch(i=Ef(r,n),r){case"dialog":$e("cancel",e),$e("close",e),s=n;break;case"iframe":case"object":case"embed":$e("load",e),s=n;break;case"video":case"audio":for(s=0;s<oi.length;s++)$e(oi[s],e);s=n;break;case"source":$e("error",e),s=n;break;case"img":case"image":case"link":$e("error",e),$e("load",e),s=n;break;case"details":$e("toggle",e),s=n;break;case"input":Sg(e,n),s=jf(e,n),$e("invalid",e);break;case"option":s=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},s=Qe({},n,{value:void 0}),$e("invalid",e);break;case"textarea":Cg(e,n),s=Sf(e,n),$e("invalid",e);break;default:s=n}Cf(r,s),l=s;for(o in l)if(l.hasOwnProperty(o)){var c=l[o];o==="style"?By(e,c):o==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&zy(e,c)):o==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Ni(e,c):typeof c=="number"&&Ni(e,""+c):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(_i.hasOwnProperty(o)?c!=null&&o==="onScroll"&&$e("scroll",e):c!=null&&lm(e,o,c,i))}switch(r){case"input":Nl(e),kg(e,n,!1);break;case"textarea":Nl(e),Eg(e);break;case"option":n.value!=null&&e.setAttribute("value",""+ws(n.value));break;case"select":e.multiple=!!n.multiple,o=n.value,o!=null?Fa(e,!!n.multiple,o,!1):n.defaultValue!=null&&Fa(e,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Cc)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return St(t),null;case 6:if(e&&t.stateNode!=null)fw(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(z(166));if(r=Hs(Oi.current),Hs(on.current),Al(t)){if(n=t.stateNode,r=t.memoizedProps,n[nn]=t,(o=n.nodeValue!==r)&&(e=or,e!==null))switch(e.tag){case 3:Ml(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ml(n.nodeValue,r,(e.mode&1)!==0)}o&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[nn]=t,t.stateNode=n}return St(t),null;case 13:if(Ue(qe),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ge&&rr!==null&&t.mode&1&&!(t.flags&128))T0(),lo(),t.flags|=98560,o=!1;else if(o=Al(t),n!==null&&n.dehydrated!==null){if(e===null){if(!o)throw Error(z(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(z(317));o[nn]=t}else lo(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;St(t),o=!1}else zr!==null&&(lh(zr),zr=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||qe.current&1?ct===0&&(ct=3):Vm())),t.updateQueue!==null&&(t.flags|=4),St(t),null);case 4:return uo(),eh(e,t),e===null&&Ri(t.stateNode.containerInfo),St(t),null;case 10:return Cm(t.type._context),St(t),null;case 17:return Yt(t.type)&&Ec(),St(t),null;case 19:if(Ue(qe),o=t.memoizedState,o===null)return St(t),null;if(n=(t.flags&128)!==0,i=o.rendering,i===null)if(n)qo(o,!1);else{if(ct!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(i=Oc(e),i!==null){for(t.flags|=128,qo(o,!1),n=i.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)o=r,e=n,o.flags&=14680066,i=o.alternate,i===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=i.childLanes,o.lanes=i.lanes,o.child=i.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=i.memoizedProps,o.memoizedState=i.memoizedState,o.updateQueue=i.updateQueue,o.type=i.type,e=i.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Ae(qe,qe.current&1|2),t.child}e=e.sibling}o.tail!==null&&Ze()>ho&&(t.flags|=128,n=!0,qo(o,!1),t.lanes=4194304)}else{if(!n)if(e=Oc(i),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),qo(o,!0),o.tail===null&&o.tailMode==="hidden"&&!i.alternate&&!Ge)return St(t),null}else 2*Ze()-o.renderingStartTime>ho&&r!==1073741824&&(t.flags|=128,n=!0,qo(o,!1),t.lanes=4194304);o.isBackwards?(i.sibling=t.child,t.child=i):(r=o.last,r!==null?r.sibling=i:t.child=i,o.last=i)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Ze(),t.sibling=null,r=qe.current,Ae(qe,n?r&1|2:r&1),t):(St(t),null);case 22:case 23:return Bm(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?er&1073741824&&(St(t),t.subtreeFlags&6&&(t.flags|=8192)):St(t),null;case 24:return null;case 25:return null}throw Error(z(156,t.tag))}function BC(e,t){switch(_m(t),t.tag){case 1:return Yt(t.type)&&Ec(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return uo(),Ue(Kt),Ue(Tt),Mm(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Rm(t),null;case 13:if(Ue(qe),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(z(340));lo()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ue(qe),null;case 4:return uo(),null;case 10:return Cm(t.type._context),null;case 22:case 23:return Bm(),null;case 24:return null;default:return null}}var Il=!1,Pt=!1,VC=typeof WeakSet=="function"?WeakSet:Set,Z=null;function $a(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Je(e,t,n)}else r.current=null}function th(e,t,r){try{r()}catch(n){Je(e,t,n)}}var vv=!1;function HC(e,t){if($f=Nc,e=v0(),bm(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,o=n.focusNode;n=n.focusOffset;try{r.nodeType,o.nodeType}catch{r=null;break e}var i=0,l=-1,c=-1,u=0,f=0,d=e,h=null;t:for(;;){for(var p;d!==r||s!==0&&d.nodeType!==3||(l=i+s),d!==o||n!==0&&d.nodeType!==3||(c=i+n),d.nodeType===3&&(i+=d.nodeValue.length),(p=d.firstChild)!==null;)h=d,d=p;for(;;){if(d===e)break t;if(h===r&&++u===s&&(l=i),h===o&&++f===n&&(c=i),(p=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=p}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Uf={focusedElem:e,selectionRange:r},Nc=!1,Z=t;Z!==null;)if(t=Z,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Z=e;else for(;Z!==null;){t=Z;try{var g=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var v=g.memoizedProps,y=g.memoizedState,x=t.stateNode,w=x.getSnapshotBeforeUpdate(t.elementType===t.type?v:Dr(t.type,v),y);x.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(z(163))}}catch(j){Je(t,t.return,j)}if(e=t.sibling,e!==null){e.return=t.return,Z=e;break}Z=t.return}return g=vv,vv=!1,g}function pi(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var o=s.destroy;s.destroy=void 0,o!==void 0&&th(t,r,o)}s=s.next}while(s!==n)}}function xu(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function rh(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function hw(e){var t=e.alternate;t!==null&&(e.alternate=null,hw(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[nn],delete t[Ai],delete t[Gf],delete t[CC],delete t[EC])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function mw(e){return e.tag===5||e.tag===3||e.tag===4}function xv(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||mw(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function nh(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Cc));else if(n!==4&&(e=e.child,e!==null))for(nh(e,t,r),e=e.sibling;e!==null;)nh(e,t,r),e=e.sibling}function sh(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(sh(e,t,r),e=e.sibling;e!==null;)sh(e,t,r),e=e.sibling}var vt=null,Lr=!1;function Bn(e,t,r){for(r=r.child;r!==null;)pw(e,t,r),r=r.sibling}function pw(e,t,r){if(an&&typeof an.onCommitFiberUnmount=="function")try{an.onCommitFiberUnmount(uu,r)}catch{}switch(r.tag){case 5:Pt||$a(r,t);case 6:var n=vt,s=Lr;vt=null,Bn(e,t,r),vt=n,Lr=s,vt!==null&&(Lr?(e=vt,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):vt.removeChild(r.stateNode));break;case 18:vt!==null&&(Lr?(e=vt,r=r.stateNode,e.nodeType===8?Md(e.parentNode,r):e.nodeType===1&&Md(e,r),Ei(e)):Md(vt,r.stateNode));break;case 4:n=vt,s=Lr,vt=r.stateNode.containerInfo,Lr=!0,Bn(e,t,r),vt=n,Lr=s;break;case 0:case 11:case 14:case 15:if(!Pt&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var o=s,i=o.destroy;o=o.tag,i!==void 0&&(o&2||o&4)&&th(r,t,i),s=s.next}while(s!==n)}Bn(e,t,r);break;case 1:if(!Pt&&($a(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){Je(r,t,l)}Bn(e,t,r);break;case 21:Bn(e,t,r);break;case 22:r.mode&1?(Pt=(n=Pt)||r.memoizedState!==null,Bn(e,t,r),Pt=n):Bn(e,t,r);break;default:Bn(e,t,r)}}function yv(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new VC),t.forEach(function(n){var s=eE.bind(null,e,n);r.has(n)||(r.add(n),n.then(s,s))})}}function Mr(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var o=e,i=t,l=i;e:for(;l!==null;){switch(l.tag){case 5:vt=l.stateNode,Lr=!1;break e;case 3:vt=l.stateNode.containerInfo,Lr=!0;break e;case 4:vt=l.stateNode.containerInfo,Lr=!0;break e}l=l.return}if(vt===null)throw Error(z(160));pw(o,i,s),vt=null,Lr=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){Je(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)gw(t,e),t=t.sibling}function gw(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Mr(t,e),Xr(e),n&4){try{pi(3,e,e.return),xu(3,e)}catch(v){Je(e,e.return,v)}try{pi(5,e,e.return)}catch(v){Je(e,e.return,v)}}break;case 1:Mr(t,e),Xr(e),n&512&&r!==null&&$a(r,r.return);break;case 5:if(Mr(t,e),Xr(e),n&512&&r!==null&&$a(r,r.return),e.flags&32){var s=e.stateNode;try{Ni(s,"")}catch(v){Je(e,e.return,v)}}if(n&4&&(s=e.stateNode,s!=null)){var o=e.memoizedProps,i=r!==null?r.memoizedProps:o,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&o.type==="radio"&&o.name!=null&&$y(s,o),Ef(l,i);var u=Ef(l,o);for(i=0;i<c.length;i+=2){var f=c[i],d=c[i+1];f==="style"?By(s,d):f==="dangerouslySetInnerHTML"?zy(s,d):f==="children"?Ni(s,d):lm(s,f,d,u)}switch(l){case"input":_f(s,o);break;case"textarea":Uy(s,o);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var p=o.value;p!=null?Fa(s,!!o.multiple,p,!1):h!==!!o.multiple&&(o.defaultValue!=null?Fa(s,!!o.multiple,o.defaultValue,!0):Fa(s,!!o.multiple,o.multiple?[]:"",!1))}s[Ai]=o}catch(v){Je(e,e.return,v)}}break;case 6:if(Mr(t,e),Xr(e),n&4){if(e.stateNode===null)throw Error(z(162));s=e.stateNode,o=e.memoizedProps;try{s.nodeValue=o}catch(v){Je(e,e.return,v)}}break;case 3:if(Mr(t,e),Xr(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Ei(t.containerInfo)}catch(v){Je(e,e.return,v)}break;case 4:Mr(t,e),Xr(e);break;case 13:Mr(t,e),Xr(e),s=e.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||(zm=Ze())),n&4&&yv(e);break;case 22:if(f=r!==null&&r.memoizedState!==null,e.mode&1?(Pt=(u=Pt)||f,Mr(t,e),Pt=u):Mr(t,e),Xr(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!f&&e.mode&1)for(Z=e,f=e.child;f!==null;){for(d=Z=f;Z!==null;){switch(h=Z,p=h.child,h.tag){case 0:case 11:case 14:case 15:pi(4,h,h.return);break;case 1:$a(h,h.return);var g=h.stateNode;if(typeof g.componentWillUnmount=="function"){n=h,r=h.return;try{t=n,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(v){Je(n,r,v)}}break;case 5:$a(h,h.return);break;case 22:if(h.memoizedState!==null){bv(d);continue}}p!==null?(p.return=h,Z=p):bv(d)}f=f.sibling}e:for(f=null,d=e;;){if(d.tag===5){if(f===null){f=d;try{s=d.stateNode,u?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(l=d.stateNode,c=d.memoizedProps.style,i=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=Gy("display",i))}catch(v){Je(e,e.return,v)}}}else if(d.tag===6){if(f===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(v){Je(e,e.return,v)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;f===d&&(f=null),d=d.return}f===d&&(f=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Mr(t,e),Xr(e),n&4&&yv(e);break;case 21:break;default:Mr(t,e),Xr(e)}}function Xr(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(mw(r)){var n=r;break e}r=r.return}throw Error(z(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(Ni(s,""),n.flags&=-33);var o=xv(e);sh(e,o,s);break;case 3:case 4:var i=n.stateNode.containerInfo,l=xv(e);nh(e,l,i);break;default:throw Error(z(161))}}catch(c){Je(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function WC(e,t,r){Z=e,vw(e)}function vw(e,t,r){for(var n=(e.mode&1)!==0;Z!==null;){var s=Z,o=s.child;if(s.tag===22&&n){var i=s.memoizedState!==null||Il;if(!i){var l=s.alternate,c=l!==null&&l.memoizedState!==null||Pt;l=Il;var u=Pt;if(Il=i,(Pt=c)&&!u)for(Z=s;Z!==null;)i=Z,c=i.child,i.tag===22&&i.memoizedState!==null?jv(s):c!==null?(c.return=i,Z=c):jv(s);for(;o!==null;)Z=o,vw(o),o=o.sibling;Z=s,Il=l,Pt=u}wv(e)}else s.subtreeFlags&8772&&o!==null?(o.return=s,Z=o):wv(e)}}function wv(e){for(;Z!==null;){var t=Z;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Pt||xu(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!Pt)if(r===null)n.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:Dr(t.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&sv(t,o,n);break;case 3:var i=t.updateQueue;if(i!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}sv(t,i,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var f=u.memoizedState;if(f!==null){var d=f.dehydrated;d!==null&&Ei(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(z(163))}Pt||t.flags&512&&rh(t)}catch(h){Je(t,t.return,h)}}if(t===e){Z=null;break}if(r=t.sibling,r!==null){r.return=t.return,Z=r;break}Z=t.return}}function bv(e){for(;Z!==null;){var t=Z;if(t===e){Z=null;break}var r=t.sibling;if(r!==null){r.return=t.return,Z=r;break}Z=t.return}}function jv(e){for(;Z!==null;){var t=Z;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{xu(4,t)}catch(c){Je(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var s=t.return;try{n.componentDidMount()}catch(c){Je(t,s,c)}}var o=t.return;try{rh(t)}catch(c){Je(t,o,c)}break;case 5:var i=t.return;try{rh(t)}catch(c){Je(t,i,c)}}}catch(c){Je(t,t.return,c)}if(t===e){Z=null;break}var l=t.sibling;if(l!==null){l.return=t.return,Z=l;break}Z=t.return}}var qC=Math.ceil,$c=Un.ReactCurrentDispatcher,Um=Un.ReactCurrentOwner,wr=Un.ReactCurrentBatchConfig,Ce=0,pt=null,nt=null,xt=0,er=0,Ua=Es(0),ct=0,Ui=null,sa=0,yu=0,Fm=0,gi=null,Bt=null,zm=0,ho=1/0,jn=null,Uc=!1,ah=null,ps=null,Ll=!1,is=null,Fc=0,vi=0,oh=null,lc=-1,cc=0;function $t(){return Ce&6?Ze():lc!==-1?lc:lc=Ze()}function gs(e){return e.mode&1?Ce&2&&xt!==0?xt&-xt:TC.transition!==null?(cc===0&&(cc=t0()),cc):(e=Te,e!==0||(e=window.event,e=e===void 0?16:l0(e.type)),e):1}function Vr(e,t,r,n){if(50<vi)throw vi=0,oh=null,Error(z(185));Zi(e,r,n),(!(Ce&2)||e!==pt)&&(e===pt&&(!(Ce&2)&&(yu|=r),ct===4&&Zn(e,xt)),Qt(e,n),r===1&&Ce===0&&!(t.mode&1)&&(ho=Ze()+500,pu&&Ps()))}function Qt(e,t){var r=e.callbackNode;Tk(e,t);var n=_c(e,e===pt?xt:0);if(n===0)r!==null&&Rg(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&Rg(r),t===1)e.tag===0?PC(_v.bind(null,e)):C0(_v.bind(null,e)),SC(function(){!(Ce&6)&&Ps()}),r=null;else{switch(r0(n)){case 1:r=hm;break;case 4:r=Zy;break;case 16:r=jc;break;case 536870912:r=e0;break;default:r=jc}r=Sw(r,xw.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function xw(e,t){if(lc=-1,cc=0,Ce&6)throw Error(z(327));var r=e.callbackNode;if(Ha()&&e.callbackNode!==r)return null;var n=_c(e,e===pt?xt:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=zc(e,n);else{t=n;var s=Ce;Ce|=2;var o=ww();(pt!==e||xt!==t)&&(jn=null,ho=Ze()+500,Qs(e,t));do try{QC();break}catch(l){yw(e,l)}while(!0);km(),$c.current=o,Ce=s,nt!==null?t=0:(pt=null,xt=0,t=ct)}if(t!==0){if(t===2&&(s=Af(e),s!==0&&(n=s,t=ih(e,s))),t===1)throw r=Ui,Qs(e,0),Zn(e,n),Qt(e,Ze()),r;if(t===6)Zn(e,n);else{if(s=e.current.alternate,!(n&30)&&!KC(s)&&(t=zc(e,n),t===2&&(o=Af(e),o!==0&&(n=o,t=ih(e,o))),t===1))throw r=Ui,Qs(e,0),Zn(e,n),Qt(e,Ze()),r;switch(e.finishedWork=s,e.finishedLanes=n,t){case 0:case 1:throw Error(z(345));case 2:Fs(e,Bt,jn);break;case 3:if(Zn(e,n),(n&130023424)===n&&(t=zm+500-Ze(),10<t)){if(_c(e,0)!==0)break;if(s=e.suspendedLanes,(s&n)!==n){$t(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=zf(Fs.bind(null,e,Bt,jn),t);break}Fs(e,Bt,jn);break;case 4:if(Zn(e,n),(n&4194240)===n)break;for(t=e.eventTimes,s=-1;0<n;){var i=31-Br(n);o=1<<i,i=t[i],i>s&&(s=i),n&=~o}if(n=s,n=Ze()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*qC(n/1960))-n,10<n){e.timeoutHandle=zf(Fs.bind(null,e,Bt,jn),n);break}Fs(e,Bt,jn);break;case 5:Fs(e,Bt,jn);break;default:throw Error(z(329))}}}return Qt(e,Ze()),e.callbackNode===r?xw.bind(null,e):null}function ih(e,t){var r=gi;return e.current.memoizedState.isDehydrated&&(Qs(e,t).flags|=256),e=zc(e,t),e!==2&&(t=Bt,Bt=r,t!==null&&lh(t)),e}function lh(e){Bt===null?Bt=e:Bt.push.apply(Bt,e)}function KC(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],o=s.getSnapshot;s=s.value;try{if(!Hr(o(),s))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Zn(e,t){for(t&=~Fm,t&=~yu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Br(t),n=1<<r;e[r]=-1,t&=~n}}function _v(e){if(Ce&6)throw Error(z(327));Ha();var t=_c(e,0);if(!(t&1))return Qt(e,Ze()),null;var r=zc(e,t);if(e.tag!==0&&r===2){var n=Af(e);n!==0&&(t=n,r=ih(e,n))}if(r===1)throw r=Ui,Qs(e,0),Zn(e,t),Qt(e,Ze()),r;if(r===6)throw Error(z(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Fs(e,Bt,jn),Qt(e,Ze()),null}function Gm(e,t){var r=Ce;Ce|=1;try{return e(t)}finally{Ce=r,Ce===0&&(ho=Ze()+500,pu&&Ps())}}function aa(e){is!==null&&is.tag===0&&!(Ce&6)&&Ha();var t=Ce;Ce|=1;var r=wr.transition,n=Te;try{if(wr.transition=null,Te=1,e)return e()}finally{Te=n,wr.transition=r,Ce=t,!(Ce&6)&&Ps()}}function Bm(){er=Ua.current,Ue(Ua)}function Qs(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,NC(r)),nt!==null)for(r=nt.return;r!==null;){var n=r;switch(_m(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Ec();break;case 3:uo(),Ue(Kt),Ue(Tt),Mm();break;case 5:Rm(n);break;case 4:uo();break;case 13:Ue(qe);break;case 19:Ue(qe);break;case 10:Cm(n.type._context);break;case 22:case 23:Bm()}r=r.return}if(pt=e,nt=e=vs(e.current,null),xt=er=t,ct=0,Ui=null,Fm=yu=sa=0,Bt=gi=null,Vs!==null){for(t=0;t<Vs.length;t++)if(r=Vs[t],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,o=r.pending;if(o!==null){var i=o.next;o.next=s,n.next=i}r.pending=n}Vs=null}return e}function yw(e,t){do{var r=nt;try{if(km(),ac.current=Lc,Ic){for(var n=Ye.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Ic=!1}if(na=0,ft=lt=Ye=null,mi=!1,Ii=0,Um.current=null,r===null||r.return===null){ct=1,Ui=t,nt=null;break}e:{var o=e,i=r.return,l=r,c=t;if(t=xt,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,f=l,d=f.tag;if(!(f.mode&1)&&(d===0||d===11||d===15)){var h=f.alternate;h?(f.updateQueue=h.updateQueue,f.memoizedState=h.memoizedState,f.lanes=h.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=uv(i);if(p!==null){p.flags&=-257,dv(p,i,l,o,t),p.mode&1&&cv(o,u,t),t=p,c=u;var g=t.updateQueue;if(g===null){var v=new Set;v.add(c),t.updateQueue=v}else g.add(c);break e}else{if(!(t&1)){cv(o,u,t),Vm();break e}c=Error(z(426))}}else if(Ge&&l.mode&1){var y=uv(i);if(y!==null){!(y.flags&65536)&&(y.flags|=256),dv(y,i,l,o,t),Nm(fo(c,l));break e}}o=c=fo(c,l),ct!==4&&(ct=2),gi===null?gi=[o]:gi.push(o),o=i;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var x=rw(o,c,t);nv(o,x);break e;case 1:l=c;var w=o.type,b=o.stateNode;if(!(o.flags&128)&&(typeof w.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(ps===null||!ps.has(b)))){o.flags|=65536,t&=-t,o.lanes|=t;var j=nw(o,l,t);nv(o,j);break e}}o=o.return}while(o!==null)}jw(r)}catch(_){t=_,nt===r&&r!==null&&(nt=r=r.return);continue}break}while(!0)}function ww(){var e=$c.current;return $c.current=Lc,e===null?Lc:e}function Vm(){(ct===0||ct===3||ct===2)&&(ct=4),pt===null||!(sa&268435455)&&!(yu&268435455)||Zn(pt,xt)}function zc(e,t){var r=Ce;Ce|=2;var n=ww();(pt!==e||xt!==t)&&(jn=null,Qs(e,t));do try{YC();break}catch(s){yw(e,s)}while(!0);if(km(),Ce=r,$c.current=n,nt!==null)throw Error(z(261));return pt=null,xt=0,ct}function YC(){for(;nt!==null;)bw(nt)}function QC(){for(;nt!==null&&!bk();)bw(nt)}function bw(e){var t=Nw(e.alternate,e,er);e.memoizedProps=e.pendingProps,t===null?jw(e):nt=t,Um.current=null}function jw(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=BC(r,t),r!==null){r.flags&=32767,nt=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ct=6,nt=null;return}}else if(r=GC(r,t,er),r!==null){nt=r;return}if(t=t.sibling,t!==null){nt=t;return}nt=t=e}while(t!==null);ct===0&&(ct=5)}function Fs(e,t,r){var n=Te,s=wr.transition;try{wr.transition=null,Te=1,XC(e,t,r,n)}finally{wr.transition=s,Te=n}return null}function XC(e,t,r,n){do Ha();while(is!==null);if(Ce&6)throw Error(z(327));r=e.finishedWork;var s=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(z(177));e.callbackNode=null,e.callbackPriority=0;var o=r.lanes|r.childLanes;if(Rk(e,o),e===pt&&(nt=pt=null,xt=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Ll||(Ll=!0,Sw(jc,function(){return Ha(),null})),o=(r.flags&15990)!==0,r.subtreeFlags&15990||o){o=wr.transition,wr.transition=null;var i=Te;Te=1;var l=Ce;Ce|=4,Um.current=null,HC(e,r),gw(r,e),vC(Uf),Nc=!!$f,Uf=$f=null,e.current=r,WC(r),jk(),Ce=l,Te=i,wr.transition=o}else e.current=r;if(Ll&&(Ll=!1,is=e,Fc=s),o=e.pendingLanes,o===0&&(ps=null),Sk(r.stateNode),Qt(e,Ze()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(Uc)throw Uc=!1,e=ah,ah=null,e;return Fc&1&&e.tag!==0&&Ha(),o=e.pendingLanes,o&1?e===oh?vi++:(vi=0,oh=e):vi=0,Ps(),null}function Ha(){if(is!==null){var e=r0(Fc),t=wr.transition,r=Te;try{if(wr.transition=null,Te=16>e?16:e,is===null)var n=!1;else{if(e=is,is=null,Fc=0,Ce&6)throw Error(z(331));var s=Ce;for(Ce|=4,Z=e.current;Z!==null;){var o=Z,i=o.child;if(Z.flags&16){var l=o.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(Z=u;Z!==null;){var f=Z;switch(f.tag){case 0:case 11:case 15:pi(8,f,o)}var d=f.child;if(d!==null)d.return=f,Z=d;else for(;Z!==null;){f=Z;var h=f.sibling,p=f.return;if(hw(f),f===u){Z=null;break}if(h!==null){h.return=p,Z=h;break}Z=p}}}var g=o.alternate;if(g!==null){var v=g.child;if(v!==null){g.child=null;do{var y=v.sibling;v.sibling=null,v=y}while(v!==null)}}Z=o}}if(o.subtreeFlags&2064&&i!==null)i.return=o,Z=i;else e:for(;Z!==null;){if(o=Z,o.flags&2048)switch(o.tag){case 0:case 11:case 15:pi(9,o,o.return)}var x=o.sibling;if(x!==null){x.return=o.return,Z=x;break e}Z=o.return}}var w=e.current;for(Z=w;Z!==null;){i=Z;var b=i.child;if(i.subtreeFlags&2064&&b!==null)b.return=i,Z=b;else e:for(i=w;Z!==null;){if(l=Z,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:xu(9,l)}}catch(_){Je(l,l.return,_)}if(l===i){Z=null;break e}var j=l.sibling;if(j!==null){j.return=l.return,Z=j;break e}Z=l.return}}if(Ce=s,Ps(),an&&typeof an.onPostCommitFiberRoot=="function")try{an.onPostCommitFiberRoot(uu,e)}catch{}n=!0}return n}finally{Te=r,wr.transition=t}}return!1}function Nv(e,t,r){t=fo(r,t),t=rw(e,t,1),e=ms(e,t,1),t=$t(),e!==null&&(Zi(e,1,t),Qt(e,t))}function Je(e,t,r){if(e.tag===3)Nv(e,e,r);else for(;t!==null;){if(t.tag===3){Nv(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(ps===null||!ps.has(n))){e=fo(r,e),e=nw(t,e,1),t=ms(t,e,1),e=$t(),t!==null&&(Zi(t,1,e),Qt(t,e));break}}t=t.return}}function JC(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=$t(),e.pingedLanes|=e.suspendedLanes&r,pt===e&&(xt&r)===r&&(ct===4||ct===3&&(xt&130023424)===xt&&500>Ze()-zm?Qs(e,0):Fm|=r),Qt(e,t)}function _w(e,t){t===0&&(e.mode&1?(t=Cl,Cl<<=1,!(Cl&130023424)&&(Cl=4194304)):t=1);var r=$t();e=Dn(e,t),e!==null&&(Zi(e,t,r),Qt(e,r))}function ZC(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),_w(e,r)}function eE(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,s=e.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(z(314))}n!==null&&n.delete(t),_w(e,r)}var Nw;Nw=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Kt.current)Wt=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Wt=!1,zC(e,t,r);Wt=!!(e.flags&131072)}else Wt=!1,Ge&&t.flags&1048576&&E0(t,Rc,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;ic(e,t),e=t.pendingProps;var s=io(t,Tt.current);Va(t,r),s=Dm(null,t,n,e,s,r);var o=Om();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Yt(n)?(o=!0,Pc(t)):o=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Pm(t),s.updater=vu,t.stateNode=s,s._reactInternals=t,Kf(t,n,e,r),t=Xf(null,t,n,!0,o,r)):(t.tag=0,Ge&&o&&jm(t),Ot(null,t,s,r),t=t.child),t;case 16:n=t.elementType;e:{switch(ic(e,t),e=t.pendingProps,s=n._init,n=s(n._payload),t.type=n,s=t.tag=rE(n),e=Dr(n,e),s){case 0:t=Qf(null,t,n,e,r);break e;case 1:t=mv(null,t,n,e,r);break e;case 11:t=fv(null,t,n,e,r);break e;case 14:t=hv(null,t,n,Dr(n.type,e),r);break e}throw Error(z(306,n,""))}return t;case 0:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Dr(n,s),Qf(e,t,n,s,r);case 1:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Dr(n,s),mv(e,t,n,s,r);case 3:e:{if(iw(t),e===null)throw Error(z(387));n=t.pendingProps,o=t.memoizedState,s=o.element,D0(e,t),Dc(t,n,null,r);var i=t.memoizedState;if(n=i.element,o.isDehydrated)if(o={element:n,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){s=fo(Error(z(423)),t),t=pv(e,t,n,r,s);break e}else if(n!==s){s=fo(Error(z(424)),t),t=pv(e,t,n,r,s);break e}else for(rr=hs(t.stateNode.containerInfo.firstChild),or=t,Ge=!0,zr=null,r=M0(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(lo(),n===s){t=On(e,t,r);break e}Ot(e,t,n,r)}t=t.child}return t;case 5:return O0(t),e===null&&Hf(t),n=t.type,s=t.pendingProps,o=e!==null?e.memoizedProps:null,i=s.children,Ff(n,s)?i=null:o!==null&&Ff(n,o)&&(t.flags|=32),ow(e,t),Ot(e,t,i,r),t.child;case 6:return e===null&&Hf(t),null;case 13:return lw(e,t,r);case 4:return Tm(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=co(t,null,n,r):Ot(e,t,n,r),t.child;case 11:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Dr(n,s),fv(e,t,n,s,r);case 7:return Ot(e,t,t.pendingProps,r),t.child;case 8:return Ot(e,t,t.pendingProps.children,r),t.child;case 12:return Ot(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,s=t.pendingProps,o=t.memoizedProps,i=s.value,Ae(Mc,n._currentValue),n._currentValue=i,o!==null)if(Hr(o.value,i)){if(o.children===s.children&&!Kt.current){t=On(e,t,r);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var l=o.dependencies;if(l!==null){i=o.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(o.tag===1){c=Tn(-1,r&-r),c.tag=2;var u=o.updateQueue;if(u!==null){u=u.shared;var f=u.pending;f===null?c.next=c:(c.next=f.next,f.next=c),u.pending=c}}o.lanes|=r,c=o.alternate,c!==null&&(c.lanes|=r),Wf(o.return,r,t),l.lanes|=r;break}c=c.next}}else if(o.tag===10)i=o.type===t.type?null:o.child;else if(o.tag===18){if(i=o.return,i===null)throw Error(z(341));i.lanes|=r,l=i.alternate,l!==null&&(l.lanes|=r),Wf(i,r,t),i=o.sibling}else i=o.child;if(i!==null)i.return=o;else for(i=o;i!==null;){if(i===t){i=null;break}if(o=i.sibling,o!==null){o.return=i.return,i=o;break}i=i.return}o=i}Ot(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,n=t.pendingProps.children,Va(t,r),s=Nr(s),n=n(s),t.flags|=1,Ot(e,t,n,r),t.child;case 14:return n=t.type,s=Dr(n,t.pendingProps),s=Dr(n.type,s),hv(e,t,n,s,r);case 15:return sw(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Dr(n,s),ic(e,t),t.tag=1,Yt(n)?(e=!0,Pc(t)):e=!1,Va(t,r),tw(t,n,s),Kf(t,n,s,r),Xf(null,t,n,!0,e,r);case 19:return cw(e,t,r);case 22:return aw(e,t,r)}throw Error(z(156,t.tag))};function Sw(e,t){return Jy(e,t)}function tE(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function yr(e,t,r,n){return new tE(e,t,r,n)}function Hm(e){return e=e.prototype,!(!e||!e.isReactComponent)}function rE(e){if(typeof e=="function")return Hm(e)?1:0;if(e!=null){if(e=e.$$typeof,e===um)return 11;if(e===dm)return 14}return 2}function vs(e,t){var r=e.alternate;return r===null?(r=yr(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function uc(e,t,r,n,s,o){var i=2;if(n=e,typeof e=="function")Hm(e)&&(i=1);else if(typeof e=="string")i=5;else e:switch(e){case Pa:return Xs(r.children,s,o,t);case cm:i=8,s|=8;break;case xf:return e=yr(12,r,t,s|2),e.elementType=xf,e.lanes=o,e;case yf:return e=yr(13,r,t,s),e.elementType=yf,e.lanes=o,e;case wf:return e=yr(19,r,t,s),e.elementType=wf,e.lanes=o,e;case Oy:return wu(r,s,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Ay:i=10;break e;case Dy:i=9;break e;case um:i=11;break e;case dm:i=14;break e;case Qn:i=16,n=null;break e}throw Error(z(130,e==null?e:typeof e,""))}return t=yr(i,r,t,s),t.elementType=e,t.type=n,t.lanes=o,t}function Xs(e,t,r,n){return e=yr(7,e,n,t),e.lanes=r,e}function wu(e,t,r,n){return e=yr(22,e,n,t),e.elementType=Oy,e.lanes=r,e.stateNode={isHidden:!1},e}function Fd(e,t,r){return e=yr(6,e,null,t),e.lanes=r,e}function zd(e,t,r){return t=yr(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function nE(e,t,r,n,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=bd(0),this.expirationTimes=bd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=bd(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Wm(e,t,r,n,s,o,i,l,c){return e=new nE(e,t,r,l,c),t===1?(t=1,o===!0&&(t|=8)):t=0,o=yr(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Pm(o),e}function sE(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ea,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function kw(e){if(!e)return bs;e=e._reactInternals;e:{if(ua(e)!==e||e.tag!==1)throw Error(z(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Yt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(z(171))}if(e.tag===1){var r=e.type;if(Yt(r))return k0(e,r,t)}return t}function Cw(e,t,r,n,s,o,i,l,c){return e=Wm(r,n,!0,e,s,o,i,l,c),e.context=kw(null),r=e.current,n=$t(),s=gs(r),o=Tn(n,s),o.callback=t??null,ms(r,o,s),e.current.lanes=s,Zi(e,s,n),Qt(e,n),e}function bu(e,t,r,n){var s=t.current,o=$t(),i=gs(s);return r=kw(r),t.context===null?t.context=r:t.pendingContext=r,t=Tn(o,i),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=ms(s,t,i),e!==null&&(Vr(e,s,i,o),sc(e,s,i)),i}function Gc(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Sv(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function qm(e,t){Sv(e,t),(e=e.alternate)&&Sv(e,t)}function aE(){return null}var Ew=typeof reportError=="function"?reportError:function(e){console.error(e)};function Km(e){this._internalRoot=e}ju.prototype.render=Km.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(z(409));bu(e,t,null,null)};ju.prototype.unmount=Km.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;aa(function(){bu(null,e,null,null)}),t[An]=null}};function ju(e){this._internalRoot=e}ju.prototype.unstable_scheduleHydration=function(e){if(e){var t=a0();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Jn.length&&t!==0&&t<Jn[r].priority;r++);Jn.splice(r,0,e),r===0&&i0(e)}};function Ym(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function _u(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function kv(){}function oE(e,t,r,n,s){if(s){if(typeof n=="function"){var o=n;n=function(){var u=Gc(i);o.call(u)}}var i=Cw(t,n,e,0,null,!1,!1,"",kv);return e._reactRootContainer=i,e[An]=i.current,Ri(e.nodeType===8?e.parentNode:e),aa(),i}for(;s=e.lastChild;)e.removeChild(s);if(typeof n=="function"){var l=n;n=function(){var u=Gc(c);l.call(u)}}var c=Wm(e,0,!1,null,null,!1,!1,"",kv);return e._reactRootContainer=c,e[An]=c.current,Ri(e.nodeType===8?e.parentNode:e),aa(function(){bu(t,c,r,n)}),c}function Nu(e,t,r,n,s){var o=r._reactRootContainer;if(o){var i=o;if(typeof s=="function"){var l=s;s=function(){var c=Gc(i);l.call(c)}}bu(t,i,e,s)}else i=oE(r,t,e,s,n);return Gc(i)}n0=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=ai(t.pendingLanes);r!==0&&(mm(t,r|1),Qt(t,Ze()),!(Ce&6)&&(ho=Ze()+500,Ps()))}break;case 13:aa(function(){var n=Dn(e,1);if(n!==null){var s=$t();Vr(n,e,1,s)}}),qm(e,1)}};pm=function(e){if(e.tag===13){var t=Dn(e,134217728);if(t!==null){var r=$t();Vr(t,e,134217728,r)}qm(e,134217728)}};s0=function(e){if(e.tag===13){var t=gs(e),r=Dn(e,t);if(r!==null){var n=$t();Vr(r,e,t,n)}qm(e,t)}};a0=function(){return Te};o0=function(e,t){var r=Te;try{return Te=e,t()}finally{Te=r}};Tf=function(e,t,r){switch(t){case"input":if(_f(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var s=mu(n);if(!s)throw Error(z(90));Ly(n),_f(n,s)}}}break;case"textarea":Uy(e,r);break;case"select":t=r.value,t!=null&&Fa(e,!!r.multiple,t,!1)}};Wy=Gm;qy=aa;var iE={usingClientEntryPoint:!1,Events:[tl,Aa,mu,Vy,Hy,Gm]},Ko={findFiberByHostInstance:Bs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},lE={bundleType:Ko.bundleType,version:Ko.version,rendererPackageName:Ko.rendererPackageName,rendererConfig:Ko.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Un.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Qy(e),e===null?null:e.stateNode},findFiberByHostInstance:Ko.findFiberByHostInstance||aE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $l=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$l.isDisabled&&$l.supportsFiber)try{uu=$l.inject(lE),an=$l}catch{}}cr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=iE;cr.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ym(t))throw Error(z(200));return sE(e,t,null,r)};cr.createRoot=function(e,t){if(!Ym(e))throw Error(z(299));var r=!1,n="",s=Ew;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Wm(e,1,!1,null,null,r,!1,n,s),e[An]=t.current,Ri(e.nodeType===8?e.parentNode:e),new Km(t)};cr.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(z(188)):(e=Object.keys(e).join(","),Error(z(268,e)));return e=Qy(t),e=e===null?null:e.stateNode,e};cr.flushSync=function(e){return aa(e)};cr.hydrate=function(e,t,r){if(!_u(t))throw Error(z(200));return Nu(null,e,t,!0,r)};cr.hydrateRoot=function(e,t,r){if(!Ym(e))throw Error(z(405));var n=r!=null&&r.hydratedSources||null,s=!1,o="",i=Ew;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(o=r.identifierPrefix),r.onRecoverableError!==void 0&&(i=r.onRecoverableError)),t=Cw(t,null,e,1,r??null,s,!1,o,i),e[An]=t.current,Ri(e),n)for(e=0;e<n.length;e++)r=n[e],s=r._getVersion,s=s(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new ju(t)};cr.render=function(e,t,r){if(!_u(t))throw Error(z(200));return Nu(null,e,t,!1,r)};cr.unmountComponentAtNode=function(e){if(!_u(e))throw Error(z(40));return e._reactRootContainer?(aa(function(){Nu(null,null,e,!1,function(){e._reactRootContainer=null,e[An]=null})}),!0):!1};cr.unstable_batchedUpdates=Gm;cr.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!_u(r))throw Error(z(200));if(e==null||e._reactInternals===void 0)throw Error(z(38));return Nu(e,t,r,!1,n)};cr.version="18.3.1-next-f1338f8080-20240426";function Pw(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Pw)}catch(e){console.error(e)}}Pw(),Py.exports=cr;var nl=Py.exports;const Tw=gy(nl);var Rw,Cv=nl;Rw=Cv.createRoot,Cv.hydrateRoot;const cE=1,uE=3e3;let Gd=0;function dE(){return Gd=(Gd+1)%Number.MAX_SAFE_INTEGER,Gd.toString()}const Bd=new Map,Ev=e=>{if(Bd.has(e))return;const t=setTimeout(()=>{Bd.delete(e),xi({type:"REMOVE_TOAST",toastId:e})},uE);Bd.set(e,t)},fE=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,cE)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(r=>r.id===t.toast.id?{...r,...t.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=t;return r?Ev(r):e.toasts.forEach(n=>{Ev(n.id)}),{...e,toasts:e.toasts.map(n=>n.id===r||r===void 0?{...n,open:!1}:n)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(r=>r.id!==t.toastId)}}},dc=[];let fc={toasts:[]};function xi(e){fc=fE(fc,e),dc.forEach(t=>{t(fc)})}function Dt({...e}){const t=dE(),r=s=>xi({type:"UPDATE_TOAST",toast:{...s,id:t}}),n=()=>xi({type:"DISMISS_TOAST",toastId:t});return xi({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:s=>{s||n()}}}),{id:t,dismiss:n,update:r}}function Be(){const[e,t]=m.useState(fc);return m.useEffect(()=>(dc.push(t),()=>{const r=dc.indexOf(t);r>-1&&dc.splice(r,1)}),[e]),{...e,toast:Dt,dismiss:r=>xi({type:"DISMISS_TOAST",toastId:r})}}function K(e,t,{checkForDefaultPrevented:r=!0}={}){return function(s){if(e==null||e(s),r===!1||!s.defaultPrevented)return t==null?void 0:t(s)}}function hE(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function Su(...e){return t=>e.forEach(r=>hE(r,t))}function _e(...e){return m.useCallback(Su(...e),e)}function mE(e,t=[]){let r=[];function n(o,i){const l=m.createContext(i),c=r.length;r=[...r,i];function u(d){const{scope:h,children:p,...g}=d,v=(h==null?void 0:h[e][c])||l,y=m.useMemo(()=>g,Object.values(g));return a.jsx(v.Provider,{value:y,children:p})}function f(d,h){const p=(h==null?void 0:h[e][c])||l,g=m.useContext(p);if(g)return g;if(i!==void 0)return i;throw new Error(`\`${d}\` must be used within \`${o}\``)}return u.displayName=o+"Provider",[u,f]}const s=()=>{const o=r.map(i=>m.createContext(i));return function(l){const c=(l==null?void 0:l[e])||o;return m.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return s.scopeName=e,[n,pE(s,...t)]}function pE(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(o){const i=n.reduce((l,{useScope:c,scopeName:u})=>{const d=c(o)[`__scope${u}`];return{...l,...d}},{});return m.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return r.scopeName=t.scopeName,r}var js=m.forwardRef((e,t)=>{const{children:r,...n}=e,s=m.Children.toArray(r),o=s.find(gE);if(o){const i=o.props.children,l=s.map(c=>c===o?m.Children.count(i)>1?m.Children.only(null):m.isValidElement(i)?i.props.children:null:c);return a.jsx(ch,{...n,ref:t,children:m.isValidElement(i)?m.cloneElement(i,void 0,l):null})}return a.jsx(ch,{...n,ref:t,children:r})});js.displayName="Slot";var ch=m.forwardRef((e,t)=>{const{children:r,...n}=e;if(m.isValidElement(r)){const s=xE(r);return m.cloneElement(r,{...vE(n,r.props),ref:t?Su(t,s):s})}return m.Children.count(r)>1?m.Children.only(null):null});ch.displayName="SlotClone";var Mw=({children:e})=>a.jsx(a.Fragment,{children:e});function gE(e){return m.isValidElement(e)&&e.type===Mw}function vE(e,t){const r={...t};for(const n in t){const s=e[n],o=t[n];/^on[A-Z]/.test(n)?s&&o?r[n]=(...l)=>{o(...l),s(...l)}:s&&(r[n]=s):n==="style"?r[n]={...s,...o}:n==="className"&&(r[n]=[s,o].filter(Boolean).join(" "))}return{...e,...r}}function xE(e){var n,s;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function ku(e){const t=e+"CollectionProvider",[r,n]=mE(t),[s,o]=r(t,{collectionRef:{current:null},itemMap:new Map}),i=p=>{const{scope:g,children:v}=p,y=A.useRef(null),x=A.useRef(new Map).current;return a.jsx(s,{scope:g,itemMap:x,collectionRef:y,children:v})};i.displayName=t;const l=e+"CollectionSlot",c=A.forwardRef((p,g)=>{const{scope:v,children:y}=p,x=o(l,v),w=_e(g,x.collectionRef);return a.jsx(js,{ref:w,children:y})});c.displayName=l;const u=e+"CollectionItemSlot",f="data-radix-collection-item",d=A.forwardRef((p,g)=>{const{scope:v,children:y,...x}=p,w=A.useRef(null),b=_e(g,w),j=o(u,v);return A.useEffect(()=>(j.itemMap.set(w,{ref:w,...x}),()=>void j.itemMap.delete(w))),a.jsx(js,{[f]:"",ref:b,children:y})});d.displayName=u;function h(p){const g=o(e+"CollectionConsumer",p);return A.useCallback(()=>{const y=g.collectionRef.current;if(!y)return[];const x=Array.from(y.querySelectorAll(`[${f}]`));return Array.from(g.itemMap.values()).sort((j,_)=>x.indexOf(j.ref.current)-x.indexOf(_.ref.current))},[g.collectionRef,g.itemMap])}return[{Provider:i,Slot:c,ItemSlot:d},h,n]}function yE(e,t){const r=m.createContext(t),n=o=>{const{children:i,...l}=o,c=m.useMemo(()=>l,Object.values(l));return a.jsx(r.Provider,{value:c,children:i})};n.displayName=e+"Provider";function s(o){const i=m.useContext(r);if(i)return i;if(t!==void 0)return t;throw new Error(`\`${o}\` must be used within \`${e}\``)}return[n,s]}function kr(e,t=[]){let r=[];function n(o,i){const l=m.createContext(i),c=r.length;r=[...r,i];const u=d=>{var x;const{scope:h,children:p,...g}=d,v=((x=h==null?void 0:h[e])==null?void 0:x[c])||l,y=m.useMemo(()=>g,Object.values(g));return a.jsx(v.Provider,{value:y,children:p})};u.displayName=o+"Provider";function f(d,h){var v;const p=((v=h==null?void 0:h[e])==null?void 0:v[c])||l,g=m.useContext(p);if(g)return g;if(i!==void 0)return i;throw new Error(`\`${d}\` must be used within \`${o}\``)}return[u,f]}const s=()=>{const o=r.map(i=>m.createContext(i));return function(l){const c=(l==null?void 0:l[e])||o;return m.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return s.scopeName=e,[n,wE(s,...t)]}function wE(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(o){const i=n.reduce((l,{useScope:c,scopeName:u})=>{const d=c(o)[`__scope${u}`];return{...l,...d}},{});return m.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return r.scopeName=t.scopeName,r}var bE=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],ie=bE.reduce((e,t)=>{const r=m.forwardRef((n,s)=>{const{asChild:o,...i}=n,l=o?js:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),a.jsx(l,{...i,ref:s})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function Qm(e,t){e&&nl.flushSync(()=>e.dispatchEvent(t))}function Ke(e){const t=m.useRef(e);return m.useEffect(()=>{t.current=e}),m.useMemo(()=>(...r)=>{var n;return(n=t.current)==null?void 0:n.call(t,...r)},[])}function jE(e,t=globalThis==null?void 0:globalThis.document){const r=Ke(e);m.useEffect(()=>{const n=s=>{s.key==="Escape"&&r(s)};return t.addEventListener("keydown",n,{capture:!0}),()=>t.removeEventListener("keydown",n,{capture:!0})},[r,t])}var _E="DismissableLayer",uh="dismissableLayer.update",NE="dismissableLayer.pointerDownOutside",SE="dismissableLayer.focusOutside",Pv,Aw=m.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),So=m.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:s,onFocusOutside:o,onInteractOutside:i,onDismiss:l,...c}=e,u=m.useContext(Aw),[f,d]=m.useState(null),h=(f==null?void 0:f.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=m.useState({}),g=_e(t,N=>d(N)),v=Array.from(u.layers),[y]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),x=v.indexOf(y),w=f?v.indexOf(f):-1,b=u.layersWithOutsidePointerEventsDisabled.size>0,j=w>=x,_=CE(N=>{const k=N.target,C=[...u.branches].some(P=>P.contains(k));!j||C||(s==null||s(N),i==null||i(N),N.defaultPrevented||l==null||l())},h),S=EE(N=>{const k=N.target;[...u.branches].some(P=>P.contains(k))||(o==null||o(N),i==null||i(N),N.defaultPrevented||l==null||l())},h);return jE(N=>{w===u.layers.size-1&&(n==null||n(N),!N.defaultPrevented&&l&&(N.preventDefault(),l()))},h),m.useEffect(()=>{if(f)return r&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(Pv=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(f)),u.layers.add(f),Tv(),()=>{r&&u.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=Pv)}},[f,h,r,u]),m.useEffect(()=>()=>{f&&(u.layers.delete(f),u.layersWithOutsidePointerEventsDisabled.delete(f),Tv())},[f,u]),m.useEffect(()=>{const N=()=>p({});return document.addEventListener(uh,N),()=>document.removeEventListener(uh,N)},[]),a.jsx(ie.div,{...c,ref:g,style:{pointerEvents:b?j?"auto":"none":void 0,...e.style},onFocusCapture:K(e.onFocusCapture,S.onFocusCapture),onBlurCapture:K(e.onBlurCapture,S.onBlurCapture),onPointerDownCapture:K(e.onPointerDownCapture,_.onPointerDownCapture)})});So.displayName=_E;var kE="DismissableLayerBranch",Dw=m.forwardRef((e,t)=>{const r=m.useContext(Aw),n=m.useRef(null),s=_e(t,n);return m.useEffect(()=>{const o=n.current;if(o)return r.branches.add(o),()=>{r.branches.delete(o)}},[r.branches]),a.jsx(ie.div,{...e,ref:s})});Dw.displayName=kE;function CE(e,t=globalThis==null?void 0:globalThis.document){const r=Ke(e),n=m.useRef(!1),s=m.useRef(()=>{});return m.useEffect(()=>{const o=l=>{if(l.target&&!n.current){let c=function(){Ow(NE,r,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",s.current),s.current=c,t.addEventListener("click",s.current,{once:!0})):c()}else t.removeEventListener("click",s.current);n.current=!1},i=window.setTimeout(()=>{t.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(i),t.removeEventListener("pointerdown",o),t.removeEventListener("click",s.current)}},[t,r]),{onPointerDownCapture:()=>n.current=!0}}function EE(e,t=globalThis==null?void 0:globalThis.document){const r=Ke(e),n=m.useRef(!1);return m.useEffect(()=>{const s=o=>{o.target&&!n.current&&Ow(SE,r,{originalEvent:o},{discrete:!1})};return t.addEventListener("focusin",s),()=>t.removeEventListener("focusin",s)},[t,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function Tv(){const e=new CustomEvent(uh);document.dispatchEvent(e)}function Ow(e,t,r,{discrete:n}){const s=r.originalEvent.target,o=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&s.addEventListener(e,t,{once:!0}),n?Qm(s,o):s.dispatchEvent(o)}var PE=So,TE=Dw,Wr=globalThis!=null&&globalThis.document?m.useLayoutEffect:()=>{},RE="Portal",sl=m.forwardRef((e,t)=>{var l;const{container:r,...n}=e,[s,o]=m.useState(!1);Wr(()=>o(!0),[]);const i=r||s&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return i?Tw.createPortal(a.jsx(ie.div,{...n,ref:t}),i):null});sl.displayName=RE;function ME(e,t){return m.useReducer((r,n)=>t[r][n]??r,e)}var gt=e=>{const{present:t,children:r}=e,n=AE(t),s=typeof r=="function"?r({present:n.isPresent}):m.Children.only(r),o=_e(n.ref,DE(s));return typeof r=="function"||n.isPresent?m.cloneElement(s,{ref:o}):null};gt.displayName="Presence";function AE(e){const[t,r]=m.useState(),n=m.useRef({}),s=m.useRef(e),o=m.useRef("none"),i=e?"mounted":"unmounted",[l,c]=ME(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return m.useEffect(()=>{const u=Ul(n.current);o.current=l==="mounted"?u:"none"},[l]),Wr(()=>{const u=n.current,f=s.current;if(f!==e){const h=o.current,p=Ul(u);e?c("MOUNT"):p==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(f&&h!==p?"ANIMATION_OUT":"UNMOUNT"),s.current=e}},[e,c]),Wr(()=>{if(t){let u;const f=t.ownerDocument.defaultView??window,d=p=>{const v=Ul(n.current).includes(p.animationName);if(p.target===t&&v&&(c("ANIMATION_END"),!s.current)){const y=t.style.animationFillMode;t.style.animationFillMode="forwards",u=f.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=y)})}},h=p=>{p.target===t&&(o.current=Ul(n.current))};return t.addEventListener("animationstart",h),t.addEventListener("animationcancel",d),t.addEventListener("animationend",d),()=>{f.clearTimeout(u),t.removeEventListener("animationstart",h),t.removeEventListener("animationcancel",d),t.removeEventListener("animationend",d)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:m.useCallback(u=>{u&&(n.current=getComputedStyle(u)),r(u)},[])}}function Ul(e){return(e==null?void 0:e.animationName)||"none"}function DE(e){var n,s;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function dn({prop:e,defaultProp:t,onChange:r=()=>{}}){const[n,s]=OE({defaultProp:t,onChange:r}),o=e!==void 0,i=o?e:n,l=Ke(r),c=m.useCallback(u=>{if(o){const d=typeof u=="function"?u(e):u;d!==e&&l(d)}else s(u)},[o,e,s,l]);return[i,c]}function OE({defaultProp:e,onChange:t}){const r=m.useState(e),[n]=r,s=m.useRef(n),o=Ke(t);return m.useEffect(()=>{s.current!==n&&(o(n),s.current=n)},[n,s,o]),r}var IE="VisuallyHidden",mo=m.forwardRef((e,t)=>a.jsx(ie.span,{...e,ref:t,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...e.style}}));mo.displayName=IE;var LE=mo,Xm="ToastProvider",[Jm,$E,UE]=ku("Toast"),[Iw,n$]=kr("Toast",[UE]),[FE,Cu]=Iw(Xm),Lw=e=>{const{__scopeToast:t,label:r="Notification",duration:n=5e3,swipeDirection:s="right",swipeThreshold:o=50,children:i}=e,[l,c]=m.useState(null),[u,f]=m.useState(0),d=m.useRef(!1),h=m.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${Xm}\`. Expected non-empty \`string\`.`),a.jsx(Jm.Provider,{scope:t,children:a.jsx(FE,{scope:t,label:r,duration:n,swipeDirection:s,swipeThreshold:o,toastCount:u,viewport:l,onViewportChange:c,onToastAdd:m.useCallback(()=>f(p=>p+1),[]),onToastRemove:m.useCallback(()=>f(p=>p-1),[]),isFocusedToastEscapeKeyDownRef:d,isClosePausedRef:h,children:i})})};Lw.displayName=Xm;var $w="ToastViewport",zE=["F8"],dh="toast.viewportPause",fh="toast.viewportResume",Uw=m.forwardRef((e,t)=>{const{__scopeToast:r,hotkey:n=zE,label:s="Notifications ({hotkey})",...o}=e,i=Cu($w,r),l=$E(r),c=m.useRef(null),u=m.useRef(null),f=m.useRef(null),d=m.useRef(null),h=_e(t,d,i.onViewportChange),p=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),g=i.toastCount>0;m.useEffect(()=>{const y=x=>{var b;n.length!==0&&n.every(j=>x[j]||x.code===j)&&((b=d.current)==null||b.focus())};return document.addEventListener("keydown",y),()=>document.removeEventListener("keydown",y)},[n]),m.useEffect(()=>{const y=c.current,x=d.current;if(g&&y&&x){const w=()=>{if(!i.isClosePausedRef.current){const S=new CustomEvent(dh);x.dispatchEvent(S),i.isClosePausedRef.current=!0}},b=()=>{if(i.isClosePausedRef.current){const S=new CustomEvent(fh);x.dispatchEvent(S),i.isClosePausedRef.current=!1}},j=S=>{!y.contains(S.relatedTarget)&&b()},_=()=>{y.contains(document.activeElement)||b()};return y.addEventListener("focusin",w),y.addEventListener("focusout",j),y.addEventListener("pointermove",w),y.addEventListener("pointerleave",_),window.addEventListener("blur",w),window.addEventListener("focus",b),()=>{y.removeEventListener("focusin",w),y.removeEventListener("focusout",j),y.removeEventListener("pointermove",w),y.removeEventListener("pointerleave",_),window.removeEventListener("blur",w),window.removeEventListener("focus",b)}}},[g,i.isClosePausedRef]);const v=m.useCallback(({tabbingDirection:y})=>{const w=l().map(b=>{const j=b.ref.current,_=[j,...e2(j)];return y==="forwards"?_:_.reverse()});return(y==="forwards"?w.reverse():w).flat()},[l]);return m.useEffect(()=>{const y=d.current;if(y){const x=w=>{var _,S,N;const b=w.altKey||w.ctrlKey||w.metaKey;if(w.key==="Tab"&&!b){const k=document.activeElement,C=w.shiftKey;if(w.target===y&&C){(_=u.current)==null||_.focus();return}const M=v({tabbingDirection:C?"backwards":"forwards"}),G=M.findIndex($=>$===k);Vd(M.slice(G+1))?w.preventDefault():C?(S=u.current)==null||S.focus():(N=f.current)==null||N.focus()}};return y.addEventListener("keydown",x),()=>y.removeEventListener("keydown",x)}},[l,v]),a.jsxs(TE,{ref:c,role:"region","aria-label":s.replace("{hotkey}",p),tabIndex:-1,style:{pointerEvents:g?void 0:"none"},children:[g&&a.jsx(hh,{ref:u,onFocusFromOutsideViewport:()=>{const y=v({tabbingDirection:"forwards"});Vd(y)}}),a.jsx(Jm.Slot,{scope:r,children:a.jsx(ie.ol,{tabIndex:-1,...o,ref:h})}),g&&a.jsx(hh,{ref:f,onFocusFromOutsideViewport:()=>{const y=v({tabbingDirection:"backwards"});Vd(y)}})]})});Uw.displayName=$w;var Fw="ToastFocusProxy",hh=m.forwardRef((e,t)=>{const{__scopeToast:r,onFocusFromOutsideViewport:n,...s}=e,o=Cu(Fw,r);return a.jsx(mo,{"aria-hidden":!0,tabIndex:0,...s,ref:t,style:{position:"fixed"},onFocus:i=>{var u;const l=i.relatedTarget;!((u=o.viewport)!=null&&u.contains(l))&&n()}})});hh.displayName=Fw;var Eu="Toast",GE="toast.swipeStart",BE="toast.swipeMove",VE="toast.swipeCancel",HE="toast.swipeEnd",zw=m.forwardRef((e,t)=>{const{forceMount:r,open:n,defaultOpen:s,onOpenChange:o,...i}=e,[l=!0,c]=dn({prop:n,defaultProp:s,onChange:o});return a.jsx(gt,{present:r||l,children:a.jsx(KE,{open:l,...i,ref:t,onClose:()=>c(!1),onPause:Ke(e.onPause),onResume:Ke(e.onResume),onSwipeStart:K(e.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:K(e.onSwipeMove,u=>{const{x:f,y:d}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${f}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${d}px`)}),onSwipeCancel:K(e.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:K(e.onSwipeEnd,u=>{const{x:f,y:d}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${f}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${d}px`),c(!1)})})})});zw.displayName=Eu;var[WE,qE]=Iw(Eu,{onClose(){}}),KE=m.forwardRef((e,t)=>{const{__scopeToast:r,type:n="foreground",duration:s,open:o,onClose:i,onEscapeKeyDown:l,onPause:c,onResume:u,onSwipeStart:f,onSwipeMove:d,onSwipeCancel:h,onSwipeEnd:p,...g}=e,v=Cu(Eu,r),[y,x]=m.useState(null),w=_e(t,$=>x($)),b=m.useRef(null),j=m.useRef(null),_=s||v.duration,S=m.useRef(0),N=m.useRef(_),k=m.useRef(0),{onToastAdd:C,onToastRemove:P}=v,T=Ke(()=>{var Q;(y==null?void 0:y.contains(document.activeElement))&&((Q=v.viewport)==null||Q.focus()),i()}),M=m.useCallback($=>{!$||$===1/0||(window.clearTimeout(k.current),S.current=new Date().getTime(),k.current=window.setTimeout(T,$))},[T]);m.useEffect(()=>{const $=v.viewport;if($){const Q=()=>{M(N.current),u==null||u()},H=()=>{const Y=new Date().getTime()-S.current;N.current=N.current-Y,window.clearTimeout(k.current),c==null||c()};return $.addEventListener(dh,H),$.addEventListener(fh,Q),()=>{$.removeEventListener(dh,H),$.removeEventListener(fh,Q)}}},[v.viewport,_,c,u,M]),m.useEffect(()=>{o&&!v.isClosePausedRef.current&&M(_)},[o,_,v.isClosePausedRef,M]),m.useEffect(()=>(C(),()=>P()),[C,P]);const G=m.useMemo(()=>y?Kw(y):null,[y]);return v.viewport?a.jsxs(a.Fragment,{children:[G&&a.jsx(YE,{__scopeToast:r,role:"status","aria-live":n==="foreground"?"assertive":"polite","aria-atomic":!0,children:G}),a.jsx(WE,{scope:r,onClose:T,children:nl.createPortal(a.jsx(Jm.ItemSlot,{scope:r,children:a.jsx(PE,{asChild:!0,onEscapeKeyDown:K(l,()=>{v.isFocusedToastEscapeKeyDownRef.current||T(),v.isFocusedToastEscapeKeyDownRef.current=!1}),children:a.jsx(ie.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":o?"open":"closed","data-swipe-direction":v.swipeDirection,...g,ref:w,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:K(e.onKeyDown,$=>{$.key==="Escape"&&(l==null||l($.nativeEvent),$.nativeEvent.defaultPrevented||(v.isFocusedToastEscapeKeyDownRef.current=!0,T()))}),onPointerDown:K(e.onPointerDown,$=>{$.button===0&&(b.current={x:$.clientX,y:$.clientY})}),onPointerMove:K(e.onPointerMove,$=>{if(!b.current)return;const Q=$.clientX-b.current.x,H=$.clientY-b.current.y,Y=!!j.current,R=["left","right"].includes(v.swipeDirection),D=["left","up"].includes(v.swipeDirection)?Math.min:Math.max,B=R?D(0,Q):0,I=R?0:D(0,H),F=$.pointerType==="touch"?10:2,X={x:B,y:I},fe={originalEvent:$,delta:X};Y?(j.current=X,Fl(BE,d,fe,{discrete:!1})):Rv(X,v.swipeDirection,F)?(j.current=X,Fl(GE,f,fe,{discrete:!1}),$.target.setPointerCapture($.pointerId)):(Math.abs(Q)>F||Math.abs(H)>F)&&(b.current=null)}),onPointerUp:K(e.onPointerUp,$=>{const Q=j.current,H=$.target;if(H.hasPointerCapture($.pointerId)&&H.releasePointerCapture($.pointerId),j.current=null,b.current=null,Q){const Y=$.currentTarget,R={originalEvent:$,delta:Q};Rv(Q,v.swipeDirection,v.swipeThreshold)?Fl(HE,p,R,{discrete:!0}):Fl(VE,h,R,{discrete:!0}),Y.addEventListener("click",D=>D.preventDefault(),{once:!0})}})})})}),v.viewport)})]}):null}),YE=e=>{const{__scopeToast:t,children:r,...n}=e,s=Cu(Eu,t),[o,i]=m.useState(!1),[l,c]=m.useState(!1);return JE(()=>i(!0)),m.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),l?null:a.jsx(sl,{asChild:!0,children:a.jsx(mo,{...n,children:o&&a.jsxs(a.Fragment,{children:[s.label," ",r]})})})},QE="ToastTitle",Gw=m.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e;return a.jsx(ie.div,{...n,ref:t})});Gw.displayName=QE;var XE="ToastDescription",Bw=m.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e;return a.jsx(ie.div,{...n,ref:t})});Bw.displayName=XE;var Vw="ToastAction",Hw=m.forwardRef((e,t)=>{const{altText:r,...n}=e;return r.trim()?a.jsx(qw,{altText:r,asChild:!0,children:a.jsx(Zm,{...n,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${Vw}\`. Expected non-empty \`string\`.`),null)});Hw.displayName=Vw;var Ww="ToastClose",Zm=m.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e,s=qE(Ww,r);return a.jsx(qw,{asChild:!0,children:a.jsx(ie.button,{type:"button",...n,ref:t,onClick:K(e.onClick,s.onClose)})})});Zm.displayName=Ww;var qw=m.forwardRef((e,t)=>{const{__scopeToast:r,altText:n,...s}=e;return a.jsx(ie.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0,...s,ref:t})});function Kw(e){const t=[];return Array.from(e.childNodes).forEach(n=>{if(n.nodeType===n.TEXT_NODE&&n.textContent&&t.push(n.textContent),ZE(n)){const s=n.ariaHidden||n.hidden||n.style.display==="none",o=n.dataset.radixToastAnnounceExclude==="";if(!s)if(o){const i=n.dataset.radixToastAnnounceAlt;i&&t.push(i)}else t.push(...Kw(n))}}),t}function Fl(e,t,r,{discrete:n}){const s=r.originalEvent.currentTarget,o=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:r});t&&s.addEventListener(e,t,{once:!0}),n?Qm(s,o):s.dispatchEvent(o)}var Rv=(e,t,r=0)=>{const n=Math.abs(e.x),s=Math.abs(e.y),o=n>s;return t==="left"||t==="right"?o&&n>r:!o&&s>r};function JE(e=()=>{}){const t=Ke(e);Wr(()=>{let r=0,n=0;return r=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(n)}},[t])}function ZE(e){return e.nodeType===e.ELEMENT_NODE}function e2(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const s=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||s?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function Vd(e){const t=document.activeElement;return e.some(r=>r===t?!0:(r.focus(),document.activeElement!==t))}var t2=Lw,Yw=Uw,Qw=zw,Xw=Gw,Jw=Bw,Zw=Hw,eb=Zm;function tb(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=tb(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function rb(){for(var e,t,r=0,n="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=tb(e))&&(n&&(n+=" "),n+=t);return n}const Mv=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,Av=rb,Pu=(e,t)=>r=>{var n;if((t==null?void 0:t.variants)==null)return Av(e,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:s,defaultVariants:o}=t,i=Object.keys(s).map(u=>{const f=r==null?void 0:r[u],d=o==null?void 0:o[u];if(f===null)return null;const h=Mv(f)||Mv(d);return s[u][h]}),l=r&&Object.entries(r).reduce((u,f)=>{let[d,h]=f;return h===void 0||(u[d]=h),u},{}),c=t==null||(n=t.compoundVariants)===null||n===void 0?void 0:n.reduce((u,f)=>{let{class:d,className:h,...p}=f;return Object.entries(p).every(g=>{let[v,y]=g;return Array.isArray(y)?y.includes({...o,...l}[v]):{...o,...l}[v]===y})?[...u,d,h]:u},[]);return Av(e,i,c,r==null?void 0:r.class,r==null?void 0:r.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r2=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),nb=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var n2={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s2=m.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:s="",children:o,iconNode:i,...l},c)=>m.createElement("svg",{ref:c,...n2,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:nb("lucide",s),...l},[...i.map(([u,f])=>m.createElement(u,f)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=(e,t)=>{const r=m.forwardRef(({className:n,...s},o)=>m.createElement(s2,{ref:o,iconNode:t,className:nb(`lucide-${r2(e)}`,n),...s}));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mh=q("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Js=q("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a2=q("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o2=q("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dv=q("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sb=q("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ab=q("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i2=q("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $r=q("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l2=q("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c2=q("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ob=q("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u2=q("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zs=q("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d2=q("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f2=q("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h2=q("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ts=q("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m2=q("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mt=q("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p2=q("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g2=q("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ib=q("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v2=q("Eraser",[["path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21",key:"182aya"}],["path",{d:"M22 21H7",key:"t4ddhn"}],["path",{d:"m5 11 9 9",key:"1mo9qw"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ep=q("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bc=q("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ph=q("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gh=q("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lb=q("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hc=q("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tu=q("Gamepad2",[["line",{x1:"6",x2:"10",y1:"11",y2:"11",key:"1gktln"}],["line",{x1:"8",x2:"8",y1:"9",y2:"13",key:"qnk9ow"}],["line",{x1:"15",x2:"15.01",y1:"12",y2:"12",key:"krot7o"}],["line",{x1:"18",x2:"18.01",y1:"10",y2:"10",key:"1lcuu1"}],["path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",key:"mfqc10"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ov=q("Hand",[["path",{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1fvzgz"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2",key:"1kc0my"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8",key:"10h0bg"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x2=q("Headphones",[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const al=q("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const po=q("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y2=q("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w2=q("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b2=q("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vc=q("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vh=q("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yi=q("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ln=q("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xh=q("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iv=q("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mc=q("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yh=q("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wh=q("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cb=q("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ub=q("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j2=q("PhoneOff",[["path",{d:"M10.68 13.31a16 16 0 0 0 3.41 2.6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7 2 2 0 0 1 1.72 2v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.42 19.42 0 0 1-3.33-2.67m-2.67-3.34a19.79 19.79 0 0 1-3.07-8.63A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91",key:"z86iuo"}],["line",{x1:"22",x2:"2",y1:"2",y2:"22",key:"11kh81"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const db=q("Pin",[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fb=q("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ru=q("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fi=q("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hb=q("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bh=q("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _2=q("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tp=q("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jh=q("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N2=q("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pc=q("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lv=q("Shuffle",[["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 18h1.973a4 4 0 0 0 3.3-1.7l5.454-8.6a4 4 0 0 1 3.3-1.7H22",key:"1ailkh"}],["path",{d:"M2 6h1.972a4 4 0 0 1 3.6 2.2",key:"km57vx"}],["path",{d:"M22 18h-6.041a4 4 0 0 1-3.3-1.8l-.359-.45",key:"os18l9"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mb=q("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const br=q("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $v=q("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S2=q("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mu=q("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _h=q("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pb=q("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gb=q("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vb=q("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const In=q("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xs=q("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hc=q("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xb=q("UsersRound",[["path",{d:"M18 21a8 8 0 0 0-16 0",key:"3ypg7q"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3",key:"10s06x"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const st=q("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Au=q("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wc=q("VolumeX",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cn=q("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const go=q("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),rp="-",k2=e=>{const t=E2(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:i=>{const l=i.split(rp);return l[0]===""&&l.length!==1&&l.shift(),yb(l,t)||C2(i)},getConflictingClassGroupIds:(i,l)=>{const c=r[i]||[];return l&&n[i]?[...c,...n[i]]:c}}},yb=(e,t)=>{var i;if(e.length===0)return t.classGroupId;const r=e[0],n=t.nextPart.get(r),s=n?yb(e.slice(1),n):void 0;if(s)return s;if(t.validators.length===0)return;const o=e.join(rp);return(i=t.validators.find(({validator:l})=>l(o)))==null?void 0:i.classGroupId},Uv=/^\[(.+)\]$/,C2=e=>{if(Uv.test(e)){const t=Uv.exec(e)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},E2=e=>{const{theme:t,prefix:r}=e,n={nextPart:new Map,validators:[]};return T2(Object.entries(e.classGroups),r).forEach(([o,i])=>{Nh(i,n,o,t)}),n},Nh=(e,t,r,n)=>{e.forEach(s=>{if(typeof s=="string"){const o=s===""?t:Fv(t,s);o.classGroupId=r;return}if(typeof s=="function"){if(P2(s)){Nh(s(n),t,r,n);return}t.validators.push({validator:s,classGroupId:r});return}Object.entries(s).forEach(([o,i])=>{Nh(i,Fv(t,o),r,n)})})},Fv=(e,t)=>{let r=e;return t.split(rp).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},P2=e=>e.isThemeGetter,T2=(e,t)=>t?e.map(([r,n])=>{const s=n.map(o=>typeof o=="string"?t+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(([i,l])=>[t+i,l])):o);return[r,s]}):e,R2=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,n=new Map;const s=(o,i)=>{r.set(o,i),t++,t>e&&(t=0,n=r,r=new Map)};return{get(o){let i=r.get(o);if(i!==void 0)return i;if((i=n.get(o))!==void 0)return s(o,i),i},set(o,i){r.has(o)?r.set(o,i):s(o,i)}}},wb="!",M2=e=>{const{separator:t,experimentalParseClassName:r}=e,n=t.length===1,s=t[0],o=t.length,i=l=>{const c=[];let u=0,f=0,d;for(let y=0;y<l.length;y++){let x=l[y];if(u===0){if(x===s&&(n||l.slice(y,y+o)===t)){c.push(l.slice(f,y)),f=y+o;continue}if(x==="/"){d=y;continue}}x==="["?u++:x==="]"&&u--}const h=c.length===0?l:l.substring(f),p=h.startsWith(wb),g=p?h.substring(1):h,v=d&&d>f?d-f:void 0;return{modifiers:c,hasImportantModifier:p,baseClassName:g,maybePostfixModifierPosition:v}};return r?l=>r({className:l,parseClassName:i}):i},A2=e=>{if(e.length<=1)return e;const t=[];let r=[];return e.forEach(n=>{n[0]==="["?(t.push(...r.sort(),n),r=[]):r.push(n)}),t.push(...r.sort()),t},D2=e=>({cache:R2(e.cacheSize),parseClassName:M2(e),...k2(e)}),O2=/\s+/,I2=(e,t)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:s}=t,o=[],i=e.trim().split(O2);let l="";for(let c=i.length-1;c>=0;c-=1){const u=i[c],{modifiers:f,hasImportantModifier:d,baseClassName:h,maybePostfixModifierPosition:p}=r(u);let g=!!p,v=n(g?h.substring(0,p):h);if(!v){if(!g){l=u+(l.length>0?" "+l:l);continue}if(v=n(h),!v){l=u+(l.length>0?" "+l:l);continue}g=!1}const y=A2(f).join(":"),x=d?y+wb:y,w=x+v;if(o.includes(w))continue;o.push(w);const b=s(v,g);for(let j=0;j<b.length;++j){const _=b[j];o.push(x+_)}l=u+(l.length>0?" "+l:l)}return l};function L2(){let e=0,t,r,n="";for(;e<arguments.length;)(t=arguments[e++])&&(r=bb(t))&&(n&&(n+=" "),n+=r);return n}const bb=e=>{if(typeof e=="string")return e;let t,r="";for(let n=0;n<e.length;n++)e[n]&&(t=bb(e[n]))&&(r&&(r+=" "),r+=t);return r};function $2(e,...t){let r,n,s,o=i;function i(c){const u=t.reduce((f,d)=>d(f),e());return r=D2(u),n=r.cache.get,s=r.cache.set,o=l,l(c)}function l(c){const u=n(c);if(u)return u;const f=I2(c,r);return s(c,f),f}return function(){return o(L2.apply(null,arguments))}}const Le=e=>{const t=r=>r[e]||[];return t.isThemeGetter=!0,t},jb=/^\[(?:([a-z-]+):)?(.+)\]$/i,U2=/^\d+\/\d+$/,F2=new Set(["px","full","screen"]),z2=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,G2=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,B2=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,V2=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,H2=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,xn=e=>Wa(e)||F2.has(e)||U2.test(e),Vn=e=>ko(e,"length",Z2),Wa=e=>!!e&&!Number.isNaN(Number(e)),Hd=e=>ko(e,"number",Wa),Yo=e=>!!e&&Number.isInteger(Number(e)),W2=e=>e.endsWith("%")&&Wa(e.slice(0,-1)),pe=e=>jb.test(e),Hn=e=>z2.test(e),q2=new Set(["length","size","percentage"]),K2=e=>ko(e,q2,_b),Y2=e=>ko(e,"position",_b),Q2=new Set(["image","url"]),X2=e=>ko(e,Q2,tP),J2=e=>ko(e,"",eP),Qo=()=>!0,ko=(e,t,r)=>{const n=jb.exec(e);return n?n[1]?typeof t=="string"?n[1]===t:t.has(n[1]):r(n[2]):!1},Z2=e=>G2.test(e)&&!B2.test(e),_b=()=>!1,eP=e=>V2.test(e),tP=e=>H2.test(e),rP=()=>{const e=Le("colors"),t=Le("spacing"),r=Le("blur"),n=Le("brightness"),s=Le("borderColor"),o=Le("borderRadius"),i=Le("borderSpacing"),l=Le("borderWidth"),c=Le("contrast"),u=Le("grayscale"),f=Le("hueRotate"),d=Le("invert"),h=Le("gap"),p=Le("gradientColorStops"),g=Le("gradientColorStopPositions"),v=Le("inset"),y=Le("margin"),x=Le("opacity"),w=Le("padding"),b=Le("saturate"),j=Le("scale"),_=Le("sepia"),S=Le("skew"),N=Le("space"),k=Le("translate"),C=()=>["auto","contain","none"],P=()=>["auto","hidden","clip","visible","scroll"],T=()=>["auto",pe,t],M=()=>[pe,t],G=()=>["",xn,Vn],$=()=>["auto",Wa,pe],Q=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],H=()=>["solid","dashed","dotted","double","none"],Y=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],R=()=>["start","end","center","between","around","evenly","stretch"],D=()=>["","0",pe],B=()=>["auto","avoid","all","avoid-page","page","left","right","column"],I=()=>[Wa,pe];return{cacheSize:500,separator:":",theme:{colors:[Qo],spacing:[xn,Vn],blur:["none","",Hn,pe],brightness:I(),borderColor:[e],borderRadius:["none","","full",Hn,pe],borderSpacing:M(),borderWidth:G(),contrast:I(),grayscale:D(),hueRotate:I(),invert:D(),gap:M(),gradientColorStops:[e],gradientColorStopPositions:[W2,Vn],inset:T(),margin:T(),opacity:I(),padding:M(),saturate:I(),scale:I(),sepia:D(),skew:I(),space:M(),translate:M()},classGroups:{aspect:[{aspect:["auto","square","video",pe]}],container:["container"],columns:[{columns:[Hn]}],"break-after":[{"break-after":B()}],"break-before":[{"break-before":B()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...Q(),pe]}],overflow:[{overflow:P()}],"overflow-x":[{"overflow-x":P()}],"overflow-y":[{"overflow-y":P()}],overscroll:[{overscroll:C()}],"overscroll-x":[{"overscroll-x":C()}],"overscroll-y":[{"overscroll-y":C()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[v]}],"inset-x":[{"inset-x":[v]}],"inset-y":[{"inset-y":[v]}],start:[{start:[v]}],end:[{end:[v]}],top:[{top:[v]}],right:[{right:[v]}],bottom:[{bottom:[v]}],left:[{left:[v]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Yo,pe]}],basis:[{basis:T()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",pe]}],grow:[{grow:D()}],shrink:[{shrink:D()}],order:[{order:["first","last","none",Yo,pe]}],"grid-cols":[{"grid-cols":[Qo]}],"col-start-end":[{col:["auto",{span:["full",Yo,pe]},pe]}],"col-start":[{"col-start":$()}],"col-end":[{"col-end":$()}],"grid-rows":[{"grid-rows":[Qo]}],"row-start-end":[{row:["auto",{span:[Yo,pe]},pe]}],"row-start":[{"row-start":$()}],"row-end":[{"row-end":$()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",pe]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",pe]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal",...R()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...R(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...R(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[w]}],px:[{px:[w]}],py:[{py:[w]}],ps:[{ps:[w]}],pe:[{pe:[w]}],pt:[{pt:[w]}],pr:[{pr:[w]}],pb:[{pb:[w]}],pl:[{pl:[w]}],m:[{m:[y]}],mx:[{mx:[y]}],my:[{my:[y]}],ms:[{ms:[y]}],me:[{me:[y]}],mt:[{mt:[y]}],mr:[{mr:[y]}],mb:[{mb:[y]}],ml:[{ml:[y]}],"space-x":[{"space-x":[N]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[N]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",pe,t]}],"min-w":[{"min-w":[pe,t,"min","max","fit"]}],"max-w":[{"max-w":[pe,t,"none","full","min","max","fit","prose",{screen:[Hn]},Hn]}],h:[{h:[pe,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[pe,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[pe,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[pe,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Hn,Vn]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Hd]}],"font-family":[{font:[Qo]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",pe]}],"line-clamp":[{"line-clamp":["none",Wa,Hd]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",xn,pe]}],"list-image":[{"list-image":["none",pe]}],"list-style-type":[{list:["none","disc","decimal",pe]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[x]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[x]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...H(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",xn,Vn]}],"underline-offset":[{"underline-offset":["auto",xn,pe]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:M()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",pe]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",pe]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[x]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...Q(),Y2]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",K2]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},X2]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[g]}],"gradient-via-pos":[{via:[g]}],"gradient-to-pos":[{to:[g]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[x]}],"border-style":[{border:[...H(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[x]}],"divide-style":[{divide:H()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...H()]}],"outline-offset":[{"outline-offset":[xn,pe]}],"outline-w":[{outline:[xn,Vn]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:G()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[x]}],"ring-offset-w":[{"ring-offset":[xn,Vn]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Hn,J2]}],"shadow-color":[{shadow:[Qo]}],opacity:[{opacity:[x]}],"mix-blend":[{"mix-blend":[...Y(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":Y()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Hn,pe]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[f]}],invert:[{invert:[d]}],saturate:[{saturate:[b]}],sepia:[{sepia:[_]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[f]}],"backdrop-invert":[{"backdrop-invert":[d]}],"backdrop-opacity":[{"backdrop-opacity":[x]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[_]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[i]}],"border-spacing-x":[{"border-spacing-x":[i]}],"border-spacing-y":[{"border-spacing-y":[i]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",pe]}],duration:[{duration:I()}],ease:[{ease:["linear","in","out","in-out",pe]}],delay:[{delay:I()}],animate:[{animate:["none","spin","ping","pulse","bounce",pe]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[j]}],"scale-x":[{"scale-x":[j]}],"scale-y":[{"scale-y":[j]}],rotate:[{rotate:[Yo,pe]}],"translate-x":[{"translate-x":[k]}],"translate-y":[{"translate-y":[k]}],"skew-x":[{"skew-x":[S]}],"skew-y":[{"skew-y":[S]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",pe]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",pe]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":M()}],"scroll-mx":[{"scroll-mx":M()}],"scroll-my":[{"scroll-my":M()}],"scroll-ms":[{"scroll-ms":M()}],"scroll-me":[{"scroll-me":M()}],"scroll-mt":[{"scroll-mt":M()}],"scroll-mr":[{"scroll-mr":M()}],"scroll-mb":[{"scroll-mb":M()}],"scroll-ml":[{"scroll-ml":M()}],"scroll-p":[{"scroll-p":M()}],"scroll-px":[{"scroll-px":M()}],"scroll-py":[{"scroll-py":M()}],"scroll-ps":[{"scroll-ps":M()}],"scroll-pe":[{"scroll-pe":M()}],"scroll-pt":[{"scroll-pt":M()}],"scroll-pr":[{"scroll-pr":M()}],"scroll-pb":[{"scroll-pb":M()}],"scroll-pl":[{"scroll-pl":M()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",pe]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[xn,Vn,Hd]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},nP=$2(rP);function te(...e){return nP(rb(e))}const sP=t2,Nb=m.forwardRef(({className:e,...t},r)=>a.jsx(Yw,{ref:r,className:te("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));Nb.displayName=Yw.displayName;const aP=Pu("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Sb=m.forwardRef(({className:e,variant:t,...r},n)=>a.jsx(Qw,{ref:n,className:te(aP({variant:t}),e),...r}));Sb.displayName=Qw.displayName;const oP=m.forwardRef(({className:e,...t},r)=>a.jsx(Zw,{ref:r,className:te("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));oP.displayName=Zw.displayName;const kb=m.forwardRef(({className:e,...t},r)=>a.jsx(eb,{ref:r,className:te("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:a.jsx(cn,{className:"h-4 w-4"})}));kb.displayName=eb.displayName;const Cb=m.forwardRef(({className:e,...t},r)=>a.jsx(Xw,{ref:r,className:te("text-sm font-semibold",e),...t}));Cb.displayName=Xw.displayName;const Eb=m.forwardRef(({className:e,...t},r)=>a.jsx(Jw,{ref:r,className:te("text-sm opacity-90",e),...t}));Eb.displayName=Jw.displayName;function iP(){const{toasts:e}=Be();return a.jsxs(sP,{children:[e.map(({id:t,title:r,description:n,action:s,...o})=>a.jsxs(Sb,{...o,children:[a.jsxs("div",{className:"grid gap-1",children:[r&&a.jsx(Cb,{children:r}),n&&a.jsx(Eb,{children:n})]}),s,a.jsx(kb,{})]},t)),a.jsx(Nb,{})]})}var zv=["light","dark"],lP="(prefers-color-scheme: dark)",cP=m.createContext(void 0),uP={setTheme:e=>{},themes:[]},dP=()=>{var e;return(e=m.useContext(cP))!=null?e:uP};m.memo(({forcedTheme:e,storageKey:t,attribute:r,enableSystem:n,enableColorScheme:s,defaultTheme:o,value:i,attrs:l,nonce:c})=>{let u=o==="system",f=r==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${l.map(g=>`'${g}'`).join(",")})`};`:`var d=document.documentElement,n='${r}',s='setAttribute';`,d=s?zv.includes(o)&&o?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${o}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",h=(g,v=!1,y=!0)=>{let x=i?i[g]:g,w=v?g+"|| ''":`'${x}'`,b="";return s&&y&&!v&&zv.includes(g)&&(b+=`d.style.colorScheme = '${g}';`),r==="class"?v||x?b+=`c.add(${w})`:b+="null":x&&(b+=`d[s](n,${w})`),b},p=e?`!function(){${f}${h(e)}}()`:n?`!function(){try{${f}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${u})){var t='${lP}',m=window.matchMedia(t);if(m.media!==t||m.matches){${h("dark")}}else{${h("light")}}}else if(e){${i?`var x=${JSON.stringify(i)};`:""}${h(i?"x[e]":"e",!0)}}${u?"":"else{"+h(o,!1,!1)+"}"}${d}}catch(e){}}()`:`!function(){try{${f}var e=localStorage.getItem('${t}');if(e){${i?`var x=${JSON.stringify(i)};`:""}${h(i?"x[e]":"e",!0)}}else{${h(o,!1,!1)};}${d}}catch(t){}}();`;return m.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:p}})});var fP=e=>{switch(e){case"success":return pP;case"info":return vP;case"warning":return gP;case"error":return xP;default:return null}},hP=Array(12).fill(0),mP=({visible:e})=>A.createElement("div",{className:"sonner-loading-wrapper","data-visible":e},A.createElement("div",{className:"sonner-spinner"},hP.map((t,r)=>A.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),pP=A.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},A.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),gP=A.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},A.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),vP=A.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},A.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),xP=A.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},A.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),yP=()=>{let[e,t]=A.useState(document.hidden);return A.useEffect(()=>{let r=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",r),()=>window.removeEventListener("visibilitychange",r)},[]),e},Sh=1,wP=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:r,...n}=e,s=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:Sh++,o=this.toasts.find(l=>l.id===s),i=e.dismissible===void 0?!0:e.dismissible;return o?this.toasts=this.toasts.map(l=>l.id===s?(this.publish({...l,...e,id:s,title:r}),{...l,...e,id:s,dismissible:i,title:r}):l):this.addToast({title:r,...n,dismissible:i,id:s}),s},this.dismiss=e=>(e||this.toasts.forEach(t=>{this.subscribers.forEach(r=>r({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let r;t.loading!==void 0&&(r=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));let n=e instanceof Promise?e:e(),s=r!==void 0;return n.then(async o=>{if(jP(o)&&!o.ok){s=!1;let i=typeof t.error=="function"?await t.error(`HTTP error! status: ${o.status}`):t.error,l=typeof t.description=="function"?await t.description(`HTTP error! status: ${o.status}`):t.description;this.create({id:r,type:"error",message:i,description:l})}else if(t.success!==void 0){s=!1;let i=typeof t.success=="function"?await t.success(o):t.success,l=typeof t.description=="function"?await t.description(o):t.description;this.create({id:r,type:"success",message:i,description:l})}}).catch(async o=>{if(t.error!==void 0){s=!1;let i=typeof t.error=="function"?await t.error(o):t.error,l=typeof t.description=="function"?await t.description(o):t.description;this.create({id:r,type:"error",message:i,description:l})}}).finally(()=>{var o;s&&(this.dismiss(r),r=void 0),(o=t.finally)==null||o.call(t)}),r},this.custom=(e,t)=>{let r=(t==null?void 0:t.id)||Sh++;return this.create({jsx:e(r),id:r,...t}),r},this.subscribers=[],this.toasts=[]}},Zt=new wP,bP=(e,t)=>{let r=(t==null?void 0:t.id)||Sh++;return Zt.addToast({title:e,...t,id:r}),r},jP=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",_P=bP,NP=()=>Zt.toasts,Ur=Object.assign(_P,{success:Zt.success,info:Zt.info,warning:Zt.warning,error:Zt.error,custom:Zt.custom,message:Zt.message,promise:Zt.promise,dismiss:Zt.dismiss,loading:Zt.loading},{getHistory:NP});function SP(e,{insertAt:t}={}){if(typeof document>"u")return;let r=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t==="top"&&r.firstChild?r.insertBefore(n,r.firstChild):r.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}SP(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999}:where([data-sonner-toaster][data-x-position="right"]){right:max(var(--offset),env(safe-area-inset-right))}:where([data-sonner-toaster][data-x-position="left"]){left:max(var(--offset),env(safe-area-inset-left))}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:max(var(--offset),env(safe-area-inset-top))}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:max(var(--offset),env(safe-area-inset-bottom))}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;background:var(--gray1);color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:0;right:0;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount, 0px));transition:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation:swipe-out .2s ease-out forwards}@keyframes swipe-out{0%{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount)));opacity:1}to{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount) + var(--lift) * -100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;--mobile-offset: 16px;right:var(--mobile-offset);left:var(--mobile-offset);width:100%}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset)}[data-sonner-toaster][data-y-position=bottom]{bottom:20px}[data-sonner-toaster][data-y-position=top]{top:20px}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset);right:var(--mobile-offset);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function zl(e){return e.label!==void 0}var kP=3,CP="32px",EP=4e3,PP=356,TP=14,RP=20,MP=200;function AP(...e){return e.filter(Boolean).join(" ")}var DP=e=>{var t,r,n,s,o,i,l,c,u,f;let{invert:d,toast:h,unstyled:p,interacting:g,setHeights:v,visibleToasts:y,heights:x,index:w,toasts:b,expanded:j,removeToast:_,defaultRichColors:S,closeButton:N,style:k,cancelButtonStyle:C,actionButtonStyle:P,className:T="",descriptionClassName:M="",duration:G,position:$,gap:Q,loadingIcon:H,expandByDefault:Y,classNames:R,icons:D,closeButtonAriaLabel:B="Close toast",pauseWhenPageIsHidden:I,cn:F}=e,[X,fe]=A.useState(!1),[ve,re]=A.useState(!1),[le,De]=A.useState(!1),[Se,Fe]=A.useState(!1),[et,Rt]=A.useState(0),[ne,wt]=A.useState(0),Ee=A.useRef(null),Ne=A.useRef(null),bt=w===0,Oe=w+1<=y,je=h.type,tt=h.dismissible!==!1,Er=h.className||"",dr=h.descriptionClassName||"",Pr=A.useMemo(()=>x.findIndex(V=>V.toastId===h.id)||0,[x,h.id]),pn=A.useMemo(()=>{var V;return(V=h.closeButton)!=null?V:N},[h.closeButton,N]),ee=A.useMemo(()=>h.duration||G||EP,[h.duration,G]),Re=A.useRef(0),jt=A.useRef(0),gn=A.useRef(0),Qr=A.useRef(null),[$o,zn]=$.split("-"),Ds=A.useMemo(()=>x.reduce((V,se,ae)=>ae>=Pr?V:V+se.height,0),[x,Pr]),ma=yP(),Os=h.invert||d,pa=je==="loading";jt.current=A.useMemo(()=>Pr*Q+Ds,[Pr,Ds]),A.useEffect(()=>{fe(!0)},[]),A.useLayoutEffect(()=>{if(!X)return;let V=Ne.current,se=V.style.height;V.style.height="auto";let ae=V.getBoundingClientRect().height;V.style.height=se,wt(ae),v(ye=>ye.find(me=>me.toastId===h.id)?ye.map(me=>me.toastId===h.id?{...me,height:ae}:me):[{toastId:h.id,height:ae,position:h.position},...ye])},[X,h.title,h.description,v,h.id]);let fr=A.useCallback(()=>{re(!0),Rt(jt.current),v(V=>V.filter(se=>se.toastId!==h.id)),setTimeout(()=>{_(h)},MP)},[h,_,v,jt]);A.useEffect(()=>{if(h.promise&&je==="loading"||h.duration===1/0||h.type==="loading")return;let V,se=ee;return j||g||I&&ma?(()=>{if(gn.current<Re.current){let ae=new Date().getTime()-Re.current;se=se-ae}gn.current=new Date().getTime()})():se!==1/0&&(Re.current=new Date().getTime(),V=setTimeout(()=>{var ae;(ae=h.onAutoClose)==null||ae.call(h,h),fr()},se)),()=>clearTimeout(V)},[j,g,Y,h,ee,fr,h.promise,je,I,ma]),A.useEffect(()=>{let V=Ne.current;if(V){let se=V.getBoundingClientRect().height;return wt(se),v(ae=>[{toastId:h.id,height:se,position:h.position},...ae]),()=>v(ae=>ae.filter(ye=>ye.toastId!==h.id))}},[v,h.id]),A.useEffect(()=>{h.delete&&fr()},[fr,h.delete]);function gl(){return D!=null&&D.loading?A.createElement("div",{className:"sonner-loader","data-visible":je==="loading"},D.loading):H?A.createElement("div",{className:"sonner-loader","data-visible":je==="loading"},H):A.createElement(mP,{visible:je==="loading"})}return A.createElement("li",{"aria-live":h.important?"assertive":"polite","aria-atomic":"true",role:"status",tabIndex:0,ref:Ne,className:F(T,Er,R==null?void 0:R.toast,(t=h==null?void 0:h.classNames)==null?void 0:t.toast,R==null?void 0:R.default,R==null?void 0:R[je],(r=h==null?void 0:h.classNames)==null?void 0:r[je]),"data-sonner-toast":"","data-rich-colors":(n=h.richColors)!=null?n:S,"data-styled":!(h.jsx||h.unstyled||p),"data-mounted":X,"data-promise":!!h.promise,"data-removed":ve,"data-visible":Oe,"data-y-position":$o,"data-x-position":zn,"data-index":w,"data-front":bt,"data-swiping":le,"data-dismissible":tt,"data-type":je,"data-invert":Os,"data-swipe-out":Se,"data-expanded":!!(j||Y&&X),style:{"--index":w,"--toasts-before":w,"--z-index":b.length-w,"--offset":`${ve?et:jt.current}px`,"--initial-height":Y?"auto":`${ne}px`,...k,...h.style},onPointerDown:V=>{pa||!tt||(Ee.current=new Date,Rt(jt.current),V.target.setPointerCapture(V.pointerId),V.target.tagName!=="BUTTON"&&(De(!0),Qr.current={x:V.clientX,y:V.clientY}))},onPointerUp:()=>{var V,se,ae,ye;if(Se||!tt)return;Qr.current=null;let me=Number(((V=Ne.current)==null?void 0:V.style.getPropertyValue("--swipe-amount").replace("px",""))||0),rt=new Date().getTime()-((se=Ee.current)==null?void 0:se.getTime()),at=Math.abs(me)/rt;if(Math.abs(me)>=RP||at>.11){Rt(jt.current),(ae=h.onDismiss)==null||ae.call(h,h),fr(),Fe(!0);return}(ye=Ne.current)==null||ye.style.setProperty("--swipe-amount","0px"),De(!1)},onPointerMove:V=>{var se;if(!Qr.current||!tt)return;let ae=V.clientY-Qr.current.y,ye=V.clientX-Qr.current.x,me=($o==="top"?Math.min:Math.max)(0,ae),rt=V.pointerType==="touch"?10:2;Math.abs(me)>rt?(se=Ne.current)==null||se.style.setProperty("--swipe-amount",`${ae}px`):Math.abs(ye)>rt&&(Qr.current=null)}},pn&&!h.jsx?A.createElement("button",{"aria-label":B,"data-disabled":pa,"data-close-button":!0,onClick:pa||!tt?()=>{}:()=>{var V;fr(),(V=h.onDismiss)==null||V.call(h,h)},className:F(R==null?void 0:R.closeButton,(s=h==null?void 0:h.classNames)==null?void 0:s.closeButton)},A.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},A.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),A.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))):null,h.jsx||A.isValidElement(h.title)?h.jsx||h.title:A.createElement(A.Fragment,null,je||h.icon||h.promise?A.createElement("div",{"data-icon":"",className:F(R==null?void 0:R.icon,(o=h==null?void 0:h.classNames)==null?void 0:o.icon)},h.promise||h.type==="loading"&&!h.icon?h.icon||gl():null,h.type!=="loading"?h.icon||(D==null?void 0:D[je])||fP(je):null):null,A.createElement("div",{"data-content":"",className:F(R==null?void 0:R.content,(i=h==null?void 0:h.classNames)==null?void 0:i.content)},A.createElement("div",{"data-title":"",className:F(R==null?void 0:R.title,(l=h==null?void 0:h.classNames)==null?void 0:l.title)},h.title),h.description?A.createElement("div",{"data-description":"",className:F(M,dr,R==null?void 0:R.description,(c=h==null?void 0:h.classNames)==null?void 0:c.description)},h.description):null),A.isValidElement(h.cancel)?h.cancel:h.cancel&&zl(h.cancel)?A.createElement("button",{"data-button":!0,"data-cancel":!0,style:h.cancelButtonStyle||C,onClick:V=>{var se,ae;zl(h.cancel)&&tt&&((ae=(se=h.cancel).onClick)==null||ae.call(se,V),fr())},className:F(R==null?void 0:R.cancelButton,(u=h==null?void 0:h.classNames)==null?void 0:u.cancelButton)},h.cancel.label):null,A.isValidElement(h.action)?h.action:h.action&&zl(h.action)?A.createElement("button",{"data-button":!0,"data-action":!0,style:h.actionButtonStyle||P,onClick:V=>{var se,ae;zl(h.action)&&(V.defaultPrevented||((ae=(se=h.action).onClick)==null||ae.call(se,V),fr()))},className:F(R==null?void 0:R.actionButton,(f=h==null?void 0:h.classNames)==null?void 0:f.actionButton)},h.action.label):null))};function Gv(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}var OP=e=>{let{invert:t,position:r="bottom-right",hotkey:n=["altKey","KeyT"],expand:s,closeButton:o,className:i,offset:l,theme:c="light",richColors:u,duration:f,style:d,visibleToasts:h=kP,toastOptions:p,dir:g=Gv(),gap:v=TP,loadingIcon:y,icons:x,containerAriaLabel:w="Notifications",pauseWhenPageIsHidden:b,cn:j=AP}=e,[_,S]=A.useState([]),N=A.useMemo(()=>Array.from(new Set([r].concat(_.filter(I=>I.position).map(I=>I.position)))),[_,r]),[k,C]=A.useState([]),[P,T]=A.useState(!1),[M,G]=A.useState(!1),[$,Q]=A.useState(c!=="system"?c:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),H=A.useRef(null),Y=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),R=A.useRef(null),D=A.useRef(!1),B=A.useCallback(I=>{var F;(F=_.find(X=>X.id===I.id))!=null&&F.delete||Zt.dismiss(I.id),S(X=>X.filter(({id:fe})=>fe!==I.id))},[_]);return A.useEffect(()=>Zt.subscribe(I=>{if(I.dismiss){S(F=>F.map(X=>X.id===I.id?{...X,delete:!0}:X));return}setTimeout(()=>{Tw.flushSync(()=>{S(F=>{let X=F.findIndex(fe=>fe.id===I.id);return X!==-1?[...F.slice(0,X),{...F[X],...I},...F.slice(X+1)]:[I,...F]})})})}),[]),A.useEffect(()=>{if(c!=="system"){Q(c);return}c==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?Q("dark"):Q("light")),typeof window<"u"&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",({matches:I})=>{Q(I?"dark":"light")})},[c]),A.useEffect(()=>{_.length<=1&&T(!1)},[_]),A.useEffect(()=>{let I=F=>{var X,fe;n.every(ve=>F[ve]||F.code===ve)&&(T(!0),(X=H.current)==null||X.focus()),F.code==="Escape"&&(document.activeElement===H.current||(fe=H.current)!=null&&fe.contains(document.activeElement))&&T(!1)};return document.addEventListener("keydown",I),()=>document.removeEventListener("keydown",I)},[n]),A.useEffect(()=>{if(H.current)return()=>{R.current&&(R.current.focus({preventScroll:!0}),R.current=null,D.current=!1)}},[H.current]),_.length?A.createElement("section",{"aria-label":`${w} ${Y}`,tabIndex:-1},N.map((I,F)=>{var X;let[fe,ve]=I.split("-");return A.createElement("ol",{key:I,dir:g==="auto"?Gv():g,tabIndex:-1,ref:H,className:i,"data-sonner-toaster":!0,"data-theme":$,"data-y-position":fe,"data-x-position":ve,style:{"--front-toast-height":`${((X=k[0])==null?void 0:X.height)||0}px`,"--offset":typeof l=="number"?`${l}px`:l||CP,"--width":`${PP}px`,"--gap":`${v}px`,...d},onBlur:re=>{D.current&&!re.currentTarget.contains(re.relatedTarget)&&(D.current=!1,R.current&&(R.current.focus({preventScroll:!0}),R.current=null))},onFocus:re=>{re.target instanceof HTMLElement&&re.target.dataset.dismissible==="false"||D.current||(D.current=!0,R.current=re.relatedTarget)},onMouseEnter:()=>T(!0),onMouseMove:()=>T(!0),onMouseLeave:()=>{M||T(!1)},onPointerDown:re=>{re.target instanceof HTMLElement&&re.target.dataset.dismissible==="false"||G(!0)},onPointerUp:()=>G(!1)},_.filter(re=>!re.position&&F===0||re.position===I).map((re,le)=>{var De,Se;return A.createElement(DP,{key:re.id,icons:x,index:le,toast:re,defaultRichColors:u,duration:(De=p==null?void 0:p.duration)!=null?De:f,className:p==null?void 0:p.className,descriptionClassName:p==null?void 0:p.descriptionClassName,invert:t,visibleToasts:h,closeButton:(Se=p==null?void 0:p.closeButton)!=null?Se:o,interacting:M,position:I,style:p==null?void 0:p.style,unstyled:p==null?void 0:p.unstyled,classNames:p==null?void 0:p.classNames,cancelButtonStyle:p==null?void 0:p.cancelButtonStyle,actionButtonStyle:p==null?void 0:p.actionButtonStyle,removeToast:B,toasts:_.filter(Fe=>Fe.position==re.position),heights:k.filter(Fe=>Fe.position==re.position),setHeights:C,expandByDefault:s,gap:v,loadingIcon:y,expanded:P,pauseWhenPageIsHidden:b,cn:j})}))})):null};const IP=({...e})=>{const{theme:t="system"}=dP();return a.jsx(OP,{theme:t,className:"toaster group",duration:3e3,toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})};var LP=Cy.useId||(()=>{}),$P=0;function Rn(e){const[t,r]=m.useState(LP());return Wr(()=>{e||r(n=>n??String($P++))},[e]),e||(t?`radix-${t}`:"")}const UP=["top","right","bottom","left"],_s=Math.min,tr=Math.max,qc=Math.round,Gl=Math.floor,Ns=e=>({x:e,y:e}),FP={left:"right",right:"left",bottom:"top",top:"bottom"},zP={start:"end",end:"start"};function kh(e,t,r){return tr(e,_s(t,r))}function Ln(e,t){return typeof e=="function"?e(t):e}function $n(e){return e.split("-")[0]}function Co(e){return e.split("-")[1]}function np(e){return e==="x"?"y":"x"}function sp(e){return e==="y"?"height":"width"}function Ss(e){return["top","bottom"].includes($n(e))?"y":"x"}function ap(e){return np(Ss(e))}function GP(e,t,r){r===void 0&&(r=!1);const n=Co(e),s=ap(e),o=sp(s);let i=s==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[o]>t.floating[o]&&(i=Kc(i)),[i,Kc(i)]}function BP(e){const t=Kc(e);return[Ch(e),t,Ch(t)]}function Ch(e){return e.replace(/start|end/g,t=>zP[t])}function VP(e,t,r){const n=["left","right"],s=["right","left"],o=["top","bottom"],i=["bottom","top"];switch(e){case"top":case"bottom":return r?t?s:n:t?n:s;case"left":case"right":return t?o:i;default:return[]}}function HP(e,t,r,n){const s=Co(e);let o=VP($n(e),r==="start",n);return s&&(o=o.map(i=>i+"-"+s),t&&(o=o.concat(o.map(Ch)))),o}function Kc(e){return e.replace(/left|right|bottom|top/g,t=>FP[t])}function WP(e){return{top:0,right:0,bottom:0,left:0,...e}}function Pb(e){return typeof e!="number"?WP(e):{top:e,right:e,bottom:e,left:e}}function Yc(e){const{x:t,y:r,width:n,height:s}=e;return{width:n,height:s,top:r,left:t,right:t+n,bottom:r+s,x:t,y:r}}function Bv(e,t,r){let{reference:n,floating:s}=e;const o=Ss(t),i=ap(t),l=sp(i),c=$n(t),u=o==="y",f=n.x+n.width/2-s.width/2,d=n.y+n.height/2-s.height/2,h=n[l]/2-s[l]/2;let p;switch(c){case"top":p={x:f,y:n.y-s.height};break;case"bottom":p={x:f,y:n.y+n.height};break;case"right":p={x:n.x+n.width,y:d};break;case"left":p={x:n.x-s.width,y:d};break;default:p={x:n.x,y:n.y}}switch(Co(t)){case"start":p[i]-=h*(r&&u?-1:1);break;case"end":p[i]+=h*(r&&u?-1:1);break}return p}const qP=async(e,t,r)=>{const{placement:n="bottom",strategy:s="absolute",middleware:o=[],platform:i}=r,l=o.filter(Boolean),c=await(i.isRTL==null?void 0:i.isRTL(t));let u=await i.getElementRects({reference:e,floating:t,strategy:s}),{x:f,y:d}=Bv(u,n,c),h=n,p={},g=0;for(let v=0;v<l.length;v++){const{name:y,fn:x}=l[v],{x:w,y:b,data:j,reset:_}=await x({x:f,y:d,initialPlacement:n,placement:h,strategy:s,middlewareData:p,rects:u,platform:i,elements:{reference:e,floating:t}});f=w??f,d=b??d,p={...p,[y]:{...p[y],...j}},_&&g<=50&&(g++,typeof _=="object"&&(_.placement&&(h=_.placement),_.rects&&(u=_.rects===!0?await i.getElementRects({reference:e,floating:t,strategy:s}):_.rects),{x:f,y:d}=Bv(u,h,c)),v=-1)}return{x:f,y:d,placement:h,strategy:s,middlewareData:p}};async function zi(e,t){var r;t===void 0&&(t={});const{x:n,y:s,platform:o,rects:i,elements:l,strategy:c}=e,{boundary:u="clippingAncestors",rootBoundary:f="viewport",elementContext:d="floating",altBoundary:h=!1,padding:p=0}=Ln(t,e),g=Pb(p),y=l[h?d==="floating"?"reference":"floating":d],x=Yc(await o.getClippingRect({element:(r=await(o.isElement==null?void 0:o.isElement(y)))==null||r?y:y.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(l.floating)),boundary:u,rootBoundary:f,strategy:c})),w=d==="floating"?{x:n,y:s,width:i.floating.width,height:i.floating.height}:i.reference,b=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l.floating)),j=await(o.isElement==null?void 0:o.isElement(b))?await(o.getScale==null?void 0:o.getScale(b))||{x:1,y:1}:{x:1,y:1},_=Yc(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:w,offsetParent:b,strategy:c}):w);return{top:(x.top-_.top+g.top)/j.y,bottom:(_.bottom-x.bottom+g.bottom)/j.y,left:(x.left-_.left+g.left)/j.x,right:(_.right-x.right+g.right)/j.x}}const KP=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:n,placement:s,rects:o,platform:i,elements:l,middlewareData:c}=t,{element:u,padding:f=0}=Ln(e,t)||{};if(u==null)return{};const d=Pb(f),h={x:r,y:n},p=ap(s),g=sp(p),v=await i.getDimensions(u),y=p==="y",x=y?"top":"left",w=y?"bottom":"right",b=y?"clientHeight":"clientWidth",j=o.reference[g]+o.reference[p]-h[p]-o.floating[g],_=h[p]-o.reference[p],S=await(i.getOffsetParent==null?void 0:i.getOffsetParent(u));let N=S?S[b]:0;(!N||!await(i.isElement==null?void 0:i.isElement(S)))&&(N=l.floating[b]||o.floating[g]);const k=j/2-_/2,C=N/2-v[g]/2-1,P=_s(d[x],C),T=_s(d[w],C),M=P,G=N-v[g]-T,$=N/2-v[g]/2+k,Q=kh(M,$,G),H=!c.arrow&&Co(s)!=null&&$!==Q&&o.reference[g]/2-($<M?P:T)-v[g]/2<0,Y=H?$<M?$-M:$-G:0;return{[p]:h[p]+Y,data:{[p]:Q,centerOffset:$-Q-Y,...H&&{alignmentOffset:Y}},reset:H}}}),YP=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,n;const{placement:s,middlewareData:o,rects:i,initialPlacement:l,platform:c,elements:u}=t,{mainAxis:f=!0,crossAxis:d=!0,fallbackPlacements:h,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:v=!0,...y}=Ln(e,t);if((r=o.arrow)!=null&&r.alignmentOffset)return{};const x=$n(s),w=Ss(l),b=$n(l)===l,j=await(c.isRTL==null?void 0:c.isRTL(u.floating)),_=h||(b||!v?[Kc(l)]:BP(l)),S=g!=="none";!h&&S&&_.push(...HP(l,v,g,j));const N=[l,..._],k=await zi(t,y),C=[];let P=((n=o.flip)==null?void 0:n.overflows)||[];if(f&&C.push(k[x]),d){const $=GP(s,i,j);C.push(k[$[0]],k[$[1]])}if(P=[...P,{placement:s,overflows:C}],!C.every($=>$<=0)){var T,M;const $=(((T=o.flip)==null?void 0:T.index)||0)+1,Q=N[$];if(Q)return{data:{index:$,overflows:P},reset:{placement:Q}};let H=(M=P.filter(Y=>Y.overflows[0]<=0).sort((Y,R)=>Y.overflows[1]-R.overflows[1])[0])==null?void 0:M.placement;if(!H)switch(p){case"bestFit":{var G;const Y=(G=P.filter(R=>{if(S){const D=Ss(R.placement);return D===w||D==="y"}return!0}).map(R=>[R.placement,R.overflows.filter(D=>D>0).reduce((D,B)=>D+B,0)]).sort((R,D)=>R[1]-D[1])[0])==null?void 0:G[0];Y&&(H=Y);break}case"initialPlacement":H=l;break}if(s!==H)return{reset:{placement:H}}}return{}}}};function Vv(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function Hv(e){return UP.some(t=>e[t]>=0)}const QP=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:r}=t,{strategy:n="referenceHidden",...s}=Ln(e,t);switch(n){case"referenceHidden":{const o=await zi(t,{...s,elementContext:"reference"}),i=Vv(o,r.reference);return{data:{referenceHiddenOffsets:i,referenceHidden:Hv(i)}}}case"escaped":{const o=await zi(t,{...s,altBoundary:!0}),i=Vv(o,r.floating);return{data:{escapedOffsets:i,escaped:Hv(i)}}}default:return{}}}}};async function XP(e,t){const{placement:r,platform:n,elements:s}=e,o=await(n.isRTL==null?void 0:n.isRTL(s.floating)),i=$n(r),l=Co(r),c=Ss(r)==="y",u=["left","top"].includes(i)?-1:1,f=o&&c?-1:1,d=Ln(t,e);let{mainAxis:h,crossAxis:p,alignmentAxis:g}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return l&&typeof g=="number"&&(p=l==="end"?g*-1:g),c?{x:p*f,y:h*u}:{x:h*u,y:p*f}}const JP=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,n;const{x:s,y:o,placement:i,middlewareData:l}=t,c=await XP(t,e);return i===((r=l.offset)==null?void 0:r.placement)&&(n=l.arrow)!=null&&n.alignmentOffset?{}:{x:s+c.x,y:o+c.y,data:{...c,placement:i}}}}},ZP=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:n,placement:s}=t,{mainAxis:o=!0,crossAxis:i=!1,limiter:l={fn:y=>{let{x,y:w}=y;return{x,y:w}}},...c}=Ln(e,t),u={x:r,y:n},f=await zi(t,c),d=Ss($n(s)),h=np(d);let p=u[h],g=u[d];if(o){const y=h==="y"?"top":"left",x=h==="y"?"bottom":"right",w=p+f[y],b=p-f[x];p=kh(w,p,b)}if(i){const y=d==="y"?"top":"left",x=d==="y"?"bottom":"right",w=g+f[y],b=g-f[x];g=kh(w,g,b)}const v=l.fn({...t,[h]:p,[d]:g});return{...v,data:{x:v.x-r,y:v.y-n,enabled:{[h]:o,[d]:i}}}}}},eT=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:r,y:n,placement:s,rects:o,middlewareData:i}=t,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=Ln(e,t),f={x:r,y:n},d=Ss(s),h=np(d);let p=f[h],g=f[d];const v=Ln(l,t),y=typeof v=="number"?{mainAxis:v,crossAxis:0}:{mainAxis:0,crossAxis:0,...v};if(c){const b=h==="y"?"height":"width",j=o.reference[h]-o.floating[b]+y.mainAxis,_=o.reference[h]+o.reference[b]-y.mainAxis;p<j?p=j:p>_&&(p=_)}if(u){var x,w;const b=h==="y"?"width":"height",j=["top","left"].includes($n(s)),_=o.reference[d]-o.floating[b]+(j&&((x=i.offset)==null?void 0:x[d])||0)+(j?0:y.crossAxis),S=o.reference[d]+o.reference[b]+(j?0:((w=i.offset)==null?void 0:w[d])||0)-(j?y.crossAxis:0);g<_?g=_:g>S&&(g=S)}return{[h]:p,[d]:g}}}},tT=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var r,n;const{placement:s,rects:o,platform:i,elements:l}=t,{apply:c=()=>{},...u}=Ln(e,t),f=await zi(t,u),d=$n(s),h=Co(s),p=Ss(s)==="y",{width:g,height:v}=o.floating;let y,x;d==="top"||d==="bottom"?(y=d,x=h===(await(i.isRTL==null?void 0:i.isRTL(l.floating))?"start":"end")?"left":"right"):(x=d,y=h==="end"?"top":"bottom");const w=v-f.top-f.bottom,b=g-f.left-f.right,j=_s(v-f[y],w),_=_s(g-f[x],b),S=!t.middlewareData.shift;let N=j,k=_;if((r=t.middlewareData.shift)!=null&&r.enabled.x&&(k=b),(n=t.middlewareData.shift)!=null&&n.enabled.y&&(N=w),S&&!h){const P=tr(f.left,0),T=tr(f.right,0),M=tr(f.top,0),G=tr(f.bottom,0);p?k=g-2*(P!==0||T!==0?P+T:tr(f.left,f.right)):N=v-2*(M!==0||G!==0?M+G:tr(f.top,f.bottom))}await c({...t,availableWidth:k,availableHeight:N});const C=await i.getDimensions(l.floating);return g!==C.width||v!==C.height?{reset:{rects:!0}}:{}}}};function Du(){return typeof window<"u"}function Eo(e){return Tb(e)?(e.nodeName||"").toLowerCase():"#document"}function ir(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function fn(e){var t;return(t=(Tb(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function Tb(e){return Du()?e instanceof Node||e instanceof ir(e).Node:!1}function qr(e){return Du()?e instanceof Element||e instanceof ir(e).Element:!1}function un(e){return Du()?e instanceof HTMLElement||e instanceof ir(e).HTMLElement:!1}function Wv(e){return!Du()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof ir(e).ShadowRoot}function ol(e){const{overflow:t,overflowX:r,overflowY:n,display:s}=Kr(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!["inline","contents"].includes(s)}function rT(e){return["table","td","th"].includes(Eo(e))}function Ou(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function op(e){const t=ip(),r=qr(e)?Kr(e):e;return r.transform!=="none"||r.perspective!=="none"||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||["transform","perspective","filter"].some(n=>(r.willChange||"").includes(n))||["paint","layout","strict","content"].some(n=>(r.contain||"").includes(n))}function nT(e){let t=ks(e);for(;un(t)&&!vo(t);){if(op(t))return t;if(Ou(t))return null;t=ks(t)}return null}function ip(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function vo(e){return["html","body","#document"].includes(Eo(e))}function Kr(e){return ir(e).getComputedStyle(e)}function Iu(e){return qr(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function ks(e){if(Eo(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Wv(e)&&e.host||fn(e);return Wv(t)?t.host:t}function Rb(e){const t=ks(e);return vo(t)?e.ownerDocument?e.ownerDocument.body:e.body:un(t)&&ol(t)?t:Rb(t)}function Gi(e,t,r){var n;t===void 0&&(t=[]),r===void 0&&(r=!0);const s=Rb(e),o=s===((n=e.ownerDocument)==null?void 0:n.body),i=ir(s);if(o){const l=Eh(i);return t.concat(i,i.visualViewport||[],ol(s)?s:[],l&&r?Gi(l):[])}return t.concat(s,Gi(s,[],r))}function Eh(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function Mb(e){const t=Kr(e);let r=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const s=un(e),o=s?e.offsetWidth:r,i=s?e.offsetHeight:n,l=qc(r)!==o||qc(n)!==i;return l&&(r=o,n=i),{width:r,height:n,$:l}}function lp(e){return qr(e)?e:e.contextElement}function qa(e){const t=lp(e);if(!un(t))return Ns(1);const r=t.getBoundingClientRect(),{width:n,height:s,$:o}=Mb(t);let i=(o?qc(r.width):r.width)/n,l=(o?qc(r.height):r.height)/s;return(!i||!Number.isFinite(i))&&(i=1),(!l||!Number.isFinite(l))&&(l=1),{x:i,y:l}}const sT=Ns(0);function Ab(e){const t=ir(e);return!ip()||!t.visualViewport?sT:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function aT(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==ir(e)?!1:t}function oa(e,t,r,n){t===void 0&&(t=!1),r===void 0&&(r=!1);const s=e.getBoundingClientRect(),o=lp(e);let i=Ns(1);t&&(n?qr(n)&&(i=qa(n)):i=qa(e));const l=aT(o,r,n)?Ab(o):Ns(0);let c=(s.left+l.x)/i.x,u=(s.top+l.y)/i.y,f=s.width/i.x,d=s.height/i.y;if(o){const h=ir(o),p=n&&qr(n)?ir(n):n;let g=h,v=Eh(g);for(;v&&n&&p!==g;){const y=qa(v),x=v.getBoundingClientRect(),w=Kr(v),b=x.left+(v.clientLeft+parseFloat(w.paddingLeft))*y.x,j=x.top+(v.clientTop+parseFloat(w.paddingTop))*y.y;c*=y.x,u*=y.y,f*=y.x,d*=y.y,c+=b,u+=j,g=ir(v),v=Eh(g)}}return Yc({width:f,height:d,x:c,y:u})}function oT(e){let{elements:t,rect:r,offsetParent:n,strategy:s}=e;const o=s==="fixed",i=fn(n),l=t?Ou(t.floating):!1;if(n===i||l&&o)return r;let c={scrollLeft:0,scrollTop:0},u=Ns(1);const f=Ns(0),d=un(n);if((d||!d&&!o)&&((Eo(n)!=="body"||ol(i))&&(c=Iu(n)),un(n))){const h=oa(n);u=qa(n),f.x=h.x+n.clientLeft,f.y=h.y+n.clientTop}return{width:r.width*u.x,height:r.height*u.y,x:r.x*u.x-c.scrollLeft*u.x+f.x,y:r.y*u.y-c.scrollTop*u.y+f.y}}function iT(e){return Array.from(e.getClientRects())}function Ph(e,t){const r=Iu(e).scrollLeft;return t?t.left+r:oa(fn(e)).left+r}function lT(e){const t=fn(e),r=Iu(e),n=e.ownerDocument.body,s=tr(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),o=tr(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let i=-r.scrollLeft+Ph(e);const l=-r.scrollTop;return Kr(n).direction==="rtl"&&(i+=tr(t.clientWidth,n.clientWidth)-s),{width:s,height:o,x:i,y:l}}function cT(e,t){const r=ir(e),n=fn(e),s=r.visualViewport;let o=n.clientWidth,i=n.clientHeight,l=0,c=0;if(s){o=s.width,i=s.height;const u=ip();(!u||u&&t==="fixed")&&(l=s.offsetLeft,c=s.offsetTop)}return{width:o,height:i,x:l,y:c}}function uT(e,t){const r=oa(e,!0,t==="fixed"),n=r.top+e.clientTop,s=r.left+e.clientLeft,o=un(e)?qa(e):Ns(1),i=e.clientWidth*o.x,l=e.clientHeight*o.y,c=s*o.x,u=n*o.y;return{width:i,height:l,x:c,y:u}}function qv(e,t,r){let n;if(t==="viewport")n=cT(e,r);else if(t==="document")n=lT(fn(e));else if(qr(t))n=uT(t,r);else{const s=Ab(e);n={...t,x:t.x-s.x,y:t.y-s.y}}return Yc(n)}function Db(e,t){const r=ks(e);return r===t||!qr(r)||vo(r)?!1:Kr(r).position==="fixed"||Db(r,t)}function dT(e,t){const r=t.get(e);if(r)return r;let n=Gi(e,[],!1).filter(l=>qr(l)&&Eo(l)!=="body"),s=null;const o=Kr(e).position==="fixed";let i=o?ks(e):e;for(;qr(i)&&!vo(i);){const l=Kr(i),c=op(i);!c&&l.position==="fixed"&&(s=null),(o?!c&&!s:!c&&l.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||ol(i)&&!c&&Db(e,i))?n=n.filter(f=>f!==i):s=l,i=ks(i)}return t.set(e,n),n}function fT(e){let{element:t,boundary:r,rootBoundary:n,strategy:s}=e;const i=[...r==="clippingAncestors"?Ou(t)?[]:dT(t,this._c):[].concat(r),n],l=i[0],c=i.reduce((u,f)=>{const d=qv(t,f,s);return u.top=tr(d.top,u.top),u.right=_s(d.right,u.right),u.bottom=_s(d.bottom,u.bottom),u.left=tr(d.left,u.left),u},qv(t,l,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function hT(e){const{width:t,height:r}=Mb(e);return{width:t,height:r}}function mT(e,t,r){const n=un(t),s=fn(t),o=r==="fixed",i=oa(e,!0,o,t);let l={scrollLeft:0,scrollTop:0};const c=Ns(0);if(n||!n&&!o)if((Eo(t)!=="body"||ol(s))&&(l=Iu(t)),n){const p=oa(t,!0,o,t);c.x=p.x+t.clientLeft,c.y=p.y+t.clientTop}else s&&(c.x=Ph(s));let u=0,f=0;if(s&&!n&&!o){const p=s.getBoundingClientRect();f=p.top+l.scrollTop,u=p.left+l.scrollLeft-Ph(s,p)}const d=i.left+l.scrollLeft-c.x-u,h=i.top+l.scrollTop-c.y-f;return{x:d,y:h,width:i.width,height:i.height}}function Wd(e){return Kr(e).position==="static"}function Kv(e,t){if(!un(e)||Kr(e).position==="fixed")return null;if(t)return t(e);let r=e.offsetParent;return fn(e)===r&&(r=r.ownerDocument.body),r}function Ob(e,t){const r=ir(e);if(Ou(e))return r;if(!un(e)){let s=ks(e);for(;s&&!vo(s);){if(qr(s)&&!Wd(s))return s;s=ks(s)}return r}let n=Kv(e,t);for(;n&&rT(n)&&Wd(n);)n=Kv(n,t);return n&&vo(n)&&Wd(n)&&!op(n)?r:n||nT(e)||r}const pT=async function(e){const t=this.getOffsetParent||Ob,r=this.getDimensions,n=await r(e.floating);return{reference:mT(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function gT(e){return Kr(e).direction==="rtl"}const vT={convertOffsetParentRelativeRectToViewportRelativeRect:oT,getDocumentElement:fn,getClippingRect:fT,getOffsetParent:Ob,getElementRects:pT,getClientRects:iT,getDimensions:hT,getScale:qa,isElement:qr,isRTL:gT};function xT(e,t){let r=null,n;const s=fn(e);function o(){var l;clearTimeout(n),(l=r)==null||l.disconnect(),r=null}function i(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),o();const{left:u,top:f,width:d,height:h}=e.getBoundingClientRect();if(l||t(),!d||!h)return;const p=Gl(f),g=Gl(s.clientWidth-(u+d)),v=Gl(s.clientHeight-(f+h)),y=Gl(u),w={rootMargin:-p+"px "+-g+"px "+-v+"px "+-y+"px",threshold:tr(0,_s(1,c))||1};let b=!0;function j(_){const S=_[0].intersectionRatio;if(S!==c){if(!b)return i();S?i(!1,S):n=setTimeout(()=>{i(!1,1e-7)},1e3)}b=!1}try{r=new IntersectionObserver(j,{...w,root:s.ownerDocument})}catch{r=new IntersectionObserver(j,w)}r.observe(e)}return i(!0),o}function yT(e,t,r,n){n===void 0&&(n={});const{ancestorScroll:s=!0,ancestorResize:o=!0,elementResize:i=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=n,u=lp(e),f=s||o?[...u?Gi(u):[],...Gi(t)]:[];f.forEach(x=>{s&&x.addEventListener("scroll",r,{passive:!0}),o&&x.addEventListener("resize",r)});const d=u&&l?xT(u,r):null;let h=-1,p=null;i&&(p=new ResizeObserver(x=>{let[w]=x;w&&w.target===u&&p&&(p.unobserve(t),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var b;(b=p)==null||b.observe(t)})),r()}),u&&!c&&p.observe(u),p.observe(t));let g,v=c?oa(e):null;c&&y();function y(){const x=oa(e);v&&(x.x!==v.x||x.y!==v.y||x.width!==v.width||x.height!==v.height)&&r(),v=x,g=requestAnimationFrame(y)}return r(),()=>{var x;f.forEach(w=>{s&&w.removeEventListener("scroll",r),o&&w.removeEventListener("resize",r)}),d==null||d(),(x=p)==null||x.disconnect(),p=null,c&&cancelAnimationFrame(g)}}const wT=JP,bT=ZP,jT=YP,_T=tT,NT=QP,Yv=KP,ST=eT,kT=(e,t,r)=>{const n=new Map,s={platform:vT,...r},o={...s.platform,_c:n};return qP(e,t,{...s,platform:o})};var gc=typeof document<"u"?m.useLayoutEffect:m.useEffect;function Qc(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,n,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(n=r;n--!==0;)if(!Qc(e[n],t[n]))return!1;return!0}if(s=Object.keys(e),r=s.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(t,s[n]))return!1;for(n=r;n--!==0;){const o=s[n];if(!(o==="_owner"&&e.$$typeof)&&!Qc(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function Ib(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Qv(e,t){const r=Ib(e);return Math.round(t*r)/r}function qd(e){const t=m.useRef(e);return gc(()=>{t.current=e}),t}function CT(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:n=[],platform:s,elements:{reference:o,floating:i}={},transform:l=!0,whileElementsMounted:c,open:u}=e,[f,d]=m.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[h,p]=m.useState(n);Qc(h,n)||p(n);const[g,v]=m.useState(null),[y,x]=m.useState(null),w=m.useCallback(R=>{R!==S.current&&(S.current=R,v(R))},[]),b=m.useCallback(R=>{R!==N.current&&(N.current=R,x(R))},[]),j=o||g,_=i||y,S=m.useRef(null),N=m.useRef(null),k=m.useRef(f),C=c!=null,P=qd(c),T=qd(s),M=qd(u),G=m.useCallback(()=>{if(!S.current||!N.current)return;const R={placement:t,strategy:r,middleware:h};T.current&&(R.platform=T.current),kT(S.current,N.current,R).then(D=>{const B={...D,isPositioned:M.current!==!1};$.current&&!Qc(k.current,B)&&(k.current=B,nl.flushSync(()=>{d(B)}))})},[h,t,r,T,M]);gc(()=>{u===!1&&k.current.isPositioned&&(k.current.isPositioned=!1,d(R=>({...R,isPositioned:!1})))},[u]);const $=m.useRef(!1);gc(()=>($.current=!0,()=>{$.current=!1}),[]),gc(()=>{if(j&&(S.current=j),_&&(N.current=_),j&&_){if(P.current)return P.current(j,_,G);G()}},[j,_,G,P,C]);const Q=m.useMemo(()=>({reference:S,floating:N,setReference:w,setFloating:b}),[w,b]),H=m.useMemo(()=>({reference:j,floating:_}),[j,_]),Y=m.useMemo(()=>{const R={position:r,left:0,top:0};if(!H.floating)return R;const D=Qv(H.floating,f.x),B=Qv(H.floating,f.y);return l?{...R,transform:"translate("+D+"px, "+B+"px)",...Ib(H.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:D,top:B}},[r,l,H.floating,f.x,f.y]);return m.useMemo(()=>({...f,update:G,refs:Q,elements:H,floatingStyles:Y}),[f,G,Q,H,Y])}const ET=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:n,padding:s}=typeof e=="function"?e(r):e;return n&&t(n)?n.current!=null?Yv({element:n.current,padding:s}).fn(r):{}:n?Yv({element:n,padding:s}).fn(r):{}}}},PT=(e,t)=>({...wT(e),options:[e,t]}),TT=(e,t)=>({...bT(e),options:[e,t]}),RT=(e,t)=>({...ST(e),options:[e,t]}),MT=(e,t)=>({...jT(e),options:[e,t]}),AT=(e,t)=>({..._T(e),options:[e,t]}),DT=(e,t)=>({...NT(e),options:[e,t]}),OT=(e,t)=>({...ET(e),options:[e,t]});var IT="Arrow",Lb=m.forwardRef((e,t)=>{const{children:r,width:n=10,height:s=5,...o}=e;return a.jsx(ie.svg,{...o,ref:t,width:n,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:a.jsx("polygon",{points:"0,0 30,0 15,10"})})});Lb.displayName=IT;var LT=Lb;function $T(e,t=[]){let r=[];function n(o,i){const l=m.createContext(i),c=r.length;r=[...r,i];function u(d){const{scope:h,children:p,...g}=d,v=(h==null?void 0:h[e][c])||l,y=m.useMemo(()=>g,Object.values(g));return a.jsx(v.Provider,{value:y,children:p})}function f(d,h){const p=(h==null?void 0:h[e][c])||l,g=m.useContext(p);if(g)return g;if(i!==void 0)return i;throw new Error(`\`${d}\` must be used within \`${o}\``)}return u.displayName=o+"Provider",[u,f]}const s=()=>{const o=r.map(i=>m.createContext(i));return function(l){const c=(l==null?void 0:l[e])||o;return m.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return s.scopeName=e,[n,UT(s,...t)]}function UT(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(o){const i=n.reduce((l,{useScope:c,scopeName:u})=>{const d=c(o)[`__scope${u}`];return{...l,...d}},{});return m.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return r.scopeName=t.scopeName,r}function Lu(e){const[t,r]=m.useState(void 0);return Wr(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const n=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const o=s[0];let i,l;if("borderBoxSize"in o){const c=o.borderBoxSize,u=Array.isArray(c)?c[0]:c;i=u.inlineSize,l=u.blockSize}else i=e.offsetWidth,l=e.offsetHeight;r({width:i,height:l})});return n.observe(e,{box:"border-box"}),()=>n.unobserve(e)}else r(void 0)},[e]),t}var cp="Popper",[$b,Po]=$T(cp),[FT,Ub]=$b(cp),Fb=e=>{const{__scopePopper:t,children:r}=e,[n,s]=m.useState(null);return a.jsx(FT,{scope:t,anchor:n,onAnchorChange:s,children:r})};Fb.displayName=cp;var zb="PopperAnchor",Gb=m.forwardRef((e,t)=>{const{__scopePopper:r,virtualRef:n,...s}=e,o=Ub(zb,r),i=m.useRef(null),l=_e(t,i);return m.useEffect(()=>{o.onAnchorChange((n==null?void 0:n.current)||i.current)}),n?null:a.jsx(ie.div,{...s,ref:l})});Gb.displayName=zb;var up="PopperContent",[zT,GT]=$b(up),Bb=m.forwardRef((e,t)=>{var le,De,Se,Fe,et,Rt;const{__scopePopper:r,side:n="bottom",sideOffset:s=0,align:o="center",alignOffset:i=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:f=0,sticky:d="partial",hideWhenDetached:h=!1,updatePositionStrategy:p="optimized",onPlaced:g,...v}=e,y=Ub(up,r),[x,w]=m.useState(null),b=_e(t,ne=>w(ne)),[j,_]=m.useState(null),S=Lu(j),N=(S==null?void 0:S.width)??0,k=(S==null?void 0:S.height)??0,C=n+(o!=="center"?"-"+o:""),P=typeof f=="number"?f:{top:0,right:0,bottom:0,left:0,...f},T=Array.isArray(u)?u:[u],M=T.length>0,G={padding:P,boundary:T.filter(VT),altBoundary:M},{refs:$,floatingStyles:Q,placement:H,isPositioned:Y,middlewareData:R}=CT({strategy:"fixed",placement:C,whileElementsMounted:(...ne)=>yT(...ne,{animationFrame:p==="always"}),elements:{reference:y.anchor},middleware:[PT({mainAxis:s+k,alignmentAxis:i}),c&&TT({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?RT():void 0,...G}),c&&MT({...G}),AT({...G,apply:({elements:ne,rects:wt,availableWidth:Ee,availableHeight:Ne})=>{const{width:bt,height:Oe}=wt.reference,je=ne.floating.style;je.setProperty("--radix-popper-available-width",`${Ee}px`),je.setProperty("--radix-popper-available-height",`${Ne}px`),je.setProperty("--radix-popper-anchor-width",`${bt}px`),je.setProperty("--radix-popper-anchor-height",`${Oe}px`)}}),j&&OT({element:j,padding:l}),HT({arrowWidth:N,arrowHeight:k}),h&&DT({strategy:"referenceHidden",...G})]}),[D,B]=Wb(H),I=Ke(g);Wr(()=>{Y&&(I==null||I())},[Y,I]);const F=(le=R.arrow)==null?void 0:le.x,X=(De=R.arrow)==null?void 0:De.y,fe=((Se=R.arrow)==null?void 0:Se.centerOffset)!==0,[ve,re]=m.useState();return Wr(()=>{x&&re(window.getComputedStyle(x).zIndex)},[x]),a.jsx("div",{ref:$.setFloating,"data-radix-popper-content-wrapper":"",style:{...Q,transform:Y?Q.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ve,"--radix-popper-transform-origin":[(Fe=R.transformOrigin)==null?void 0:Fe.x,(et=R.transformOrigin)==null?void 0:et.y].join(" "),...((Rt=R.hide)==null?void 0:Rt.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:a.jsx(zT,{scope:r,placedSide:D,onArrowChange:_,arrowX:F,arrowY:X,shouldHideArrow:fe,children:a.jsx(ie.div,{"data-side":D,"data-align":B,...v,ref:b,style:{...v.style,animation:Y?void 0:"none"}})})})});Bb.displayName=up;var Vb="PopperArrow",BT={top:"bottom",right:"left",bottom:"top",left:"right"},Hb=m.forwardRef(function(t,r){const{__scopePopper:n,...s}=t,o=GT(Vb,n),i=BT[o.placedSide];return a.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[i]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:a.jsx(LT,{...s,ref:r,style:{...s.style,display:"block"}})})});Hb.displayName=Vb;function VT(e){return e!==null}var HT=e=>({name:"transformOrigin",options:e,fn(t){var y,x,w;const{placement:r,rects:n,middlewareData:s}=t,i=((y=s.arrow)==null?void 0:y.centerOffset)!==0,l=i?0:e.arrowWidth,c=i?0:e.arrowHeight,[u,f]=Wb(r),d={start:"0%",center:"50%",end:"100%"}[f],h=(((x=s.arrow)==null?void 0:x.x)??0)+l/2,p=(((w=s.arrow)==null?void 0:w.y)??0)+c/2;let g="",v="";return u==="bottom"?(g=i?d:`${h}px`,v=`${-c}px`):u==="top"?(g=i?d:`${h}px`,v=`${n.floating.height+c}px`):u==="right"?(g=`${-c}px`,v=i?d:`${p}px`):u==="left"&&(g=`${n.floating.width+c}px`,v=i?d:`${p}px`),{data:{x:g,y:v}}}});function Wb(e){const[t,r="center"]=e.split("-");return[t,r]}var dp=Fb,$u=Gb,fp=Bb,hp=Hb,[Uu,s$]=kr("Tooltip",[Po]),Fu=Po(),qb="TooltipProvider",WT=700,Th="tooltip.open",[qT,mp]=Uu(qb),Kb=e=>{const{__scopeTooltip:t,delayDuration:r=WT,skipDelayDuration:n=300,disableHoverableContent:s=!1,children:o}=e,[i,l]=m.useState(!0),c=m.useRef(!1),u=m.useRef(0);return m.useEffect(()=>{const f=u.current;return()=>window.clearTimeout(f)},[]),a.jsx(qT,{scope:t,isOpenDelayed:i,delayDuration:r,onOpen:m.useCallback(()=>{window.clearTimeout(u.current),l(!1)},[]),onClose:m.useCallback(()=>{window.clearTimeout(u.current),u.current=window.setTimeout(()=>l(!0),n)},[n]),isPointerInTransitRef:c,onPointerInTransitChange:m.useCallback(f=>{c.current=f},[]),disableHoverableContent:s,children:o})};Kb.displayName=qb;var zu="Tooltip",[KT,Gu]=Uu(zu),Yb=e=>{const{__scopeTooltip:t,children:r,open:n,defaultOpen:s=!1,onOpenChange:o,disableHoverableContent:i,delayDuration:l}=e,c=mp(zu,e.__scopeTooltip),u=Fu(t),[f,d]=m.useState(null),h=Rn(),p=m.useRef(0),g=i??c.disableHoverableContent,v=l??c.delayDuration,y=m.useRef(!1),[x=!1,w]=dn({prop:n,defaultProp:s,onChange:N=>{N?(c.onOpen(),document.dispatchEvent(new CustomEvent(Th))):c.onClose(),o==null||o(N)}}),b=m.useMemo(()=>x?y.current?"delayed-open":"instant-open":"closed",[x]),j=m.useCallback(()=>{window.clearTimeout(p.current),p.current=0,y.current=!1,w(!0)},[w]),_=m.useCallback(()=>{window.clearTimeout(p.current),p.current=0,w(!1)},[w]),S=m.useCallback(()=>{window.clearTimeout(p.current),p.current=window.setTimeout(()=>{y.current=!0,w(!0),p.current=0},v)},[v,w]);return m.useEffect(()=>()=>{p.current&&(window.clearTimeout(p.current),p.current=0)},[]),a.jsx(dp,{...u,children:a.jsx(KT,{scope:t,contentId:h,open:x,stateAttribute:b,trigger:f,onTriggerChange:d,onTriggerEnter:m.useCallback(()=>{c.isOpenDelayed?S():j()},[c.isOpenDelayed,S,j]),onTriggerLeave:m.useCallback(()=>{g?_():(window.clearTimeout(p.current),p.current=0)},[_,g]),onOpen:j,onClose:_,disableHoverableContent:g,children:r})})};Yb.displayName=zu;var Rh="TooltipTrigger",Qb=m.forwardRef((e,t)=>{const{__scopeTooltip:r,...n}=e,s=Gu(Rh,r),o=mp(Rh,r),i=Fu(r),l=m.useRef(null),c=_e(t,l,s.onTriggerChange),u=m.useRef(!1),f=m.useRef(!1),d=m.useCallback(()=>u.current=!1,[]);return m.useEffect(()=>()=>document.removeEventListener("pointerup",d),[d]),a.jsx($u,{asChild:!0,...i,children:a.jsx(ie.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...n,ref:c,onPointerMove:K(e.onPointerMove,h=>{h.pointerType!=="touch"&&!f.current&&!o.isPointerInTransitRef.current&&(s.onTriggerEnter(),f.current=!0)}),onPointerLeave:K(e.onPointerLeave,()=>{s.onTriggerLeave(),f.current=!1}),onPointerDown:K(e.onPointerDown,()=>{u.current=!0,document.addEventListener("pointerup",d,{once:!0})}),onFocus:K(e.onFocus,()=>{u.current||s.onOpen()}),onBlur:K(e.onBlur,s.onClose),onClick:K(e.onClick,s.onClose)})})});Qb.displayName=Rh;var YT="TooltipPortal",[a$,QT]=Uu(YT,{forceMount:void 0}),xo="TooltipContent",Xb=m.forwardRef((e,t)=>{const r=QT(xo,e.__scopeTooltip),{forceMount:n=r.forceMount,side:s="top",...o}=e,i=Gu(xo,e.__scopeTooltip);return a.jsx(gt,{present:n||i.open,children:i.disableHoverableContent?a.jsx(Jb,{side:s,...o,ref:t}):a.jsx(XT,{side:s,...o,ref:t})})}),XT=m.forwardRef((e,t)=>{const r=Gu(xo,e.__scopeTooltip),n=mp(xo,e.__scopeTooltip),s=m.useRef(null),o=_e(t,s),[i,l]=m.useState(null),{trigger:c,onClose:u}=r,f=s.current,{onPointerInTransitChange:d}=n,h=m.useCallback(()=>{l(null),d(!1)},[d]),p=m.useCallback((g,v)=>{const y=g.currentTarget,x={x:g.clientX,y:g.clientY},w=tR(x,y.getBoundingClientRect()),b=rR(x,w),j=nR(v.getBoundingClientRect()),_=aR([...b,...j]);l(_),d(!0)},[d]);return m.useEffect(()=>()=>h(),[h]),m.useEffect(()=>{if(c&&f){const g=y=>p(y,f),v=y=>p(y,c);return c.addEventListener("pointerleave",g),f.addEventListener("pointerleave",v),()=>{c.removeEventListener("pointerleave",g),f.removeEventListener("pointerleave",v)}}},[c,f,p,h]),m.useEffect(()=>{if(i){const g=v=>{const y=v.target,x={x:v.clientX,y:v.clientY},w=(c==null?void 0:c.contains(y))||(f==null?void 0:f.contains(y)),b=!sR(x,i);w?h():b&&(h(),u())};return document.addEventListener("pointermove",g),()=>document.removeEventListener("pointermove",g)}},[c,f,i,u,h]),a.jsx(Jb,{...e,ref:o})}),[JT,ZT]=Uu(zu,{isInside:!1}),Jb=m.forwardRef((e,t)=>{const{__scopeTooltip:r,children:n,"aria-label":s,onEscapeKeyDown:o,onPointerDownOutside:i,...l}=e,c=Gu(xo,r),u=Fu(r),{onClose:f}=c;return m.useEffect(()=>(document.addEventListener(Th,f),()=>document.removeEventListener(Th,f)),[f]),m.useEffect(()=>{if(c.trigger){const d=h=>{const p=h.target;p!=null&&p.contains(c.trigger)&&f()};return window.addEventListener("scroll",d,{capture:!0}),()=>window.removeEventListener("scroll",d,{capture:!0})}},[c.trigger,f]),a.jsx(So,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:o,onPointerDownOutside:i,onFocusOutside:d=>d.preventDefault(),onDismiss:f,children:a.jsxs(fp,{"data-state":c.stateAttribute,...u,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[a.jsx(Mw,{children:n}),a.jsx(JT,{scope:r,isInside:!0,children:a.jsx(LE,{id:c.contentId,role:"tooltip",children:s||n})})]})})});Xb.displayName=xo;var Zb="TooltipArrow",eR=m.forwardRef((e,t)=>{const{__scopeTooltip:r,...n}=e,s=Fu(r);return ZT(Zb,r).isInside?null:a.jsx(hp,{...s,...n,ref:t})});eR.displayName=Zb;function tR(e,t){const r=Math.abs(t.top-e.y),n=Math.abs(t.bottom-e.y),s=Math.abs(t.right-e.x),o=Math.abs(t.left-e.x);switch(Math.min(r,n,s,o)){case o:return"left";case s:return"right";case r:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function rR(e,t,r=5){const n=[];switch(t){case"top":n.push({x:e.x-r,y:e.y+r},{x:e.x+r,y:e.y+r});break;case"bottom":n.push({x:e.x-r,y:e.y-r},{x:e.x+r,y:e.y-r});break;case"left":n.push({x:e.x+r,y:e.y-r},{x:e.x+r,y:e.y+r});break;case"right":n.push({x:e.x-r,y:e.y-r},{x:e.x-r,y:e.y+r});break}return n}function nR(e){const{top:t,right:r,bottom:n,left:s}=e;return[{x:s,y:t},{x:r,y:t},{x:r,y:n},{x:s,y:n}]}function sR(e,t){const{x:r,y:n}=e;let s=!1;for(let o=0,i=t.length-1;o<t.length;i=o++){const l=t[o].x,c=t[o].y,u=t[i].x,f=t[i].y;c>n!=f>n&&r<(u-l)*(n-c)/(f-c)+l&&(s=!s)}return s}function aR(e){const t=e.slice();return t.sort((r,n)=>r.x<n.x?-1:r.x>n.x?1:r.y<n.y?-1:r.y>n.y?1:0),oR(t)}function oR(e){if(e.length<=1)return e.slice();const t=[];for(let n=0;n<e.length;n++){const s=e[n];for(;t.length>=2;){const o=t[t.length-1],i=t[t.length-2];if((o.x-i.x)*(s.y-i.y)>=(o.y-i.y)*(s.x-i.x))t.pop();else break}t.push(s)}t.pop();const r=[];for(let n=e.length-1;n>=0;n--){const s=e[n];for(;r.length>=2;){const o=r[r.length-1],i=r[r.length-2];if((o.x-i.x)*(s.y-i.y)>=(o.y-i.y)*(s.x-i.x))r.pop();else break}r.push(s)}return r.pop(),t.length===1&&r.length===1&&t[0].x===r[0].x&&t[0].y===r[0].y?t:t.concat(r)}var iR=Kb,lR=Yb,cR=Qb,e1=Xb;const uR=iR,dR=lR,fR=cR,t1=m.forwardRef(({className:e,sideOffset:t=4,...r},n)=>a.jsx(e1,{ref:n,sideOffset:t,className:te("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r}));t1.displayName=e1.displayName;var Bu=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Vu=typeof window>"u"||"Deno"in globalThis;function Or(){}function hR(e,t){return typeof e=="function"?e(t):e}function mR(e){return typeof e=="number"&&e>=0&&e!==1/0}function pR(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Xv(e,t){return typeof e=="function"?e(t):e}function gR(e,t){return typeof e=="function"?e(t):e}function Jv(e,t){const{type:r="all",exact:n,fetchStatus:s,predicate:o,queryKey:i,stale:l}=e;if(i){if(n){if(t.queryHash!==pp(i,t.options))return!1}else if(!Vi(t.queryKey,i))return!1}if(r!=="all"){const c=t.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||s&&s!==t.state.fetchStatus||o&&!o(t))}function Zv(e,t){const{exact:r,status:n,predicate:s,mutationKey:o}=e;if(o){if(!t.options.mutationKey)return!1;if(r){if(Bi(t.options.mutationKey)!==Bi(o))return!1}else if(!Vi(t.options.mutationKey,o))return!1}return!(n&&t.state.status!==n||s&&!s(t))}function pp(e,t){return((t==null?void 0:t.queryKeyHashFn)||Bi)(e)}function Bi(e){return JSON.stringify(e,(t,r)=>Mh(r)?Object.keys(r).sort().reduce((n,s)=>(n[s]=r[s],n),{}):r)}function Vi(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?!Object.keys(t).some(r=>!Vi(e[r],t[r])):!1}function r1(e,t){if(e===t)return e;const r=ex(e)&&ex(t);if(r||Mh(e)&&Mh(t)){const n=r?e:Object.keys(e),s=n.length,o=r?t:Object.keys(t),i=o.length,l=r?[]:{};let c=0;for(let u=0;u<i;u++){const f=r?u:o[u];(!r&&n.includes(f)||r)&&e[f]===void 0&&t[f]===void 0?(l[f]=void 0,c++):(l[f]=r1(e[f],t[f]),l[f]===e[f]&&e[f]!==void 0&&c++)}return s===i&&c===s?e:l}return t}function ex(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Mh(e){if(!tx(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!tx(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function tx(e){return Object.prototype.toString.call(e)==="[object Object]"}function vR(e){return new Promise(t=>{setTimeout(t,e)})}function xR(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?r1(e,t):t}function yR(e,t,r=0){const n=[...e,t];return r&&n.length>r?n.slice(1):n}function wR(e,t,r=0){const n=[t,...e];return r&&n.length>r?n.slice(0,-1):n}var gp=Symbol();function n1(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===gp?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var Ws,ts,Xa,ly,bR=(ly=class extends Bu{constructor(){super();Pe(this,Ws);Pe(this,ts);Pe(this,Xa);xe(this,Xa,t=>{if(!Vu&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){L(this,ts)||this.setEventListener(L(this,Xa))}onUnsubscribe(){var t;this.hasListeners()||((t=L(this,ts))==null||t.call(this),xe(this,ts,void 0))}setEventListener(t){var r;xe(this,Xa,t),(r=L(this,ts))==null||r.call(this),xe(this,ts,t(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(t){L(this,Ws)!==t&&(xe(this,Ws,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){var t;return typeof L(this,Ws)=="boolean"?L(this,Ws):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Ws=new WeakMap,ts=new WeakMap,Xa=new WeakMap,ly),s1=new bR,Ja,rs,Za,cy,jR=(cy=class extends Bu{constructor(){super();Pe(this,Ja,!0);Pe(this,rs);Pe(this,Za);xe(this,Za,t=>{if(!Vu&&window.addEventListener){const r=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){L(this,rs)||this.setEventListener(L(this,Za))}onUnsubscribe(){var t;this.hasListeners()||((t=L(this,rs))==null||t.call(this),xe(this,rs,void 0))}setEventListener(t){var r;xe(this,Za,t),(r=L(this,rs))==null||r.call(this),xe(this,rs,t(this.setOnline.bind(this)))}setOnline(t){L(this,Ja)!==t&&(xe(this,Ja,t),this.listeners.forEach(n=>{n(t)}))}isOnline(){return L(this,Ja)}},Ja=new WeakMap,rs=new WeakMap,Za=new WeakMap,cy),Xc=new jR;function _R(){let e,t;const r=new Promise((s,o)=>{e=s,t=o});r.status="pending",r.catch(()=>{});function n(s){Object.assign(r,s),delete r.resolve,delete r.reject}return r.resolve=s=>{n({status:"fulfilled",value:s}),e(s)},r.reject=s=>{n({status:"rejected",reason:s}),t(s)},r}function NR(e){return Math.min(1e3*2**e,3e4)}function a1(e){return(e??"online")==="online"?Xc.isOnline():!0}var o1=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function Kd(e){return e instanceof o1}function i1(e){let t=!1,r=0,n=!1,s;const o=_R(),i=v=>{var y;n||(h(new o1(v)),(y=e.abort)==null||y.call(e))},l=()=>{t=!0},c=()=>{t=!1},u=()=>s1.isFocused()&&(e.networkMode==="always"||Xc.isOnline())&&e.canRun(),f=()=>a1(e.networkMode)&&e.canRun(),d=v=>{var y;n||(n=!0,(y=e.onSuccess)==null||y.call(e,v),s==null||s(),o.resolve(v))},h=v=>{var y;n||(n=!0,(y=e.onError)==null||y.call(e,v),s==null||s(),o.reject(v))},p=()=>new Promise(v=>{var y;s=x=>{(n||u())&&v(x)},(y=e.onPause)==null||y.call(e)}).then(()=>{var v;s=void 0,n||(v=e.onContinue)==null||v.call(e)}),g=()=>{if(n)return;let v;const y=r===0?e.initialPromise:void 0;try{v=y??e.fn()}catch(x){v=Promise.reject(x)}Promise.resolve(v).then(d).catch(x=>{var S;if(n)return;const w=e.retry??(Vu?0:3),b=e.retryDelay??NR,j=typeof b=="function"?b(r,x):b,_=w===!0||typeof w=="number"&&r<w||typeof w=="function"&&w(r,x);if(t||!_){h(x);return}r++,(S=e.onFail)==null||S.call(e,r,x),vR(j).then(()=>u()?void 0:p()).then(()=>{t?h(x):g()})})};return{promise:o,cancel:i,continue:()=>(s==null||s(),o),cancelRetry:l,continueRetry:c,canStart:f,start:()=>(f()?g():p().then(g),o)}}function SR(){let e=[],t=0,r=l=>{l()},n=l=>{l()},s=l=>setTimeout(l,0);const o=l=>{t?e.push(l):s(()=>{r(l)})},i=()=>{const l=e;e=[],l.length&&s(()=>{n(()=>{l.forEach(c=>{r(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||i()}return c},batchCalls:l=>(...c)=>{o(()=>{l(...c)})},schedule:o,setNotifyFunction:l=>{r=l},setBatchNotifyFunction:l=>{n=l},setScheduler:l=>{s=l}}}var It=SR(),qs,uy,l1=(uy=class{constructor(){Pe(this,qs)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),mR(this.gcTime)&&xe(this,qs,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Vu?1/0:5*60*1e3))}clearGcTimeout(){L(this,qs)&&(clearTimeout(L(this,qs)),xe(this,qs,void 0))}},qs=new WeakMap,uy),eo,to,mr,Ct,Qi,Ks,Ir,wn,dy,kR=(dy=class extends l1{constructor(t){super();Pe(this,Ir);Pe(this,eo);Pe(this,to);Pe(this,mr);Pe(this,Ct);Pe(this,Qi);Pe(this,Ks);xe(this,Ks,!1),xe(this,Qi,t.defaultOptions),this.setOptions(t.options),this.observers=[],xe(this,mr,t.cache),this.queryKey=t.queryKey,this.queryHash=t.queryHash,xe(this,eo,ER(this.options)),this.state=t.state??L(this,eo),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=L(this,Ct))==null?void 0:t.promise}setOptions(t){this.options={...L(this,Qi),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&L(this,mr).remove(this)}setData(t,r){const n=xR(this.state.data,t,this.options);return _t(this,Ir,wn).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(t,r){_t(this,Ir,wn).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var n,s;const r=(n=L(this,Ct))==null?void 0:n.promise;return(s=L(this,Ct))==null||s.cancel(t),r?r.then(Or).catch(Or):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(L(this,eo))}isActive(){return this.observers.some(t=>gR(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===gp||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(t=0){return this.state.isInvalidated||this.state.data===void 0||!pR(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(n=>n.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=L(this,Ct))==null||r.continue()}onOnline(){var r;const t=this.observers.find(n=>n.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=L(this,Ct))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),L(this,mr).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(L(this,Ct)&&(L(this,Ks)?L(this,Ct).cancel({revert:!0}):L(this,Ct).cancelRetry()),this.scheduleGc()),L(this,mr).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||_t(this,Ir,wn).call(this,{type:"invalidate"})}fetch(t,r){var c,u,f;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(L(this,Ct))return L(this,Ct).continueRetry(),L(this,Ct).promise}if(t&&this.setOptions(t),!this.options.queryFn){const d=this.observers.find(h=>h.options.queryFn);d&&this.setOptions(d.options)}const n=new AbortController,s=d=>{Object.defineProperty(d,"signal",{enumerable:!0,get:()=>(xe(this,Ks,!0),n.signal)})},o=()=>{const d=n1(this.options,r),h={queryKey:this.queryKey,meta:this.meta};return s(h),xe(this,Ks,!1),this.options.persister?this.options.persister(d,h,this):d(h)},i={fetchOptions:r,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:o};s(i),(c=this.options.behavior)==null||c.onFetch(i,this),xe(this,to,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=i.fetchOptions)==null?void 0:u.meta))&&_t(this,Ir,wn).call(this,{type:"fetch",meta:(f=i.fetchOptions)==null?void 0:f.meta});const l=d=>{var h,p,g,v;Kd(d)&&d.silent||_t(this,Ir,wn).call(this,{type:"error",error:d}),Kd(d)||((p=(h=L(this,mr).config).onError)==null||p.call(h,d,this),(v=(g=L(this,mr).config).onSettled)==null||v.call(g,this.state.data,d,this)),this.scheduleGc()};return xe(this,Ct,i1({initialPromise:r==null?void 0:r.initialPromise,fn:i.fetchFn,abort:n.abort.bind(n),onSuccess:d=>{var h,p,g,v;if(d===void 0){l(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(d)}catch(y){l(y);return}(p=(h=L(this,mr).config).onSuccess)==null||p.call(h,d,this),(v=(g=L(this,mr).config).onSettled)==null||v.call(g,d,this.state.error,this),this.scheduleGc()},onError:l,onFail:(d,h)=>{_t(this,Ir,wn).call(this,{type:"failed",failureCount:d,error:h})},onPause:()=>{_t(this,Ir,wn).call(this,{type:"pause"})},onContinue:()=>{_t(this,Ir,wn).call(this,{type:"continue"})},retry:i.options.retry,retryDelay:i.options.retryDelay,networkMode:i.options.networkMode,canRun:()=>!0})),L(this,Ct).start()}},eo=new WeakMap,to=new WeakMap,mr=new WeakMap,Ct=new WeakMap,Qi=new WeakMap,Ks=new WeakMap,Ir=new WeakSet,wn=function(t){const r=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...CR(n.data,this.options),fetchMeta:t.meta??null};case"success":return{...n,data:t.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=t.error;return Kd(s)&&s.revert&&L(this,to)?{...L(this,to),fetchStatus:"idle"}:{...n,error:s,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=r(this.state),It.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),L(this,mr).notify({query:this,type:"updated",action:t})})},dy);function CR(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:a1(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function ER(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,n=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var en,fy,PR=(fy=class extends Bu{constructor(t={}){super();Pe(this,en);this.config=t,xe(this,en,new Map)}build(t,r,n){const s=r.queryKey,o=r.queryHash??pp(s,r);let i=this.get(o);return i||(i=new kR({cache:this,queryKey:s,queryHash:o,options:t.defaultQueryOptions(r),state:n,defaultOptions:t.getQueryDefaults(s)}),this.add(i)),i}add(t){L(this,en).has(t.queryHash)||(L(this,en).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const r=L(this,en).get(t.queryHash);r&&(t.destroy(),r===t&&L(this,en).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){It.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return L(this,en).get(t)}getAll(){return[...L(this,en).values()]}find(t){const r={exact:!0,...t};return this.getAll().find(n=>Jv(r,n))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(n=>Jv(t,n)):r}notify(t){It.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){It.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){It.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},en=new WeakMap,fy),tn,At,Ys,rn,qn,hy,TR=(hy=class extends l1{constructor(t){super();Pe(this,rn);Pe(this,tn);Pe(this,At);Pe(this,Ys);this.mutationId=t.mutationId,xe(this,At,t.mutationCache),xe(this,tn,[]),this.state=t.state||RR(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){L(this,tn).includes(t)||(L(this,tn).push(t),this.clearGcTimeout(),L(this,At).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){xe(this,tn,L(this,tn).filter(r=>r!==t)),this.scheduleGc(),L(this,At).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){L(this,tn).length||(this.state.status==="pending"?this.scheduleGc():L(this,At).remove(this))}continue(){var t;return((t=L(this,Ys))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var s,o,i,l,c,u,f,d,h,p,g,v,y,x,w,b,j,_,S,N;xe(this,Ys,i1({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(k,C)=>{_t(this,rn,qn).call(this,{type:"failed",failureCount:k,error:C})},onPause:()=>{_t(this,rn,qn).call(this,{type:"pause"})},onContinue:()=>{_t(this,rn,qn).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>L(this,At).canRun(this)}));const r=this.state.status==="pending",n=!L(this,Ys).canStart();try{if(!r){_t(this,rn,qn).call(this,{type:"pending",variables:t,isPaused:n}),await((o=(s=L(this,At).config).onMutate)==null?void 0:o.call(s,t,this));const C=await((l=(i=this.options).onMutate)==null?void 0:l.call(i,t));C!==this.state.context&&_t(this,rn,qn).call(this,{type:"pending",context:C,variables:t,isPaused:n})}const k=await L(this,Ys).start();return await((u=(c=L(this,At).config).onSuccess)==null?void 0:u.call(c,k,t,this.state.context,this)),await((d=(f=this.options).onSuccess)==null?void 0:d.call(f,k,t,this.state.context)),await((p=(h=L(this,At).config).onSettled)==null?void 0:p.call(h,k,null,this.state.variables,this.state.context,this)),await((v=(g=this.options).onSettled)==null?void 0:v.call(g,k,null,t,this.state.context)),_t(this,rn,qn).call(this,{type:"success",data:k}),k}catch(k){try{throw await((x=(y=L(this,At).config).onError)==null?void 0:x.call(y,k,t,this.state.context,this)),await((b=(w=this.options).onError)==null?void 0:b.call(w,k,t,this.state.context)),await((_=(j=L(this,At).config).onSettled)==null?void 0:_.call(j,void 0,k,this.state.variables,this.state.context,this)),await((N=(S=this.options).onSettled)==null?void 0:N.call(S,void 0,k,t,this.state.context)),k}finally{_t(this,rn,qn).call(this,{type:"error",error:k})}}finally{L(this,At).runNext(this)}}},tn=new WeakMap,At=new WeakMap,Ys=new WeakMap,rn=new WeakSet,qn=function(t){const r=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),It.batch(()=>{L(this,tn).forEach(n=>{n.onMutationUpdate(t)}),L(this,At).notify({mutation:this,type:"updated",action:t})})},hy);function RR(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Jt,Xi,my,MR=(my=class extends Bu{constructor(t={}){super();Pe(this,Jt);Pe(this,Xi);this.config=t,xe(this,Jt,new Map),xe(this,Xi,Date.now())}build(t,r,n){const s=new TR({mutationCache:this,mutationId:++bl(this,Xi)._,options:t.defaultMutationOptions(r),state:n});return this.add(s),s}add(t){const r=Bl(t),n=L(this,Jt).get(r)??[];n.push(t),L(this,Jt).set(r,n),this.notify({type:"added",mutation:t})}remove(t){var n;const r=Bl(t);if(L(this,Jt).has(r)){const s=(n=L(this,Jt).get(r))==null?void 0:n.filter(o=>o!==t);s&&(s.length===0?L(this,Jt).delete(r):L(this,Jt).set(r,s))}this.notify({type:"removed",mutation:t})}canRun(t){var n;const r=(n=L(this,Jt).get(Bl(t)))==null?void 0:n.find(s=>s.state.status==="pending");return!r||r===t}runNext(t){var n;const r=(n=L(this,Jt).get(Bl(t)))==null?void 0:n.find(s=>s!==t&&s.state.isPaused);return(r==null?void 0:r.continue())??Promise.resolve()}clear(){It.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}getAll(){return[...L(this,Jt).values()].flat()}find(t){const r={exact:!0,...t};return this.getAll().find(n=>Zv(r,n))}findAll(t={}){return this.getAll().filter(r=>Zv(t,r))}notify(t){It.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return It.batch(()=>Promise.all(t.map(r=>r.continue().catch(Or))))}},Jt=new WeakMap,Xi=new WeakMap,my);function Bl(e){var t;return((t=e.options.scope)==null?void 0:t.id)??String(e.mutationId)}function rx(e){return{onFetch:(t,r)=>{var f,d,h,p,g;const n=t.options,s=(h=(d=(f=t.fetchOptions)==null?void 0:f.meta)==null?void 0:d.fetchMore)==null?void 0:h.direction,o=((p=t.state.data)==null?void 0:p.pages)||[],i=((g=t.state.data)==null?void 0:g.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const u=async()=>{let v=!1;const y=b=>{Object.defineProperty(b,"signal",{enumerable:!0,get:()=>(t.signal.aborted?v=!0:t.signal.addEventListener("abort",()=>{v=!0}),t.signal)})},x=n1(t.options,t.fetchOptions),w=async(b,j,_)=>{if(v)return Promise.reject();if(j==null&&b.pages.length)return Promise.resolve(b);const S={queryKey:t.queryKey,pageParam:j,direction:_?"backward":"forward",meta:t.options.meta};y(S);const N=await x(S),{maxPages:k}=t.options,C=_?wR:yR;return{pages:C(b.pages,N,k),pageParams:C(b.pageParams,j,k)}};if(s&&o.length){const b=s==="backward",j=b?AR:nx,_={pages:o,pageParams:i},S=j(n,_);l=await w(_,S,b)}else{const b=e??o.length;do{const j=c===0?i[0]??n.initialPageParam:nx(n,l);if(c>0&&j==null)break;l=await w(l,j),c++}while(c<b)}return l};t.options.persister?t.fetchFn=()=>{var v,y;return(y=(v=t.options).persister)==null?void 0:y.call(v,u,{queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r)}:t.fetchFn=u}}}function nx(e,{pages:t,pageParams:r}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,r[n],r):void 0}function AR(e,{pages:t,pageParams:r}){var n;return t.length>0?(n=e.getPreviousPageParam)==null?void 0:n.call(e,t[0],t,r[0],r):void 0}var Xe,ns,ss,ro,no,as,so,ao,py,DR=(py=class{constructor(e={}){Pe(this,Xe);Pe(this,ns);Pe(this,ss);Pe(this,ro);Pe(this,no);Pe(this,as);Pe(this,so);Pe(this,ao);xe(this,Xe,e.queryCache||new PR),xe(this,ns,e.mutationCache||new MR),xe(this,ss,e.defaultOptions||{}),xe(this,ro,new Map),xe(this,no,new Map),xe(this,as,0)}mount(){bl(this,as)._++,L(this,as)===1&&(xe(this,so,s1.subscribe(async e=>{e&&(await this.resumePausedMutations(),L(this,Xe).onFocus())})),xe(this,ao,Xc.subscribe(async e=>{e&&(await this.resumePausedMutations(),L(this,Xe).onOnline())})))}unmount(){var e,t;bl(this,as)._--,L(this,as)===0&&((e=L(this,so))==null||e.call(this),xe(this,so,void 0),(t=L(this,ao))==null||t.call(this),xe(this,ao,void 0))}isFetching(e){return L(this,Xe).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return L(this,ns).findAll({...e,status:"pending"}).length}getQueryData(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=L(this,Xe).get(t.queryHash))==null?void 0:r.state.data}ensureQueryData(e){const t=this.getQueryData(e.queryKey);if(t===void 0)return this.fetchQuery(e);{const r=this.defaultQueryOptions(e),n=L(this,Xe).build(this,r);return e.revalidateIfStale&&n.isStaleByTime(Xv(r.staleTime,n))&&this.prefetchQuery(r),Promise.resolve(t)}}getQueriesData(e){return L(this,Xe).findAll(e).map(({queryKey:t,state:r})=>{const n=r.data;return[t,n]})}setQueryData(e,t,r){const n=this.defaultQueryOptions({queryKey:e}),s=L(this,Xe).get(n.queryHash),o=s==null?void 0:s.state.data,i=hR(t,o);if(i!==void 0)return L(this,Xe).build(this,n).setData(i,{...r,manual:!0})}setQueriesData(e,t,r){return It.batch(()=>L(this,Xe).findAll(e).map(({queryKey:n})=>[n,this.setQueryData(n,t,r)]))}getQueryState(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=L(this,Xe).get(t.queryHash))==null?void 0:r.state}removeQueries(e){const t=L(this,Xe);It.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=L(this,Xe),n={type:"active",...e};return It.batch(()=>(r.findAll(e).forEach(s=>{s.reset()}),this.refetchQueries(n,t)))}cancelQueries(e={},t={}){const r={revert:!0,...t},n=It.batch(()=>L(this,Xe).findAll(e).map(s=>s.cancel(r)));return Promise.all(n).then(Or).catch(Or)}invalidateQueries(e={},t={}){return It.batch(()=>{if(L(this,Xe).findAll(e).forEach(n=>{n.invalidate()}),e.refetchType==="none")return Promise.resolve();const r={...e,type:e.refetchType??e.type??"active"};return this.refetchQueries(r,t)})}refetchQueries(e={},t){const r={...t,cancelRefetch:(t==null?void 0:t.cancelRefetch)??!0},n=It.batch(()=>L(this,Xe).findAll(e).filter(s=>!s.isDisabled()).map(s=>{let o=s.fetch(void 0,r);return r.throwOnError||(o=o.catch(Or)),s.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(n).then(Or)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=L(this,Xe).build(this,t);return r.isStaleByTime(Xv(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Or).catch(Or)}fetchInfiniteQuery(e){return e.behavior=rx(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Or).catch(Or)}ensureInfiniteQueryData(e){return e.behavior=rx(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Xc.isOnline()?L(this,ns).resumePausedMutations():Promise.resolve()}getQueryCache(){return L(this,Xe)}getMutationCache(){return L(this,ns)}getDefaultOptions(){return L(this,ss)}setDefaultOptions(e){xe(this,ss,e)}setQueryDefaults(e,t){L(this,ro).set(Bi(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...L(this,ro).values()];let r={};return t.forEach(n=>{Vi(e,n.queryKey)&&(r={...r,...n.defaultOptions})}),r}setMutationDefaults(e,t){L(this,no).set(Bi(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...L(this,no).values()];let r={};return t.forEach(n=>{Vi(e,n.mutationKey)&&(r={...r,...n.defaultOptions})}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...L(this,ss).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=pp(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.enabled!==!0&&t.queryFn===gp&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...L(this,ss).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){L(this,Xe).clear(),L(this,ns).clear()}},Xe=new WeakMap,ns=new WeakMap,ss=new WeakMap,ro=new WeakMap,no=new WeakMap,as=new WeakMap,so=new WeakMap,ao=new WeakMap,py),OR=m.createContext(void 0),IR=({client:e,children:t})=>(m.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),a.jsx(OR.Provider,{value:e,children:t}));/**
 * @remix-run/router v1.20.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Hi(){return Hi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Hi.apply(this,arguments)}var ls;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(ls||(ls={}));const sx="popstate";function LR(e){e===void 0&&(e={});function t(n,s){let{pathname:o,search:i,hash:l}=n.location;return Ah("",{pathname:o,search:i,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:u1(s)}return UR(t,r,null,e)}function ut(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function c1(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function $R(){return Math.random().toString(36).substr(2,8)}function ax(e,t){return{usr:e.state,key:e.key,idx:t}}function Ah(e,t,r,n){return r===void 0&&(r=null),Hi({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?To(t):t,{state:r,key:t&&t.key||n||$R()})}function u1(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function To(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function UR(e,t,r,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:o=!1}=n,i=s.history,l=ls.Pop,c=null,u=f();u==null&&(u=0,i.replaceState(Hi({},i.state,{idx:u}),""));function f(){return(i.state||{idx:null}).idx}function d(){l=ls.Pop;let y=f(),x=y==null?null:y-u;u=y,c&&c({action:l,location:v.location,delta:x})}function h(y,x){l=ls.Push;let w=Ah(v.location,y,x);u=f()+1;let b=ax(w,u),j=v.createHref(w);try{i.pushState(b,"",j)}catch(_){if(_ instanceof DOMException&&_.name==="DataCloneError")throw _;s.location.assign(j)}o&&c&&c({action:l,location:v.location,delta:1})}function p(y,x){l=ls.Replace;let w=Ah(v.location,y,x);u=f();let b=ax(w,u),j=v.createHref(w);i.replaceState(b,"",j),o&&c&&c({action:l,location:v.location,delta:0})}function g(y){let x=s.location.origin!=="null"?s.location.origin:s.location.href,w=typeof y=="string"?y:u1(y);return w=w.replace(/ $/,"%20"),ut(x,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,x)}let v={get action(){return l},get location(){return e(s,i)},listen(y){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(sx,d),c=y,()=>{s.removeEventListener(sx,d),c=null}},createHref(y){return t(s,y)},createURL:g,encodeLocation(y){let x=g(y);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:h,replace:p,go(y){return i.go(y)}};return v}var ox;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(ox||(ox={}));function FR(e,t,r){return r===void 0&&(r="/"),zR(e,t,r,!1)}function zR(e,t,r,n){let s=typeof t=="string"?To(t):t,o=h1(s.pathname||"/",r);if(o==null)return null;let i=d1(e);GR(i);let l=null;for(let c=0;l==null&&c<i.length;++c){let u=ZR(o);l=XR(i[c],u,n)}return l}function d1(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let s=(o,i,l)=>{let c={relativePath:l===void 0?o.path||"":l,caseSensitive:o.caseSensitive===!0,childrenIndex:i,route:o};c.relativePath.startsWith("/")&&(ut(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let u=ea([n,c.relativePath]),f=r.concat(c);o.children&&o.children.length>0&&(ut(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),d1(o.children,t,f,u)),!(o.path==null&&!o.index)&&t.push({path:u,score:YR(u,o.index),routesMeta:f})};return e.forEach((o,i)=>{var l;if(o.path===""||!((l=o.path)!=null&&l.includes("?")))s(o,i);else for(let c of f1(o.path))s(o,i,c)}),t}function f1(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,s=r.endsWith("?"),o=r.replace(/\?$/,"");if(n.length===0)return s?[o,""]:[o];let i=f1(n.join("/")),l=[];return l.push(...i.map(c=>c===""?o:[o,c].join("/"))),s&&l.push(...i),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function GR(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:QR(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const BR=/^:[\w-]+$/,VR=3,HR=2,WR=1,qR=10,KR=-2,ix=e=>e==="*";function YR(e,t){let r=e.split("/"),n=r.length;return r.some(ix)&&(n+=KR),t&&(n+=HR),r.filter(s=>!ix(s)).reduce((s,o)=>s+(BR.test(o)?VR:o===""?WR:qR),n)}function QR(e,t){return e.length===t.length&&e.slice(0,-1).every((n,s)=>n===t[s])?e[e.length-1]-t[t.length-1]:0}function XR(e,t,r){let{routesMeta:n}=e,s={},o="/",i=[];for(let l=0;l<n.length;++l){let c=n[l],u=l===n.length-1,f=o==="/"?t:t.slice(o.length)||"/",d=lx({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},f),h=c.route;if(!d&&u&&r&&!n[n.length-1].route.index&&(d=lx({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},f)),!d)return null;Object.assign(s,d.params),i.push({params:s,pathname:ea([o,d.pathname]),pathnameBase:aM(ea([o,d.pathnameBase])),route:h}),d.pathnameBase!=="/"&&(o=ea([o,d.pathnameBase]))}return i}function lx(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=JR(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let o=s[0],i=o.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:n.reduce((u,f,d)=>{let{paramName:h,isOptional:p}=f;if(h==="*"){let v=l[d]||"";i=o.slice(0,o.length-v.length).replace(/(.)\/+$/,"$1")}const g=l[d];return p&&!g?u[h]=void 0:u[h]=(g||"").replace(/%2F/g,"/"),u},{}),pathname:o,pathnameBase:i,pattern:e}}function JR(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),c1(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),n]}function ZR(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return c1(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function h1(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function eM(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:s=""}=typeof e=="string"?To(e):e;return{pathname:r?r.startsWith("/")?r:tM(r,t):t,search:oM(n),hash:iM(s)}}function tM(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function Yd(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function rM(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function nM(e,t){let r=rM(e);return t?r.map((n,s)=>s===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function sM(e,t,r,n){n===void 0&&(n=!1);let s;typeof e=="string"?s=To(e):(s=Hi({},e),ut(!s.pathname||!s.pathname.includes("?"),Yd("?","pathname","search",s)),ut(!s.pathname||!s.pathname.includes("#"),Yd("#","pathname","hash",s)),ut(!s.search||!s.search.includes("#"),Yd("#","search","hash",s)));let o=e===""||s.pathname==="",i=o?"/":s.pathname,l;if(i==null)l=r;else{let d=t.length-1;if(!n&&i.startsWith("..")){let h=i.split("/");for(;h[0]==="..";)h.shift(),d-=1;s.pathname=h.join("/")}l=d>=0?t[d]:"/"}let c=eM(s,l),u=i&&i!=="/"&&i.endsWith("/"),f=(o||i===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||f)&&(c.pathname+="/"),c}const ea=e=>e.join("/").replace(/\/\/+/g,"/"),aM=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),oM=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,iM=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function lM(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const m1=["post","put","patch","delete"];new Set(m1);const cM=["get",...m1];new Set(cM);/**
 * React Router v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Wi(){return Wi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Wi.apply(this,arguments)}const vp=m.createContext(null),uM=m.createContext(null),Hu=m.createContext(null),Wu=m.createContext(null),Ro=m.createContext({outlet:null,matches:[],isDataRoute:!1}),p1=m.createContext(null);function qu(){return m.useContext(Wu)!=null}function Mo(){return qu()||ut(!1),m.useContext(Wu).location}function g1(e){m.useContext(Hu).static||m.useLayoutEffect(e)}function Ao(){let{isDataRoute:e}=m.useContext(Ro);return e?_M():dM()}function dM(){qu()||ut(!1);let e=m.useContext(vp),{basename:t,future:r,navigator:n}=m.useContext(Hu),{matches:s}=m.useContext(Ro),{pathname:o}=Mo(),i=JSON.stringify(nM(s,r.v7_relativeSplatPath)),l=m.useRef(!1);return g1(()=>{l.current=!0}),m.useCallback(function(u,f){if(f===void 0&&(f={}),!l.current)return;if(typeof u=="number"){n.go(u);return}let d=sM(u,JSON.parse(i),o,f.relative==="path");e==null&&t!=="/"&&(d.pathname=d.pathname==="/"?t:ea([t,d.pathname])),(f.replace?n.replace:n.push)(d,f.state,f)},[t,n,i,o,e])}function fM(e,t){return hM(e,t)}function hM(e,t,r,n){qu()||ut(!1);let{navigator:s}=m.useContext(Hu),{matches:o}=m.useContext(Ro),i=o[o.length-1],l=i?i.params:{};i&&i.pathname;let c=i?i.pathnameBase:"/";i&&i.route;let u=Mo(),f;if(t){var d;let y=typeof t=="string"?To(t):t;c==="/"||(d=y.pathname)!=null&&d.startsWith(c)||ut(!1),f=y}else f=u;let h=f.pathname||"/",p=h;if(c!=="/"){let y=c.replace(/^\//,"").split("/");p="/"+h.replace(/^\//,"").split("/").slice(y.length).join("/")}let g=FR(e,{pathname:p}),v=xM(g&&g.map(y=>Object.assign({},y,{params:Object.assign({},l,y.params),pathname:ea([c,s.encodeLocation?s.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?c:ea([c,s.encodeLocation?s.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),o,r,n);return t&&v?m.createElement(Wu.Provider,{value:{location:Wi({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:ls.Pop}},v):v}function mM(){let e=jM(),t=lM(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return m.createElement(m.Fragment,null,m.createElement("h2",null,"Unexpected Application Error!"),m.createElement("h3",{style:{fontStyle:"italic"}},t),r?m.createElement("pre",{style:s},r):null,null)}const pM=m.createElement(mM,null);class gM extends m.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?m.createElement(Ro.Provider,{value:this.props.routeContext},m.createElement(p1.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function vM(e){let{routeContext:t,match:r,children:n}=e,s=m.useContext(vp);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),m.createElement(Ro.Provider,{value:t},n)}function xM(e,t,r,n){var s;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var o;if(!r)return null;if(r.errors)e=r.matches;else if((o=n)!=null&&o.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let i=e,l=(s=r)==null?void 0:s.errors;if(l!=null){let f=i.findIndex(d=>d.route.id&&(l==null?void 0:l[d.route.id])!==void 0);f>=0||ut(!1),i=i.slice(0,Math.min(i.length,f+1))}let c=!1,u=-1;if(r&&n&&n.v7_partialHydration)for(let f=0;f<i.length;f++){let d=i[f];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(u=f),d.route.id){let{loaderData:h,errors:p}=r,g=d.route.loader&&h[d.route.id]===void 0&&(!p||p[d.route.id]===void 0);if(d.route.lazy||g){c=!0,u>=0?i=i.slice(0,u+1):i=[i[0]];break}}}return i.reduceRight((f,d,h)=>{let p,g=!1,v=null,y=null;r&&(p=l&&d.route.id?l[d.route.id]:void 0,v=d.route.errorElement||pM,c&&(u<0&&h===0?(g=!0,y=null):u===h&&(g=!0,y=d.route.hydrateFallbackElement||null)));let x=t.concat(i.slice(0,h+1)),w=()=>{let b;return p?b=v:g?b=y:d.route.Component?b=m.createElement(d.route.Component,null):d.route.element?b=d.route.element:b=f,m.createElement(vM,{match:d,routeContext:{outlet:f,matches:x,isDataRoute:r!=null},children:b})};return r&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?m.createElement(gM,{location:r.location,revalidation:r.revalidation,component:v,error:p,children:w(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):w()},null)}var v1=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(v1||{}),Jc=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Jc||{});function yM(e){let t=m.useContext(vp);return t||ut(!1),t}function wM(e){let t=m.useContext(uM);return t||ut(!1),t}function bM(e){let t=m.useContext(Ro);return t||ut(!1),t}function x1(e){let t=bM(),r=t.matches[t.matches.length-1];return r.route.id||ut(!1),r.route.id}function jM(){var e;let t=m.useContext(p1),r=wM(Jc.UseRouteError),n=x1(Jc.UseRouteError);return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function _M(){let{router:e}=yM(v1.UseNavigateStable),t=x1(Jc.UseNavigateStable),r=m.useRef(!1);return g1(()=>{r.current=!0}),m.useCallback(function(s,o){o===void 0&&(o={}),r.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,Wi({fromRouteId:t},o)))},[e,t])}function Jr(e){ut(!1)}function NM(e){let{basename:t="/",children:r=null,location:n,navigationType:s=ls.Pop,navigator:o,static:i=!1,future:l}=e;qu()&&ut(!1);let c=t.replace(/^\/*/,"/"),u=m.useMemo(()=>({basename:c,navigator:o,static:i,future:Wi({v7_relativeSplatPath:!1},l)}),[c,l,o,i]);typeof n=="string"&&(n=To(n));let{pathname:f="/",search:d="",hash:h="",state:p=null,key:g="default"}=n,v=m.useMemo(()=>{let y=h1(f,c);return y==null?null:{location:{pathname:y,search:d,hash:h,state:p,key:g},navigationType:s}},[c,f,d,h,p,g,s]);return v==null?null:m.createElement(Hu.Provider,{value:u},m.createElement(Wu.Provider,{children:r,value:v}))}function SM(e){let{children:t,location:r}=e;return fM(Dh(t),r)}new Promise(()=>{});function Dh(e,t){t===void 0&&(t=[]);let r=[];return m.Children.forEach(e,(n,s)=>{if(!m.isValidElement(n))return;let o=[...t,s];if(n.type===m.Fragment){r.push.apply(r,Dh(n.props.children,o));return}n.type!==Jr&&ut(!1),!n.props.index||!n.props.children||ut(!1);let i={id:n.props.id||o.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(i.children=Dh(n.props.children,o)),r.push(i)}),r}/**
 * React Router DOM v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Oh(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let n=e[r];return t.concat(Array.isArray(n)?n.map(s=>[r,s]):[[r,n]])},[]))}function kM(e,t){let r=Oh(e);return t&&t.forEach((n,s)=>{r.has(s)||t.getAll(s).forEach(o=>{r.append(s,o)})}),r}const CM="6";try{window.__reactRouterVersion=CM}catch{}const EM="startTransition",cx=Cy[EM];function PM(e){let{basename:t,children:r,future:n,window:s}=e,o=m.useRef();o.current==null&&(o.current=LR({window:s,v5Compat:!0}));let i=o.current,[l,c]=m.useState({action:i.action,location:i.location}),{v7_startTransition:u}=n||{},f=m.useCallback(d=>{u&&cx?cx(()=>c(d)):c(d)},[c,u]);return m.useLayoutEffect(()=>i.listen(f),[i,f]),m.createElement(NM,{basename:t,children:r,location:l.location,navigationType:l.action,navigator:i,future:n})}var ux;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(ux||(ux={}));var dx;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(dx||(dx={}));function y1(e){let t=m.useRef(Oh(e)),r=m.useRef(!1),n=Mo(),s=m.useMemo(()=>kM(n.search,r.current?null:t.current),[n.search]),o=Ao(),i=m.useCallback((l,c)=>{const u=Oh(typeof l=="function"?l(s):l);r.current=!0,o("?"+u,c)},[o,s]);return[s,i]}const TM="modulepreload",RM=function(e){return"/"+e},fx={},il=function(t,r,n){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),l=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));s=Promise.allSettled(r.map(c=>{if(c=RM(c),c in fx)return;fx[c]=!0;const u=c.endsWith(".css"),f=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${f}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":TM,u||(d.as="script"),d.crossOrigin="",d.href=c,l&&d.setAttribute("nonce",l),document.head.appendChild(d),u)return new Promise((h,p)=>{d.addEventListener("load",h),d.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${c}`)))})}))}function o(i){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=i,window.dispatchEvent(l),!l.defaultPrevented)throw i}return s.then(i=>{for(const l of i||[])l.status==="rejected"&&o(l.reason);return t().catch(o)})},MM=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>il(async()=>{const{default:n}=await Promise.resolve().then(()=>Do);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)};class xp extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class AM extends xp{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class hx extends xp{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class mx extends xp{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Ih;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Ih||(Ih={}));var DM=function(e,t,r,n){function s(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function l(f){try{u(n.next(f))}catch(d){i(d)}}function c(f){try{u(n.throw(f))}catch(d){i(d)}}function u(f){f.done?o(f.value):s(f.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};class OM{constructor(t,{headers:r={},customFetch:n,region:s=Ih.Any}={}){this.url=t,this.headers=r,this.region=s,this.fetch=MM(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,r={}){var n;return DM(this,void 0,void 0,function*(){try{const{headers:s,method:o,body:i}=r;let l={},{region:c}=r;c||(c=this.region);const u=new URL(`${this.url}/${t}`);c&&c!=="any"&&(l["x-region"]=c,u.searchParams.set("forceFunctionRegion",c));let f;i&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&i instanceof Blob||i instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",f=i):typeof i=="string"?(l["Content-Type"]="text/plain",f=i):typeof FormData<"u"&&i instanceof FormData?f=i:(l["Content-Type"]="application/json",f=JSON.stringify(i)));const d=yield this.fetch(u.toString(),{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),s),body:f}).catch(v=>{throw new AM(v)}),h=d.headers.get("x-relay-error");if(h&&h==="true")throw new hx(d);if(!d.ok)throw new mx(d);let p=((n=d.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),g;return p==="application/json"?g=yield d.json():p==="application/octet-stream"?g=yield d.blob():p==="text/event-stream"?g=d:p==="multipart/form-data"?g=yield d.formData():g=yield d.text(),{data:g,error:null,response:d}}catch(s){return{data:null,error:s,response:s instanceof mx||s instanceof hx?s.context:void 0}}})}}var Vt={},yp={},Ku={},ll={},Yu={},Qu={},IM=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},yo=IM();const LM=yo.fetch,w1=yo.fetch.bind(yo),b1=yo.Headers,$M=yo.Request,UM=yo.Response,Do=Object.freeze(Object.defineProperty({__proto__:null,Headers:b1,Request:$M,Response:UM,default:w1,fetch:LM},Symbol.toStringTag,{value:"Module"})),FM=LS(Do);var Xu={};Object.defineProperty(Xu,"__esModule",{value:!0});let zM=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};Xu.default=zM;var j1=_r&&_r.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Qu,"__esModule",{value:!0});const GM=j1(FM),BM=j1(Xu);let VM=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=GM.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,r){return this.headers=Object.assign({},this.headers),this.headers[t]=r,this}then(t,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const n=this.fetch;let s=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async o=>{var i,l,c;let u=null,f=null,d=null,h=o.status,p=o.statusText;if(o.ok){if(this.method!=="HEAD"){const x=await o.text();x===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?f=x:f=JSON.parse(x))}const v=(i=this.headers.Prefer)===null||i===void 0?void 0:i.match(/count=(exact|planned|estimated)/),y=(l=o.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");v&&y&&y.length>1&&(d=parseInt(y[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(f)&&(f.length>1?(u={code:"PGRST116",details:`Results contain ${f.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},f=null,d=null,h=406,p="Not Acceptable"):f.length===1?f=f[0]:f=null)}else{const v=await o.text();try{u=JSON.parse(v),Array.isArray(u)&&o.status===404&&(f=[],u=null,h=200,p="OK")}catch{o.status===404&&v===""?(h=204,p="No Content"):u={message:v}}if(u&&this.isMaybeSingle&&(!((c=u==null?void 0:u.details)===null||c===void 0)&&c.includes("0 rows"))&&(u=null,h=200,p="OK"),u&&this.shouldThrowOnError)throw new BM.default(u)}return{error:u,data:f,count:d,status:h,statusText:p}});return this.shouldThrowOnError||(s=s.catch(o=>{var i,l,c;return{error:{message:`${(i=o==null?void 0:o.name)!==null&&i!==void 0?i:"FetchError"}: ${o==null?void 0:o.message}`,details:`${(l=o==null?void 0:o.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=o==null?void 0:o.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),s.then(t,r)}returns(){return this}overrideTypes(){return this}};Qu.default=VM;var HM=_r&&_r.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Yu,"__esModule",{value:!0});const WM=HM(Qu);let qM=class extends WM.default{select(t){let r=!1;const n=(t??"*").split("").map(s=>/\s/.test(s)&&!r?"":(s==='"'&&(r=!r),s)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:r=!0,nullsFirst:n,foreignTable:s,referencedTable:o=s}={}){const i=o?`${o}.order`:"order",l=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${l?`${l},`:""}${t}.${r?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:r,referencedTable:n=r}={}){const s=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${t}`),this}range(t,r,{foreignTable:n,referencedTable:s=n}={}){const o=typeof s>"u"?"offset":`${s}.offset`,i=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(o,`${t}`),this.url.searchParams.set(i,`${r-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:r=!1,settings:n=!1,buffers:s=!1,wal:o=!1,format:i="text"}={}){var l;const c=[t?"analyze":null,r?"verbose":null,n?"settings":null,s?"buffers":null,o?"wal":null].filter(Boolean).join("|"),u=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${i}; for="${u}"; options=${c};`,i==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};Yu.default=qM;var KM=_r&&_r.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ll,"__esModule",{value:!0});const YM=KM(Yu);let QM=class extends YM.default{eq(t,r){return this.url.searchParams.append(t,`eq.${r}`),this}neq(t,r){return this.url.searchParams.append(t,`neq.${r}`),this}gt(t,r){return this.url.searchParams.append(t,`gt.${r}`),this}gte(t,r){return this.url.searchParams.append(t,`gte.${r}`),this}lt(t,r){return this.url.searchParams.append(t,`lt.${r}`),this}lte(t,r){return this.url.searchParams.append(t,`lte.${r}`),this}like(t,r){return this.url.searchParams.append(t,`like.${r}`),this}likeAllOf(t,r){return this.url.searchParams.append(t,`like(all).{${r.join(",")}}`),this}likeAnyOf(t,r){return this.url.searchParams.append(t,`like(any).{${r.join(",")}}`),this}ilike(t,r){return this.url.searchParams.append(t,`ilike.${r}`),this}ilikeAllOf(t,r){return this.url.searchParams.append(t,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(t,r){return this.url.searchParams.append(t,`ilike(any).{${r.join(",")}}`),this}is(t,r){return this.url.searchParams.append(t,`is.${r}`),this}in(t,r){const n=Array.from(new Set(r)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}contains(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cs.{${r.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(r)}`),this}containedBy(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cd.{${r.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(r)}`),this}rangeGt(t,r){return this.url.searchParams.append(t,`sr.${r}`),this}rangeGte(t,r){return this.url.searchParams.append(t,`nxl.${r}`),this}rangeLt(t,r){return this.url.searchParams.append(t,`sl.${r}`),this}rangeLte(t,r){return this.url.searchParams.append(t,`nxr.${r}`),this}rangeAdjacent(t,r){return this.url.searchParams.append(t,`adj.${r}`),this}overlaps(t,r){return typeof r=="string"?this.url.searchParams.append(t,`ov.${r}`):this.url.searchParams.append(t,`ov.{${r.join(",")}}`),this}textSearch(t,r,{config:n,type:s}={}){let o="";s==="plain"?o="pl":s==="phrase"?o="ph":s==="websearch"&&(o="w");const i=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${o}fts${i}.${r}`),this}match(t){return Object.entries(t).forEach(([r,n])=>{this.url.searchParams.append(r,`eq.${n}`)}),this}not(t,r,n){return this.url.searchParams.append(t,`not.${r}.${n}`),this}or(t,{foreignTable:r,referencedTable:n=r}={}){const s=n?`${n}.or`:"or";return this.url.searchParams.append(s,`(${t})`),this}filter(t,r,n){return this.url.searchParams.append(t,`${r}.${n}`),this}};ll.default=QM;var XM=_r&&_r.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ku,"__esModule",{value:!0});const Xo=XM(ll);let JM=class{constructor(t,{headers:r={},schema:n,fetch:s}){this.url=t,this.headers=r,this.schema=n,this.fetch=s}select(t,{head:r=!1,count:n}={}){const s=r?"HEAD":"GET";let o=!1;const i=(t??"*").split("").map(l=>/\s/.test(l)&&!o?"":(l==='"'&&(o=!o),l)).join("");return this.url.searchParams.set("select",i),n&&(this.headers.Prefer=`count=${n}`),new Xo.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:r,defaultToNull:n=!0}={}){const s="POST",o=[];if(this.headers.Prefer&&o.push(this.headers.Prefer),r&&o.push(`count=${r}`),n||o.push("missing=default"),this.headers.Prefer=o.join(","),Array.isArray(t)){const i=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(i.length>0){const l=[...new Set(i)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new Xo.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:r,ignoreDuplicates:n=!1,count:s,defaultToNull:o=!0}={}){const i="POST",l=[`resolution=${n?"ignore":"merge"}-duplicates`];if(r!==void 0&&this.url.searchParams.set("on_conflict",r),this.headers.Prefer&&l.push(this.headers.Prefer),s&&l.push(`count=${s}`),o||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(t)){const c=t.reduce((u,f)=>u.concat(Object.keys(f)),[]);if(c.length>0){const u=[...new Set(c)].map(f=>`"${f}"`);this.url.searchParams.set("columns",u.join(","))}}return new Xo.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:r}={}){const n="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),r&&s.push(`count=${r}`),this.headers.Prefer=s.join(","),new Xo.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const r="DELETE",n=[];return t&&n.push(`count=${t}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new Xo.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};Ku.default=JM;var Ju={},Zu={};Object.defineProperty(Zu,"__esModule",{value:!0});Zu.version=void 0;Zu.version="0.0.0-automated";Object.defineProperty(Ju,"__esModule",{value:!0});Ju.DEFAULT_HEADERS=void 0;const ZM=Zu;Ju.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${ZM.version}`};var _1=_r&&_r.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(yp,"__esModule",{value:!0});const eA=_1(Ku),tA=_1(ll),rA=Ju;let nA=class N1{constructor(t,{headers:r={},schema:n,fetch:s}={}){this.url=t,this.headers=Object.assign(Object.assign({},rA.DEFAULT_HEADERS),r),this.schemaName=n,this.fetch=s}from(t){const r=new URL(`${this.url}/${t}`);return new eA.default(r,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new N1(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:n=!1,get:s=!1,count:o}={}){let i;const l=new URL(`${this.url}/rpc/${t}`);let c;n||s?(i=n?"HEAD":"GET",Object.entries(r).filter(([f,d])=>d!==void 0).map(([f,d])=>[f,Array.isArray(d)?`{${d.join(",")}}`:`${d}`]).forEach(([f,d])=>{l.searchParams.append(f,d)})):(i="POST",c=r);const u=Object.assign({},this.headers);return o&&(u.Prefer=`count=${o}`),new tA.default({method:i,url:l,headers:u,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};yp.default=nA;var Oo=_r&&_r.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Vt,"__esModule",{value:!0});Vt.PostgrestError=Vt.PostgrestBuilder=Vt.PostgrestTransformBuilder=Vt.PostgrestFilterBuilder=Vt.PostgrestQueryBuilder=Vt.PostgrestClient=void 0;const S1=Oo(yp);Vt.PostgrestClient=S1.default;const k1=Oo(Ku);Vt.PostgrestQueryBuilder=k1.default;const C1=Oo(ll);Vt.PostgrestFilterBuilder=C1.default;const E1=Oo(Yu);Vt.PostgrestTransformBuilder=E1.default;const P1=Oo(Qu);Vt.PostgrestBuilder=P1.default;const T1=Oo(Xu);Vt.PostgrestError=T1.default;var sA=Vt.default={PostgrestClient:S1.default,PostgrestQueryBuilder:k1.default,PostgrestFilterBuilder:C1.default,PostgrestTransformBuilder:E1.default,PostgrestBuilder:P1.default,PostgrestError:T1.default};const{PostgrestClient:aA,PostgrestQueryBuilder:d$,PostgrestFilterBuilder:f$,PostgrestTransformBuilder:h$,PostgrestBuilder:m$,PostgrestError:p$}=sA;function oA(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const iA=oA(),lA="2.11.15",cA=`realtime-js/${lA}`,uA="1.0.0",R1=1e4,dA=1e3;var wi;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(wi||(wi={}));var kt;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(kt||(kt={}));var Fr;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Fr||(Fr={}));var Lh;(function(e){e.websocket="websocket"})(Lh||(Lh={}));var Gs;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Gs||(Gs={}));class fA{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,r,n)}_decodeBroadcast(t,r,n){const s=r.getUint8(1),o=r.getUint8(2);let i=this.HEADER_LENGTH+2;const l=n.decode(t.slice(i,i+s));i=i+s;const c=n.decode(t.slice(i,i+o));i=i+o;const u=JSON.parse(n.decode(t.slice(i,t.byteLength)));return{ref:null,topic:l,event:c,payload:u}}}class M1{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Me;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Me||(Me={}));const px=(e,t,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(t).reduce((o,i)=>(o[i]=hA(i,e,t,s),o),{})},hA=(e,t,r,n)=>{const s=t.find(l=>l.name===e),o=s==null?void 0:s.type,i=r[e];return o&&!n.includes(o)?A1(o,i):$h(i)},A1=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return vA(t,r)}switch(e){case Me.bool:return mA(t);case Me.float4:case Me.float8:case Me.int2:case Me.int4:case Me.int8:case Me.numeric:case Me.oid:return pA(t);case Me.json:case Me.jsonb:return gA(t);case Me.timestamp:return xA(t);case Me.abstime:case Me.date:case Me.daterange:case Me.int4range:case Me.int8range:case Me.money:case Me.reltime:case Me.text:case Me.time:case Me.timestamptz:case Me.timetz:case Me.tsrange:case Me.tstzrange:return $h(t);default:return $h(t)}},$h=e=>e,mA=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},pA=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},gA=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},vA=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let o;const i=e.slice(1,r);try{o=JSON.parse("["+i+"]")}catch{o=i?i.split(","):[]}return o.map(l=>A1(t,l))}return e},xA=e=>typeof e=="string"?e.replace(" ","T"):e,D1=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class Qd{constructor(t,r,n={},s=R1){this.channel=t,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var gx;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(gx||(gx={}));class bi{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:o,onLeave:i,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=bi.syncState(this.state,s,o,i),this.pendingDiffs.forEach(c=>{this.state=bi.syncDiff(this.state,c,o,i)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},s=>{const{onJoin:o,onLeave:i,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=bi.syncDiff(this.state,s,o,i),l())}),this.onJoin((s,o,i)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:o,newPresences:i})}),this.onLeave((s,o,i)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:o,leftPresences:i})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,s){const o=this.cloneDeep(t),i=this.transformState(r),l={},c={};return this.map(o,(u,f)=>{i[u]||(c[u]=f)}),this.map(i,(u,f)=>{const d=o[u];if(d){const h=f.map(y=>y.presence_ref),p=d.map(y=>y.presence_ref),g=f.filter(y=>p.indexOf(y.presence_ref)<0),v=d.filter(y=>h.indexOf(y.presence_ref)<0);g.length>0&&(l[u]=g),v.length>0&&(c[u]=v)}else l[u]=f}),this.syncDiff(o,{joins:l,leaves:c},n,s)}static syncDiff(t,r,n,s){const{joins:o,leaves:i}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(o,(l,c)=>{var u;const f=(u=t[l])!==null&&u!==void 0?u:[];if(t[l]=this.cloneDeep(c),f.length>0){const d=t[l].map(p=>p.presence_ref),h=f.filter(p=>d.indexOf(p.presence_ref)<0);t[l].unshift(...h)}n(l,f,c)}),this.map(i,(l,c)=>{let u=t[l];if(!u)return;const f=c.map(d=>d.presence_ref);u=u.filter(d=>f.indexOf(d.presence_ref)<0),t[l]=u,s(l,u,c),u.length===0&&delete t[l]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const s=t[n];return"metas"in s?r[n]=s.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):r[n]=s,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var vx;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(vx||(vx={}));var xx;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(xx||(xx={}));var _n;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(_n||(_n={}));class wp{constructor(t,r={config:{}},n){this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=kt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Qd(this,Fr.join,this.params,this.timeout),this.rejoinTimer=new M1(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=kt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=kt.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=kt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=kt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Fr.reply,{},(s,o)=>{this._trigger(this._replyEventName(o),s)}),this.presence=new bi(this),this.broadcastEndpointURL=D1(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,r=this.timeout){var n,s;if(this.socket.isConnected()||this.socket.connect(),this.state==kt.closed){const{config:{broadcast:o,presence:i,private:l}}=this.params;this._onError(f=>t==null?void 0:t(_n.CHANNEL_ERROR,f)),this._onClose(()=>t==null?void 0:t(_n.CLOSED));const c={},u={broadcast:o,presence:i,postgres_changes:(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(f=>f.filter))!==null&&s!==void 0?s:[],private:l};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:u},c)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:f})=>{var d;if(this.socket.setAuth(),f===void 0){t==null||t(_n.SUBSCRIBED);return}else{const h=this.bindings.postgres_changes,p=(d=h==null?void 0:h.length)!==null&&d!==void 0?d:0,g=[];for(let v=0;v<p;v++){const y=h[v],{filter:{event:x,schema:w,table:b,filter:j}}=y,_=f&&f[v];if(_&&_.event===x&&_.schema===w&&_.table===b&&_.filter===j)g.push(Object.assign(Object.assign({},y),{id:_.id}));else{this.unsubscribe(),this.state=kt.errored,t==null||t(_n.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=g,t&&t(_n.SUBSCRIBED);return}}).receive("error",f=>{this.state=kt.errored,t==null||t(_n.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(f).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(_n.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this._on(t,r,n)}async send(t,r={}){var n,s;if(!this._canPush()&&t.type==="broadcast"){const{event:o,payload:i}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:i,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var i,l,c;const u=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(i=this.params)===null||i===void 0?void 0:i.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&o("ok"),u.receive("ok",()=>o("ok")),u.receive("error",()=>o("error")),u.receive("timeout",()=>o("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=kt.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Fr.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new Qd(this,Fr.leave,{},t),n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(t,r,n){const s=new AbortController,o=setTimeout(()=>s.abort(),n),i=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(o),i}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Qd(this,t,r,n);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var s,o;const i=t.toLocaleLowerCase(),{close:l,error:c,leave:u,join:f}=Fr;if(n&&[l,c,u,f].indexOf(i)>=0&&n!==this._joinRef())return;let h=this._onMessage(i,r,n);if(r&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(i)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(p=>{var g,v,y;return((g=p.filter)===null||g===void 0?void 0:g.event)==="*"||((y=(v=p.filter)===null||v===void 0?void 0:v.event)===null||y===void 0?void 0:y.toLocaleLowerCase())===i}).map(p=>p.callback(h,n)):(o=this.bindings[i])===null||o===void 0||o.filter(p=>{var g,v,y,x,w,b;if(["broadcast","presence","postgres_changes"].includes(i))if("id"in p){const j=p.id,_=(g=p.filter)===null||g===void 0?void 0:g.event;return j&&((v=r.ids)===null||v===void 0?void 0:v.includes(j))&&(_==="*"||(_==null?void 0:_.toLocaleLowerCase())===((y=r.data)===null||y===void 0?void 0:y.type.toLocaleLowerCase()))}else{const j=(w=(x=p==null?void 0:p.filter)===null||x===void 0?void 0:x.event)===null||w===void 0?void 0:w.toLocaleLowerCase();return j==="*"||j===((b=r==null?void 0:r.event)===null||b===void 0?void 0:b.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===i}).map(p=>{if(typeof h=="object"&&"ids"in h){const g=h.data,{schema:v,table:y,commit_timestamp:x,type:w,errors:b}=g;h=Object.assign(Object.assign({},{schema:v,table:y,commit_timestamp:x,eventType:w,new:{},old:{},errors:b}),this._getPayloadRecords(g))}p.callback(h,n)})}_isClosed(){return this.state===kt.closed}_isJoined(){return this.state===kt.joined}_isJoining(){return this.state===kt.joining}_isLeaving(){return this.state===kt.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const s=t.toLocaleLowerCase(),o={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(o):this.bindings[s]=[o],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(s=>{var o;return!(((o=s.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===n&&wp.isEqual(s.filter,r))}),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Fr.close,{},t)}_onError(t){this._on(Fr.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=kt.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=px(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=px(t.columns,t.old_record)),r}}const yx=()=>{},yA=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class wA{constructor(t,r){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=R1,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=yx,this.ref=0,this.logger=yx,this.conn=null,this.sendBuffer=[],this.serializer=new fA,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=o=>{let i;return o?i=o:typeof fetch>"u"?i=(...l)=>il(async()=>{const{default:c}=await Promise.resolve().then(()=>Do);return{default:c}},void 0).then(({default:c})=>c(...l)):i=fetch,(...l)=>i(...l)},this.endPoint=`${t}/${Lh.websocket}`,this.httpEndpoint=D1(t),r!=null&&r.transport?this.transport=r.transport:this.transport=null,r!=null&&r.params&&(this.params=r.params),r!=null&&r.timeout&&(this.timeout=r.timeout),r!=null&&r.logger&&(this.logger=r.logger),(r!=null&&r.logLevel||r!=null&&r.log_level)&&(this.logLevel=r.logLevel||r.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),r!=null&&r.heartbeatIntervalMs&&(this.heartbeatIntervalMs=r.heartbeatIntervalMs);const s=(n=r==null?void 0:r.params)===null||n===void 0?void 0:n.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=r!=null&&r.reconnectAfterMs?r.reconnectAfterMs:o=>[1e3,2e3,5e3,1e4][o-1]||1e4,this.encode=r!=null&&r.encode?r.encode:(o,i)=>i(JSON.stringify(o)),this.decode=r!=null&&r.decode?r.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new M1(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(r==null?void 0:r.fetch),r!=null&&r.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(r==null?void 0:r.worker)||!1,this.workerUrl=r==null?void 0:r.workerUrl}this.accessToken=(r==null?void 0:r.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=iA),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:uA}))}disconnect(t,r){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,r??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(n=>n.teardown()))}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case wi.connecting:return Gs.Connecting;case wi.open:return Gs.Open;case wi.closing:return Gs.Closing;default:return Gs.Closed}}isConnected(){return this.connectionState()===Gs.Open}channel(t,r={config:{}}){const n=`realtime:${t}`,s=this.getChannels().find(o=>o.topic===n);if(s)return s;{const o=new wp(`realtime:${t}`,r,this);return this.channels.push(o),o}}push(t){const{topic:r,event:n,payload:s,ref:o}=t,i=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${n} (${o})`,s),this.isConnected()?i():this.sendBuffer.push(i)}async setAuth(t=null){let r=t||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const s={access_token:r,version:cA};r&&n.updateJoinPayload(s),n.joinedOnce&&n._isJoined()&&n._push(Fr.access_token,{access_token:r})}))}async sendHeartbeat(){var t;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(t=this.conn)===null||t===void 0||t.close(dA,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_onConnMessage(t){this.decode(t.data,r=>{let{topic:n,event:s,payload:o,ref:i}=r;n==="phoenix"&&s==="phx_reply"&&this.heartbeatCallback(r.payload.status=="ok"?"ok":"error"),i&&i===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${o.status||""} ${n} ${s} ${i&&"("+i+")"||""}`,o),Array.from(this.channels).filter(l=>l._isMember(n)).forEach(l=>l._trigger(s,o,i)),this.stateChangeCallbacks.message.forEach(l=>l(r))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(t=>t())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(r=>r(t))}_onConnError(t){this.log("transport",`${t}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(r=>r(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(Fr.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${t}${n}${s}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([yA],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}}class bp extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function dt(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class bA extends bp{constructor(t,r,n){super(t),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Uh extends bp{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var jA=function(e,t,r,n){function s(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function l(f){try{u(n.next(f))}catch(d){i(d)}}function c(f){try{u(n.throw(f))}catch(d){i(d)}}function u(f){f.done?o(f.value):s(f.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const O1=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>il(async()=>{const{default:n}=await Promise.resolve().then(()=>Do);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},_A=()=>jA(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield il(()=>Promise.resolve().then(()=>Do),void 0)).Response:Response}),Fh=e=>{if(Array.isArray(e))return e.map(r=>Fh(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));t[s]=Fh(n)}),t},NA=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var da=function(e,t,r,n){function s(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function l(f){try{u(n.next(f))}catch(d){i(d)}}function c(f){try{u(n.throw(f))}catch(d){i(d)}}function u(f){f.done?o(f.value):s(f.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const Xd=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),SA=(e,t,r)=>da(void 0,void 0,void 0,function*(){const n=yield _A();e instanceof n&&!(r!=null&&r.noResolveJson)?e.json().then(s=>{const o=e.status||500,i=(s==null?void 0:s.statusCode)||o+"";t(new bA(Xd(s),o,i))}).catch(s=>{t(new Uh(Xd(s),s))}):t(new Uh(Xd(e),e))}),kA=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!n?s:(NA(n)?(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(n)):s.body=n,Object.assign(Object.assign({},s),r))};function cl(e,t,r,n,s,o){return da(this,void 0,void 0,function*(){return new Promise((i,l)=>{e(r,kA(t,n,s,o)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>i(c)).catch(c=>SA(c,l,n))})})}function Zc(e,t,r,n){return da(this,void 0,void 0,function*(){return cl(e,"GET",t,r,n)})}function Nn(e,t,r,n,s){return da(this,void 0,void 0,function*(){return cl(e,"POST",t,n,s,r)})}function zh(e,t,r,n,s){return da(this,void 0,void 0,function*(){return cl(e,"PUT",t,n,s,r)})}function CA(e,t,r,n){return da(this,void 0,void 0,function*(){return cl(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function I1(e,t,r,n,s){return da(this,void 0,void 0,function*(){return cl(e,"DELETE",t,n,s,r)})}var Gt=function(e,t,r,n){function s(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function l(f){try{u(n.next(f))}catch(d){i(d)}}function c(f){try{u(n.throw(f))}catch(d){i(d)}}function u(f){f.done?o(f.value):s(f.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const EA={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},wx={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class PA{constructor(t,r={},n,s){this.url=t,this.headers=r,this.bucketId=n,this.fetch=O1(s)}uploadOrUpdate(t,r,n,s){return Gt(this,void 0,void 0,function*(){try{let o;const i=Object.assign(Object.assign({},wx),s);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(i.upsert)});const c=i.metadata;typeof Blob<"u"&&n instanceof Blob?(o=new FormData,o.append("cacheControl",i.cacheControl),c&&o.append("metadata",this.encodeMetadata(c)),o.append("",n)):typeof FormData<"u"&&n instanceof FormData?(o=n,o.append("cacheControl",i.cacheControl),c&&o.append("metadata",this.encodeMetadata(c))):(o=n,l["cache-control"]=`max-age=${i.cacheControl}`,l["content-type"]=i.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),s!=null&&s.headers&&(l=Object.assign(Object.assign({},l),s.headers));const u=this._removeEmptyFolders(r),f=this._getFinalPath(u),d=yield(t=="PUT"?zh:Nn)(this.fetch,`${this.url}/object/${f}`,o,Object.assign({headers:l},i!=null&&i.duplex?{duplex:i.duplex}:{}));return{data:{path:u,id:d.Id,fullPath:d.Key},error:null}}catch(o){if(dt(o))return{data:null,error:o};throw o}})}upload(t,r,n){return Gt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,s){return Gt(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(t),i=this._getFinalPath(o),l=new URL(this.url+`/object/upload/sign/${i}`);l.searchParams.set("token",r);try{let c;const u=Object.assign({upsert:wx.upsert},s),f=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",u.cacheControl)):(c=n,f["cache-control"]=`max-age=${u.cacheControl}`,f["content-type"]=u.contentType);const d=yield zh(this.fetch,l.toString(),c,{headers:f});return{data:{path:o,fullPath:d.Key},error:null}}catch(c){if(dt(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,r){return Gt(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const s=Object.assign({},this.headers);r!=null&&r.upsert&&(s["x-upsert"]="true");const o=yield Nn(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),i=new URL(this.url+o.url),l=i.searchParams.get("token");if(!l)throw new bp("No token returned by API");return{data:{signedUrl:i.toString(),path:t,token:l},error:null}}catch(n){if(dt(n))return{data:null,error:n};throw n}})}update(t,r,n){return Gt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return Gt(this,void 0,void 0,function*(){try{return{data:yield Nn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(dt(s))return{data:null,error:s};throw s}})}copy(t,r,n){return Gt(this,void 0,void 0,function*(){try{return{data:{path:(yield Nn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(dt(s))return{data:null,error:s};throw s}})}createSignedUrl(t,r,n){return Gt(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t),o=yield Nn(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${i}`)},{data:o,error:null}}catch(s){if(dt(s))return{data:null,error:s};throw s}})}createSignedUrls(t,r,n){return Gt(this,void 0,void 0,function*(){try{const s=yield Nn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(i=>Object.assign(Object.assign({},i),{signedUrl:i.signedURL?encodeURI(`${this.url}${i.signedURL}${o}`):null})),error:null}}catch(s){if(dt(s))return{data:null,error:s};throw s}})}download(t,r){return Gt(this,void 0,void 0,function*(){const s=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),i=o?`?${o}`:"";try{const l=this._getFinalPath(t);return{data:yield(yield Zc(this.fetch,`${this.url}/${s}/${l}${i}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(dt(l))return{data:null,error:l};throw l}})}info(t){return Gt(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield Zc(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:Fh(n),error:null}}catch(n){if(dt(n))return{data:null,error:n};throw n}})}exists(t){return Gt(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield CA(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(dt(n)&&n instanceof Uh){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),s=[],o=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";o!==""&&s.push(o);const l=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&s.push(c);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${u}`)}}}remove(t){return Gt(this,void 0,void 0,function*(){try{return{data:yield I1(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(dt(r))return{data:null,error:r};throw r}})}list(t,r,n){return Gt(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},EA),r),{prefix:t||""});return{data:yield Nn(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(dt(s))return{data:null,error:s};throw s}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const TA="2.10.4",RA={"X-Client-Info":`storage-js/${TA}`};var xa=function(e,t,r,n){function s(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function l(f){try{u(n.next(f))}catch(d){i(d)}}function c(f){try{u(n.throw(f))}catch(d){i(d)}}function u(f){f.done?o(f.value):s(f.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};class MA{constructor(t,r={},n,s){const o=new URL(t);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase.")),this.url=o.href,this.headers=Object.assign(Object.assign({},RA),r),this.fetch=O1(n)}listBuckets(){return xa(this,void 0,void 0,function*(){try{return{data:yield Zc(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(dt(t))return{data:null,error:t};throw t}})}getBucket(t){return xa(this,void 0,void 0,function*(){try{return{data:yield Zc(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(dt(r))return{data:null,error:r};throw r}})}createBucket(t,r={public:!1}){return xa(this,void 0,void 0,function*(){try{return{data:yield Nn(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(dt(n))return{data:null,error:n};throw n}})}updateBucket(t,r){return xa(this,void 0,void 0,function*(){try{return{data:yield zh(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(dt(n))return{data:null,error:n};throw n}})}emptyBucket(t){return xa(this,void 0,void 0,function*(){try{return{data:yield Nn(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(dt(r))return{data:null,error:r};throw r}})}deleteBucket(t){return xa(this,void 0,void 0,function*(){try{return{data:yield I1(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(dt(r))return{data:null,error:r};throw r}})}}class AA extends MA{constructor(t,r={},n,s){super(t,r,n,s)}from(t){return new PA(this.url,this.headers,t,this.fetch)}}const DA="2.53.0";let ii="";typeof Deno<"u"?ii="deno":typeof document<"u"?ii="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ii="react-native":ii="node";const OA={"X-Client-Info":`supabase-js-${ii}/${DA}`},IA={headers:OA},LA={schema:"public"},$A={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},UA={};var FA=function(e,t,r,n){function s(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function l(f){try{u(n.next(f))}catch(d){i(d)}}function c(f){try{u(n.throw(f))}catch(d){i(d)}}function u(f){f.done?o(f.value):s(f.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const zA=e=>{let t;return e?t=e:typeof fetch>"u"?t=w1:t=fetch,(...r)=>t(...r)},GA=()=>typeof Headers>"u"?b1:Headers,BA=(e,t,r)=>{const n=zA(r),s=GA();return(o,i)=>FA(void 0,void 0,void 0,function*(){var l;const c=(l=yield t())!==null&&l!==void 0?l:e;let u=new s(i==null?void 0:i.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),n(o,Object.assign(Object.assign({},i),{headers:u}))})};var VA=function(e,t,r,n){function s(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function l(f){try{u(n.next(f))}catch(d){i(d)}}function c(f){try{u(n.throw(f))}catch(d){i(d)}}function u(f){f.done?o(f.value):s(f.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};function HA(e){return e.endsWith("/")?e:e+"/"}function WA(e,t){var r,n;const{db:s,auth:o,realtime:i,global:l}=e,{db:c,auth:u,realtime:f,global:d}=t,h={db:Object.assign(Object.assign({},c),s),auth:Object.assign(Object.assign({},u),o),realtime:Object.assign(Object.assign({},f),i),storage:{},global:Object.assign(Object.assign(Object.assign({},d),l),{headers:Object.assign(Object.assign({},(r=d==null?void 0:d.headers)!==null&&r!==void 0?r:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>VA(this,void 0,void 0,function*(){return""})};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}const L1="2.71.1",ka=30*1e3,Gh=3,Jd=Gh*ka,qA="http://localhost:9999",KA="supabase.auth.token",YA={"X-Client-Info":`gotrue-js/${L1}`},Bh="X-Supabase-Api-Version",$1={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},QA=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,XA=10*60*1e3;class jp extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function he(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class JA extends jp{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function ZA(e){return he(e)&&e.name==="AuthApiError"}class U1 extends jp{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class Rs extends jp{constructor(t,r,n,s){super(t,n,s),this.name=r,this.status=n}}class Kn extends Rs{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function e4(e){return he(e)&&e.name==="AuthSessionMissingError"}class Vl extends Rs{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Hl extends Rs{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Wl extends Rs{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function t4(e){return he(e)&&e.name==="AuthImplicitGrantRedirectError"}class bx extends Rs{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Vh extends Rs{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function Zd(e){return he(e)&&e.name==="AuthRetryableFetchError"}class jx extends Rs{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class Hh extends Rs{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const eu="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),_x=` 	
\r=`.split(""),r4=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<_x.length;t+=1)e[_x[t].charCodeAt(0)]=-2;for(let t=0;t<eu.length;t+=1)e[eu[t].charCodeAt(0)]=t;return e})();function Nx(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(eu[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(eu[n]),t.queuedBits-=6}}function F1(e,t,r){const n=r4[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Sx(e){const t=[],r=i=>{t.push(String.fromCodePoint(i))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},o=i=>{a4(i,n,r)};for(let i=0;i<e.length;i+=1)F1(e.charCodeAt(i),s,o);return t.join("")}function n4(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function s4(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}n4(n,t)}}function a4(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function o4(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)F1(e.charCodeAt(s),r,n);return new Uint8Array(t)}function i4(e){const t=[];return s4(e,r=>t.push(r)),new Uint8Array(t)}function l4(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};return e.forEach(s=>Nx(s,r,n)),Nx(null,r,n),t.join("")}function c4(e){return Math.round(Date.now()/1e3)+e}function u4(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Ar=()=>typeof window<"u"&&typeof document<"u",Is={tested:!1,writable:!1},z1=()=>{if(!Ar())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Is.tested)return Is.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Is.tested=!0,Is.writable=!0}catch{Is.tested=!0,Is.writable=!1}return Is.writable};function d4(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,o)=>{t[o]=s})}catch{}return r.searchParams.forEach((n,s)=>{t[s]=n}),t}const G1=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>il(async()=>{const{default:n}=await Promise.resolve().then(()=>Do);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},f4=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Ca=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},Ls=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Wn=async(e,t)=>{await e.removeItem(t)};class ed{constructor(){this.promise=new ed.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}ed.promiseConstructor=Promise;function ef(e){const t=e.split(".");if(t.length!==3)throw new Hh("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!QA.test(t[n]))throw new Hh("JWT not in base64url format");return{header:JSON.parse(Sx(t[0])),payload:JSON.parse(Sx(t[1])),signature:o4(t[2]),raw:{header:t[0],payload:t[1]}}}async function h4(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function m4(e,t){return new Promise((n,s)=>{(async()=>{for(let o=0;o<1/0;o++)try{const i=await e(o);if(!t(o,null,i)){n(i);return}}catch(i){if(!t(o,i)){s(i);return}}})()})}function p4(e){return("0"+e.toString(16)).substr(-2)}function g4(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let o=0;o<56;o++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(t),Array.from(t,p4).join("")}async function v4(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(o=>String.fromCharCode(o)).join("")}async function x4(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await v4(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ya(e,t,r=!1){const n=g4();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await Ca(e,`${t}-code-verifier`,s);const o=await x4(n);return[o,n===o?"plain":"s256"]}const y4=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function w4(e){const t=e.headers.get(Bh);if(!t||!t.match(y4))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function b4(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function j4(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const _4=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function wa(e){if(!_4.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function tf(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function kx(e){return JSON.parse(JSON.stringify(e))}var N4=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};const zs=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),S4=[502,503,504];async function Cx(e){var t;if(!f4(e))throw new Vh(zs(e),0);if(S4.includes(e.status))throw new Vh(zs(e),e.status);let r;try{r=await e.json()}catch(o){throw new U1(zs(o),o)}let n;const s=w4(e);if(s&&s.getTime()>=$1["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new jx(zs(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new Kn}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((o,i)=>o&&typeof i=="string",!0))throw new jx(zs(r),e.status,r.weak_password.reasons);throw new JA(zs(r),e.status||500,n)}const k4=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function we(e,t,r,n){var s;const o=Object.assign({},n==null?void 0:n.headers);o[Bh]||(o[Bh]=$1["2024-01-01"].name),n!=null&&n.jwt&&(o.Authorization=`Bearer ${n.jwt}`);const i=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(i.redirect_to=n.redirectTo);const l=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",c=await C4(e,t,r+l,{headers:o,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function C4(e,t,r,n,s,o){const i=k4(t,n,s,o);let l;try{l=await e(r,Object.assign({},i))}catch(c){throw console.error(c),new Vh(zs(c),0)}if(l.ok||await Cx(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await Cx(c)}}function bn(e){var t;let r=null;R4(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=c4(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function Ex(e){const t=bn(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function es(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function E4(e){return{data:e,error:null}}function P4(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:o}=e,i=N4(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:o},c=Object.assign({},i);return{data:{properties:l,user:c},error:null}}function T4(e){return e}function R4(e){return e.access_token&&e.refresh_token&&e.expires_in}const rf=["global","local","others"];var M4=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};class A4{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=G1(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,r=rf[0]){if(rf.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${rf.join(", ")}`);try{return await we(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(he(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await we(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:es})}catch(n){if(he(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=M4(t,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await we(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:P4,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(he(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await we(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:es})}catch(r){if(he(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,s,o,i,l,c;try{const u={nextPage:null,lastPage:0,total:0},f=await we(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(o=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&o!==void 0?o:""},xform:T4});if(f.error)throw f.error;const d=await f.json(),h=(i=f.headers.get("x-total-count"))!==null&&i!==void 0?i:0,p=(c=(l=f.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return p.length>0&&(p.forEach(g=>{const v=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(g.split(";")[1].split("=")[1]);u[`${y}Page`]=v}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},d),u),error:null}}catch(u){if(he(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){wa(t);try{return await we(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:es})}catch(r){if(he(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){wa(t);try{return await we(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:es})}catch(n){if(he(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){wa(t);try{return await we(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:es})}catch(n){if(he(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){wa(t.userId);try{const{data:r,error:n}=await we(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(he(r))return{data:null,error:r};throw r}}async _deleteFactor(t){wa(t.userId),wa(t.id);try{return{data:await we(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(he(r))return{data:null,error:r};throw r}}}function Px(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}function D4(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const ba={debug:!!(globalThis&&z1()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class B1 extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class O4 extends B1{}async function I4(e,t,r){ba.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),ba.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){ba.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await r()}finally{ba.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw ba.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new O4(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(ba.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}D4();const L4={url:qA,storageKey:KA,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:YA,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Tx(e,t,r){return await r()}const ja={};class qi{constructor(t){var r,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=qi.nextInstanceID,qi.nextInstanceID+=1,this.instanceID>0&&Ar()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},L4),t);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new A4({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=G1(s.fetch),this.lock=s.lock||Tx,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:Ar()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=I4:this.lock=Tx,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:z1()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Px(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=Px(this.memoryStorage)),Ar()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}get jwks(){var t,r;return(r=(t=ja[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){ja[this.storageKey]=Object.assign(Object.assign({},ja[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=ja[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){ja[this.storageKey]=Object.assign(Object.assign({},ja[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${L1}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=d4(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),Ar()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:o}=await this._getSessionFromURL(r,n);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),t4(o)){const c=(t=o.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:i,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",i,"redirect type",l),await this._saveSession(i),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return he(r)?{error:r}:{error:new U1("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,s;try{const o=await we(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:bn}),{data:i,error:l}=o;if(l||!i)return{data:{user:null,session:null},error:l};const c=i.session,u=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(o){if(he(o))return{data:{user:null,session:null},error:o};throw o}}async signUp(t){var r,n,s;try{let o;if("email"in t){const{email:f,password:d,options:h}=t;let p=null,g=null;this.flowType==="pkce"&&([p,g]=await ya(this.storage,this.storageKey)),o=await we(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:f,password:d,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:p,code_challenge_method:g},xform:bn})}else if("phone"in t){const{phone:f,password:d,options:h}=t;o=await we(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:f,password:d,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},channel:(s=h==null?void 0:h.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:bn})}else throw new Hl("You must provide either an email or phone number and a password");const{data:i,error:l}=o;if(l||!i)return{data:{user:null,session:null},error:l};const c=i.session,u=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(o){if(he(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithPassword(t){try{let r;if("email"in t){const{email:o,password:i,options:l}=t;r=await we(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:i,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Ex})}else if("phone"in t){const{phone:o,password:i,options:l}=t;r=await we(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:i,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Ex})}else throw new Hl("You must provide either an email or phone number and a password");const{data:n,error:s}=r;return s?{data:{user:null,session:null},error:s}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Vl}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(he(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,n,s,o;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(o=t.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;if(r==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(t){var r,n,s,o,i,l,c,u,f,d,h,p;let g,v;if("message"in t)g=t.message,v=t.signature;else{const{chain:y,wallet:x,statement:w,options:b}=t;let j;if(Ar())if(typeof x=="object")j=x;else{const S=window;if("solana"in S&&typeof S.solana=="object"&&("signIn"in S.solana&&typeof S.solana.signIn=="function"||"signMessage"in S.solana&&typeof S.solana.signMessage=="function"))j=S.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(b!=null&&b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");j=x}const _=new URL((r=b==null?void 0:b.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in j&&j.signIn){const S=await j.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},b==null?void 0:b.signInWithSolana),{version:"1",domain:_.host,uri:_.href}),w?{statement:w}:null));let N;if(Array.isArray(S)&&S[0]&&typeof S[0]=="object")N=S[0];else if(S&&typeof S=="object"&&"signedMessage"in S&&"signature"in S)N=S;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in N&&"signature"in N&&(typeof N.signedMessage=="string"||N.signedMessage instanceof Uint8Array)&&N.signature instanceof Uint8Array)g=typeof N.signedMessage=="string"?N.signedMessage:new TextDecoder().decode(N.signedMessage),v=N.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in j)||typeof j.signMessage!="function"||!("publicKey"in j)||typeof j!="object"||!j.publicKey||!("toBase58"in j.publicKey)||typeof j.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");g=[`${_.host} wants you to sign in with your Solana account:`,j.publicKey.toBase58(),...w?["",w,""]:[""],"Version: 1",`URI: ${_.href}`,`Issued At: ${(s=(n=b==null?void 0:b.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((o=b==null?void 0:b.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${b.signInWithSolana.notBefore}`]:[],...!((i=b==null?void 0:b.signInWithSolana)===null||i===void 0)&&i.expirationTime?[`Expiration Time: ${b.signInWithSolana.expirationTime}`]:[],...!((l=b==null?void 0:b.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${b.signInWithSolana.chainId}`]:[],...!((c=b==null?void 0:b.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${b.signInWithSolana.nonce}`]:[],...!((u=b==null?void 0:b.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${b.signInWithSolana.requestId}`]:[],...!((d=(f=b==null?void 0:b.signInWithSolana)===null||f===void 0?void 0:f.resources)===null||d===void 0)&&d.length?["Resources",...b.signInWithSolana.resources.map(N=>`- ${N}`)]:[]].join(`
`);const S=await j.signMessage(new TextEncoder().encode(g),"utf8");if(!S||!(S instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");v=S}}try{const{data:y,error:x}=await we(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:g,signature:l4(v)},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(p=t.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:bn});if(x)throw x;return!y||!y.session||!y.user?{data:{user:null,session:null},error:new Vl}:(y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),{data:Object.assign({},y),error:x})}catch(y){if(he(y))return{data:{user:null,session:null},error:y};throw y}}async _exchangeCodeForSession(t){const r=await Ls(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{const{data:o,error:i}=await we(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:bn});if(await Wn(this.storage,`${this.storageKey}-code-verifier`),i)throw i;return!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new Vl}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:s??null}),error:i})}catch(o){if(he(o))return{data:{user:null,session:null,redirectType:null},error:o};throw o}}async signInWithIdToken(t){try{const{options:r,provider:n,token:s,access_token:o,nonce:i}=t,l=await we(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:o,nonce:i,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:bn}),{data:c,error:u}=l;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Vl}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(r){if(he(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,n,s,o,i;try{if("email"in t){const{email:l,options:c}=t;let u=null,f=null;this.flowType==="pkce"&&([u,f]=await ya(this.storage,this.storageKey));const{error:d}=await we(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:f},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:d}}if("phone"in t){const{phone:l,options:c}=t,{data:u,error:f}=await we(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(o=c==null?void 0:c.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(i=c==null?void 0:c.channel)!==null&&i!==void 0?i:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:f}}throw new Hl("You must provide either an email or phone number.")}catch(l){if(he(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var r,n;try{let s,o;"options"in t&&(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo,o=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:i,error:l}=await we(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:o}}),redirectTo:s,xform:bn});if(l)throw l;if(!i)throw new Error("An error occurred on token verification.");const c=i.session,u=i.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(s){if(he(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(t){var r,n,s;try{let o=null,i=null;return this.flowType==="pkce"&&([o,i]=await ya(this.storage,this.storageKey)),await we(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:i}),headers:this.headers,xform:E4})}catch(o){if(he(o))return{data:null,error:o};throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new Kn;const{error:s}=await we(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:s}})}catch(t){if(he(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:s,options:o}=t,{error:i}=await we(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return{data:{user:null,session:null},error:i}}else if("phone"in t){const{phone:n,type:s,options:o}=t,{data:i,error:l}=await we(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return{data:{user:null,session:null,messageId:i==null?void 0:i.message_id},error:l}}throw new Hl("You must provide either an email or phone number and a type")}catch(r){if(he(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await Ls(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<Jd:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const i=await Ls(this.userStorage,this.storageKey+"-user");i!=null&&i.user?t.user=i.user:t.user=tf()}if(this.storage.isServer&&t.user){let i=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,u,f)=>(!i&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),i=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,f))})}return{data:{session:t},error:null}}const{session:s,error:o}=await this._callRefreshToken(t.refresh_token);return o?{data:{session:null},error:o}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await we(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:es}):await this._useSession(async r=>{var n,s,o;const{data:i,error:l}=r;if(l)throw l;return!(!((n=i.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Kn}:await we(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(s=i.session)===null||s===void 0?void 0:s.access_token)!==null&&o!==void 0?o:void 0,xform:es})})}catch(r){if(he(r))return e4(r)&&(await this._removeSession(),await Wn(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:s,error:o}=n;if(o)throw o;if(!s.session)throw new Kn;const i=s.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await ya(this.storage,this.storageKey));const{data:u,error:f}=await we(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:i.access_token,xform:es});if(f)throw f;return i.user=u.user,await this._saveSession(i),await this._notifyAllSubscribers("USER_UPDATED",i),{data:{user:i.user},error:null}})}catch(n){if(he(n))return{data:{user:null},error:n};throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Kn;const r=Date.now()/1e3;let n=r,s=!0,o=null;const{payload:i}=ef(t.access_token);if(i.exp&&(n=i.exp,s=n<=r),s){const{session:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};o=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;o={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(r){if(he(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:i,error:l}=r;if(l)throw l;t=(n=i.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new Kn;const{session:s,error:o}=await this._callRefreshToken(t.refresh_token);return o?{data:{user:null,session:null},error:o}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(he(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!Ar())throw new Wl("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Wl(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new bx("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Wl("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new bx("No code detected.");const{data:w,error:b}=await this._exchangeCodeForSession(t.code);if(b)throw b;const j=new URL(window.location.href);return j.searchParams.delete("code"),window.history.replaceState(window.history.state,"",j.toString()),{data:{session:w.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:o,refresh_token:i,expires_in:l,expires_at:c,token_type:u}=t;if(!o||!l||!i||!u)throw new Wl("No session defined in URL");const f=Math.round(Date.now()/1e3),d=parseInt(l);let h=f+d;c&&(h=parseInt(c));const p=h-f;p*1e3<=ka&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${d}s`);const g=h-d;f-g>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",g,h,f):f-g<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",g,h,f);const{data:v,error:y}=await this._getUser(o);if(y)throw y;const x={provider_token:n,provider_refresh_token:s,access_token:o,expires_in:d,expires_at:h,refresh_token:i,token_type:u,user:v.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:x,redirectType:t.type},error:null}}catch(n){if(he(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await Ls(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:o}=r;if(o)return{error:o};const i=(n=s.session)===null||n===void 0?void 0:n.access_token;if(i){const{error:l}=await this.admin.signOut(i,t);if(l&&!(ZA(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await Wn(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=u4(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,s;try{const{data:{session:o},error:i}=r;if(i)throw i;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",t,"session",o)}catch(o){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",o),console.error(o)}})}async resetPasswordForEmail(t,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await ya(this.storage,this.storageKey,!0));try{return await we(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(o){if(he(o))return{data:null,error:o};throw o}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(he(r))return{data:null,error:r};throw r}}async linkIdentity(t){var r;try{const{data:n,error:s}=await this._useSession(async o=>{var i,l,c,u,f;const{data:d,error:h}=o;if(h)throw h;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(i=t.options)===null||i===void 0?void 0:i.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await we(this.fetch,"GET",p,{headers:this.headers,jwt:(f=(u=d.session)===null||u===void 0?void 0:u.access_token)!==null&&f!==void 0?f:void 0})});if(s)throw s;return Ar()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:t.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(he(n))return{data:{provider:t.provider,url:null},error:n};throw n}}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,s;const{data:o,error:i}=r;if(i)throw i;return await we(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(n=o.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(he(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await m4(async s=>(s>0&&await h4(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await we(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:bn})),(s,o)=>{const i=200*Math.pow(2,s);return o&&Zd(o)&&Date.now()+i-n<ka})}catch(n){if(this._debug(r,"error",n),he(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),Ar()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await Ls(this.storage,this.storageKey);if(s&&this.userStorage){let i=await Ls(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!i&&(i={user:s.user},await Ca(this.userStorage,this.storageKey+"-user",i)),s.user=(t=i==null?void 0:i.user)!==null&&t!==void 0?t:tf()}else if(s&&!s.user&&!s.user){const i=await Ls(this.storage,this.storageKey+"-user");i&&(i!=null&&i.user)?(s.user=i.user,await Wn(this.storage,this.storageKey+"-user"),await Ca(this.storage,this.storageKey,s)):s.user=tf()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const o=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Jd;if(this._debug(n,`session has${o?"":" not"} expired with margin of ${Jd}s`),o){if(this.autoRefreshToken&&s.refresh_token){const{error:i}=await this._callRefreshToken(s.refresh_token);i&&(console.error(i),Zd(i)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:i,error:l}=await this._getUser(s.access_token);!l&&(i!=null&&i.user)?(s.user=i.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(i){console.error("Error getting user data:",i),this._debug(n,"error getting user data, skipping SIGNED_IN notification",i)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new Kn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new ed;const{data:o,error:i}=await this._refreshAccessToken(t);if(i)throw i;if(!o.session)throw new Kn;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const l={session:o.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(o){if(this._debug(s,"error",o),he(o)){const i={session:null,error:o};return Zd(o)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(i),i}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(o),o}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,r,n=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const o=[],i=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,r)}catch(c){o.push(c)}});if(await Promise.all(i),o.length>0){for(let l=0;l<o.length;l+=1)console.error(o[l]);throw o[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await Ca(this.userStorage,this.storageKey+"-user",{user:r.user});const s=Object.assign({},r);delete s.user;const o=kx(s);await Ca(this.storage,this.storageKey,o)}else{const s=kx(r);await Ca(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await Wn(this.storage,this.storageKey),await Wn(this.storage,this.storageKey+"-code-verifier"),await Wn(this.storage,this.storageKey+"-user"),this.userStorage&&await Wn(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Ar()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),ka);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-t)/ka);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${ka}ms, refresh threshold is ${Gh} ticks`),s<=Gh&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof B1)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ar()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[o,i]=await ya(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(i)}`});s.push(l.toString())}if(n!=null&&n.queryParams){const o=new URLSearchParams(n.queryParams);s.push(o.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:s,error:o}=r;return o?{data:null,error:o}:await we(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(he(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,s;const{data:o,error:i}=r;if(i)return{data:null,error:i};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:c,error:u}=await we(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=o==null?void 0:o.session)===null||n===void 0?void 0:n.access_token});return u?{data:null,error:u}:(t.factorType==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(r){if(he(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:o}=r;if(o)return{data:null,error:o};const{data:i,error:l}=await we(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+i.expires_in},i)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",i),{data:i,error:l})})}catch(r){if(he(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:o}=r;return o?{data:null,error:o}:await we(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(he(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?{data:null,error:n}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const n=(t==null?void 0:t.factors)||[],s=n.filter(i=>i.factor_type==="totp"&&i.status==="verified"),o=n.filter(i=>i.factor_type==="phone"&&i.status==="verified");return{data:{all:n,totp:s,phone:o},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,n;const{data:{session:s},error:o}=t;if(o)return{data:null,error:o};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=ef(s.access_token);let l=null;i.aal&&(l=i.aal);let c=l;((n=(r=s.user.factors)===null||r===void 0?void 0:r.filter(d=>d.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const f=i.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:f},error:null}}))}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(l=>l.kid===t);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(l=>l.kid===t),n&&this.jwks_cached_at+XA>s)return n;const{data:o,error:i}=await we(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=s,n=o.keys.find(l=>l.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:p,error:g}=await this.getSession();if(g||!p.session)return{data:null,error:g};n=p.session.access_token}const{header:s,payload:o,signature:i,raw:{header:l,payload:c}}=ef(n);r!=null&&r.allowExpired||b4(o.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!u){const{error:p}=await this.getUser(n);if(p)throw p;return{data:{claims:o,header:s,signature:i},error:null}}const f=j4(s.alg),d=await crypto.subtle.importKey("jwk",u,f,!0,["verify"]);if(!await crypto.subtle.verify(f,d,i,i4(`${l}.${c}`)))throw new Hh("Invalid JWT signature");return{data:{claims:o,header:s,signature:i},error:null}}catch(n){if(he(n))return{data:null,error:n};throw n}}}qi.nextInstanceID=0;const $4=qi;class U4 extends $4{constructor(t){super(t)}}var F4=function(e,t,r,n){function s(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function l(f){try{u(n.next(f))}catch(d){i(d)}}function c(f){try{u(n.throw(f))}catch(d){i(d)}}function u(f){f.done?o(f.value):s(f.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};class z4{constructor(t,r,n){var s,o,i;if(this.supabaseUrl=t,this.supabaseKey=r,!t)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const l=HA(t),c=new URL(l);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const u=`sb-${c.hostname.split(".")[0]}-auth-token`,f={db:LA,realtime:UA,auth:Object.assign(Object.assign({},$A),{storageKey:u}),global:IA},d=WA(n??{},f);this.storageKey=(s=d.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(o=d.global.headers)!==null&&o!==void 0?o:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(h,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((i=d.auth)!==null&&i!==void 0?i:{},this.headers,d.global.fetch),this.fetch=BA(r,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new aA(new URL("rest/v1",c).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new AA(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new OM(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,r;return F4(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,storageKey:o,flowType:i,lock:l,debug:c},u,f){const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new U4({url:this.authUrl.href,headers:Object.assign(Object.assign({},d),u),storageKey:o,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,flowType:i,lock:l,debug:c,fetch:f,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new wA(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const G4=(e,t,r)=>new z4(e,t,r);function B4(){if(typeof window<"u"||typeof process>"u"||process.version===void 0||process.version===null)return!1;const e=process.version.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}B4()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const V4=void 0,H4=void 0,E=G4(V4,H4,{auth:{storage:sessionStorage,persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0},realtime:{params:{eventsPerSecond:20}}}),V1=m.createContext(null),W4=({children:e})=>{const[t,r]=m.useState(null),[n,s]=m.useState(null),[o,i]=m.useState(!0),[l,c]=m.useState({isNewUser:!1,hasCompletedProfile:!1,shouldShowOnboarding:!1,isLoading:!1});m.useEffect(()=>{const{data:{subscription:y}}=E.auth.onAuthStateChange(async(x,w)=>{x==="SIGNED_IN"&&w?(r(w.user),s(w),i(!1)):x==="SIGNED_OUT"&&(r(null),s(null),i(!1),c({isNewUser:!1,hasCompletedProfile:!1,shouldShowOnboarding:!1,isLoading:!1}))});return()=>y.unsubscribe()},[]),m.useEffect(()=>{(async()=>{try{const{data:{session:x},error:w}=await E.auth.getSession();x&&!w&&(r(x.user),s(x)),i(!1)}catch{i(!1)}})()},[]);const v={user:t,session:n,loading:o,authState:l,setAuthState:c,signUp:async(y,x)=>{const w="https://syncchatapp.com/auth/callback",{error:b}=await E.auth.signUp({email:y,password:x,options:{emailRedirectTo:w}});return{error:b}},signIn:async(y,x)=>{try{const{error:w}=await E.auth.signInWithPassword({email:y,password:x});return w?{error:w.message}:{success:!0}}catch{return{error:"An unexpected error occurred."}}},signOut:async()=>{window.dispatchEvent(new CustomEvent("auth:logout")),await E.auth.signOut()},resendVerification:async y=>{const x="https://syncchatapp.com/auth/callback",{error:w}=await E.auth.resend({type:"signup",email:y.toLowerCase().trim(),options:{emailRedirectTo:x}});return{error:w}},isEmailVerified:y=>!!y.email_confirmed_at,ensureAuthStability:async()=>{try{const{data:{session:y},error:x}=await E.auth.getSession();return!x&&!!y}catch(y){return console.error("Auth stability check error:",y),!1}}};return a.jsx(V1.Provider,{value:v,children:e})},ge=()=>{const e=m.useContext(V1);if(e===null)throw new Error("useAuth must be used within an AuthProvider");return e};class q4{constructor(t,r,n,s){ze(this,"groupId");ze(this,"userId");ze(this,"userName");ze(this,"callbacks");ze(this,"localStream",null);ze(this,"peerConnections",new Map);ze(this,"audioElements",new Map);ze(this,"channel",null);ze(this,"isConnected",!1);ze(this,"isMuted",!1);ze(this,"isDeafened",!1);ze(this,"handRaised",!1);ze(this,"participants",new Map);ze(this,"rtcConfig",{iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun1.l.google.com:19302"},{urls:"stun:stun2.l.google.com:19302"}]});this.groupId=t,this.userId=r,this.userName=n,this.callbacks=s}async connect(t=!0){try{console.log("🎤 Connecting to voice room..."),t&&(this.localStream=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0,sampleRate:48e3,channelCount:1}}),console.log("✅ Microphone access granted")),this.channel=E.channel(`voice-${this.groupId}`,{config:{presence:{key:this.userId}}}),this.setupSignalingHandlers(),await this.channel.subscribe(),await this.channel.track({user_id:this.userId,name:this.userName,isMuted:this.isMuted,isDeafened:this.isDeafened,isSpeaking:!1,handRaised:this.handRaised,hasMicrophone:t,joinedAt:new Date().toISOString()}),this.isConnected=!0,this.callbacks.onConnectionStateChange(!0),console.log("✅ Connected to voice room")}catch(r){throw console.error("❌ Failed to connect to voice room:",r),this.callbacks.onError(`Failed to connect: ${r instanceof Error?r.message:"Unknown error"}`),r}}setupSignalingHandlers(){this.channel.on("presence",{event:"sync"},()=>{const t=this.channel.presenceState();this.updateParticipants(t)}),this.channel.on("presence",{event:"join"},({newPresences:t})=>{t.forEach(r=>{r.user_id!==this.userId&&this.handleParticipantJoined(r)})}),this.channel.on("presence",{event:"leave"},({leftPresences:t})=>{t.forEach(r=>{this.handleParticipantLeft(r.user_id)})}),this.channel.on("broadcast",{event:"offer"},async t=>{t.user_id!==this.userId&&t.target_user_id===this.userId&&await this.handleOffer(t)}),this.channel.on("broadcast",{event:"answer"},async t=>{t.user_id!==this.userId&&t.target_user_id===this.userId&&await this.handleAnswer(t)}),this.channel.on("broadcast",{event:"ice-candidate"},async t=>{t.user_id!==this.userId&&t.target_user_id===this.userId&&await this.handleIceCandidate(t)}),this.channel.on("broadcast",{event:"participant-update"},t=>{t.user_id!==this.userId&&this.handleParticipantUpdate(t)})}updateParticipants(t){Object.values(t).forEach(r=>{r.forEach(n=>{if(n.user_id!==this.userId){const s={userId:n.user_id,name:n.name||"Unknown User",isMuted:n.isMuted||!1,isDeafened:n.isDeafened||!1,isSpeaking:n.isSpeaking||!1,handRaised:n.handRaised||!1,joinedAt:n.joinedAt||new Date().toISOString(),hasMicrophone:n.hasMicrophone!==!1};this.participants.set(s.userId,s),this.callbacks.onParticipantJoined(s)}})})}async handleParticipantJoined(t){const r={userId:t.user_id,name:t.name||"Unknown User",isMuted:t.isMuted||!1,isDeafened:t.isDeafened||!1,isSpeaking:t.isSpeaking||!1,handRaised:t.handRaised||!1,joinedAt:t.joinedAt||new Date().toISOString(),hasMicrophone:t.hasMicrophone!==!1};this.participants.set(r.userId,r),this.callbacks.onParticipantJoined(r),this.localStream&&await this.createPeerConnection(r.userId)}handleParticipantLeft(t){this.participants.delete(t),this.closePeerConnection(t),this.callbacks.onParticipantLeft(t)}handleParticipantUpdate(t){const r=this.participants.get(t.user_id);if(r){const n={...r,isMuted:t.isMuted,isDeafened:t.isDeafened,isSpeaking:t.isSpeaking,handRaised:t.handRaised};this.participants.set(t.user_id,n),this.callbacks.onParticipantUpdated(n)}}async createPeerConnection(t){const r=new RTCPeerConnection(this.rtcConfig);this.localStream&&this.localStream.getTracks().forEach(n=>{r.addTrack(n,this.localStream)}),r.ontrack=n=>{const s=n.streams[0];this.setupRemoteAudio(t,s)},r.onicecandidate=n=>{n.candidate&&this.channel.send({type:"broadcast",event:"ice-candidate",payload:{user_id:this.userId,target_user_id:t,candidate:n.candidate}})},r.onconnectionstatechange=()=>{console.log(`Connection state with ${t}:`,r.connectionState),(r.connectionState==="failed"||r.connectionState==="disconnected")&&(console.warn(`Connection failed with ${t}, attempting to reconnect...`),this.closePeerConnection(t),setTimeout(()=>{this.participants.has(t)&&this.createPeerConnection(t)},2e3))},this.peerConnections.set(t,r);try{const n=await r.createOffer();await r.setLocalDescription(n),this.channel.send({type:"broadcast",event:"offer",payload:{user_id:this.userId,target_user_id:t,offer:n}})}catch(n){console.error(`Failed to create offer for ${t}:`,n),this.closePeerConnection(t)}}async handleOffer(t){if(this.peerConnections.has(t.user_id)){console.log(`Peer connection already exists for ${t.user_id}`);return}const r=new RTCPeerConnection(this.rtcConfig);this.localStream&&this.localStream.getTracks().forEach(n=>{r.addTrack(n,this.localStream)}),r.ontrack=n=>{const s=n.streams[0];this.setupRemoteAudio(t.user_id,s)},r.onicecandidate=n=>{n.candidate&&this.channel.send({type:"broadcast",event:"ice-candidate",payload:{user_id:this.userId,target_user_id:t.user_id,candidate:n.candidate}})},this.peerConnections.set(t.user_id,r);try{await r.setRemoteDescription(t.offer);const n=await r.createAnswer();await r.setLocalDescription(n),this.channel.send({type:"broadcast",event:"answer",payload:{user_id:this.userId,target_user_id:t.user_id,answer:n}})}catch(n){console.error(`Failed to handle offer from ${t.user_id}:`,n),this.closePeerConnection(t.user_id)}}async handleAnswer(t){const r=this.peerConnections.get(t.user_id);if(r)try{await r.setRemoteDescription(t.answer)}catch(n){console.error(`Failed to handle answer from ${t.user_id}:`,n),this.closePeerConnection(t.user_id)}}async handleIceCandidate(t){const r=this.peerConnections.get(t.user_id);if(r)try{await r.addIceCandidate(t.candidate)}catch(n){console.error(`Failed to handle ICE candidate from ${t.user_id}:`,n)}}setupRemoteAudio(t,r){const n=document.createElement("audio");n.srcObject=r,n.autoplay=!0,n.volume=this.isDeafened?0:1,n.style.display="none",document.body.appendChild(n),this.audioElements.set(t,n)}closePeerConnection(t){const r=this.peerConnections.get(t);r&&(r.close(),this.peerConnections.delete(t));const n=this.audioElements.get(t);n&&(n.remove(),this.audioElements.delete(t))}toggleMute(){this.isMuted=!this.isMuted,this.localStream&&this.localStream.getAudioTracks().forEach(t=>{t.enabled=!this.isMuted}),this.broadcastParticipantUpdate()}toggleDeafen(){this.isDeafened=!this.isDeafened,this.audioElements.forEach(t=>{t.volume=this.isDeafened?0:1}),this.broadcastParticipantUpdate()}toggleHandRaise(){this.handRaised=!this.handRaised,this.broadcastParticipantUpdate()}broadcastParticipantUpdate(){this.channel.send({type:"broadcast",event:"participant-update",payload:{user_id:this.userId,isMuted:this.isMuted,isDeafened:this.isDeafened,isSpeaking:!1,handRaised:this.handRaised}})}getParticipants(){return Array.from(this.participants.values())}getParticipantCount(){return this.participants.size}isConnectedToVoiceRoom(){return this.isConnected}async disconnect(){console.log("🔌 Disconnecting from voice room..."),this.peerConnections.forEach((t,r)=>{this.closePeerConnection(r)}),this.localStream&&(this.localStream.getTracks().forEach(t=>t.stop()),this.localStream=null),this.channel&&(await this.channel.untrack(),E.removeChannel(this.channel),this.channel=null),this.isConnected=!1,this.participants.clear(),this.callbacks.onConnectionStateChange(!1),console.log("✅ Disconnected from voice room")}}const hn=()=>{const{user:e}=ge(),[t,r]=m.useState(null),[n,s]=m.useState([]),[o,i]=m.useState(!0);m.useEffect(()=>{e&&(l(),c())},[e]);const l=async()=>{if(e)try{const{data:p,error:g}=await E.from("user_engagement").select("*").eq("user_id",e.id).maybeSingle();if(g&&g.code!=="PGRST116"){console.error("Error fetching engagement:",g);return}if(p){const v=p;r({daily_streak:v.daily_streak,messages_sent_today:v.messages_sent_today,reactions_given_today:v.reactions_given_today,tools_used_today:v.tools_used_today,group_switches_used_today:v.group_switches_used_today||0,reconnects_used_today:v.reconnects_used_today||0,achievement_points:v.achievement_points||v.total_karma_points||0,last_active:new Date(v.last_active),is_premium:v.is_premium||!1,karma_level:v.karma_level||"Newcomer",total_karma_points:v.total_karma_points||0,monthly_karma_points:v.monthly_karma_points||0})}else r({daily_streak:0,messages_sent_today:0,reactions_given_today:0,tools_used_today:0,group_switches_used_today:0,reconnects_used_today:0,achievement_points:0,last_active:new Date,is_premium:!1,karma_level:"Newcomer",total_karma_points:0,monthly_karma_points:0})}catch(p){console.error("Error fetching engagement data:",p)}finally{i(!1)}},c=async()=>{if(e)try{const{data:p,error:g}=await E.from("user_achievements").select("*").eq("user_id",e.id).order("unlocked_at",{ascending:!1});if(g){console.error("Error fetching achievements:",g);return}s((p==null?void 0:p.map(v=>({id:v.id,achievement_type:v.achievement_type,achievement_title:v.achievement_title,achievement_description:v.achievement_description,badge_icon:v.badge_icon,points:v.points,unlocked_at:new Date(v.unlocked_at)})))||[])}catch(p){console.error("Error fetching achievements:",p)}},u=m.useRef(0),f=1e3;return{engagement:t,achievements:n,loading:o,trackActivity:async p=>{if(!e)return;const g=Date.now();if(!(g-u.current<f)){u.current=g;try{const{error:v}=await E.rpc("update_user_engagement",{p_user_id:e.id,p_activity_type:p});if(v){console.error("Error tracking activity:",v);return}setTimeout(()=>{l(),c()},500)}catch(v){console.error("Error tracking activity:",v)}}},getGroupKarmaLeaderboard:async(p,g=20,v=0)=>{if(!e)return[];try{const{data:y,error:x}=await E.rpc("get_group_user_karma_leaderboard",{p_group_id:p,p_limit:g,p_offset:v});return x?(console.error("Error fetching group leaderboard:",x),[]):y||[]}catch(y){return console.error("Error fetching group leaderboard:",y),[]}},refresh:()=>{l(),c()}}},yn=[{level:"Newcomer",icon:"🌱",color:"bg-gradient-to-r from-gray-400 to-gray-600",minPoints:0,maxPoints:49,benefits:["Basic chat features"],description:"Welcome to SyncChat! Start your journey here."},{level:"Explorer",icon:"🗺️",color:"bg-gradient-to-r from-blue-400 to-blue-600",minPoints:50,maxPoints:99,benefits:["Basic chat features","Custom reactions"],description:"You're exploring SyncChat and making connections!"},{level:"Rising",icon:"🔥",color:"bg-gradient-to-r from-green-400 to-blue-500",minPoints:100,maxPoints:249,benefits:["Custom reactions","Voice room priority","Special badges"],description:"You're becoming an active community member!"},{level:"Champion",icon:"⚡",color:"bg-gradient-to-r from-purple-400 to-pink-500",minPoints:250,maxPoints:499,benefits:["Voice priority","Game hosting","Profile themes"],description:"A true champion of community engagement!"},{level:"Expert",icon:"⭐",color:"bg-gradient-to-r from-blue-400 to-purple-500",minPoints:500,maxPoints:999,benefits:["Game hosting","Profile themes","Exclusive features"],description:"An expert with deep community involvement!"},{level:"Legend",icon:"👑",color:"bg-gradient-to-r from-yellow-400 to-orange-500",minPoints:1e3,maxPoints:2499,benefits:["All features","Legend status","Group influence"],description:"A legendary figure in the SyncChat community!"},{level:"Mythical",icon:"🌟",color:"bg-gradient-to-r from-pink-500 to-violet-600",minPoints:2500,maxPoints:Number.MAX_SAFE_INTEGER,benefits:["Ultimate features","Mythical status","Community leadership"],description:"The pinnacle of SyncChat achievement!"}],ul=()=>{const{user:e}=ge(),{engagement:t,achievements:r,trackActivity:n}=hn(),[s,o]=m.useState(null),[i,l]=m.useState([]),[c,u]=m.useState(!0),f=m.useCallback(j=>{for(let _=yn.length-1;_>=0;_--)if(j>=yn[_].minPoints)return yn[_];return yn[0]},[]),d=m.useCallback(j=>{const _=f(j),S=yn.findIndex(P=>P.level===_.level),N=S<yn.length-1?yn[S+1]:null,k=N?(j-_.minPoints)/(N.minPoints-_.minPoints)*100:100,C=N?N.minPoints-j:0;return{currentLevel:_,nextLevel:N,progress:Math.min(100,Math.max(0,k)),pointsToNext:Math.max(0,C),totalPoints:j}},[f]),h=m.useCallback(j=>j.map(_=>{let S="engagement",N="common";return _.achievement_type.includes("social")||_.achievement_type.includes("reaction")?S="social":_.achievement_type.includes("streak")||_.achievement_type.includes("message")?S="engagement":_.achievement_type.includes("loyalty")||_.achievement_type.includes("group")?S="loyalty":(_.achievement_type.includes("game")||_.achievement_type.includes("voice"))&&(S="gaming"),_.points>=200?N="legendary":_.points>=100?N="epic":_.points>=50&&(N="rare"),{..._,category:S,rarity:N}}),[]),p=m.useCallback(async(j,_,S,N,k)=>{if(!e)return;const C={type:j,points:_,description:S,timestamp:new Date,multiplier:N};l(P=>[C,...P.slice(0,9)]);try{if(k&&typeof k=="string"&&k.trim()!==""&&k!=="null"&&k!=="undefined"){const{error:P}=await E.rpc("track_karma_activity",{p_user_id:e.id,p_group_id:k.trim(),p_activity_type:j,p_points:_,p_description:S,p_multiplier:N||1});P&&console.error("Error tracking karma activity:",P)}else console.warn("Cannot track karma activity: no valid group_id provided",{groupId:k,type:j,points:_,description:S,groupIdType:typeof k,groupIdLength:k==null?void 0:k.length})}catch(P){console.error("Error tracking karma activity:",P)}(j==="message"||j==="reaction")&&await n(j)},[n,e]),g=m.useCallback(async j=>{!e||!t||(t.is_premium,await n(j))},[e,t,n]),v=m.useCallback(async()=>{if(e)try{const{data:j,error:_}=await E.from("karma_activities").select("*").eq("user_id",e.id).order("created_at",{ascending:!1}).limit(10);if(_)throw _;const S=(j==null?void 0:j.map(N=>({type:N.activity_type,points:N.points_earned,description:N.description,timestamp:new Date(N.created_at),multiplier:N.multiplier})))||[];l(S)}catch(j){console.error("Error fetching recent activities:",j)}},[e]);m.useEffect(()=>{if(t){const j=d(t.achievement_points||0);o(j),u(!1)}},[t,d]),m.useEffect(()=>{e&&v()},[e,v]);const y=r?h(r):[],x=m.useCallback(()=>s?s.currentLevel.benefits:[],[s]),w=m.useCallback(j=>{if(!s)return!1;const _=yn.find(S=>S.level===j);return _?s.totalPoints>=_.minPoints:!1},[s]),b=m.useCallback(()=>{if(!s||!s.nextLevel||s.pointsToNext===0)return"Max level reached!";const _=i.filter(N=>N.timestamp>new Date(Date.now()-7*24*60*60*1e3)).reduce((N,k)=>N+k.points,0)/7;if(_<=0)return"Keep being active to level up!";const S=Math.ceil(s.pointsToNext/_);return S<=1?"Less than a day":S<=7?`${S} days`:S<=30?`${Math.ceil(S/7)} weeks`:`${Math.ceil(S/30)} months`},[s,i]);return{karmaProgress:s,enhancedAchievements:y,recentActivity:i,loading:c,getKarmaLevel:f,calculateKarmaProgress:d,getCurrentBenefits:x,hasKarmaLevel:w,getEstimatedTimeToNextLevel:b,trackEnhancedActivity:g,trackKarmaActivity:p,fetchRecentActivities:v,KARMA_LEVELS:yn}},H1=m.createContext(void 0),K4=({children:e})=>{const{user:t}=ge(),{toast:r}=Be(),{trackActivity:n}=hn(),{trackKarmaActivity:s}=ul(),[o,i]=m.useState({isConnected:!1,isConnecting:!1,participants:[],participantCount:0,isMuted:!1,isDeafened:!1,isSpeaking:!1,handRaised:!1,isCollapsed:!0,isMinimized:!1}),l=m.useRef(null),c=m.useRef(null),u=m.useRef(null),f=m.useCallback(async(b,j,_=!1)=>{var S,N;if(!t){r({title:"Authentication Required",description:"Please log in to join the voice room",variant:"destructive"});return}if(o.isConnecting||o.isConnected){r({title:"Already Connected",description:"You are already in a voice room"});return}i(k=>({...k,isConnecting:!0}));try{const k=((S=t.user_metadata)==null?void 0:S.full_name)||((N=t.email)==null?void 0:N.split("@")[0])||"User";l.current=new q4(b,t.id,k,{onParticipantJoined:C=>{i(P=>({...P,participants:[...P.participants,C],participantCount:P.participantCount+1}))},onParticipantLeft:C=>{i(P=>({...P,participants:P.participants.filter(T=>T.userId!==C),participantCount:Math.max(0,P.participantCount-1)}))},onParticipantUpdated:C=>{i(P=>({...P,participants:P.participants.map(T=>T.userId===C.userId?C:T)}))},onConnectionStateChange:C=>{C||r({title:"Voice Connection Lost",description:"Lost connection to voice room. Trying to reconnect...",variant:"destructive"})},onError:C=>{r({title:"Voice Room Error",description:C,variant:"destructive"})}}),await l.current.connect(_),c.current=b,u.current=j,i(C=>{var P,T;return{...C,isConnected:!0,isConnecting:!1,isCollapsed:!1,participants:((P=l.current)==null?void 0:P.getParticipants())||[],participantCount:((T=l.current)==null?void 0:T.getParticipantCount())||0}}),n("voice_participation"),s("voice_participation",3,"Joined voice room",1,b),r({title:"Voice Room Connected",description:`Connected to ${j} voice room${_?"":" (listening only)"}`})}catch(k){console.error("Voice room connection error:",k),i(C=>({...C,isConnecting:!1})),_&&k instanceof Error&&k.name==="NotAllowedError"?r({title:"Microphone Permission Required",description:"Please allow microphone access to join the voice room, or try joining without microphone.",variant:"destructive"}):r({title:"Connection Failed",description:"Failed to join voice room. Please check your internet connection and try again.",variant:"destructive"})}},[t,o.isConnecting,o.isConnected,n,s,r]),d=m.useCallback(async()=>{try{l.current&&(await l.current.disconnect(),l.current=null),c.current=null,u.current=null,i(b=>({...b,isConnected:!1,isConnecting:!1,participants:[],participantCount:0,isSpeaking:!1,isCollapsed:!0})),r({title:"Voice Room Disconnected",description:"Left the voice room"})}catch(b){console.error("Error leaving voice room:",b),r({title:"Error",description:"Failed to leave voice room properly",variant:"destructive"})}},[r]),h=m.useCallback(()=>{l.current&&(l.current.toggleMute(),i(b=>({...b,isMuted:!b.isMuted})))},[]),p=m.useCallback(()=>{l.current&&(l.current.toggleDeafen(),i(b=>({...b,isDeafened:!b.isDeafened})))},[]),g=m.useCallback(()=>{l.current&&(l.current.toggleHandRaise(),i(b=>({...b,handRaised:!b.handRaised})))},[]),v=m.useCallback(()=>{i(b=>({...b,isCollapsed:!b.isCollapsed}))},[]),y=m.useCallback(()=>{i(b=>({...b,isMinimized:!b.isMinimized}))},[]),x=m.useCallback(()=>({isConnected:o.isConnected,participantCount:o.participantCount}),[o.isConnected,o.participantCount]),w=m.useMemo(()=>({...o,joinVoiceRoom:f,leaveVoiceRoom:d,toggleMute:h,toggleDeafen:p,toggleHandRaise:g,toggleCollapse:v,toggleMinimize:y,getConnectionStatus:x}),[o,f,d,h,p,g,v,y,x]);return a.jsx(H1.Provider,{value:w,children:e})},W1=()=>{const e=m.useContext(H1);if(e===void 0)throw new Error("useVoiceRoom must be used within a VoiceRoomProvider");return e},q1=m.createContext(void 0),K1=()=>{const e=m.useContext(q1);if(!e)throw new Error("useTheme must be used within a ThemeProvider");return e},Y4=({children:e})=>{const[t,r]=m.useState(()=>{if(typeof window<"u"){const i=localStorage.getItem("theme");if(i==="light"||i==="dark")return i}return"light"}),n=i=>{r(i),localStorage.setItem("theme",i),typeof window<"u"&&(i==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"))},s=()=>{n(t==="light"?"dark":"light")};m.useEffect(()=>{typeof window<"u"&&(document.documentElement.classList.remove("dark"),t==="dark"&&document.documentElement.classList.add("dark"))},[t]),m.useEffect(()=>{if(typeof window<"u"){const i=localStorage.getItem("theme");n(i||"light")}},[]);const o={theme:t,setTheme:n,toggleTheme:s};return a.jsx(q1.Provider,{value:o,children:e})},W=m.forwardRef(({className:e,...t},r)=>a.jsx("div",{ref:r,className:te("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));W.displayName="Card";const ue=m.forwardRef(({className:e,...t},r)=>a.jsx("div",{ref:r,className:te("flex flex-col space-y-1.5 p-6",e),...t}));ue.displayName="CardHeader";const de=m.forwardRef(({className:e,...t},r)=>a.jsx("h3",{ref:r,className:te("text-2xl font-semibold leading-none tracking-tight",e),...t}));de.displayName="CardTitle";const Et=m.forwardRef(({className:e,...t},r)=>a.jsx("p",{ref:r,className:te("text-sm text-muted-foreground",e),...t}));Et.displayName="CardDescription";const J=m.forwardRef(({className:e,...t},r)=>a.jsx("div",{ref:r,className:te("p-6 pt-0",e),...t}));J.displayName="CardContent";const Q4=m.forwardRef(({className:e,...t},r)=>a.jsx("div",{ref:r,className:te("flex items-center p-6 pt-0",e),...t}));Q4.displayName="CardFooter";const X4=Pu("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-lg text-sm font-medium ring-offset-background transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary-glow hover:shadow-lg hover:shadow-primary/20 active:scale-95",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-card-hover hover:text-accent-foreground border-border/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary-hover",ghost:"hover:bg-muted hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",tag:"bg-muted text-muted-foreground hover:bg-accent hover:text-accent-foreground border border-border/30 hover:border-accent/50 hover:shadow-sm transition-all duration-200","tag-selected":"bg-primary text-primary-foreground border border-primary hover:bg-primary-glow shadow-md shadow-primary/20"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),O=m.forwardRef(({className:e,variant:t,size:r,asChild:n=!1,...s},o)=>{const i=n?js:"button";return a.jsx(i,{className:te(X4({variant:t,size:r,className:e})),ref:o,...s})});O.displayName="Button";class Rx extends m.Component{constructor(r){super(r);ze(this,"logError",(r,n)=>{const s={message:r.message,stack:r.stack,componentStack:n.componentStack,timestamp:new Date().toISOString(),userAgent:navigator.userAgent,url:window.location.href};console.error("Error Boundary Log:",s)});ze(this,"handleRetry",()=>{this.setState({hasError:!1,error:void 0})});ze(this,"handleReload",()=>{window.location.reload()});this.state={hasError:!1}}static getDerivedStateFromError(r){return{hasError:!0,error:r}}componentDidCatch(r,n){console.error("Error caught by boundary:",r,n),this.logError(r,n),Ur.error("Something went wrong. We've logged the error and are working to fix it.")}render(){return this.state.hasError?this.props.fallback?this.props.fallback:a.jsx("div",{className:"min-h-[400px] flex items-center justify-center p-4",children:a.jsxs(W,{className:"w-full max-w-md",children:[a.jsxs(ue,{className:"text-center",children:[a.jsx("div",{className:"mx-auto mb-4 w-12 h-12 rounded-full bg-destructive/10 flex items-center justify-center",children:a.jsx(In,{className:"w-6 h-6 text-destructive"})}),a.jsx(de,{className:"text-xl",children:"Something went wrong"})]}),a.jsxs(J,{className:"space-y-4",children:[a.jsx("p",{className:"text-sm text-muted-foreground text-center",children:"We encountered an unexpected error. You can try to continue or reload the page."}),!1,a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(O,{variant:"outline",className:"flex-1",onClick:this.handleRetry,children:[a.jsx(Fi,{className:"w-4 h-4 mr-2"}),"Try Again"]}),a.jsx(O,{variant:"default",className:"flex-1",onClick:this.handleReload,children:"Reload Page"})]})]})]})}):this.props.children}}const J4=()=>{const[e,t]=m.useState(null),[r,n]=m.useState(!1),[s,o]=m.useState(!1);return m.useEffect(()=>{const l=window.matchMedia("(display-mode: standalone)").matches,c=window.navigator.standalone===!0;o(l||c),"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(d=>{console.log("SW registered: ",d),d.active&&console.log("Service worker is active, monitoring for issues...")}).catch(d=>{console.log("SW registration failed: ",d)})});const u=d=>{d.preventDefault(),t(d),n(!0)},f=()=>{o(!0),n(!1),t(null)};return window.addEventListener("beforeinstallprompt",u),window.addEventListener("appinstalled",f),()=>{window.removeEventListener("beforeinstallprompt",u),window.removeEventListener("appinstalled",f)}},[]),{isInstallable:r,isInstalled:s,installApp:async()=>{if(!e)return;e.prompt();const{outcome:l}=await e.userChoice;l==="accepted"&&(t(null),n(!1))}}},Z4=()=>{const{isInstallable:e,installApp:t}=J4(),[r,n]=m.useState(!1);return!e||r?null:a.jsx(W,{className:"fixed bottom-4 left-4 right-4 z-50 border-primary/20 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/80",children:a.jsxs(J,{className:"flex items-center gap-3 p-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-semibold text-sm",children:"Install Group Harmony"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Add to your home screen for quick access"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(O,{size:"sm",onClick:t,className:"gap-2",children:[a.jsx(p2,{className:"h-4 w-4"}),"Install"]}),a.jsx(O,{size:"sm",variant:"ghost",onClick:()=>n(!0),children:a.jsx(cn,{className:"h-4 w-4"})})]})]})})},eD=()=>{const{pathname:e}=Mo();return m.useEffect(()=>{window.scrollTo({top:0,left:0,behavior:"auto"})},[e]),null},tD=({onWindowFocus:e,onWindowBlur:t,onVisibilityChange:r})=>{const n=m.useRef(!0),s=m.useRef(!0);return m.useEffect(()=>{const o=()=>{const c=!document.hidden,u=n.current;n.current=c,c!==u&&(console.log(`👁️ Window visibility changed: ${c?"visible":"hidden"}`),r==null||r(c))},i=()=>{const c=s.current;s.current=!0,c||(console.log("🎯 Window focused"),e==null||e())},l=()=>{const c=s.current;s.current=!1,c&&(console.log("😴 Window blurred"),t==null||t())};return document.addEventListener("visibilitychange",o),window.addEventListener("focus",i),window.addEventListener("blur",l),n.current=!document.hidden,s.current=document.hasFocus(),()=>{document.removeEventListener("visibilitychange",o),window.removeEventListener("focus",i),window.removeEventListener("blur",l)}},[e,t,r]),null},rD=()=>{const{user:e,loading:t}=ge(),{toast:r}=Be(),[n,s]=m.useState({isNewUser:!1,hasCompletedProfile:!1,shouldShowOnboarding:!1,isLoading:!0});m.useEffect(()=>{if(!t){if(!e){s({isNewUser:!1,hasCompletedProfile:!1,shouldShowOnboarding:!1,isLoading:!1});return}e.email_confirmed_at?o():s({isNewUser:!1,hasCompletedProfile:!1,shouldShowOnboarding:!1,isLoading:!1})}},[e,t]);const o=async()=>{var c,u,f;if(e!=null&&e.id)try{console.log("User email confirmed at:",e.email_confirmed_at);const{data:d,error:h}=await E.from("profiles").select("*").eq("user_id",e.id).maybeSingle();if(h&&h.code!=="PGRST116"){console.error("Error checking profile:",h),s({isNewUser:!1,hasCompletedProfile:!1,shouldShowOnboarding:!1,isLoading:!1});return}const p=d&&d.username&&(((c=d.genres)==null?void 0:c.length)>0||((u=d.personality)==null?void 0:u.length)>0||((f=d.habits)==null?void 0:f.length)>0),g=new Date(e.created_at),x=new Date().getTime()-g.getTime()<6e4;s(p?{isNewUser:!1,hasCompletedProfile:!0,shouldShowOnboarding:!1,isLoading:!1}:x?{isNewUser:!0,hasCompletedProfile:!1,shouldShowOnboarding:!0,isLoading:!1}:{isNewUser:!1,hasCompletedProfile:!1,shouldShowOnboarding:!0,isLoading:!1})}catch(d){console.error("Error in checkUserStatus:",d),s({isNewUser:!1,hasCompletedProfile:!1,shouldShowOnboarding:!1,isLoading:!1})}};return{authState:n,checkEmailExists:async c=>{var u;try{const{error:f}=await E.auth.signInWithPassword({email:c,password:"dummy-password-to-check-email"});return((u=f==null?void 0:f.message)==null?void 0:u.includes("Invalid"))&&!f.message.includes("user not found")}catch{return!1}},handleAuthError:c=>{r({title:"Authentication Error",description:c,variant:"destructive"})},refreshUserStatus:o}},tu=768,Mx=1024;function _p(){const[e,t]=m.useState(void 0);return m.useEffect(()=>{const r=()=>{const i=window.innerWidth<tu;t(i)};r();const n=window.matchMedia(`(max-width: ${tu-1}px)`),s=()=>{r()};return n.addEventListener("change",s),window.addEventListener("resize",r),()=>{n.removeEventListener("change",s),window.removeEventListener("resize",r)}},[]),!!e}function nD(){const[e,t]=m.useState(void 0);return m.useEffect(()=>{const r=()=>{const o=window.innerWidth,i=o>=tu&&o<Mx;t(i)};r();const n=window.matchMedia(`(min-width: ${tu}px) and (max-width: ${Mx-1}px)`),s=()=>{r()};return n.addEventListener("change",s),window.addEventListener("resize",r),()=>{n.removeEventListener("change",s),window.removeEventListener("resize",r)}},[]),!!e}function sD(){const e=_p(),t=nD();return e?"mobile":t?"tablet":"desktop"}const Y1=()=>{const{user:e}=ge(),[t,r]=m.useState(null),[n,s]=m.useState(null),[o,i]=m.useState(!1),[l,c]=m.useState(null),u=m.useCallback(async()=>{if(!(e!=null&&e.id))return null;try{i(!0),c(null);const{data:g,error:v}=await E.from("profiles").select("*").eq("user_id",e.id).maybeSingle();if(v)throw v;return r(g),g}catch(g){return console.error("Error fetching user profile:",g),c("Failed to load profile"),null}finally{i(!1)}},[e==null?void 0:e.id]),f=m.useCallback(async()=>{if(!(e!=null&&e.id))return null;try{i(!0),c(null);const{data:g,error:v}=await E.from("group_members").select(`
          group_id,
          groups (
            id,
            name,
            vibe_label,
            current_members,
            max_members,
            lifecycle_stage,
            created_at
          )
        `).eq("user_id",e.id).order("joined_at",{ascending:!1}).limit(1).maybeSingle();if(v)throw v;const y=g==null?void 0:g.groups;return s(y),y}catch(g){return console.error("Error fetching current group:",g),c("Failed to load group data"),null}finally{i(!1)}},[e==null?void 0:e.id]),d=m.useCallback(async g=>{if(!(e!=null&&e.id)||!t)return!1;try{i(!0),c(null);const{error:v}=await E.from("profiles").update(g).eq("user_id",e.id);if(v)throw v;return r(y=>y?{...y,...g}:null),!0}catch(v){return console.error("Error updating user profile:",v),c("Failed to update profile"),!1}finally{i(!1)}},[e==null?void 0:e.id,t]),h=m.useCallback(()=>{r(null),s(null),c(null)},[]),p=m.useCallback(async()=>{if(e!=null&&e.id)try{i(!0),c(null),await Promise.all([u(),f()])}catch(g){console.error("Error refreshing data:",g),c("Failed to load data")}finally{i(!1)}},[e==null?void 0:e.id,u,f]);return m.useEffect(()=>{e!=null&&e.id?p():h()},[e==null?void 0:e.id,p,h]),m.useEffect(()=>{const g=()=>{setTimeout(()=>{p()},2e3)};return window.addEventListener("onboarding:complete",g),()=>window.removeEventListener("onboarding:complete",g)},[p]),{userProfile:t,currentGroup:n,isLoading:o,error:l,fetchUserProfile:u,fetchCurrentGroup:f,updateUserProfile:d,setCurrentGroup:s,clearData:h,refreshData:p}},aD=Pu("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function oe({className:e,variant:t,...r}){return a.jsx("div",{className:te(aD({variant:t}),e),...r})}const oD=({className:e="",isMobile:t=!1})=>{var s;const{user:r}=ge(),{achievements:n}=hn();return Be(),t?null:a.jsx("nav",{className:`
      fixed top-0 left-0 right-0 z-50
      glass-card border-b border-border smooth-transition
      ${e}
    `,children:a.jsx("div",{className:"max-w-6xl mx-auto px-4 py-3",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("div",{className:"flex items-center gap-4",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-8 h-8 bg-primary rounded-lg flex items-center justify-center",children:a.jsx(ln,{className:"h-5 w-5 text-primary-foreground"})}),a.jsx("span",{className:"text-lg font-bold text-foreground",children:"SyncChat"})]})}),a.jsx("div",{className:"flex items-center gap-3",children:r&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"text-sm text-muted-foreground",children:(s=r.email)==null?void 0:s.split("@")[0]}),n&&n.length>0&&a.jsxs(oe,{variant:"secondary",className:"text-xs",children:[n.length," achievements"]})]})})]})})})},ht=m.forwardRef(({className:e,type:t,...r},n)=>a.jsx("input",{type:t,className:te("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:n,...r}));ht.displayName="Input";var nf="focusScope.autoFocusOnMount",sf="focusScope.autoFocusOnUnmount",Ax={bubbles:!1,cancelable:!0},iD="FocusScope",td=m.forwardRef((e,t)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:s,onUnmountAutoFocus:o,...i}=e,[l,c]=m.useState(null),u=Ke(s),f=Ke(o),d=m.useRef(null),h=_e(t,v=>c(v)),p=m.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;m.useEffect(()=>{if(n){let v=function(b){if(p.paused||!l)return;const j=b.target;l.contains(j)?d.current=j:Yn(d.current,{select:!0})},y=function(b){if(p.paused||!l)return;const j=b.relatedTarget;j!==null&&(l.contains(j)||Yn(d.current,{select:!0}))},x=function(b){if(document.activeElement===document.body)for(const _ of b)_.removedNodes.length>0&&Yn(l)};document.addEventListener("focusin",v),document.addEventListener("focusout",y);const w=new MutationObserver(x);return l&&w.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",v),document.removeEventListener("focusout",y),w.disconnect()}}},[n,l,p.paused]),m.useEffect(()=>{if(l){Ox.add(p);const v=document.activeElement;if(!l.contains(v)){const x=new CustomEvent(nf,Ax);l.addEventListener(nf,u),l.dispatchEvent(x),x.defaultPrevented||(lD(hD(Q1(l)),{select:!0}),document.activeElement===v&&Yn(l))}return()=>{l.removeEventListener(nf,u),setTimeout(()=>{const x=new CustomEvent(sf,Ax);l.addEventListener(sf,f),l.dispatchEvent(x),x.defaultPrevented||Yn(v??document.body,{select:!0}),l.removeEventListener(sf,f),Ox.remove(p)},0)}}},[l,u,f,p]);const g=m.useCallback(v=>{if(!r&&!n||p.paused)return;const y=v.key==="Tab"&&!v.altKey&&!v.ctrlKey&&!v.metaKey,x=document.activeElement;if(y&&x){const w=v.currentTarget,[b,j]=cD(w);b&&j?!v.shiftKey&&x===j?(v.preventDefault(),r&&Yn(b,{select:!0})):v.shiftKey&&x===b&&(v.preventDefault(),r&&Yn(j,{select:!0})):x===w&&v.preventDefault()}},[r,n,p.paused]);return a.jsx(ie.div,{tabIndex:-1,...i,ref:h,onKeyDown:g})});td.displayName=iD;function lD(e,{select:t=!1}={}){const r=document.activeElement;for(const n of e)if(Yn(n,{select:t}),document.activeElement!==r)return}function cD(e){const t=Q1(e),r=Dx(t,e),n=Dx(t.reverse(),e);return[r,n]}function Q1(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const s=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||s?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function Dx(e,t){for(const r of e)if(!uD(r,{upTo:t}))return r}function uD(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function dD(e){return e instanceof HTMLInputElement&&"select"in e}function Yn(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&dD(e)&&t&&e.select()}}var Ox=fD();function fD(){let e=[];return{add(t){const r=e[0];t!==r&&(r==null||r.pause()),e=Ix(e,t),e.unshift(t)},remove(t){var r;e=Ix(e,t),(r=e[0])==null||r.resume()}}}function Ix(e,t){const r=[...e],n=r.indexOf(t);return n!==-1&&r.splice(n,1),r}function hD(e){return e.filter(t=>t.tagName!=="A")}var af=0;function Np(){m.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??Lx()),document.body.insertAdjacentElement("beforeend",e[1]??Lx()),af++,()=>{af===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),af--}},[])}function Lx(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var sn=function(){return sn=Object.assign||function(t){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},sn.apply(this,arguments)};function X1(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r}function mD(e,t,r){if(r||arguments.length===2)for(var n=0,s=t.length,o;n<s;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))}var vc="right-scroll-bar-position",xc="width-before-scroll-bar",pD="with-scroll-bars-hidden",gD="--removed-body-scroll-bar-size";function of(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function vD(e,t){var r=m.useState(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(n){var s=r.value;s!==n&&(r.value=n,r.callback(n,s))}}}})[0];return r.callback=t,r.facade}var xD=typeof window<"u"?m.useLayoutEffect:m.useEffect,$x=new WeakMap;function yD(e,t){var r=vD(null,function(n){return e.forEach(function(s){return of(s,n)})});return xD(function(){var n=$x.get(r);if(n){var s=new Set(n),o=new Set(e),i=r.current;s.forEach(function(l){o.has(l)||of(l,null)}),o.forEach(function(l){s.has(l)||of(l,i)})}$x.set(r,e)},[e]),r}function wD(e){return e}function bD(e,t){t===void 0&&(t=wD);var r=[],n=!1,s={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(o){var i=t(o,n);return r.push(i),function(){r=r.filter(function(l){return l!==i})}},assignSyncMedium:function(o){for(n=!0;r.length;){var i=r;r=[],i.forEach(o)}r={push:function(l){return o(l)},filter:function(){return r}}},assignMedium:function(o){n=!0;var i=[];if(r.length){var l=r;r=[],l.forEach(o),i=r}var c=function(){var f=i;i=[],f.forEach(o)},u=function(){return Promise.resolve().then(c)};u(),r={push:function(f){i.push(f),u()},filter:function(f){return i=i.filter(f),r}}}};return s}function jD(e){e===void 0&&(e={});var t=bD(null);return t.options=sn({async:!0,ssr:!1},e),t}var J1=function(e){var t=e.sideCar,r=X1(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw new Error("Sidecar medium not found");return m.createElement(n,sn({},r))};J1.isSideCarExport=!0;function _D(e,t){return e.useMedium(t),J1}var Z1=jD(),lf=function(){},rd=m.forwardRef(function(e,t){var r=m.useRef(null),n=m.useState({onScrollCapture:lf,onWheelCapture:lf,onTouchMoveCapture:lf}),s=n[0],o=n[1],i=e.forwardProps,l=e.children,c=e.className,u=e.removeScrollBar,f=e.enabled,d=e.shards,h=e.sideCar,p=e.noIsolation,g=e.inert,v=e.allowPinchZoom,y=e.as,x=y===void 0?"div":y,w=e.gapMode,b=X1(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),j=h,_=yD([r,t]),S=sn(sn({},b),s);return m.createElement(m.Fragment,null,f&&m.createElement(j,{sideCar:Z1,removeScrollBar:u,shards:d,noIsolation:p,inert:g,setCallbacks:o,allowPinchZoom:!!v,lockRef:r,gapMode:w}),i?m.cloneElement(m.Children.only(l),sn(sn({},S),{ref:_})):m.createElement(x,sn({},S,{className:c,ref:_}),l))});rd.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};rd.classNames={fullWidth:xc,zeroRight:vc};var ND=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function SD(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=ND();return t&&e.setAttribute("nonce",t),e}function kD(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function CD(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var ED=function(){var e=0,t=null;return{add:function(r){e==0&&(t=SD())&&(kD(t,r),CD(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},PD=function(){var e=ED();return function(t,r){m.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},ej=function(){var e=PD(),t=function(r){var n=r.styles,s=r.dynamic;return e(n,s),null};return t},TD={left:0,top:0,right:0,gap:0},cf=function(e){return parseInt(e||"",10)||0},RD=function(e){var t=window.getComputedStyle(document.body),r=t[e==="padding"?"paddingLeft":"marginLeft"],n=t[e==="padding"?"paddingTop":"marginTop"],s=t[e==="padding"?"paddingRight":"marginRight"];return[cf(r),cf(n),cf(s)]},MD=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return TD;var t=RD(e),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-r+t[2]-t[0])}},AD=ej(),Ka="data-scroll-locked",DD=function(e,t,r,n){var s=e.left,o=e.top,i=e.right,l=e.gap;return r===void 0&&(r="margin"),`
  .`.concat(pD,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(l,"px ").concat(n,`;
  }
  body[`).concat(Ka,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(i,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(l,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(vc,` {
    right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(xc,` {
    margin-right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(vc," .").concat(vc,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(xc," .").concat(xc,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(Ka,`] {
    `).concat(gD,": ").concat(l,`px;
  }
`)},Ux=function(){var e=parseInt(document.body.getAttribute(Ka)||"0",10);return isFinite(e)?e:0},OD=function(){m.useEffect(function(){return document.body.setAttribute(Ka,(Ux()+1).toString()),function(){var e=Ux()-1;e<=0?document.body.removeAttribute(Ka):document.body.setAttribute(Ka,e.toString())}},[])},ID=function(e){var t=e.noRelative,r=e.noImportant,n=e.gapMode,s=n===void 0?"margin":n;OD();var o=m.useMemo(function(){return MD(s)},[s]);return m.createElement(AD,{styles:DD(o,!t,s,r?"":"!important")})},Wh=!1;if(typeof window<"u")try{var ql=Object.defineProperty({},"passive",{get:function(){return Wh=!0,!0}});window.addEventListener("test",ql,ql),window.removeEventListener("test",ql,ql)}catch{Wh=!1}var _a=Wh?{passive:!1}:!1,LD=function(e){return e.tagName==="TEXTAREA"},tj=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!LD(e)&&r[t]==="visible")},$D=function(e){return tj(e,"overflowY")},UD=function(e){return tj(e,"overflowX")},Fx=function(e,t){var r=t.ownerDocument,n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var s=rj(e,n);if(s){var o=nj(e,n),i=o[1],l=o[2];if(i>l)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},FD=function(e){var t=e.scrollTop,r=e.scrollHeight,n=e.clientHeight;return[t,r,n]},zD=function(e){var t=e.scrollLeft,r=e.scrollWidth,n=e.clientWidth;return[t,r,n]},rj=function(e,t){return e==="v"?$D(t):UD(t)},nj=function(e,t){return e==="v"?FD(t):zD(t)},GD=function(e,t){return e==="h"&&t==="rtl"?-1:1},BD=function(e,t,r,n,s){var o=GD(e,window.getComputedStyle(t).direction),i=o*n,l=r.target,c=t.contains(l),u=!1,f=i>0,d=0,h=0;do{var p=nj(e,l),g=p[0],v=p[1],y=p[2],x=v-y-o*g;(g||x)&&rj(e,l)&&(d+=x,h+=g),l instanceof ShadowRoot?l=l.host:l=l.parentNode}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(f&&(Math.abs(d)<1||!s)||!f&&(Math.abs(h)<1||!s))&&(u=!0),u},Kl=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},zx=function(e){return[e.deltaX,e.deltaY]},Gx=function(e){return e&&"current"in e?e.current:e},VD=function(e,t){return e[0]===t[0]&&e[1]===t[1]},HD=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},WD=0,Na=[];function qD(e){var t=m.useRef([]),r=m.useRef([0,0]),n=m.useRef(),s=m.useState(WD++)[0],o=m.useState(ej)[0],i=m.useRef(e);m.useEffect(function(){i.current=e},[e]),m.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var v=mD([e.lockRef.current],(e.shards||[]).map(Gx),!0).filter(Boolean);return v.forEach(function(y){return y.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),v.forEach(function(y){return y.classList.remove("allow-interactivity-".concat(s))})}}},[e.inert,e.lockRef.current,e.shards]);var l=m.useCallback(function(v,y){if("touches"in v&&v.touches.length===2||v.type==="wheel"&&v.ctrlKey)return!i.current.allowPinchZoom;var x=Kl(v),w=r.current,b="deltaX"in v?v.deltaX:w[0]-x[0],j="deltaY"in v?v.deltaY:w[1]-x[1],_,S=v.target,N=Math.abs(b)>Math.abs(j)?"h":"v";if("touches"in v&&N==="h"&&S.type==="range")return!1;var k=Fx(N,S);if(!k)return!0;if(k?_=N:(_=N==="v"?"h":"v",k=Fx(N,S)),!k)return!1;if(!n.current&&"changedTouches"in v&&(b||j)&&(n.current=_),!_)return!0;var C=n.current||_;return BD(C,y,v,C==="h"?b:j,!0)},[]),c=m.useCallback(function(v){var y=v;if(!(!Na.length||Na[Na.length-1]!==o)){var x="deltaY"in y?zx(y):Kl(y),w=t.current.filter(function(_){return _.name===y.type&&(_.target===y.target||y.target===_.shadowParent)&&VD(_.delta,x)})[0];if(w&&w.should){y.cancelable&&y.preventDefault();return}if(!w){var b=(i.current.shards||[]).map(Gx).filter(Boolean).filter(function(_){return _.contains(y.target)}),j=b.length>0?l(y,b[0]):!i.current.noIsolation;j&&y.cancelable&&y.preventDefault()}}},[]),u=m.useCallback(function(v,y,x,w){var b={name:v,delta:y,target:x,should:w,shadowParent:KD(x)};t.current.push(b),setTimeout(function(){t.current=t.current.filter(function(j){return j!==b})},1)},[]),f=m.useCallback(function(v){r.current=Kl(v),n.current=void 0},[]),d=m.useCallback(function(v){u(v.type,zx(v),v.target,l(v,e.lockRef.current))},[]),h=m.useCallback(function(v){u(v.type,Kl(v),v.target,l(v,e.lockRef.current))},[]);m.useEffect(function(){return Na.push(o),e.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:h}),document.addEventListener("wheel",c,_a),document.addEventListener("touchmove",c,_a),document.addEventListener("touchstart",f,_a),function(){Na=Na.filter(function(v){return v!==o}),document.removeEventListener("wheel",c,_a),document.removeEventListener("touchmove",c,_a),document.removeEventListener("touchstart",f,_a)}},[]);var p=e.removeScrollBar,g=e.inert;return m.createElement(m.Fragment,null,g?m.createElement(o,{styles:HD(s)}):null,p?m.createElement(ID,{gapMode:e.gapMode}):null)}function KD(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const YD=_D(Z1,qD);var nd=m.forwardRef(function(e,t){return m.createElement(rd,sn({},e,{ref:t,sideCar:YD}))});nd.classNames=rd.classNames;var QD=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Sa=new WeakMap,Yl=new WeakMap,Ql={},uf=0,sj=function(e){return e&&(e.host||sj(e.parentNode))},XD=function(e,t){return t.map(function(r){if(e.contains(r))return r;var n=sj(r);return n&&e.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",e,". Doing nothing"),null)}).filter(function(r){return!!r})},JD=function(e,t,r,n){var s=XD(t,Array.isArray(e)?e:[e]);Ql[r]||(Ql[r]=new WeakMap);var o=Ql[r],i=[],l=new Set,c=new Set(s),u=function(d){!d||l.has(d)||(l.add(d),u(d.parentNode))};s.forEach(u);var f=function(d){!d||c.has(d)||Array.prototype.forEach.call(d.children,function(h){if(l.has(h))f(h);else try{var p=h.getAttribute(n),g=p!==null&&p!=="false",v=(Sa.get(h)||0)+1,y=(o.get(h)||0)+1;Sa.set(h,v),o.set(h,y),i.push(h),v===1&&g&&Yl.set(h,!0),y===1&&h.setAttribute(r,"true"),g||h.setAttribute(n,"true")}catch(x){console.error("aria-hidden: cannot operate on ",h,x)}})};return f(t),l.clear(),uf++,function(){i.forEach(function(d){var h=Sa.get(d)-1,p=o.get(d)-1;Sa.set(d,h),o.set(d,p),h||(Yl.has(d)||d.removeAttribute(n),Yl.delete(d)),p||d.removeAttribute(r)}),uf--,uf||(Sa=new WeakMap,Sa=new WeakMap,Yl=new WeakMap,Ql={})}},Sp=function(e,t,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(e)?e:[e]),s=QD(e);return s?(n.push.apply(n,Array.from(s.querySelectorAll("[aria-live]"))),JD(n,s,r,"aria-hidden")):function(){return null}},kp="Dialog",[aj,g$]=kr(kp),[ZD,Yr]=aj(kp),oj=e=>{const{__scopeDialog:t,children:r,open:n,defaultOpen:s,onOpenChange:o,modal:i=!0}=e,l=m.useRef(null),c=m.useRef(null),[u=!1,f]=dn({prop:n,defaultProp:s,onChange:o});return a.jsx(ZD,{scope:t,triggerRef:l,contentRef:c,contentId:Rn(),titleId:Rn(),descriptionId:Rn(),open:u,onOpenChange:f,onOpenToggle:m.useCallback(()=>f(d=>!d),[f]),modal:i,children:r})};oj.displayName=kp;var ij="DialogTrigger",lj=m.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=Yr(ij,r),o=_e(t,s.triggerRef);return a.jsx(ie.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":Pp(s.open),...n,ref:o,onClick:K(e.onClick,s.onOpenToggle)})});lj.displayName=ij;var Cp="DialogPortal",[eO,cj]=aj(Cp,{forceMount:void 0}),uj=e=>{const{__scopeDialog:t,forceMount:r,children:n,container:s}=e,o=Yr(Cp,t);return a.jsx(eO,{scope:t,forceMount:r,children:m.Children.map(n,i=>a.jsx(gt,{present:r||o.open,children:a.jsx(sl,{asChild:!0,container:s,children:i})}))})};uj.displayName=Cp;var ru="DialogOverlay",dj=m.forwardRef((e,t)=>{const r=cj(ru,e.__scopeDialog),{forceMount:n=r.forceMount,...s}=e,o=Yr(ru,e.__scopeDialog);return o.modal?a.jsx(gt,{present:n||o.open,children:a.jsx(tO,{...s,ref:t})}):null});dj.displayName=ru;var tO=m.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=Yr(ru,r);return a.jsx(nd,{as:js,allowPinchZoom:!0,shards:[s.contentRef],children:a.jsx(ie.div,{"data-state":Pp(s.open),...n,ref:t,style:{pointerEvents:"auto",...n.style}})})}),ia="DialogContent",fj=m.forwardRef((e,t)=>{const r=cj(ia,e.__scopeDialog),{forceMount:n=r.forceMount,...s}=e,o=Yr(ia,e.__scopeDialog);return a.jsx(gt,{present:n||o.open,children:o.modal?a.jsx(rO,{...s,ref:t}):a.jsx(nO,{...s,ref:t})})});fj.displayName=ia;var rO=m.forwardRef((e,t)=>{const r=Yr(ia,e.__scopeDialog),n=m.useRef(null),s=_e(t,r.contentRef,n);return m.useEffect(()=>{const o=n.current;if(o)return Sp(o)},[]),a.jsx(hj,{...e,ref:s,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:K(e.onCloseAutoFocus,o=>{var i;o.preventDefault(),(i=r.triggerRef.current)==null||i.focus()}),onPointerDownOutside:K(e.onPointerDownOutside,o=>{const i=o.detail.originalEvent,l=i.button===0&&i.ctrlKey===!0;(i.button===2||l)&&o.preventDefault()}),onFocusOutside:K(e.onFocusOutside,o=>o.preventDefault())})}),nO=m.forwardRef((e,t)=>{const r=Yr(ia,e.__scopeDialog),n=m.useRef(!1),s=m.useRef(!1);return a.jsx(hj,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var i,l;(i=e.onCloseAutoFocus)==null||i.call(e,o),o.defaultPrevented||(n.current||(l=r.triggerRef.current)==null||l.focus(),o.preventDefault()),n.current=!1,s.current=!1},onInteractOutside:o=>{var c,u;(c=e.onInteractOutside)==null||c.call(e,o),o.defaultPrevented||(n.current=!0,o.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const i=o.target;((u=r.triggerRef.current)==null?void 0:u.contains(i))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&s.current&&o.preventDefault()}})}),hj=m.forwardRef((e,t)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:s,onCloseAutoFocus:o,...i}=e,l=Yr(ia,r),c=m.useRef(null),u=_e(t,c);return Np(),a.jsxs(a.Fragment,{children:[a.jsx(td,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:s,onUnmountAutoFocus:o,children:a.jsx(So,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":Pp(l.open),...i,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),a.jsxs(a.Fragment,{children:[a.jsx(sO,{titleId:l.titleId}),a.jsx(oO,{contentRef:c,descriptionId:l.descriptionId})]})]})}),Ep="DialogTitle",mj=m.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=Yr(Ep,r);return a.jsx(ie.h2,{id:s.titleId,...n,ref:t})});mj.displayName=Ep;var pj="DialogDescription",gj=m.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=Yr(pj,r);return a.jsx(ie.p,{id:s.descriptionId,...n,ref:t})});gj.displayName=pj;var vj="DialogClose",xj=m.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=Yr(vj,r);return a.jsx(ie.button,{type:"button",...n,ref:t,onClick:K(e.onClick,()=>s.onOpenChange(!1))})});xj.displayName=vj;function Pp(e){return e?"open":"closed"}var yj="DialogTitleWarning",[v$,wj]=yE(yj,{contentName:ia,titleName:Ep,docsSlug:"dialog"}),sO=({titleId:e})=>{const t=wj(yj),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return m.useEffect(()=>{e&&(document.getElementById(e)||console.error(r))},[r,e]),null},aO="DialogDescriptionWarning",oO=({contentRef:e,descriptionId:t})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${wj(aO).contentName}}.`;return m.useEffect(()=>{var o;const s=(o=e.current)==null?void 0:o.getAttribute("aria-describedby");t&&s&&(document.getElementById(t)||console.warn(n))},[n,e,t]),null},bj=oj,jj=lj,_j=uj,Tp=dj,Rp=fj,Mp=mj,Ap=gj,Nj=xj;const Ht=bj,ji=jj,iO=_j,Sj=m.forwardRef(({className:e,...t},r)=>a.jsx(Tp,{ref:r,className:te("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));Sj.displayName=Tp.displayName;const Lt=m.forwardRef(({className:e,children:t,...r},n)=>a.jsxs(iO,{children:[a.jsx(Sj,{}),a.jsxs(Rp,{ref:n,className:te("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...r,children:[t,a.jsxs(Nj,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[a.jsx(cn,{className:"h-4 w-4"}),a.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Lt.displayName=Rp.displayName;const nr=({className:e,...t})=>a.jsx("div",{className:te("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});nr.displayName="DialogHeader";const kj=({className:e,...t})=>a.jsx("div",{className:te("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});kj.displayName="DialogFooter";const qt=m.forwardRef(({className:e,...t},r)=>a.jsx(Mp,{ref:r,className:te("text-lg font-semibold leading-none tracking-tight",e),...t}));qt.displayName=Mp.displayName;const cs=m.forwardRef(({className:e,...t},r)=>a.jsx(Ap,{ref:r,className:te("text-sm text-muted-foreground",e),...t}));cs.displayName=Ap.displayName;var lO="Separator",Bx="horizontal",cO=["horizontal","vertical"],Cj=m.forwardRef((e,t)=>{const{decorative:r,orientation:n=Bx,...s}=e,o=uO(n)?n:Bx,l=r?{role:"none"}:{"aria-orientation":o==="vertical"?o:void 0,role:"separator"};return a.jsx(ie.div,{"data-orientation":o,...l,...s,ref:t})});Cj.displayName=lO;function uO(e){return cO.includes(e)}var Ej=Cj;const pr=m.forwardRef(({className:e,orientation:t="horizontal",decorative:r=!0,...n},s)=>a.jsx(Ej,{ref:s,decorative:r,orientation:t,className:te("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...n}));pr.displayName=Ej.displayName;function Dp(e,[t,r]){return Math.min(r,Math.max(t,e))}var dO=m.createContext(void 0);function dl(e){const t=m.useContext(dO);return e||t||"ltr"}function Op(e){const t=m.useRef({value:e,previous:e});return m.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var Pj=["PageUp","PageDown"],Tj=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Rj={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Io="Slider",[qh,fO,hO]=ku(Io),[Mj,x$]=kr(Io,[hO]),[mO,sd]=Mj(Io),Aj=m.forwardRef((e,t)=>{const{name:r,min:n=0,max:s=100,step:o=1,orientation:i="horizontal",disabled:l=!1,minStepsBetweenThumbs:c=0,defaultValue:u=[n],value:f,onValueChange:d=()=>{},onValueCommit:h=()=>{},inverted:p=!1,form:g,...v}=e,y=m.useRef(new Set),x=m.useRef(0),b=i==="horizontal"?pO:gO,[j=[],_]=dn({prop:f,defaultProp:u,onChange:T=>{var G;(G=[...y.current][x.current])==null||G.focus(),d(T)}}),S=m.useRef(j);function N(T){const M=bO(j,T);P(T,M)}function k(T){P(T,x.current)}function C(){const T=S.current[x.current];j[x.current]!==T&&h(j)}function P(T,M,{commit:G}={commit:!1}){const $=SO(o),Q=kO(Math.round((T-n)/o)*o+n,$),H=Dp(Q,[n,s]);_((Y=[])=>{const R=yO(Y,H,M);if(NO(R,c*o)){x.current=R.indexOf(H);const D=String(R)!==String(Y);return D&&G&&h(R),D?R:Y}else return Y})}return a.jsx(mO,{scope:e.__scopeSlider,name:r,disabled:l,min:n,max:s,valueIndexToChangeRef:x,thumbs:y.current,values:j,orientation:i,form:g,children:a.jsx(qh.Provider,{scope:e.__scopeSlider,children:a.jsx(qh.Slot,{scope:e.__scopeSlider,children:a.jsx(b,{"aria-disabled":l,"data-disabled":l?"":void 0,...v,ref:t,onPointerDown:K(v.onPointerDown,()=>{l||(S.current=j)}),min:n,max:s,inverted:p,onSlideStart:l?void 0:N,onSlideMove:l?void 0:k,onSlideEnd:l?void 0:C,onHomeKeyDown:()=>!l&&P(n,0,{commit:!0}),onEndKeyDown:()=>!l&&P(s,j.length-1,{commit:!0}),onStepKeyDown:({event:T,direction:M})=>{if(!l){const Q=Pj.includes(T.key)||T.shiftKey&&Tj.includes(T.key)?10:1,H=x.current,Y=j[H],R=o*Q*M;P(Y+R,H,{commit:!0})}}})})})})});Aj.displayName=Io;var[Dj,Oj]=Mj(Io,{startEdge:"left",endEdge:"right",size:"width",direction:1}),pO=m.forwardRef((e,t)=>{const{min:r,max:n,dir:s,inverted:o,onSlideStart:i,onSlideMove:l,onSlideEnd:c,onStepKeyDown:u,...f}=e,[d,h]=m.useState(null),p=_e(t,b=>h(b)),g=m.useRef(),v=dl(s),y=v==="ltr",x=y&&!o||!y&&o;function w(b){const j=g.current||d.getBoundingClientRect(),_=[0,j.width],N=Ip(_,x?[r,n]:[n,r]);return g.current=j,N(b-j.left)}return a.jsx(Dj,{scope:e.__scopeSlider,startEdge:x?"left":"right",endEdge:x?"right":"left",direction:x?1:-1,size:"width",children:a.jsx(Ij,{dir:v,"data-orientation":"horizontal",...f,ref:p,style:{...f.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:b=>{const j=w(b.clientX);i==null||i(j)},onSlideMove:b=>{const j=w(b.clientX);l==null||l(j)},onSlideEnd:()=>{g.current=void 0,c==null||c()},onStepKeyDown:b=>{const _=Rj[x?"from-left":"from-right"].includes(b.key);u==null||u({event:b,direction:_?-1:1})}})})}),gO=m.forwardRef((e,t)=>{const{min:r,max:n,inverted:s,onSlideStart:o,onSlideMove:i,onSlideEnd:l,onStepKeyDown:c,...u}=e,f=m.useRef(null),d=_e(t,f),h=m.useRef(),p=!s;function g(v){const y=h.current||f.current.getBoundingClientRect(),x=[0,y.height],b=Ip(x,p?[n,r]:[r,n]);return h.current=y,b(v-y.top)}return a.jsx(Dj,{scope:e.__scopeSlider,startEdge:p?"bottom":"top",endEdge:p?"top":"bottom",size:"height",direction:p?1:-1,children:a.jsx(Ij,{"data-orientation":"vertical",...u,ref:d,style:{...u.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:v=>{const y=g(v.clientY);o==null||o(y)},onSlideMove:v=>{const y=g(v.clientY);i==null||i(y)},onSlideEnd:()=>{h.current=void 0,l==null||l()},onStepKeyDown:v=>{const x=Rj[p?"from-bottom":"from-top"].includes(v.key);c==null||c({event:v,direction:x?-1:1})}})})}),Ij=m.forwardRef((e,t)=>{const{__scopeSlider:r,onSlideStart:n,onSlideMove:s,onSlideEnd:o,onHomeKeyDown:i,onEndKeyDown:l,onStepKeyDown:c,...u}=e,f=sd(Io,r);return a.jsx(ie.span,{...u,ref:t,onKeyDown:K(e.onKeyDown,d=>{d.key==="Home"?(i(d),d.preventDefault()):d.key==="End"?(l(d),d.preventDefault()):Pj.concat(Tj).includes(d.key)&&(c(d),d.preventDefault())}),onPointerDown:K(e.onPointerDown,d=>{const h=d.target;h.setPointerCapture(d.pointerId),d.preventDefault(),f.thumbs.has(h)?h.focus():n(d)}),onPointerMove:K(e.onPointerMove,d=>{d.target.hasPointerCapture(d.pointerId)&&s(d)}),onPointerUp:K(e.onPointerUp,d=>{const h=d.target;h.hasPointerCapture(d.pointerId)&&(h.releasePointerCapture(d.pointerId),o(d))})})}),Lj="SliderTrack",$j=m.forwardRef((e,t)=>{const{__scopeSlider:r,...n}=e,s=sd(Lj,r);return a.jsx(ie.span,{"data-disabled":s.disabled?"":void 0,"data-orientation":s.orientation,...n,ref:t})});$j.displayName=Lj;var Kh="SliderRange",Uj=m.forwardRef((e,t)=>{const{__scopeSlider:r,...n}=e,s=sd(Kh,r),o=Oj(Kh,r),i=m.useRef(null),l=_e(t,i),c=s.values.length,u=s.values.map(h=>zj(h,s.min,s.max)),f=c>1?Math.min(...u):0,d=100-Math.max(...u);return a.jsx(ie.span,{"data-orientation":s.orientation,"data-disabled":s.disabled?"":void 0,...n,ref:l,style:{...e.style,[o.startEdge]:f+"%",[o.endEdge]:d+"%"}})});Uj.displayName=Kh;var Yh="SliderThumb",Fj=m.forwardRef((e,t)=>{const r=fO(e.__scopeSlider),[n,s]=m.useState(null),o=_e(t,l=>s(l)),i=m.useMemo(()=>n?r().findIndex(l=>l.ref.current===n):-1,[r,n]);return a.jsx(vO,{...e,ref:o,index:i})}),vO=m.forwardRef((e,t)=>{const{__scopeSlider:r,index:n,name:s,...o}=e,i=sd(Yh,r),l=Oj(Yh,r),[c,u]=m.useState(null),f=_e(t,w=>u(w)),d=c?i.form||!!c.closest("form"):!0,h=Lu(c),p=i.values[n],g=p===void 0?0:zj(p,i.min,i.max),v=wO(n,i.values.length),y=h==null?void 0:h[l.size],x=y?jO(y,g,l.direction):0;return m.useEffect(()=>{if(c)return i.thumbs.add(c),()=>{i.thumbs.delete(c)}},[c,i.thumbs]),a.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[l.startEdge]:`calc(${g}% + ${x}px)`},children:[a.jsx(qh.ItemSlot,{scope:e.__scopeSlider,children:a.jsx(ie.span,{role:"slider","aria-label":e["aria-label"]||v,"aria-valuemin":i.min,"aria-valuenow":p,"aria-valuemax":i.max,"aria-orientation":i.orientation,"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,tabIndex:i.disabled?void 0:0,...o,ref:f,style:p===void 0?{display:"none"}:e.style,onFocus:K(e.onFocus,()=>{i.valueIndexToChangeRef.current=n})})}),d&&a.jsx(xO,{name:s??(i.name?i.name+(i.values.length>1?"[]":""):void 0),form:i.form,value:p},n)]})});Fj.displayName=Yh;var xO=e=>{const{value:t,...r}=e,n=m.useRef(null),s=Op(t);return m.useEffect(()=>{const o=n.current,i=window.HTMLInputElement.prototype,c=Object.getOwnPropertyDescriptor(i,"value").set;if(s!==t&&c){const u=new Event("input",{bubbles:!0});c.call(o,t),o.dispatchEvent(u)}},[s,t]),a.jsx("input",{style:{display:"none"},...r,ref:n,defaultValue:t})};function yO(e=[],t,r){const n=[...e];return n[r]=t,n.sort((s,o)=>s-o)}function zj(e,t,r){const o=100/(r-t)*(e-t);return Dp(o,[0,100])}function wO(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function bO(e,t){if(e.length===1)return 0;const r=e.map(s=>Math.abs(s-t)),n=Math.min(...r);return r.indexOf(n)}function jO(e,t,r){const n=e/2,o=Ip([0,50],[0,n]);return(n-o(t)*r)*r}function _O(e){return e.slice(0,-1).map((t,r)=>e[r+1]-t)}function NO(e,t){if(t>0){const r=_O(e);return Math.min(...r)>=t}return!0}function Ip(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const n=(t[1]-t[0])/(e[1]-e[0]);return t[0]+n*(r-e[0])}}function SO(e){return(String(e).split(".")[1]||"").length}function kO(e,t){const r=Math.pow(10,t);return Math.round(e*r)/r}var Gj=Aj,CO=$j,EO=Uj,PO=Fj;const Lp=m.forwardRef(({className:e,...t},r)=>a.jsxs(Gj,{ref:r,className:te("relative flex w-full touch-none select-none items-center",e),...t,children:[a.jsx(CO,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:a.jsx(EO,{className:"absolute h-full bg-primary"})}),a.jsx(PO,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));Lp.displayName=Gj.displayName;var $p="Switch",[TO,y$]=kr($p),[RO,MO]=TO($p),Bj=m.forwardRef((e,t)=>{const{__scopeSwitch:r,name:n,checked:s,defaultChecked:o,required:i,disabled:l,value:c="on",onCheckedChange:u,form:f,...d}=e,[h,p]=m.useState(null),g=_e(t,b=>p(b)),v=m.useRef(!1),y=h?f||!!h.closest("form"):!0,[x=!1,w]=dn({prop:s,defaultProp:o,onChange:u});return a.jsxs(RO,{scope:r,checked:x,disabled:l,children:[a.jsx(ie.button,{type:"button",role:"switch","aria-checked":x,"aria-required":i,"data-state":Wj(x),"data-disabled":l?"":void 0,disabled:l,value:c,...d,ref:g,onClick:K(e.onClick,b=>{w(j=>!j),y&&(v.current=b.isPropagationStopped(),v.current||b.stopPropagation())})}),y&&a.jsx(AO,{control:h,bubbles:!v.current,name:n,value:c,checked:x,required:i,disabled:l,form:f,style:{transform:"translateX(-100%)"}})]})});Bj.displayName=$p;var Vj="SwitchThumb",Hj=m.forwardRef((e,t)=>{const{__scopeSwitch:r,...n}=e,s=MO(Vj,r);return a.jsx(ie.span,{"data-state":Wj(s.checked),"data-disabled":s.disabled?"":void 0,...n,ref:t})});Hj.displayName=Vj;var AO=e=>{const{control:t,checked:r,bubbles:n=!0,...s}=e,o=m.useRef(null),i=Op(r),l=Lu(t);return m.useEffect(()=>{const c=o.current,u=window.HTMLInputElement.prototype,d=Object.getOwnPropertyDescriptor(u,"checked").set;if(i!==r&&d){const h=new Event("click",{bubbles:n});d.call(c,r),c.dispatchEvent(h)}},[i,r,n]),a.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...s,tabIndex:-1,ref:o,style:{...e.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function Wj(e){return e?"checked":"unchecked"}var qj=Bj,DO=Hj;const Pn=m.forwardRef(({className:e,...t},r)=>a.jsx(qj,{className:te("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:r,children:a.jsx(DO,{className:te("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Pn.displayName=qj.displayName;const Ms=()=>{const{user:e}=ge(),[t,r]=m.useState(null),[n,s]=m.useState(!0);m.useEffect(()=>{e&&o()},[e]);const o=async()=>{var f;if(e)try{const{data:d,error:h}=await E.functions.invoke("check-subscription",{headers:{Authorization:`Bearer ${(f=(await E.auth.getSession()).data.session)==null?void 0:f.access_token}`}});if(h){console.error("Error checking subscription:",h);return}r(d)}catch(d){console.error("Error checking subscription:",d)}finally{s(!1)}},i=async(f,d=!1)=>{var h;if(e)try{console.log("🚀 Creating checkout for plan:",f,"trial:",d);const{data:p,error:g}=await E.functions.invoke("create-checkout",{body:{planType:f,trial:d},headers:{Authorization:`Bearer ${(h=(await E.auth.getSession()).data.session)==null?void 0:h.access_token}`}});if(g){console.error("❌ Error creating checkout:",g);return}console.log("✅ Checkout created, opening Stripe..."),window.open(p.url,"_blank")&&l()}catch(p){console.error("💥 Error creating checkout:",p)}},l=m.useCallback(()=>{if(!e)return;console.log("⏰ Starting subscription status polling...");const f=setInterval(async()=>{try{console.log("🔍 Polling subscription status..."),await o(),t!=null&&t.subscribed&&(console.log("✅ User is now premium, stopping polling"),clearInterval(f))}catch(d){console.error("❌ Polling error:",d)}},3e3);return setTimeout(()=>{console.log("⏰ Stopping subscription polling (timeout)"),clearInterval(f)},3e5),()=>clearInterval(f)},[e,t]),c=async()=>{var f;if(e)try{const{data:d,error:h}=await E.functions.invoke("customer-portal",{headers:{Authorization:`Bearer ${(f=(await E.auth.getSession()).data.session)==null?void 0:f.access_token}`}});if(h){console.error("Error opening customer portal:",h);return}window.open(d.url,"_blank")}catch(d){console.error("Error opening customer portal:",d)}},u=()=>t?!!t.subscribed:!1;return{premium:t,loading:n,isPremium:(t==null?void 0:t.subscribed)||!1,isTrialing:t!=null&&t.trial_end?new Date(t.trial_end)>new Date:!1,checkSubscription:o,createCheckout:i,openCustomerPortal:c,canUseFeature:u}},OO=()=>{const{user:e}=ge(),{isPremium:t,loading:r}=Ms(),[n,s]=m.useState([]),[o,i]=m.useState([]),[l,c]=m.useState(!1),u=()=>e&&t,f=async()=>{if(!u())return;const{data:y,error:x}=await E.from("reconnection_requests").select("*").or(`requester_id.eq.${e.id},target_user_id.eq.${e.id}`);if(x){console.error("Error fetching reconnection requests:",x);return}s((y==null?void 0:y.map(w=>({...w,created_at:new Date(w.created_at)})))||[])},d=async()=>{if(!u())return;const{data:y,error:x}=await E.from("private_chats").select("*").or(`user1_id.eq.${e.id},user2_id.eq.${e.id}`).order("updated_at",{ascending:!1});if(x){console.error("Error fetching private chats:",x);return}i((y==null?void 0:y.map(w=>({...w,created_at:new Date(w.created_at),updated_at:new Date(w.updated_at)})))||[])},h=async(y,x)=>{if(!u())throw new Error("Premium subscription required to send DM requests");c(!0);try{const{error:w}=await E.from("reconnection_requests").insert({requester_id:e.id,target_user_id:y,group_id:x});if(w)throw console.error("Error sending reconnection request:",w),w;return await E.rpc("update_user_engagement",{p_user_id:e.id,p_activity_type:"reconnect"}),await f(),await d(),!0}catch(w){throw console.error("Error sending reconnection request:",w),w}finally{c(!1)}},p=async(y,x)=>{if(!u())return!1;const{data:w}=await E.from("private_chats").select("*").eq("id",y).single();if(!w)return!1;const j=w.user1_id===e.id?"is_user1_favorited":"is_user2_favorited",{error:_}=await E.from("private_chats").update({[j]:x}).eq("id",y);return _?(console.error("Error toggling favorite:",_),!1):(await d(),!0)},g=async y=>{if(!u())return!1;const{data:x}=await E.from("private_chats").select("*").eq("id",y).single();if(!x)return!1;const b=x.user1_id===e.id?"is_user1_blocked":"is_user2_blocked",{error:j}=await E.from("private_chats").update({[b]:!0}).eq("id",y);return j?(console.error("Error blocking user:",j),!1):(await d(),!0)},v=async(y,x)=>{if(!u())return!1;const{data:w}=await E.from("private_chats").select("*").eq("id",y).single();if(!w)return!1;const j=w.user1_id===e.id?"is_user1_muted":"is_user2_muted",{error:_}=await E.from("private_chats").update({[j]:x}).eq("id",y);return _?(console.error("Error muting user:",_),!1):(await d(),!0)};return m.useEffect(()=>{u()&&(f(),d())},[e,t]),{requests:n,privateChats:o,loading:l||r,canAccessDM:u(),isPremium:t,sendReconnectionRequest:h,toggleFavorite:p,blockUser:g,muteUser:v,refetch:()=>{u()&&(f(),d())}}},IO=({onClose:e})=>{const{createCheckout:t,isPremium:r,isTrialing:n,openCustomerPortal:s}=Ms(),[o,i]=m.useState(null),l=async(u,f=!1)=>{i(u),await t(u,f),i(null)},c=[{icon:a.jsx(st,{className:"h-5 w-5"}),title:"Private Groups",description:"Create and name your own private groups",free:!1,premium:!0},{icon:a.jsx(br,{className:"h-5 w-5"}),title:"Unlimited Switching",description:"Switch groups as many times as you want",free:"1 per day",premium:"Unlimited"},{icon:a.jsx(Mu,{className:"h-5 w-5"}),title:"Direct Messaging",description:"Unlimited 1-on-1 private conversations",free:"Not available",premium:"Unlimited"},{icon:a.jsx(mt,{className:"h-5 w-5"}),title:"Custom Themes",description:"Personalize your group with custom themes",free:!1,premium:!0},{icon:a.jsx(go,{className:"h-5 w-5"}),title:"2x Karma Bonus",description:"Earn double points for all achievements",free:"1x rate",premium:"2x rate"},{icon:a.jsx(br,{className:"h-5 w-5"}),title:"Exclusive Events",description:"Join monthly premium-only vibe events",free:!1,premium:!0}];return r||n?a.jsxs(W,{className:"max-w-2xl mx-auto",children:[a.jsxs(ue,{className:"text-center",children:[a.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-4",children:[a.jsx(mt,{className:"h-8 w-8 text-primary"}),a.jsx(de,{className:"text-2xl",children:"Premium Active"})]}),a.jsx(Et,{children:n?"You're currently on a free trial":"You have access to all premium features"})]}),a.jsxs(J,{className:"space-y-4",children:[a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:c.map((u,f)=>a.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-muted/50 rounded-lg",children:[a.jsx("div",{className:"text-primary",children:u.icon}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium",children:u.title}),a.jsx("p",{className:"text-sm text-muted-foreground",children:u.description})]})]},f))}),a.jsxs("div",{className:"flex justify-center space-x-4 pt-4",children:[a.jsx(O,{onClick:s,variant:"outline",children:"Manage Subscription"}),e&&a.jsx(O,{onClick:e,children:"Continue Chatting"})]})]})]}):a.jsxs(W,{className:"max-w-4xl mx-auto",children:[a.jsxs(ue,{className:"text-center",children:[a.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-4",children:[a.jsx(mt,{className:"h-8 w-8 text-primary"}),a.jsx(de,{className:"text-3xl",children:"Upgrade to Premium"})]}),a.jsx(Et,{className:"text-lg",children:"Unlock exclusive features and enhance your chat experience"})]}),a.jsxs(J,{className:"space-y-8",children:[a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full border-collapse",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b",children:[a.jsx("th",{className:"text-left p-4",children:"Features"}),a.jsx("th",{className:"text-center p-4",children:"Free"}),a.jsx("th",{className:"text-center p-4",children:a.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[a.jsx(mt,{className:"h-5 w-5 text-primary"}),a.jsx("span",{children:"Premium"})]})})]})}),a.jsx("tbody",{children:c.map((u,f)=>a.jsxs("tr",{className:"border-b",children:[a.jsx("td",{className:"p-4",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"text-muted-foreground",children:u.icon}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:u.title}),a.jsx("div",{className:"text-sm text-muted-foreground",children:u.description})]})]})}),a.jsx("td",{className:"text-center p-4",children:u.free?typeof u.free=="string"?a.jsx(oe,{variant:"secondary",children:u.free}):a.jsx($r,{className:"h-5 w-5 text-green-500 mx-auto"}):a.jsx("span",{className:"text-muted-foreground",children:"—"})}),a.jsx("td",{className:"text-center p-4",children:u.premium?typeof u.premium=="string"?a.jsx(oe,{className:"bg-primary text-primary-foreground",children:u.premium}):a.jsx($r,{className:"h-5 w-5 text-green-500 mx-auto"}):a.jsx("span",{className:"text-muted-foreground",children:"—"})})]},f))})]})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs(W,{className:"relative border-2",children:[a.jsxs(ue,{children:[a.jsx("div",{className:"flex justify-between items-start",children:a.jsxs("div",{children:[a.jsx(de,{className:"text-xl",children:"Monthly"}),a.jsx(Et,{children:"Perfect for trying premium features"})]})}),a.jsxs("div",{className:"mt-4",children:[a.jsx("span",{className:"text-3xl font-bold",children:"$9.99"}),a.jsx("span",{className:"text-muted-foreground",children:"/month"})]})]}),a.jsxs(J,{className:"space-y-4",children:[a.jsx(O,{className:"w-full",onClick:()=>l("monthly"),disabled:o==="monthly",children:o==="monthly"?"Processing...":"Get Monthly Premium"}),a.jsx(O,{variant:"outline",className:"w-full",onClick:()=>l("monthly",!0),disabled:o==="monthly",children:"Start 3-Day Free Trial"})]})]}),a.jsxs(W,{className:"relative border-2 border-primary",children:[a.jsx(oe,{className:"absolute -top-3 left-1/2 transform -translate-x-1/2 bg-primary text-primary-foreground",children:"Best Value"}),a.jsxs(ue,{children:[a.jsx("div",{className:"flex justify-between items-start",children:a.jsxs("div",{children:[a.jsx(de,{className:"text-xl",children:"Yearly"}),a.jsx(Et,{children:"Save 33% with annual billing"})]})}),a.jsxs("div",{className:"mt-4",children:[a.jsx("span",{className:"text-3xl font-bold",children:"$79.99"}),a.jsx("span",{className:"text-muted-foreground",children:"/year"}),a.jsxs("div",{className:"text-sm text-muted-foreground",children:[a.jsx("span",{className:"line-through",children:"$119.88"})," Save $39.89"]})]})]}),a.jsxs(J,{className:"space-y-4",children:[a.jsx(O,{className:"w-full",onClick:()=>l("yearly"),disabled:o==="yearly",children:o==="yearly"?"Processing...":"Get Yearly Premium"}),a.jsx(O,{variant:"outline",className:"w-full",onClick:()=>l("yearly",!0),disabled:o==="yearly",children:"Start 3-Day Free Trial"})]})]})]}),e&&a.jsx("div",{className:"text-center",children:a.jsx(O,{variant:"ghost",onClick:e,children:"Maybe Later"})})]})]})},LO=()=>{const{user:e}=ge(),{toast:t}=Be(),[r,n]=m.useState({canChange:!1,isFirstTime:!0,isPremium:!1,loading:!0});m.useEffect(()=>{e&&s()},[e]);const s=async()=>{if(e)try{n(d=>({...d,loading:!0}));const{data:i,error:l}=await E.from("profiles").select("username_changed").eq("user_id",e.id).single();if(l)throw l;const{data:c,error:u}=await E.from("subscribers").select("subscribed, subscription_end").eq("user_id",e.id).eq("subscribed",!0).maybeSingle();if(u)throw u;const f=c&&(c.subscription_end===null||new Date(c.subscription_end)>new Date);n({canChange:!i.username_changed,isFirstTime:!i.username_changed,isPremium:!!f,loading:!1})}catch(i){console.error("Error fetching username change data:",i),n(l=>({...l,loading:!1}))}};return{...r,changeUsername:async i=>{if(!e)return!1;try{const{data:l,error:c}=await E.from("profiles").select("username_changed").eq("user_id",e.id).single();if(c)throw c;if(l.username_changed)return t({title:"Cannot Change Username",description:"You've already used your one-time username change.",variant:"destructive"}),!1;if(!i.trim()||i.length<3)return t({title:"Invalid Username",description:"Username must be at least 3 characters long.",variant:"destructive"}),!1;if(i.length>20)return t({title:"Username Too Long",description:"Username must be 20 characters or less.",variant:"destructive"}),!1;const{data:u,error:f}=await E.from("profiles").select("user_id").eq("username",i.trim()).neq("user_id",e.id).maybeSingle();if(f)throw f;if(u)return t({title:"Username Taken",description:"This username is already taken. Please choose another.",variant:"destructive"}),!1;const{error:d}=await E.from("profiles").update({username:i.trim(),username_changed:!0}).eq("user_id",e.id);if(d)throw d;return await s(),t({title:"Username Changed!",description:`Your username has been updated to "${i}". This was your one-time change.`}),!0}catch(l){return console.error("Error changing username:",l),t({title:"Error",description:"Failed to change username. Please try again.",variant:"destructive"}),!1}},refreshChangeData:s}},$O=()=>{const{user:e,signOut:t}=ge(),{toast:r}=Be(),[n,s]=m.useState(!1),o=m.useCallback(async u=>{try{const{data:f,error:d}=await E.from("profiles").select("user_id").eq("user_id",u.toLowerCase().trim()).single();return d&&d.code==="PGRST116"?!0:d?(console.error("Error checking email availability:",d),!0):!1}catch(f){return console.error("Error in checkEmailAvailability:",f),!0}},[]),i=m.useCallback(async u=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(u)?{success:!0}:{success:!1,error:"Please enter a valid email address."},[]),l=m.useCallback(async()=>{if(!(e!=null&&e.id))return{success:!1,error:"No user logged in"};s(!0);try{const{data:u,error:f}=await E.rpc("delete_user_account",{p_user_id:e.id});if(f)return console.error("Error deleting account:",f),console.error("Error details:",{code:f.code,message:f.message,details:f.details,hint:f.hint}),r({title:"Deletion Failed",description:`Failed to delete account: ${f.message}`,variant:"destructive"}),{success:!1,error:f.message};const d=u;if(!(d!=null&&d.success))return console.error("RPC function returned failure:",d),r({title:"Deletion Failed",description:(d==null?void 0:d.error)||"Failed to delete account",variant:"destructive"}),{success:!1,error:(d==null?void 0:d.error)||"Failed to delete account"};console.log("Account deletion successful:",d),localStorage.removeItem("clearedMessages"),localStorage.removeItem("saved_username"),localStorage.removeItem("incomplete_signup_time"),localStorage.removeItem("onboarding_skipped"),localStorage.removeItem("cleanup_warning_shown"),r({title:"Account Deleted",description:"Your account and all associated data have been permanently deleted.",variant:"default"});try{await E.auth.signOut(),setTimeout(()=>{window.location.href="/"},1e3)}catch(h){console.error("Error signing out after deletion:",h),window.location.href="/"}return{success:!0,message:"Account successfully deleted"}}catch(u){return console.error("Error in deleteAccount:",u),{success:!1,error:u.message}}finally{s(!1)}},[e,t,r]),c=m.useCallback(async(u,f)=>{var h,p,g;const d=await i(u);if(!d.success)return d;s(!0);try{await E.auth.signOut(),console.log("📧 Starting fresh signup for:",u.toLowerCase().trim());const{data:v,error:y}=await E.auth.signUp({email:u.toLowerCase().trim(),password:f,options:{emailRedirectTo:"https://syncchatapp.com/auth/callback",data:{email_confirm:!0,signup_timestamp:Date.now()}}});if(y){if(console.error("Signup error:",y),(h=y.message)!=null&&h.includes("already registered")||(p=y.message)!=null&&p.includes("already exists")||(g=y.message)!=null&&g.includes("already in use")){console.log("📧 RESIGNUP DETECTED: Email exists, checking status...");try{const{data:x}=await E.rpc("handle_resignup_verification",{p_email:u.toLowerCase().trim()});(x==null?void 0:x.action)==="resend_verification"&&console.log("📧 Confirmed re-signup scenario, sending verification...")}catch{console.log("📧 RPC check failed, proceeding with resend...")}console.log("📧 Attempting verification email resend...");try{if(!(await E.auth.resend({type:"signup",email:u.toLowerCase().trim(),options:{emailRedirectTo:"https://syncchatapp.com/auth/callback"}})).error)return console.log("✅ Verification email sent via resend"),{success:!0,message:"Verification email sent! Please check your inbox and click the link to verify your account. (This may be a re-signup - check spam folder if needed)"};console.log("📧 Resend failed, attempting fresh signup..."),await new Promise(j=>setTimeout(j,1e3));const{data:w,error:b}=await E.auth.signUp({email:u.toLowerCase().trim(),password:f,options:{emailRedirectTo:"https://syncchatapp.com/auth/callback",data:{retry_signup:!0,signup_timestamp:Date.now()}}});if(!b&&w.user)return console.log("✅ Fresh signup successful"),{success:!0,message:"Account created! Please check your email for verification link."}}catch(x){console.error("All resend methods failed:",x)}return{success:!0,message:"If you previously deleted your account, please check your email for a new verification link. If you have an active account, please use the login page instead."}}return{success:!1,error:y.message}}return v.user?(console.log("📧 User created, email confirmation required:",{id:v.user.id,email:v.user.email,confirmed:!!v.user.email_confirmed_at,session:!!v.session}),{success:!0,message:"Please check your email to confirm your account before continuing. A verification link has been sent to your inbox."}):{success:!0,message:"Account created successfully"}}catch(v){return console.error("Error in signUpWithEmailValidation:",v),{success:!1,error:v.message}}finally{s(!1)}},[i]);return{checkEmailAvailability:o,validateEmailForSignup:i,deleteAccount:l,signUpWithEmailValidation:c,isLoading:n}};function UO(e,t=[]){let r=[];function n(o,i){const l=m.createContext(i),c=r.length;r=[...r,i];function u(d){const{scope:h,children:p,...g}=d,v=(h==null?void 0:h[e][c])||l,y=m.useMemo(()=>g,Object.values(g));return a.jsx(v.Provider,{value:y,children:p})}function f(d,h){const p=(h==null?void 0:h[e][c])||l,g=m.useContext(p);if(g)return g;if(i!==void 0)return i;throw new Error(`\`${d}\` must be used within \`${o}\``)}return u.displayName=o+"Provider",[u,f]}const s=()=>{const o=r.map(i=>m.createContext(i));return function(l){const c=(l==null?void 0:l[e])||o;return m.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return s.scopeName=e,[n,FO(s,...t)]}function FO(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(o){const i=n.reduce((l,{useScope:c,scopeName:u})=>{const d=c(o)[`__scope${u}`];return{...l,...d}},{});return m.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return r.scopeName=t.scopeName,r}var Up="Progress",Fp=100,[zO,w$]=UO(Up),[GO,BO]=zO(Up),Kj=m.forwardRef((e,t)=>{const{__scopeProgress:r,value:n=null,max:s,getValueLabel:o=VO,...i}=e;(s||s===0)&&!Vx(s)&&console.error(HO(`${s}`,"Progress"));const l=Vx(s)?s:Fp;n!==null&&!Hx(n,l)&&console.error(WO(`${n}`,"Progress"));const c=Hx(n,l)?n:null,u=nu(c)?o(c,l):void 0;return a.jsx(GO,{scope:r,value:c,max:l,children:a.jsx(ie.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":nu(c)?c:void 0,"aria-valuetext":u,role:"progressbar","data-state":Xj(c,l),"data-value":c??void 0,"data-max":l,...i,ref:t})})});Kj.displayName=Up;var Yj="ProgressIndicator",Qj=m.forwardRef((e,t)=>{const{__scopeProgress:r,...n}=e,s=BO(Yj,r);return a.jsx(ie.div,{"data-state":Xj(s.value,s.max),"data-value":s.value??void 0,"data-max":s.max,...n,ref:t})});Qj.displayName=Yj;function VO(e,t){return`${Math.round(e/t*100)}%`}function Xj(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function nu(e){return typeof e=="number"}function Vx(e){return nu(e)&&!isNaN(e)&&e>0}function Hx(e,t){return nu(e)&&!isNaN(e)&&e<=t&&e>=0}function HO(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${Fp}\`.`}function WO(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${Fp} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var Jj=Kj,qO=Qj;const Ya=m.forwardRef(({className:e,value:t,...r},n)=>a.jsx(Jj,{ref:n,className:te("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...r,children:a.jsx(qO,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));Ya.displayName=Jj.displayName;function KO(e,t=[]){let r=[];function n(o,i){const l=m.createContext(i),c=r.length;r=[...r,i];function u(d){const{scope:h,children:p,...g}=d,v=(h==null?void 0:h[e][c])||l,y=m.useMemo(()=>g,Object.values(g));return a.jsx(v.Provider,{value:y,children:p})}function f(d,h){const p=(h==null?void 0:h[e][c])||l,g=m.useContext(p);if(g)return g;if(i!==void 0)return i;throw new Error(`\`${d}\` must be used within \`${o}\``)}return u.displayName=o+"Provider",[u,f]}const s=()=>{const o=r.map(i=>m.createContext(i));return function(l){const c=(l==null?void 0:l[e])||o;return m.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return s.scopeName=e,[n,YO(s,...t)]}function YO(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(o){const i=n.reduce((l,{useScope:c,scopeName:u})=>{const d=c(o)[`__scope${u}`];return{...l,...d}},{});return m.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return r.scopeName=t.scopeName,r}var df="rovingFocusGroup.onEntryFocus",QO={bubbles:!1,cancelable:!0},ad="RovingFocusGroup",[Qh,Zj,XO]=ku(ad),[JO,od]=KO(ad,[XO]),[ZO,e3]=JO(ad),e_=m.forwardRef((e,t)=>a.jsx(Qh.Provider,{scope:e.__scopeRovingFocusGroup,children:a.jsx(Qh.Slot,{scope:e.__scopeRovingFocusGroup,children:a.jsx(t3,{...e,ref:t})})}));e_.displayName=ad;var t3=m.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:s=!1,dir:o,currentTabStopId:i,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:f=!1,...d}=e,h=m.useRef(null),p=_e(t,h),g=dl(o),[v=null,y]=dn({prop:i,defaultProp:l,onChange:c}),[x,w]=m.useState(!1),b=Ke(u),j=Zj(r),_=m.useRef(!1),[S,N]=m.useState(0);return m.useEffect(()=>{const k=h.current;if(k)return k.addEventListener(df,b),()=>k.removeEventListener(df,b)},[b]),a.jsx(ZO,{scope:r,orientation:n,dir:g,loop:s,currentTabStopId:v,onItemFocus:m.useCallback(k=>y(k),[y]),onItemShiftTab:m.useCallback(()=>w(!0),[]),onFocusableItemAdd:m.useCallback(()=>N(k=>k+1),[]),onFocusableItemRemove:m.useCallback(()=>N(k=>k-1),[]),children:a.jsx(ie.div,{tabIndex:x||S===0?-1:0,"data-orientation":n,...d,ref:p,style:{outline:"none",...e.style},onMouseDown:K(e.onMouseDown,()=>{_.current=!0}),onFocus:K(e.onFocus,k=>{const C=!_.current;if(k.target===k.currentTarget&&C&&!x){const P=new CustomEvent(df,QO);if(k.currentTarget.dispatchEvent(P),!P.defaultPrevented){const T=j().filter(H=>H.focusable),M=T.find(H=>H.active),G=T.find(H=>H.id===v),Q=[M,G,...T].filter(Boolean).map(H=>H.ref.current);n_(Q,f)}}_.current=!1}),onBlur:K(e.onBlur,()=>w(!1))})})}),t_="RovingFocusGroupItem",r_=m.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:s=!1,tabStopId:o,...i}=e,l=Rn(),c=o||l,u=e3(t_,r),f=u.currentTabStopId===c,d=Zj(r),{onFocusableItemAdd:h,onFocusableItemRemove:p}=u;return m.useEffect(()=>{if(n)return h(),()=>p()},[n,h,p]),a.jsx(Qh.ItemSlot,{scope:r,id:c,focusable:n,active:s,children:a.jsx(ie.span,{tabIndex:f?0:-1,"data-orientation":u.orientation,...i,ref:t,onMouseDown:K(e.onMouseDown,g=>{n?u.onItemFocus(c):g.preventDefault()}),onFocus:K(e.onFocus,()=>u.onItemFocus(c)),onKeyDown:K(e.onKeyDown,g=>{if(g.key==="Tab"&&g.shiftKey){u.onItemShiftTab();return}if(g.target!==g.currentTarget)return;const v=s3(g,u.orientation,u.dir);if(v!==void 0){if(g.metaKey||g.ctrlKey||g.altKey||g.shiftKey)return;g.preventDefault();let x=d().filter(w=>w.focusable).map(w=>w.ref.current);if(v==="last")x.reverse();else if(v==="prev"||v==="next"){v==="prev"&&x.reverse();const w=x.indexOf(g.currentTarget);x=u.loop?a3(x,w+1):x.slice(w+1)}setTimeout(()=>n_(x))}})})})});r_.displayName=t_;var r3={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function n3(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function s3(e,t,r){const n=n3(e.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return r3[n]}function n_(e,t=!1){const r=document.activeElement;for(const n of e)if(n===r||(n.focus({preventScroll:t}),document.activeElement!==r))return}function a3(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var s_=e_,a_=r_,zp="Tabs",[o3,b$]=kr(zp,[od]),o_=od(),[i3,Gp]=o3(zp),i_=m.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,onValueChange:s,defaultValue:o,orientation:i="horizontal",dir:l,activationMode:c="automatic",...u}=e,f=dl(l),[d,h]=dn({prop:n,onChange:s,defaultProp:o});return a.jsx(i3,{scope:r,baseId:Rn(),value:d,onValueChange:h,orientation:i,dir:f,activationMode:c,children:a.jsx(ie.div,{dir:f,"data-orientation":i,...u,ref:t})})});i_.displayName=zp;var l_="TabsList",c_=m.forwardRef((e,t)=>{const{__scopeTabs:r,loop:n=!0,...s}=e,o=Gp(l_,r),i=o_(r);return a.jsx(s_,{asChild:!0,...i,orientation:o.orientation,dir:o.dir,loop:n,children:a.jsx(ie.div,{role:"tablist","aria-orientation":o.orientation,...s,ref:t})})});c_.displayName=l_;var u_="TabsTrigger",d_=m.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,disabled:s=!1,...o}=e,i=Gp(u_,r),l=o_(r),c=m_(i.baseId,n),u=p_(i.baseId,n),f=n===i.value;return a.jsx(a_,{asChild:!0,...l,focusable:!s,active:f,children:a.jsx(ie.button,{type:"button",role:"tab","aria-selected":f,"aria-controls":u,"data-state":f?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:c,...o,ref:t,onMouseDown:K(e.onMouseDown,d=>{!s&&d.button===0&&d.ctrlKey===!1?i.onValueChange(n):d.preventDefault()}),onKeyDown:K(e.onKeyDown,d=>{[" ","Enter"].includes(d.key)&&i.onValueChange(n)}),onFocus:K(e.onFocus,()=>{const d=i.activationMode!=="manual";!f&&!s&&d&&i.onValueChange(n)})})})});d_.displayName=u_;var f_="TabsContent",h_=m.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,forceMount:s,children:o,...i}=e,l=Gp(f_,r),c=m_(l.baseId,n),u=p_(l.baseId,n),f=n===l.value,d=m.useRef(f);return m.useEffect(()=>{const h=requestAnimationFrame(()=>d.current=!1);return()=>cancelAnimationFrame(h)},[]),a.jsx(gt,{present:s||f,children:({present:h})=>a.jsx(ie.div,{"data-state":f?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!h,id:u,tabIndex:0,...i,ref:t,style:{...e.style,animationDuration:d.current?"0s":void 0},children:h&&o})})});h_.displayName=f_;function m_(e,t){return`${e}-trigger-${t}`}function p_(e,t){return`${e}-content-${t}`}var l3=i_,g_=c_,v_=d_,x_=h_;const id=l3,fl=m.forwardRef(({className:e,...t},r)=>a.jsx(g_,{ref:r,className:te("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));fl.displayName=g_.displayName;const sr=m.forwardRef(({className:e,...t},r)=>a.jsx(v_,{ref:r,className:te("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));sr.displayName=v_.displayName;const ar=m.forwardRef(({className:e,...t},r)=>a.jsx(x_,{ref:r,className:te("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));ar.displayName=x_.displayName;function c3(e,t){return m.useReducer((r,n)=>t[r][n]??r,e)}var Bp="ScrollArea",[y_,j$]=kr(Bp),[u3,Cr]=y_(Bp),w_=m.forwardRef((e,t)=>{const{__scopeScrollArea:r,type:n="hover",dir:s,scrollHideDelay:o=600,...i}=e,[l,c]=m.useState(null),[u,f]=m.useState(null),[d,h]=m.useState(null),[p,g]=m.useState(null),[v,y]=m.useState(null),[x,w]=m.useState(0),[b,j]=m.useState(0),[_,S]=m.useState(!1),[N,k]=m.useState(!1),C=_e(t,T=>c(T)),P=dl(s);return a.jsx(u3,{scope:r,type:n,dir:P,scrollHideDelay:o,scrollArea:l,viewport:u,onViewportChange:f,content:d,onContentChange:h,scrollbarX:p,onScrollbarXChange:g,scrollbarXEnabled:_,onScrollbarXEnabledChange:S,scrollbarY:v,onScrollbarYChange:y,scrollbarYEnabled:N,onScrollbarYEnabledChange:k,onCornerWidthChange:w,onCornerHeightChange:j,children:a.jsx(ie.div,{dir:P,...i,ref:C,style:{position:"relative","--radix-scroll-area-corner-width":x+"px","--radix-scroll-area-corner-height":b+"px",...e.style}})})});w_.displayName=Bp;var b_="ScrollAreaViewport",j_=m.forwardRef((e,t)=>{const{__scopeScrollArea:r,children:n,asChild:s,nonce:o,...i}=e,l=Cr(b_,r),c=m.useRef(null),u=_e(t,c,l.onViewportChange);return a.jsxs(a.Fragment,{children:[a.jsx("style",{dangerouslySetInnerHTML:{__html:`
[data-radix-scroll-area-viewport] {
  scrollbar-width: none;
  -ms-overflow-style: none;
  -webkit-overflow-scrolling: touch;
}
[data-radix-scroll-area-viewport]::-webkit-scrollbar {
  display: none;
}
:where([data-radix-scroll-area-viewport]) {
  display: flex;
  flex-direction: column;
  align-items: stretch;
}
:where([data-radix-scroll-area-content]) {
  flex-grow: 1;
}
`},nonce:o}),a.jsx(ie.div,{"data-radix-scroll-area-viewport":"",...i,asChild:s,ref:u,style:{overflowX:l.scrollbarXEnabled?"scroll":"hidden",overflowY:l.scrollbarYEnabled?"scroll":"hidden",...e.style},children:w3({asChild:s,children:n},f=>a.jsx("div",{"data-radix-scroll-area-content":"",ref:l.onContentChange,style:{minWidth:l.scrollbarXEnabled?"fit-content":void 0},children:f}))})]})});j_.displayName=b_;var mn="ScrollAreaScrollbar",Vp=m.forwardRef((e,t)=>{const{forceMount:r,...n}=e,s=Cr(mn,e.__scopeScrollArea),{onScrollbarXEnabledChange:o,onScrollbarYEnabledChange:i}=s,l=e.orientation==="horizontal";return m.useEffect(()=>(l?o(!0):i(!0),()=>{l?o(!1):i(!1)}),[l,o,i]),s.type==="hover"?a.jsx(d3,{...n,ref:t,forceMount:r}):s.type==="scroll"?a.jsx(f3,{...n,ref:t,forceMount:r}):s.type==="auto"?a.jsx(__,{...n,ref:t,forceMount:r}):s.type==="always"?a.jsx(Hp,{...n,ref:t}):null});Vp.displayName=mn;var d3=m.forwardRef((e,t)=>{const{forceMount:r,...n}=e,s=Cr(mn,e.__scopeScrollArea),[o,i]=m.useState(!1);return m.useEffect(()=>{const l=s.scrollArea;let c=0;if(l){const u=()=>{window.clearTimeout(c),i(!0)},f=()=>{c=window.setTimeout(()=>i(!1),s.scrollHideDelay)};return l.addEventListener("pointerenter",u),l.addEventListener("pointerleave",f),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",u),l.removeEventListener("pointerleave",f)}}},[s.scrollArea,s.scrollHideDelay]),a.jsx(gt,{present:r||o,children:a.jsx(__,{"data-state":o?"visible":"hidden",...n,ref:t})})}),f3=m.forwardRef((e,t)=>{const{forceMount:r,...n}=e,s=Cr(mn,e.__scopeScrollArea),o=e.orientation==="horizontal",i=cd(()=>c("SCROLL_END"),100),[l,c]=c3("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return m.useEffect(()=>{if(l==="idle"){const u=window.setTimeout(()=>c("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(u)}},[l,s.scrollHideDelay,c]),m.useEffect(()=>{const u=s.viewport,f=o?"scrollLeft":"scrollTop";if(u){let d=u[f];const h=()=>{const p=u[f];d!==p&&(c("SCROLL"),i()),d=p};return u.addEventListener("scroll",h),()=>u.removeEventListener("scroll",h)}},[s.viewport,o,c,i]),a.jsx(gt,{present:r||l!=="hidden",children:a.jsx(Hp,{"data-state":l==="hidden"?"hidden":"visible",...n,ref:t,onPointerEnter:K(e.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:K(e.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),__=m.forwardRef((e,t)=>{const r=Cr(mn,e.__scopeScrollArea),{forceMount:n,...s}=e,[o,i]=m.useState(!1),l=e.orientation==="horizontal",c=cd(()=>{if(r.viewport){const u=r.viewport.offsetWidth<r.viewport.scrollWidth,f=r.viewport.offsetHeight<r.viewport.scrollHeight;i(l?u:f)}},10);return wo(r.viewport,c),wo(r.content,c),a.jsx(gt,{present:n||o,children:a.jsx(Hp,{"data-state":o?"visible":"hidden",...s,ref:t})})}),Hp=m.forwardRef((e,t)=>{const{orientation:r="vertical",...n}=e,s=Cr(mn,e.__scopeScrollArea),o=m.useRef(null),i=m.useRef(0),[l,c]=m.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=E_(l.viewport,l.content),f={...n,sizes:l,onSizesChange:c,hasThumb:u>0&&u<1,onThumbChange:h=>o.current=h,onThumbPointerUp:()=>i.current=0,onThumbPointerDown:h=>i.current=h};function d(h,p){return x3(h,i.current,l,p)}return r==="horizontal"?a.jsx(h3,{...f,ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){const h=s.viewport.scrollLeft,p=Wx(h,l,s.dir);o.current.style.transform=`translate3d(${p}px, 0, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollLeft=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollLeft=d(h,s.dir))}}):r==="vertical"?a.jsx(m3,{...f,ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){const h=s.viewport.scrollTop,p=Wx(h,l);o.current.style.transform=`translate3d(0, ${p}px, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollTop=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollTop=d(h))}}):null}),h3=m.forwardRef((e,t)=>{const{sizes:r,onSizesChange:n,...s}=e,o=Cr(mn,e.__scopeScrollArea),[i,l]=m.useState(),c=m.useRef(null),u=_e(t,c,o.onScrollbarXChange);return m.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),a.jsx(S_,{"data-orientation":"horizontal",...s,ref:u,sizes:r,style:{bottom:0,left:o.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:o.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":ld(r)+"px",...e.style},onThumbPointerDown:f=>e.onThumbPointerDown(f.x),onDragScroll:f=>e.onDragScroll(f.x),onWheelScroll:(f,d)=>{if(o.viewport){const h=o.viewport.scrollLeft+f.deltaX;e.onWheelScroll(h),T_(h,d)&&f.preventDefault()}},onResize:()=>{c.current&&o.viewport&&i&&n({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:au(i.paddingLeft),paddingEnd:au(i.paddingRight)}})}})}),m3=m.forwardRef((e,t)=>{const{sizes:r,onSizesChange:n,...s}=e,o=Cr(mn,e.__scopeScrollArea),[i,l]=m.useState(),c=m.useRef(null),u=_e(t,c,o.onScrollbarYChange);return m.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),a.jsx(S_,{"data-orientation":"vertical",...s,ref:u,sizes:r,style:{top:0,right:o.dir==="ltr"?0:void 0,left:o.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":ld(r)+"px",...e.style},onThumbPointerDown:f=>e.onThumbPointerDown(f.y),onDragScroll:f=>e.onDragScroll(f.y),onWheelScroll:(f,d)=>{if(o.viewport){const h=o.viewport.scrollTop+f.deltaY;e.onWheelScroll(h),T_(h,d)&&f.preventDefault()}},onResize:()=>{c.current&&o.viewport&&i&&n({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:au(i.paddingTop),paddingEnd:au(i.paddingBottom)}})}})}),[p3,N_]=y_(mn),S_=m.forwardRef((e,t)=>{const{__scopeScrollArea:r,sizes:n,hasThumb:s,onThumbChange:o,onThumbPointerUp:i,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:u,onWheelScroll:f,onResize:d,...h}=e,p=Cr(mn,r),[g,v]=m.useState(null),y=_e(t,C=>v(C)),x=m.useRef(null),w=m.useRef(""),b=p.viewport,j=n.content-n.viewport,_=Ke(f),S=Ke(c),N=cd(d,10);function k(C){if(x.current){const P=C.clientX-x.current.left,T=C.clientY-x.current.top;u({x:P,y:T})}}return m.useEffect(()=>{const C=P=>{const T=P.target;(g==null?void 0:g.contains(T))&&_(P,j)};return document.addEventListener("wheel",C,{passive:!1}),()=>document.removeEventListener("wheel",C,{passive:!1})},[b,g,j,_]),m.useEffect(S,[n,S]),wo(g,N),wo(p.content,N),a.jsx(p3,{scope:r,scrollbar:g,hasThumb:s,onThumbChange:Ke(o),onThumbPointerUp:Ke(i),onThumbPositionChange:S,onThumbPointerDown:Ke(l),children:a.jsx(ie.div,{...h,ref:y,style:{position:"absolute",...h.style},onPointerDown:K(e.onPointerDown,C=>{C.button===0&&(C.target.setPointerCapture(C.pointerId),x.current=g.getBoundingClientRect(),w.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",p.viewport&&(p.viewport.style.scrollBehavior="auto"),k(C))}),onPointerMove:K(e.onPointerMove,k),onPointerUp:K(e.onPointerUp,C=>{const P=C.target;P.hasPointerCapture(C.pointerId)&&P.releasePointerCapture(C.pointerId),document.body.style.webkitUserSelect=w.current,p.viewport&&(p.viewport.style.scrollBehavior=""),x.current=null})})})}),su="ScrollAreaThumb",k_=m.forwardRef((e,t)=>{const{forceMount:r,...n}=e,s=N_(su,e.__scopeScrollArea);return a.jsx(gt,{present:r||s.hasThumb,children:a.jsx(g3,{ref:t,...n})})}),g3=m.forwardRef((e,t)=>{const{__scopeScrollArea:r,style:n,...s}=e,o=Cr(su,r),i=N_(su,r),{onThumbPositionChange:l}=i,c=_e(t,d=>i.onThumbChange(d)),u=m.useRef(),f=cd(()=>{u.current&&(u.current(),u.current=void 0)},100);return m.useEffect(()=>{const d=o.viewport;if(d){const h=()=>{if(f(),!u.current){const p=y3(d,l);u.current=p,l()}};return l(),d.addEventListener("scroll",h),()=>d.removeEventListener("scroll",h)}},[o.viewport,f,l]),a.jsx(ie.div,{"data-state":i.hasThumb?"visible":"hidden",...s,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...n},onPointerDownCapture:K(e.onPointerDownCapture,d=>{const p=d.target.getBoundingClientRect(),g=d.clientX-p.left,v=d.clientY-p.top;i.onThumbPointerDown({x:g,y:v})}),onPointerUp:K(e.onPointerUp,i.onThumbPointerUp)})});k_.displayName=su;var Wp="ScrollAreaCorner",C_=m.forwardRef((e,t)=>{const r=Cr(Wp,e.__scopeScrollArea),n=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&n?a.jsx(v3,{...e,ref:t}):null});C_.displayName=Wp;var v3=m.forwardRef((e,t)=>{const{__scopeScrollArea:r,...n}=e,s=Cr(Wp,r),[o,i]=m.useState(0),[l,c]=m.useState(0),u=!!(o&&l);return wo(s.scrollbarX,()=>{var d;const f=((d=s.scrollbarX)==null?void 0:d.offsetHeight)||0;s.onCornerHeightChange(f),c(f)}),wo(s.scrollbarY,()=>{var d;const f=((d=s.scrollbarY)==null?void 0:d.offsetWidth)||0;s.onCornerWidthChange(f),i(f)}),u?a.jsx(ie.div,{...n,ref:t,style:{width:o,height:l,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function au(e){return e?parseInt(e,10):0}function E_(e,t){const r=e/t;return isNaN(r)?0:r}function ld(e){const t=E_(e.viewport,e.content),r=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,n=(e.scrollbar.size-r)*t;return Math.max(n,18)}function x3(e,t,r,n="ltr"){const s=ld(r),o=s/2,i=t||o,l=s-i,c=r.scrollbar.paddingStart+i,u=r.scrollbar.size-r.scrollbar.paddingEnd-l,f=r.content-r.viewport,d=n==="ltr"?[0,f]:[f*-1,0];return P_([c,u],d)(e)}function Wx(e,t,r="ltr"){const n=ld(t),s=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,o=t.scrollbar.size-s,i=t.content-t.viewport,l=o-n,c=r==="ltr"?[0,i]:[i*-1,0],u=Dp(e,c);return P_([0,i],[0,l])(u)}function P_(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const n=(t[1]-t[0])/(e[1]-e[0]);return t[0]+n*(r-e[0])}}function T_(e,t){return e>0&&e<t}var y3=(e,t=()=>{})=>{let r={left:e.scrollLeft,top:e.scrollTop},n=0;return function s(){const o={left:e.scrollLeft,top:e.scrollTop},i=r.left!==o.left,l=r.top!==o.top;(i||l)&&t(),r=o,n=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(n)};function cd(e,t){const r=Ke(e),n=m.useRef(0);return m.useEffect(()=>()=>window.clearTimeout(n.current),[]),m.useCallback(()=>{window.clearTimeout(n.current),n.current=window.setTimeout(r,t)},[r,t])}function wo(e,t){const r=Ke(t);Wr(()=>{let n=0;if(e){const s=new ResizeObserver(()=>{cancelAnimationFrame(n),n=window.requestAnimationFrame(r)});return s.observe(e),()=>{window.cancelAnimationFrame(n),s.unobserve(e)}}},[e,r])}function w3(e,t){const{asChild:r,children:n}=e;if(!r)return typeof t=="function"?t(n):t;const s=m.Children.only(n);return m.cloneElement(s,{children:typeof t=="function"?t(s.props.children):t})}var R_=w_,b3=j_,j3=C_;const Gr=m.forwardRef(({className:e,children:t,...r},n)=>a.jsxs(R_,{ref:n,className:te("relative overflow-hidden",e),...r,children:[a.jsx(b3,{className:"h-full w-full rounded-[inherit]",children:t}),a.jsx(M_,{}),a.jsx(j3,{})]}));Gr.displayName=R_.displayName;const M_=m.forwardRef(({className:e,orientation:t="vertical",...r},n)=>a.jsx(Vp,{ref:n,orientation:t,className:te("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...r,children:a.jsx(k_,{className:"relative flex-1 rounded-full bg-border"})}));M_.displayName=Vp.displayName;const _3=()=>{const{user:e}=ge(),{karmaProgress:t,enhancedAchievements:r,recentActivity:n,getCurrentBenefits:s,getEstimatedTimeToNextLevel:o,KARMA_LEVELS:i,loading:l}=ul(),[c,u]=m.useState([]),[f,d]=m.useState([]),[h,p]=m.useState(null),[g,v]=m.useState(!0);m.useEffect(()=>{e&&y()},[e]);const y=async()=>{if(e)try{const{data:b}=await E.from("group_members").select(`
          group_id,
          groups!inner(
            id,
            name,
            vibe_label
          )
        `).eq("user_id",e.id).order("joined_at",{ascending:!1}).limit(1).maybeSingle();if(b){p(b.groups);const{data:j}=await E.rpc("get_group_karma_leaderboard");j&&u(j);const{data:_}=await E.rpc("get_group_user_karma_leaderboard",{p_group_id:b.groups.id,p_limit:100,p_offset:0});_&&d(_)}}catch(b){console.error("Error loading leaderboard data:",b)}finally{v(!1)}};if(l)return a.jsx("div",{className:"space-y-6",children:Array.from({length:3}).map((b,j)=>a.jsx(W,{children:a.jsx(J,{className:"p-6",children:a.jsxs("div",{className:"animate-pulse space-y-4",children:[a.jsx("div",{className:"h-4 bg-muted rounded w-1/3"}),a.jsx("div",{className:"h-8 bg-muted rounded"}),a.jsx("div",{className:"h-2 bg-muted rounded"})]})})},j))});if(!t)return a.jsx(W,{children:a.jsx(J,{className:"p-6 text-center",children:a.jsx("p",{className:"text-muted-foreground",children:"No karma data available"})})});const x=f.find(b=>b.user_id===(e==null?void 0:e.id)),w=h?c.find(b=>b.group_id===h.id):null;return a.jsxs("div",{className:"space-y-6",children:[a.jsxs(W,{children:[a.jsxs(ue,{children:[a.jsxs(de,{className:"flex items-center space-x-2",children:[a.jsx(Mu,{className:"h-5 w-5"}),a.jsx("span",{children:"Karma Progress"})]}),a.jsx(Et,{children:"Your journey through the SyncChat community"})]}),a.jsxs(J,{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:te("w-12 h-12 rounded-full flex items-center justify-center text-xl font-bold text-white",t.currentLevel.color),children:t.currentLevel.icon}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold",children:t.currentLevel.level}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:[t.totalPoints," karma points"]})]})]}),t.nextLevel&&a.jsxs("div",{className:"text-right",children:[a.jsxs("p",{className:"text-sm font-medium",children:[t.pointsToNext," points to go"]}),a.jsx("p",{className:"text-xs text-muted-foreground",children:o()})]})]}),t.nextLevel&&a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{children:t.currentLevel.level}),a.jsx("span",{children:t.nextLevel.level})]}),a.jsx(Ya,{value:t.progress,className:"h-3"}),a.jsxs("p",{className:"text-xs text-center text-muted-foreground",children:[Math.round(t.progress),"% complete"]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-semibold mb-2",children:"Current Benefits"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:s().map((b,j)=>a.jsx(oe,{variant:"secondary",className:"text-xs",children:b},j))})]}),a.jsx("p",{className:"text-sm text-muted-foreground italic",children:t.currentLevel.description})]})]}),a.jsxs(id,{defaultValue:"achievements",className:"w-full",children:[a.jsxs(fl,{className:"grid w-full grid-cols-4",children:[a.jsx(sr,{value:"achievements",children:"Achievements"}),a.jsx(sr,{value:"activity",children:"Activity"}),a.jsx(sr,{value:"group",children:"Group Ranking"}),a.jsx(sr,{value:"global",children:"Global"})]}),a.jsx(ar,{value:"achievements",className:"space-y-4",children:a.jsxs(W,{children:[a.jsxs(ue,{children:[a.jsxs(de,{className:"flex items-center space-x-2",children:[a.jsx(a2,{className:"h-5 w-5"}),a.jsx("span",{children:"Your Achievements"})]}),a.jsxs(Et,{children:[r.length," achievements unlocked"]})]}),a.jsx(J,{children:r.length>0?a.jsx(Gr,{className:"h-64",children:a.jsx("div",{className:"space-y-3",children:r.map(b=>a.jsxs("div",{className:"flex items-center space-x-3 p-3 rounded-lg border",children:[a.jsx("div",{className:"text-2xl",children:b.badge_icon}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"font-semibold",children:b.achievement_title}),a.jsx("p",{className:"text-sm text-muted-foreground",children:b.achievement_description}),a.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[a.jsxs(oe,{variant:"outline",className:"text-xs",children:[b.points," points"]}),a.jsx(oe,{variant:"secondary",className:te("text-xs",b.rarity==="legendary"&&"bg-yellow-100 text-yellow-800",b.rarity==="epic"&&"bg-purple-100 text-purple-800",b.rarity==="rare"&&"bg-blue-100 text-blue-800",b.rarity==="common"&&"bg-gray-100 text-gray-800"),children:b.rarity}),a.jsx(oe,{variant:"outline",className:"text-xs",children:b.category})]})]}),a.jsx("div",{className:"text-xs text-muted-foreground",children:new Date(b.unlocked_at).toLocaleDateString()})]},b.id))})}):a.jsxs("div",{className:"text-center py-8",children:[a.jsx("p",{className:"text-muted-foreground mb-4",children:"Start participating to unlock achievements!"}),a.jsxs("div",{className:"text-sm text-muted-foreground",children:[a.jsx("p",{children:"• Send messages to earn karma"}),a.jsx("p",{children:"• React to messages for bonus points"}),a.jsx("p",{children:"• Participate in games and voice rooms"}),a.jsx("p",{children:"• Level up to unlock special achievements!"})]})]})})]})}),a.jsx(ar,{value:"activity",className:"space-y-4",children:a.jsxs(W,{children:[a.jsxs(ue,{children:[a.jsxs(de,{className:"flex items-center space-x-2",children:[a.jsx(vb,{className:"h-5 w-5"}),a.jsx("span",{children:"Recent Activity"})]}),a.jsx(Et,{children:"Your latest karma-earning activities"})]}),a.jsx(J,{children:n.length>0?a.jsx(Gr,{className:"h-64",children:a.jsx("div",{className:"space-y-3",children:n.map((b,j)=>a.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsxs("div",{className:"text-lg",children:[b.type==="message"&&"💬",b.type==="reaction"&&"👍",b.type==="voice"&&"🎤",b.type==="game"&&"🎮",b.type==="achievement"&&"🏆"]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium",children:b.description}),a.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(b.timestamp).toLocaleString()})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("p",{className:"text-sm font-semibold text-green-600",children:["+",b.points," karma"]}),b.multiplier&&b.multiplier>1&&a.jsxs("p",{className:"text-xs text-yellow-600",children:["×",b.multiplier," multiplier"]})]})]},j))})}):a.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No recent activity. Start chatting to earn karma!"})})]})}),a.jsxs(ar,{value:"group",className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[h&&x&&a.jsxs(W,{children:[a.jsxs(ue,{children:[a.jsxs(de,{className:"flex items-center space-x-2",children:[a.jsx(pb,{className:"h-5 w-5"}),a.jsx("span",{children:"Your Group Rank"})]}),a.jsxs(Et,{children:["In ",h.name]})]}),a.jsx(J,{children:a.jsxs("div",{className:"text-center space-y-2",children:[a.jsxs("div",{className:"text-3xl font-bold text-primary",children:["#",x.rank]}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:[x.karma_contributed," karma contributed"]}),a.jsxs("div",{className:"text-xs text-muted-foreground",children:["Out of ",f.length," members"]})]})})]}),h&&w&&a.jsxs(W,{children:[a.jsxs(ue,{children:[a.jsxs(de,{className:"flex items-center space-x-2",children:[a.jsx(xs,{className:"h-5 w-5"}),a.jsx("span",{children:"Group Global Rank"})]}),a.jsx(Et,{children:h.name})]}),a.jsx(J,{children:a.jsxs("div",{className:"text-center space-y-2",children:[a.jsxs("div",{className:"text-3xl font-bold text-primary",children:["#",w.rank]}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:[w.monthly_karma_points," karma this month"]}),a.jsxs("div",{className:"text-xs text-muted-foreground",children:[w.member_count," members"]})]})})]})]}),a.jsxs(W,{children:[a.jsxs(ue,{children:[a.jsx(de,{children:"Group Leaderboard"}),a.jsx(Et,{children:"Top contributors this month"})]}),a.jsx(J,{children:!g&&f.length>0?a.jsx(Gr,{className:"h-48",children:a.jsx("div",{className:"space-y-2",children:f.slice(0,10).map(b=>a.jsxs("div",{className:te("flex items-center justify-between p-2 rounded",b.user_id===(e==null?void 0:e.id)&&"bg-primary/10"),children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:te("w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold",b.rank<=3?"bg-yellow-100 text-yellow-800":"bg-muted"),children:b.rank}),a.jsx("span",{className:"font-medium",children:b.display_name})]}),a.jsxs("span",{className:"text-sm text-muted-foreground",children:[b.karma_points," karma"]})]},b.user_id))})}):g?a.jsxs("div",{className:"text-center py-8",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto"}),a.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Loading group members..."})]}):a.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No group members found or you're not in a group yet!"})})]})]}),a.jsx(ar,{value:"global",className:"space-y-4",children:a.jsxs(W,{children:[a.jsxs(ue,{children:[a.jsxs(de,{className:"flex items-center space-x-2",children:[a.jsx(st,{className:"h-5 w-5"}),a.jsx("span",{children:"Global Group Rankings"})]}),a.jsx(Et,{children:"Top performing groups this month"})]}),a.jsx(J,{children:!g&&c.length>0?a.jsx(Gr,{className:"h-64",children:a.jsx("div",{className:"space-y-2",children:c.slice(0,20).map(b=>a.jsxs("div",{className:te("flex items-center justify-between p-3 rounded-lg border",h&&b.group_id===h.id&&"bg-primary/10 border-primary/20"),children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:te("w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold",b.rank<=3?"bg-yellow-100 text-yellow-800":"bg-muted"),children:b.rank}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:b.group_name}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:[b.member_count," members"]})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"font-semibold",children:b.monthly_karma_points}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"karma this month"})]})]},b.group_id))})}):g?a.jsxs("div",{className:"text-center py-8",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto"}),a.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Loading leaderboard..."})]}):a.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No groups competing yet this month!"})})]})})]})]})},N3=({className:e,onGoHome:t})=>{var dr,Pr,pn;const{user:r}=ge(),{isPremium:n,premium:s}=Ms(),{engagement:o}=hn(),{karmaProgress:i,enhancedAchievements:l}=ul(),{privateChats:c}=OO(),{canChange:u,isFirstTime:f,isPremium:d,changeUsername:h}=LO(),{deleteAccount:p,isLoading:g}=$O(),[v,y]=m.useState(!1),[x,w]=m.useState(null),[b,j]=m.useState(null),[_,S]=m.useState(!1),[N,k]=m.useState([]),[C,P]=m.useState(""),[T,M]=m.useState(!1),[G,$]=m.useState(!0),[Q,H]=m.useState(!1),[Y,R]=m.useState(""),[D,B]=m.useState(!0),[I,F]=m.useState(!1),[X,fe]=m.useState(5),[ve,re]=m.useState("😊"),[le,De]=m.useState(!1),[Se,Fe]=m.useState(null);m.useEffect(()=>{r&&et()},[r]);const et=async()=>{if(r)try{const{data:ee}=await E.from("profiles").select("*").eq("user_id",r.id).single();ee&&(w(ee),k([...ee.genres]),fe(ee.daily_mood||5),re(ee.mood_emoji||"😊"),De(ee.show_mood_emoji||!1),Fe(ee.last_mood_update||null),B(ee.show_online_status!==!1));const{data:Re}=await E.from("group_members").select(`
          group_id,
          groups!inner(
            id,
            name,
            vibe_label,
            created_at,
            lifecycle_stage
          )
        `).eq("user_id",r.id).eq("groups.lifecycle_stage","active").order("joined_at",{ascending:!1}).limit(1).maybeSingle();Re&&j(Re.groups)}catch(ee){console.error("Error loading user data:",ee)}finally{$(!1)}},Rt=async()=>{if(!(!r||!x))try{const{error:ee}=await E.from("profiles").update({genres:N}).eq("user_id",r.id);if(ee)throw ee;w({...x,genres:N}),S(!1),Dt({title:"Vibe Tags Updated",description:"Your preferences have been saved successfully."})}catch(ee){console.error("Error updating tags:",ee),Dt({title:"Error",description:"Failed to update your vibe tags. Please try again.",variant:"destructive"})}},ne=()=>{C.trim()&&!N.includes(C.trim())&&N.length<5&&(k([...N,C.trim()]),P(""))},wt=ee=>{k(N.filter(Re=>Re!==ee))},Ee=async()=>{if(!Y.trim()){Dt({title:"Invalid Username",description:"Please enter a valid username.",variant:"destructive"});return}await h(Y)&&(await et(),H(!1),R(""))},Ne=ee=>ee<=2?"😢":ee<=4?"😐":ee<=6?"😊":ee<=8?"😄":"🤩",bt=async ee=>{if(!(!r||!x))try{const Re=Ne(ee),jt=new Date().toISOString().split("T")[0],{error:gn}=await E.from("profiles").update({daily_mood:ee,mood_emoji:Re,last_mood_update:jt}).eq("user_id",r.id);if(gn)throw gn;fe(ee),re(Re),Fe(jt),w({...x,daily_mood:ee,mood_emoji:Re,last_mood_update:jt}),F(!1),Dt({title:"Daily Mood Updated",description:`Your mood has been set to ${Re}`})}catch(Re){console.error("Error updating mood:",Re),Dt({title:"Error",description:"Failed to update your mood. Please try again.",variant:"destructive"})}},Oe=async()=>{if(!(!r||!x))try{const ee=!le,{error:Re}=await E.from("profiles").update({show_mood_emoji:ee}).eq("user_id",r.id);if(Re)throw Re;De(ee),w({...x,show_mood_emoji:ee}),Dt({title:le?"Mood Hidden":"Mood Visible",description:le?"Your mood emoji is now hidden from others.":"Your mood emoji will now be visible next to your name."})}catch(ee){console.error("Error updating mood display:",ee),Dt({title:"Error",description:"Failed to update mood display settings.",variant:"destructive"})}},je=async()=>{if(r)try{const{error:ee}=await E.from("profiles").update({show_online_status:!D,last_seen_at:new Date().toISOString()}).eq("user_id",r.id);if(ee)throw ee;B(!D),Dt({title:"Online Status Updated",description:D?"You're now invisible to others":"You're now visible to others"})}catch(ee){console.error("Error updating online status:",ee),Dt({title:"Error",description:"Failed to update online status",variant:"destructive"})}},tt=ee=>ee>=1e3?{level:"Legend",icon:"👑",color:"bg-gradient-to-r from-yellow-400 to-orange-500"}:ee>=500?{level:"Expert",icon:"⭐",color:"bg-gradient-to-r from-blue-400 to-purple-500"}:ee>=100?{level:"Rising",icon:"🔥",color:"bg-gradient-to-r from-green-400 to-blue-500"}:{level:"Newcomer",icon:"🌱",color:"bg-gradient-to-r from-gray-400 to-gray-600"};if(G)return a.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:a.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary"})});if(!x)return a.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:a.jsx(W,{className:"w-96",children:a.jsx(J,{className:"p-6 text-center",children:a.jsx("p",{className:"text-muted-foreground",children:"No profile found. Please complete onboarding first."})})})});const Er=i?i.currentLevel:tt((o==null?void 0:o.achievement_points)||0);return c!=null&&c.length,a.jsxs("div",{className:`min-h-screen bg-background p-4 ${e}`,children:[a.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[a.jsx("div",{className:"flex justify-start",children:a.jsxs(O,{variant:"outline",onClick:t||(()=>console.log("Go home clicked")),className:"flex items-center gap-2 hover-scale",children:[a.jsx(po,{className:"w-4 h-4"}),"Home"]})}),a.jsxs(W,{className:"overflow-hidden",children:[a.jsx("div",{className:`h-24 ${Er.color}`}),a.jsx(J,{className:"p-6 -mt-12",children:a.jsxs("div",{className:"flex flex-col items-center text-center",children:[a.jsx("div",{className:"w-20 h-20 bg-card rounded-full border-4 border-background flex items-center justify-center text-3xl mb-4",children:((Pr=(dr=x.username)==null?void 0:dr.charAt(0))==null?void 0:Pr.toUpperCase())||"?"}),a.jsxs("h1",{className:"text-2xl font-bold text-card-foreground mb-2 flex items-center gap-2",children:[x.username,a.jsxs(Ht,{open:Q,onOpenChange:H,children:[a.jsx(ji,{asChild:!0,children:a.jsx(O,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",disabled:!u,onClick:()=>R(x.username),children:a.jsx(Hc,{className:"w-3 h-3"})})}),a.jsxs(Lt,{children:[a.jsxs(nr,{children:[a.jsx(qt,{children:"Change Username"}),a.jsx(cs,{children:f?"This is your one-time username change opportunity.":d?"Premium users can change their username once per month.":"You've already used your username change."})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx(ht,{placeholder:"Enter new username",value:Y,onChange:ee=>R(ee.target.value),maxLength:20}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(O,{variant:"outline",onClick:()=>H(!1),children:"Cancel"}),a.jsx(O,{onClick:Ee,children:"Change Username"})]})]})]})]})]}),a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsxs(oe,{variant:"secondary",className:"flex items-center gap-1",children:[a.jsx("span",{className:"text-lg",children:Er.icon}),Er.level]}),n&&a.jsxs(oe,{className:"bg-gradient-to-r from-yellow-400 to-orange-500 text-white flex items-center gap-1",children:[a.jsx(mt,{className:"w-3 h-3"}),"Premium"]})]}),b&&a.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[a.jsx(st,{className:"w-4 h-4"}),a.jsxs("span",{children:["Active in: ",a.jsx("strong",{children:b.name})," ",b.vibe_label]})]})]})})]}),a.jsxs(W,{children:[a.jsx(ue,{children:a.jsxs(de,{className:"flex items-center gap-2",children:[a.jsx(Mu,{className:"w-5 h-5"}),"Your Stats"]})}),a.jsxs(J,{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-primary",children:(i==null?void 0:i.totalPoints)||(o==null?void 0:o.achievement_points)||0}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Karma"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-primary",children:(o==null?void 0:o.daily_streak)||0}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"Day Streak"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-primary",children:(l==null?void 0:l.length)||0}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"Achievements"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-primary",children:(o==null?void 0:o.messages_sent_today)||0}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"Messages Today"})]})]})]}),i&&a.jsxs(W,{children:[a.jsx(ue,{children:a.jsxs(de,{className:"flex items-center gap-2",children:[a.jsx(go,{className:"w-5 h-5"}),"Karma Progress"]})}),a.jsxs(J,{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center text-lg font-bold text-white ${i.currentLevel.color}`,children:i.currentLevel.icon}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold",children:i.currentLevel.level}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:[i.totalPoints," points"]})]})]}),i.nextLevel&&a.jsxs("div",{className:"text-right",children:[a.jsxs("p",{className:"text-sm font-medium",children:[i.pointsToNext," to go"]}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:["Next: ",i.nextLevel.level]})]})]}),i.nextLevel&&a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{children:i.currentLevel.level}),a.jsx("span",{children:i.nextLevel.level})]}),a.jsx("div",{className:"w-full bg-secondary rounded-full h-2",children:a.jsx("div",{className:"bg-primary h-2 rounded-full transition-all duration-300",style:{width:`${i.progress}%`}})}),a.jsxs("p",{className:"text-xs text-center text-muted-foreground",children:[Math.round(i.progress),"% complete"]})]})]})]}),a.jsxs(id,{defaultValue:"overview",className:"w-full",children:[a.jsxs(fl,{className:"grid w-full grid-cols-3",children:[a.jsx(sr,{value:"overview",children:"Overview"}),a.jsxs(sr,{value:"karma",children:[a.jsx(xs,{className:"w-4 h-4 mr-2"}),"Karma"]}),a.jsx(sr,{value:"settings",children:"Settings"})]}),a.jsxs(ar,{value:"overview",className:"space-y-6 mt-6",children:[a.jsxs(W,{children:[a.jsx(ue,{children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs(de,{className:"flex items-center gap-2",children:[a.jsx(mb,{className:"w-5 h-5"}),"Daily Mood"]}),a.jsxs(Ht,{open:I,onOpenChange:F,children:[a.jsx(ji,{asChild:!0,children:a.jsxs(O,{variant:"outline",size:"sm",children:[a.jsx($v,{className:"w-4 h-4 mr-1"}),"Update"]})}),a.jsxs(Lt,{children:[a.jsxs(nr,{children:[a.jsx(qt,{children:"Update Your Daily Mood"}),a.jsx(cs,{children:"How are you feeling right now? You can update this anytime."})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-6xl mb-4",children:Ne(X)}),a.jsx("div",{className:"text-xl font-semibold mb-2",children:X<=2?"Low Energy":X<=4?"Mellow":X<=6?"Good":X<=8?"Great":"Amazing!"})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx(Lp,{value:[X],onValueChange:ee=>fe(ee[0]),max:10,min:1,step:1,className:"w-full"}),a.jsxs("div",{className:"flex justify-between text-sm text-muted-foreground",children:[a.jsx("span",{children:"😢 Low"}),a.jsxs("span",{className:"font-medium text-foreground",children:[X,"/10"]}),a.jsx("span",{children:"🤩 Amazing"})]})]}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(O,{variant:"outline",onClick:()=>F(!1),children:"Cancel"}),a.jsx(O,{onClick:()=>bt(X),children:"Update Mood"})]})]})]})]})]})}),a.jsx(J,{children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:"text-4xl",children:ve}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:X<=2?"Low Energy":X<=4?"Mellow":X<=6?"Good":X<=8?"Great":"Amazing!"}),a.jsx("div",{className:"text-sm text-muted-foreground",children:Se?`Last updated: ${new Date(Se).toLocaleDateString()}`:"Not set yet"})]})]}),a.jsxs(oe,{variant:"secondary",children:[X,"/10"]})]}),a.jsx(pr,{}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("div",{className:"text-sm font-medium",children:"Show mood emoji next to name"}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"Others will see your mood emoji when you send messages"})]}),a.jsx(Pn,{checked:le,onCheckedChange:Oe})]}),le&&a.jsxs("div",{className:"bg-muted/30 p-3 rounded-lg",children:[a.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Preview:"}),a.jsxs("div",{className:"font-medium",children:[x.username," ",ve]})]})]})})]}),a.jsxs(W,{children:[a.jsx(ue,{children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs(de,{className:"flex items-center gap-2",children:[a.jsx(go,{className:"w-5 h-5"}),"Your Vibe Tags"]}),a.jsxs(Ht,{open:_,onOpenChange:S,children:[a.jsx(ji,{asChild:!0,children:a.jsxs(O,{variant:"outline",size:"sm",children:[a.jsx($v,{className:"w-4 h-4 mr-1"}),"Edit"]})}),a.jsxs(Lt,{children:[a.jsxs(nr,{children:[a.jsx(qt,{children:"Edit Your Vibe Tags"}),a.jsx(cs,{children:"Add up to 5 tags that represent your interests and vibes."})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"flex flex-wrap gap-2",children:N.map((ee,Re)=>a.jsxs(oe,{variant:"secondary",className:"flex items-center gap-1",children:[ee,a.jsx(O,{variant:"ghost",size:"sm",className:"h-auto p-0 w-4 h-4 ml-1",onClick:()=>wt(ee),children:a.jsx(cn,{className:"w-3 h-3"})})]},Re))}),N.length<5&&a.jsxs("div",{className:"flex gap-2",children:[a.jsx(ht,{placeholder:"Add a vibe tag...",value:C,onChange:ee=>P(ee.target.value),onKeyPress:ee=>ee.key==="Enter"&&ne()}),a.jsx(O,{onClick:ne,children:a.jsx(Ru,{className:"w-4 h-4"})})]}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(O,{variant:"outline",onClick:()=>S(!1),children:"Cancel"}),a.jsx(O,{onClick:Rt,children:"Save Changes"})]})]})]})]})]})}),a.jsx(J,{children:a.jsx("div",{className:"flex flex-wrap gap-2",children:((pn=x.genres)==null?void 0:pn.length)>0?x.genres.map((ee,Re)=>a.jsx(oe,{variant:"secondary",children:ee},Re)):a.jsx("p",{className:"text-muted-foreground text-sm",children:"No vibe tags set. Click Edit to add some!"})})})]}),a.jsxs(W,{children:[a.jsx(ue,{children:a.jsx(de,{children:"Quick Actions"})}),a.jsxs(J,{className:"space-y-3",children:[a.jsxs(O,{variant:"outline",className:"w-full justify-start",onClick:()=>{Dt({title:"Direct Messaging",description:"Use the DM button in your group chat to send direct messages to group members."})},children:[a.jsx(st,{className:"w-4 h-4 mr-2"}),"Direct Messaging Info"]}),!n&&a.jsxs(a.Fragment,{children:[a.jsx(pr,{}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("h4",{className:"font-medium text-sm",children:"Upgrade to Premium"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Unlock unlimited group switches, direct messaging, and more!"}),a.jsxs(O,{className:"w-full",onClick:()=>M(!0),children:[a.jsx(mt,{className:"w-4 h-4 mr-2"}),"Upgrade Now"]})]})]}),n&&s&&a.jsxs(a.Fragment,{children:[a.jsx(pr,{}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("h4",{className:"font-medium text-sm flex items-center gap-2",children:[a.jsx(mt,{className:"w-4 h-4 text-yellow-500"}),"Premium Active"]}),a.jsx("p",{className:"text-xs text-muted-foreground",children:s.subscription_end?`Renews on ${new Date(s.subscription_end).toLocaleDateString()}`:"Active subscription"})]})]})]})]}),b&&a.jsxs(W,{children:[a.jsx(ue,{children:a.jsxs(de,{className:"flex items-center gap-2",children:[a.jsx(ab,{className:"w-5 h-5"}),"Recent Activity"]})}),a.jsx(J,{children:a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsx("span",{className:"text-muted-foreground",children:"Current Group:"}),a.jsx("span",{className:"font-medium",children:b.name})]}),a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsx("span",{className:"text-muted-foreground",children:"Joined:"}),a.jsx("span",{className:"font-medium",children:new Date(b.created_at).toLocaleDateString()})]}),a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsx("span",{className:"text-muted-foreground",children:"Vibe:"}),a.jsx("span",{className:"font-medium",children:b.vibe_label})]})]})})]})]}),a.jsx(ar,{value:"karma",className:"mt-6",children:a.jsx(_3,{})}),a.jsxs(ar,{value:"settings",className:"space-y-6 mt-6",children:[a.jsxs(W,{children:[a.jsxs(ue,{children:[a.jsxs(de,{className:"flex items-center gap-2",children:[a.jsx(Hc,{className:"w-5 h-5"}),"Profile Settings"]}),a.jsx(Et,{children:"Manage your account preferences and privacy settings"})]}),a.jsxs(J,{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium",children:"Email Notifications"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Receive notifications via email"})]}),a.jsx(Pn,{defaultChecked:!0})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium",children:"Show Online Status"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Let others see when you're online"})]}),a.jsx(Pn,{checked:D,onCheckedChange:je})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium",children:"Public Profile"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Make your profile visible to other users"})]}),a.jsx(Pn,{defaultChecked:!0})]})]})]}),a.jsxs(W,{className:"border-destructive/20",children:[a.jsxs(ue,{children:[a.jsxs(de,{className:"flex items-center gap-2 text-destructive",children:[a.jsx(In,{className:"w-5 h-5"}),"Danger Zone"]}),a.jsx(Et,{children:"Irreversible and destructive actions"})]}),a.jsx(J,{children:a.jsx("div",{className:"space-y-4",children:a.jsx("div",{className:"p-4 border border-destructive/20 rounded-lg",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("h4",{className:"font-medium text-destructive",children:"Delete Account"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Permanently delete your account and all associated data. This action cannot be undone."})]}),a.jsxs(O,{variant:"destructive",size:"sm",onClick:()=>y(!0),disabled:g,className:"ml-4",children:[a.jsx(gb,{className:"w-4 h-4 mr-2"}),g?"Deleting...":"Delete Account"]})]})})})})]}),a.jsx(Ht,{open:v,onOpenChange:y,children:a.jsxs(Lt,{children:[a.jsxs(nr,{children:[a.jsxs(qt,{className:"flex items-center gap-2 text-destructive",children:[a.jsx(In,{className:"w-5 h-5"}),"Delete Account"]}),a.jsx(cs,{children:"This action cannot be undone. This will permanently delete your account and remove all your data from our servers."})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"p-4 bg-destructive/10 rounded-lg",children:[a.jsx("h4",{className:"font-medium text-destructive mb-2",children:"What will be deleted:"}),a.jsxs("ul",{className:"text-sm space-y-1 text-muted-foreground",children:[a.jsx("li",{children:"• Your profile and account information"}),a.jsx("li",{children:"• All your messages and chat history"}),a.jsx("li",{children:"• Your karma points and achievements"}),a.jsx("li",{children:"• Any premium features and subscriptions"}),a.jsx("li",{children:"• All associated data and preferences"})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(O,{variant:"outline",onClick:()=>y(!1),className:"flex-1",children:"Cancel"}),a.jsx(O,{variant:"destructive",onClick:async()=>{(await p()).success&&(y(!1),setTimeout(()=>{t&&t()},500))},disabled:g,className:"flex-1",children:g?"Deleting...":"Delete Account"})]})]})]})})]})]})]}),a.jsx(Ht,{open:T,onOpenChange:M,children:a.jsx(Lt,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:a.jsx(IO,{onClose:()=>M(!1)})})})]})},S3=()=>{const{user:e}=ge(),{toast:t}=Be(),[r,n]=m.useState(null),[s,o]=m.useState(!1),i=async()=>{if(e!=null&&e.id){o(!0);try{const{data:u,error:f}=await E.from("profiles").select("username, created_at").eq("user_id",e.id).single(),d=localStorage.getItem("incomplete_signup_time"),h=e.created_at||d||new Date().toISOString(),p=Math.floor((new Date().getTime()-new Date(h).getTime())/(1e3*60*60*24)),g=!u||!u.username||u.username.trim()==="",v=Math.max(0,3-p),y=g&&p>=3,x=g&&p>=2;n({daysLeft:v,willBeDeleted:y,isAtRisk:x}),y&&g?t({title:"Account will be deleted!",description:"Your account is scheduled for deletion due to incomplete setup. Complete your profile now to keep your account.",variant:"destructive"}):x&&g&&t({title:"Account deletion warning",description:`You have ${v} day${v!==1?"s":""} left to complete your profile setup before your account is automatically deleted.`,variant:"destructive"})}catch(u){console.error("Error checking account status:",u)}finally{o(!1)}}},l=async u=>{if(!(e!=null&&e.id))return{success:!1,error:"No user found"};try{const{data:f,error:d}=await E.rpc("extend_account_by_completing_onboarding",{p_user_id:e.id,p_username:u.username,p_genres:u.genres,p_personality:u.personality,p_bio:u.habits.join(", ")});if(d)throw d;return f!=null&&f.success?(localStorage.removeItem("incomplete_signup_time"),localStorage.removeItem("onboarding_skipped"),await i(),t({title:"Account secured!",description:"Your account is now complete and will not be automatically deleted."}),{success:!0}):{success:!1,error:(f==null?void 0:f.error)||"Failed to extend account"}}catch(f){return console.error("Error extending account:",f),{success:!1,error:f.message}}},c=()=>{localStorage.setItem("cleanup_warning_shown",new Date().toISOString()),n(null)};return m.useEffect(()=>{if(e){const u=localStorage.getItem("cleanup_warning_shown");(u?(new Date().getTime()-new Date(u).getTime())/(1e3*60*60):25)>=24&&i()}},[e==null?void 0:e.id]),{cleanupWarning:r,isLoading:s,checkAccountStatus:i,extendAccountByCompleting:l,dismissWarning:c}},k3={terms:{title:"Terms of Service",emoji:"📜",content:`
**Terms of Service**

Last updated: ${new Date().toLocaleDateString()}

**1. Acceptance of Terms**
By using SyncChat, you confirm that you are at least 13 years old and agree to these Terms of Service.

**2. Service Description**
SyncChat is a social platform that connects users in group chats based on shared interests and preferences.

**3. User Conduct**
- Be respectful to all community members
- No harassment, bullying, or inappropriate content
- No spam or promotional content
- Follow all applicable laws

**4. Account Responsibility**
- You are responsible for your account security
- One account per person
- Accurate information required

**5. Privacy**
- We collect minimal data necessary for the service
- Your conversations are private within your matched groups
- We may moderate content for safety

**6. Intellectual Property**
- You retain rights to your content
- You grant us license to operate the service
- Respect others' intellectual property

**7. Termination**
We may terminate accounts that violate these terms.

**8. Changes to Terms**
We may update these terms with notice to users.

**9. Contact**
For questions about these terms, contact us through the app.
    `},privacy:{title:"Privacy Policy",emoji:"🔐",content:`
**Privacy Policy**

Last updated: ${new Date().toLocaleDateString()}

**1. Information We Collect**
- Account information (email, username)
- Profile preferences (genres, personality traits, habits)
- Chat messages within groups
- Usage analytics (anonymous)

**2. How We Use Information**
- To match you with compatible groups
- To improve our matching algorithm
- To ensure platform safety and security
- To provide customer support

**3. Information Sharing**
- We do not sell your personal data
- Your profile is only visible to matched group members
- We may share anonymized data for research
- Legal compliance when required

**4. Data Storage**
- Your data is stored securely on our servers
- Messages are encrypted in transit
- Regular security audits and updates

**5. Your Rights**
- Access your data
- Correct inaccurate information
- Delete your account and data
- Data portability upon request

**6. Children's Privacy**
- Users must be 13 or older
- No collection of data from children under 13
- Parental consent may be required for users under 18

**7. Cookies and Tracking**
- We use essential cookies for functionality
- No third-party advertising cookies
- You can control cookie preferences

**8. International Users**
- Data may be processed in different countries
- Same privacy protections apply globally

**9. Changes to Policy**
We will notify users of any material changes to this policy.

**10. Contact Us**
For privacy questions, contact us through the app settings.
    `},community:{title:"Community Guidelines",emoji:"🧭",content:`
**Community Guidelines**

Welcome to SyncChat! These guidelines help maintain a positive environment for everyone.

**Our Values**
- Respect and kindness
- Authentic connections
- Safe and inclusive space
- Meaningful conversations

**Expected Behavior**
- Treat all members with respect
- Be authentic in your interactions
- Listen actively and engage thoughtfully
- Help create a welcoming environment

**Prohibited Behavior**
- Harassment, bullying, or threats
- Hate speech or discrimination
- Sharing inappropriate content
- Spam or excessive self-promotion
- Impersonation or fake accounts
- Sharing personal information of others

**Content Guidelines**
- Keep conversations relevant to your group
- No explicit or inappropriate content
- Respect intellectual property
- No commercial solicitations

**Reporting and Enforcement**
- Report violations using the report feature
- We investigate all reports promptly
- Violations may result in warnings or account suspension
- Serious violations may result in permanent bans

**Group Dynamics**
- Participate actively in your groups
- Be open to different perspectives
- Resolve conflicts respectfully
- Support group decisions

**Privacy and Safety**
- Don't share personal information publicly
- Use the block feature if needed
- Report suspicious or harmful behavior
- Keep conversations within the platform

**Consequences**
- First violation: Warning
- Repeated violations: Temporary suspension
- Serious violations: Permanent ban
- Appeals process available

**Getting Help**
- Use in-app reporting tools
- Contact support through settings
- Community moderators are available

Together, we create a space where authentic connections flourish!
    `}},Qa=({policyType:e,trigger:t,asExternal:r=!1})=>{const n=k3[e];return r?a.jsxs(O,{variant:"link",className:"h-auto p-0 text-primary hover:text-primary/80",onClick:()=>window.open(`#${e}`,"_blank"),children:[t,a.jsx(ep,{className:"w-3 h-3 ml-1"})]}):a.jsxs(Ht,{children:[a.jsx(ji,{asChild:!0,children:t}),a.jsxs(Lt,{className:"max-w-2xl max-h-[80vh]",children:[a.jsx(nr,{children:a.jsxs(qt,{className:"flex items-center gap-2",children:[a.jsx("span",{children:n.emoji}),n.title]})}),a.jsx(Gr,{className:"h-[60vh] pr-4",children:a.jsx("div",{className:"space-y-4",children:n.content.split(`

`).map((s,o)=>a.jsx("div",{className:"text-sm",children:s.startsWith("**")?a.jsx("h3",{className:"font-semibold text-foreground mb-2",children:s.replace(/\*\*/g,"")}):a.jsx("p",{className:"text-muted-foreground leading-relaxed",children:s})},o))})})]})]})},C3=({className:e="",onGoHome:t})=>{const{user:r,signOut:n}=ge(),{toast:s}=Be(),{theme:o,setTheme:i}=K1(),{cleanupWarning:l,checkAccountStatus:c}=S3(),[u,f]=m.useState({notifications:!0,soundEnabled:!0,emailDigest:!1});m.useEffect(()=>{const y=localStorage.getItem("app-settings");if(y){const x=JSON.parse(y),{darkMode:w,...b}=x;f({notifications:!0,soundEnabled:!0,emailDigest:!1,...b})}},[]);const d=(y,x)=>{const w={...u,[y]:x};f(w),localStorage.setItem("app-settings",JSON.stringify(w)),s({title:"Settings Updated",description:"Your preferences have been saved."})},h=y=>{i(y?"dark":"light"),s({title:"Theme Updated",description:`Switched to ${y?"dark":"light"} mode.`})},p=async()=>{try{await n(),s({title:"Signed Out",description:"You have been successfully signed out."})}catch{s({title:"Sign Out Failed",description:"There was an error signing out. Please try again.",variant:"destructive"})}},g=()=>{s({title:"Feature Unavailable",description:"Legal consent management is being updated.",variant:"destructive"})},v=({icon:y,title:x,description:w,action:b,badge:j})=>a.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg hover:bg-muted/30 transition-colors",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-muted/50 flex items-center justify-center",children:a.jsx(y,{className:"h-5 w-5 text-muted-foreground"})}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("h3",{className:"font-medium text-sm",children:x}),j&&a.jsx(oe,{variant:"secondary",className:"text-xs",children:j})]}),a.jsx("p",{className:"text-xs text-muted-foreground",children:w})]})]}),b]});return a.jsxs("div",{className:`max-w-2xl mx-auto p-4 space-y-6 ${e}`,children:[a.jsx("div",{className:"flex justify-start",children:a.jsxs(O,{variant:"outline",onClick:t||(()=>{}),className:"flex items-center gap-2 hover-scale",children:[a.jsx(po,{className:"w-4 h-4"}),"Home"]})}),a.jsxs("div",{className:"text-center space-y-2",children:[a.jsx("h1",{className:"text-2xl font-bold",children:"Settings"}),a.jsx("p",{className:"text-muted-foreground",children:"Manage your app preferences and account"})]}),(l==null?void 0:l.isAtRisk)&&a.jsxs(W,{className:"border-destructive bg-destructive/5",children:[a.jsx(ue,{children:a.jsxs(de,{className:"text-lg text-destructive flex items-center gap-2",children:[a.jsx(In,{className:"w-5 h-5"}),"Account Deletion Warning"]})}),a.jsx(J,{children:a.jsxs("div",{className:"space-y-3",children:[a.jsx("p",{className:"text-sm",children:l.willBeDeleted?"Your account is scheduled for deletion due to incomplete setup!":`Your account will be automatically deleted in ${l.daysLeft} day${l.daysLeft!==1?"s":""} if you don't complete your profile.`}),a.jsx(O,{onClick:()=>window.location.href="/",className:"w-full",variant:l.willBeDeleted?"destructive":"default",children:"Complete Profile Setup Now"})]})})]}),a.jsxs(W,{children:[a.jsx(ue,{children:a.jsx(de,{className:"text-lg",children:"Account"})}),a.jsxs(J,{className:"space-y-1",children:[a.jsx(v,{icon:mt,title:"Upgrade to Premium",description:"Unlock exclusive features and 2x karma points",badge:"Popular",action:a.jsxs(O,{size:"sm",className:"hover-scale",children:[a.jsx(mt,{className:"h-4 w-4 mr-2"}),"Upgrade"]})}),a.jsx(pr,{}),a.jsx(v,{icon:vh,title:"Sign Out",description:"Sign out of your account",action:a.jsx(O,{variant:"outline",size:"sm",onClick:p,className:"hover-scale",children:"Sign Out"})})]})]}),a.jsxs(W,{children:[a.jsx(ue,{children:a.jsx(de,{className:"text-lg",children:"Preferences"})}),a.jsxs(J,{className:"space-y-1",children:[a.jsx(v,{icon:o==="dark"?yh:_h,title:"Dark Mode",description:"Switch between light and dark theme",action:a.jsx(Pn,{checked:o==="dark",onCheckedChange:h})}),a.jsx(pr,{}),a.jsx(v,{icon:Dv,title:"Push Notifications",description:"Receive notifications for new messages",action:a.jsx(Pn,{checked:u.notifications,onCheckedChange:y=>d("notifications",y)})}),a.jsx(pr,{}),a.jsx(v,{icon:u.soundEnabled?Au:Wc,title:"Sound Effects",description:"Play sounds for messages and notifications",action:a.jsx(Pn,{checked:u.soundEnabled,onCheckedChange:y=>d("soundEnabled",y)})}),a.jsx(pr,{}),a.jsx(v,{icon:Dv,title:"Email Digest",description:"Receive daily email summary of activity",action:a.jsx(Pn,{checked:u.emailDigest,onCheckedChange:y=>d("emailDigest",y)})})]})]}),a.jsxs(W,{children:[a.jsx(ue,{children:a.jsx(de,{className:"text-lg",children:"Legal & Policies"})}),a.jsxs(J,{className:"space-y-1",children:[a.jsx(v,{icon:gh,title:"Terms of Service",description:"Review our Terms of Service",action:a.jsx(Qa,{policyType:"terms",trigger:a.jsx(O,{variant:"ghost",size:"sm",className:"hover-scale",children:a.jsx(gh,{className:"w-4 h-4"})})})}),a.jsx(pr,{}),a.jsx(v,{icon:pc,title:"Privacy Policy",description:"Learn how we protect your data",action:a.jsx(Qa,{policyType:"privacy",trigger:a.jsx(O,{variant:"ghost",size:"sm",className:"hover-scale",children:a.jsx(pc,{className:"w-4 h-4"})})})}),a.jsx(pr,{}),a.jsx(v,{icon:pc,title:"Community Guidelines",description:"Read our community standards",action:a.jsx(Qa,{policyType:"community",trigger:a.jsx(O,{variant:"ghost",size:"sm",className:"hover-scale",children:a.jsx(xb,{className:"w-4 h-4"})})})}),a.jsx(pr,{}),a.jsx("div",{className:"p-4 rounded-lg bg-muted/30",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-muted/50 flex items-center justify-center",children:a.jsx(In,{className:"h-5 w-5 text-orange-500"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium text-sm",children:"Legal Consent Status"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Legal consent system is being updated"})]})]}),a.jsx(O,{variant:"outline",size:"sm",onClick:g,className:"text-xs",disabled:!0,children:"Update Legal Settings"})]})})]})]}),a.jsxs(W,{children:[a.jsx(ue,{children:a.jsx(de,{className:"text-lg",children:"Support & Info"})}),a.jsx(J,{className:"space-y-1",children:a.jsx(v,{icon:d2,title:"Help & Support",description:"Get help with using the app",action:a.jsx(O,{variant:"ghost",size:"sm",className:"hover-scale",children:a.jsx(ep,{className:"h-4 w-4"})})})})]}),a.jsx("div",{className:"text-center text-xs text-muted-foreground",children:"SyncChat v1.0.0 • Connect • Chat • Discover"})]})},E3=["Comedy","Thriller","Anime","Drama","Sci-Fi","Horror","Romance","Action","Documentary","Fantasy","Mystery","Adventure"],P3=["Funny","Chill","Deep Thinker","Adventurous","Creative","Analytical","Empathetic","Optimistic","Curious","Spontaneous","Loyal","Ambitious"],T3=["Night Owl","Early Bird","Busy Texter","Voice Message Fan","Emoji Lover","Binge Watcher","Quick Replier","Thoughtful Responder","Always Online","Weekend Warrior","Coffee Addict","Tea Enthusiast"],R3=({profile:e,updateProfile:t})=>{const r=(s,o)=>{const i=e[s],l=i.includes(o)?i.filter(c=>c!==o):[...i,o];t({[s]:l})},n=({value:s,isSelected:o,onClick:i})=>a.jsx(O,{variant:o?"tag-selected":"tag",onClick:i,className:"h-auto py-3 px-4 text-left",children:s});return a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-8 h-8 bg-primary/10 rounded-lg flex items-center justify-center",children:a.jsx(al,{className:"w-4 h-4 text-primary"})}),a.jsx("h3",{className:"text-xl font-semibold",children:"Favorite Genres"})]}),a.jsx("p",{className:"text-muted-foreground",children:"What do you love watching or discussing?"}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:E3.map(s=>a.jsx(n,{value:s,isSelected:e.genres.includes(s),onClick:()=>r("genres",s)},s))})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-8 h-8 bg-accent/10 rounded-lg flex items-center justify-center",children:a.jsx(sb,{className:"w-4 h-4 text-accent"})}),a.jsx("h3",{className:"text-xl font-semibold",children:"Personality Traits"})]}),a.jsx("p",{className:"text-muted-foreground",children:"How would your friends describe you?"}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:P3.map(s=>a.jsx(n,{value:s,isSelected:e.personality.includes(s),onClick:()=>r("personality",s)},s))})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-8 h-8 bg-primary-glow/10 rounded-lg flex items-center justify-center",children:a.jsx(Ts,{className:"w-4 h-4 text-primary-glow"})}),a.jsx("h3",{className:"text-xl font-semibold",children:"Your Habits"})]}),a.jsx("p",{className:"text-muted-foreground",children:"What describes your communication style?"}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:T3.map(s=>a.jsx(n,{value:s,isSelected:e.habits.includes(s),onClick:()=>r("habits",s)},s))})]}),(e.genres.length>0||e.personality.length>0||e.habits.length>0)&&a.jsx(W,{className:"p-4 bg-primary/5 border-primary/20",children:a.jsxs("div",{className:"text-sm text-muted-foreground",children:[a.jsx("strong",{children:"Selected:"})," "," ",[...e.genres,...e.personality,...e.habits].length," preferences"]})})]})},qx=["Cool","Mystic","Bright","Swift","Noble","Cosmic","Golden","Silent","Bold","Gentle","Radiant","Ancient","Fierce","Serene","Clever","Wild"],Kx=["Giraffe","Penguin","Butterfly","Falcon","Dragon","Wolf","Phoenix","Dolphin","Tiger","Owl","Rabbit","Fox","Eagle","Panda","Lion","Whale"],ou=()=>{const e=qx[Math.floor(Math.random()*qx.length)],t=Kx[Math.floor(Math.random()*Kx.length)],r=Math.floor(Math.random()*9999)+1;return`${e}${t}${r}`},Yx=async()=>{let e=0;const t=50;for(;e<t;){const n=ou(),{data:s,error:o}=await E.from("profiles").select("user_id").eq("username",n).maybeSingle();if(o){console.error("Error checking username uniqueness:",o),e++;continue}if(!s)return n;e++}return`${ou()}${Date.now().toString().slice(-4)}`},M3=({profile:e,updateProfile:t})=>{const[r,n]=m.useState(!1),[s,o]=m.useState(""),[i,l]=m.useState(!1),[c,u]=m.useState(!1);m.useEffect(()=>{(async()=>{if(!e.username){u(!0);try{const y=await Yx();t({username:y})}catch(y){console.error("Error generating initial username:",y);const x=ou();t({username:x})}finally{u(!1)}}})()},[e.username,t]);const f=async()=>{u(!0);try{const v=await Yx();t({username:v})}catch(v){console.error("Error generating new username:",v);const y=ou();t({username:y})}finally{u(!1)}},d=()=>{o(e.username),n(!0)},h=()=>{s.trim()&&s.trim()!==e.username&&(t({username:s.trim()}),l(!0)),n(!1),o("")},p=()=>{n(!1),o("")},g=()=>{const v=e.personality;if(v.length===0)return"Ready to meet your perfect group!";const y=v[0];return{Funny:"Your humor will be the glue that brings groups together! 😄",Chill:"Your laid-back vibe creates the perfect atmosphere for deep conversations. 🌊","Deep Thinker":"Groups love meaningful discussions with thoughtful people like you. 🧠",Adventurous:"Your energy will inspire groups to try new things together! 🚀",Creative:"Your imagination will spark amazing group activities! 🎨",Empathetic:"Your understanding nature makes everyone feel welcome. 💙"}[y]||"You'll bring something special to every group! ✨"};return a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"text-center space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-xl flex items-center justify-center",children:a.jsx(Hc,{className:"w-6 h-6 text-primary"})}),a.jsx("h3",{className:"text-2xl font-semibold",children:"Meet Your Identity"})]}),a.jsx(W,{className:"p-8 bg-gradient-to-br from-primary/5 to-accent/5 border-primary/20",children:r?a.jsxs("div",{className:"space-y-4",children:[a.jsx(ht,{value:s,onChange:v=>o(v.target.value),placeholder:"Enter your username",className:"text-center text-xl font-semibold bg-background",maxLength:20}),a.jsxs("div",{className:"flex items-center justify-center gap-3",children:[a.jsx(O,{onClick:h,size:"sm",children:"Save"}),a.jsx(O,{variant:"ghost",onClick:p,size:"sm",children:"Cancel"})]}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"This is your one free edit. Choose wisely!"})]}):a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-center gap-3",children:[a.jsx(br,{className:"w-5 h-5 text-primary"}),a.jsx("span",{className:"text-3xl font-bold bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent",children:e.username}),a.jsx(br,{className:"w-5 h-5 text-accent"})]}),a.jsxs("div",{className:"flex items-center justify-center gap-3",children:[a.jsxs(O,{variant:"outline",onClick:f,disabled:c,className:"gap-2",children:[a.jsx(Fi,{className:`w-4 h-4 ${c?"animate-spin":""}`}),c?"Generating...":"Generate New"]}),!i&&a.jsxs(O,{variant:"ghost",onClick:d,className:"gap-2 text-muted-foreground",children:[a.jsx(ub,{className:"w-4 h-4"}),"Edit Once (Free)"]})]}),i&&a.jsx(oe,{variant:"secondary",className:"mx-auto",children:"Free edit used"})]})})]}),a.jsx(W,{className:"p-6 bg-muted/30 border-border/50",children:a.jsxs("div",{className:"text-center space-y-3",children:[a.jsxs("h4",{className:"text-lg font-semibold flex items-center justify-center gap-2",children:[a.jsx(sb,{className:"w-5 h-5 text-accent"}),"Your Group Personality"]}),a.jsx("p",{className:"text-muted-foreground",children:g()})]})}),a.jsx(W,{className:"p-6 bg-gradient-to-r from-primary/5 to-accent/5 border-primary/20",children:a.jsxs("div",{className:"space-y-4",children:[a.jsx("h4",{className:"text-lg font-semibold text-center",children:"Profile Summary"}),a.jsxs("div",{className:"grid md:grid-cols-3 gap-4 text-center",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-2xl font-bold text-primary",children:e.genres.length}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"Favorite Genres"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-2xl font-bold text-accent",children:e.personality.length}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"Personality Traits"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-2xl font-bold text-primary-glow",children:e.habits.length}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"Communication Habits"})]})]})]})}),a.jsx("div",{className:"text-center text-sm text-muted-foreground bg-muted/20 rounded-lg p-4",children:a.jsxs("p",{children:["🔒 ",a.jsx("strong",{children:"100% Anonymous"})," - We never ask for personal information like email, phone, or photos. Your privacy is our priority."]})})]})};var qp="Checkbox",[A3,_$]=kr(qp),[D3,O3]=A3(qp),A_=m.forwardRef((e,t)=>{const{__scopeCheckbox:r,name:n,checked:s,defaultChecked:o,required:i,disabled:l,value:c="on",onCheckedChange:u,form:f,...d}=e,[h,p]=m.useState(null),g=_e(t,j=>p(j)),v=m.useRef(!1),y=h?f||!!h.closest("form"):!0,[x=!1,w]=dn({prop:s,defaultProp:o,onChange:u}),b=m.useRef(x);return m.useEffect(()=>{const j=h==null?void 0:h.form;if(j){const _=()=>w(b.current);return j.addEventListener("reset",_),()=>j.removeEventListener("reset",_)}},[h,w]),a.jsxs(D3,{scope:r,state:x,disabled:l,children:[a.jsx(ie.button,{type:"button",role:"checkbox","aria-checked":ys(x)?"mixed":x,"aria-required":i,"data-state":I_(x),"data-disabled":l?"":void 0,disabled:l,value:c,...d,ref:g,onKeyDown:K(e.onKeyDown,j=>{j.key==="Enter"&&j.preventDefault()}),onClick:K(e.onClick,j=>{w(_=>ys(_)?!0:!_),y&&(v.current=j.isPropagationStopped(),v.current||j.stopPropagation())})}),y&&a.jsx(I3,{control:h,bubbles:!v.current,name:n,value:c,checked:x,required:i,disabled:l,form:f,style:{transform:"translateX(-100%)"},defaultChecked:ys(o)?!1:o})]})});A_.displayName=qp;var D_="CheckboxIndicator",O_=m.forwardRef((e,t)=>{const{__scopeCheckbox:r,forceMount:n,...s}=e,o=O3(D_,r);return a.jsx(gt,{present:n||ys(o.state)||o.state===!0,children:a.jsx(ie.span,{"data-state":I_(o.state),"data-disabled":o.disabled?"":void 0,...s,ref:t,style:{pointerEvents:"none",...e.style}})})});O_.displayName=D_;var I3=e=>{const{control:t,checked:r,bubbles:n=!0,defaultChecked:s,...o}=e,i=m.useRef(null),l=Op(r),c=Lu(t);m.useEffect(()=>{const f=i.current,d=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(d,"checked").set;if(l!==r&&p){const g=new Event("click",{bubbles:n});f.indeterminate=ys(r),p.call(f,ys(r)?!1:r),f.dispatchEvent(g)}},[l,r,n]);const u=m.useRef(ys(r)?!1:r);return a.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:s??u.current,...o,tabIndex:-1,ref:i,style:{...e.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function ys(e){return e==="indeterminate"}function I_(e){return ys(e)?"indeterminate":e?"checked":"unchecked"}var L_=A_,L3=O_;const Xh=m.forwardRef(({className:e,...t},r)=>a.jsx(L_,{ref:r,className:te("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:a.jsx(L3,{className:te("flex items-center justify-center text-current"),children:a.jsx($r,{className:"h-4 w-4"})})}));Xh.displayName=L_.displayName;const $3=({onConsentChange:e,isConsentGiven:t})=>{const[r,n]=m.useState(!1),[s,o]=m.useState(!1);m.useEffect(()=>{t&&(n(!0),o(!0))},[t]);const i=c=>{n(c),e(c&&s)},l=c=>{o(c),e(r&&c)};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(N2,{className:"w-8 h-8 text-primary"})}),a.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Welcome to SyncChat"}),a.jsx("p",{className:"text-muted-foreground",children:"Before we get started, we need to ensure compliance with safety regulations and user privacy laws"})]}),a.jsx(W,{className:"p-6 border-border/50",children:a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx(Xh,{id:"age-confirmation",checked:r,onCheckedChange:i,className:"mt-1"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("label",{htmlFor:"age-confirmation",className:"text-sm font-medium cursor-pointer block mb-1",children:"Age Verification"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"I confirm that I am at least 13 years of age. Users under 18 may require parental consent in some jurisdictions."})]}),r&&a.jsx(Zs,{className:"w-5 h-5 text-green-500 mt-1"})]})}),a.jsx(W,{className:"p-6 border-border/50",children:a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx(Xh,{id:"terms-acceptance",checked:s,onCheckedChange:l,className:"mt-1"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("label",{htmlFor:"terms-acceptance",className:"text-sm font-medium cursor-pointer block mb-2",children:"Legal Agreement"}),a.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"I acknowledge that I have read, understood, and agree to be bound by the Terms of Service and Privacy Policy."}),a.jsxs("div",{className:"flex flex-wrap gap-4 text-sm",children:[a.jsx(Qa,{policyType:"terms",trigger:a.jsxs(O,{variant:"link",className:"h-auto p-0 text-primary hover:text-primary/80 flex items-center gap-1",children:[a.jsx(gh,{className:"w-3 h-3"}),"View Terms of Service"]})}),a.jsx(Qa,{policyType:"privacy",trigger:a.jsxs(O,{variant:"link",className:"h-auto p-0 text-primary hover:text-primary/80 flex items-center gap-1",children:[a.jsx(pc,{className:"w-3 h-3"}),"View Privacy Policy"]})}),a.jsx(Qa,{policyType:"community",trigger:a.jsxs(O,{variant:"link",className:"h-auto p-0 text-primary hover:text-primary/80 flex items-center gap-1",children:[a.jsx(xb,{className:"w-3 h-3"}),"View Community Guidelines"]})})]})]}),s&&a.jsx(Zs,{className:"w-5 h-5 text-green-500 mt-1"})]})}),a.jsx(W,{className:"p-4 bg-muted/50 border-amber-200 dark:border-amber-800",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(In,{className:"w-5 h-5 text-amber-500 mt-0.5 flex-shrink-0"}),a.jsxs("div",{className:"text-sm",children:[a.jsx("p",{className:"font-medium text-amber-900 dark:text-amber-100 mb-1",children:"Legal Compliance Notice"}),a.jsx("p",{className:"text-amber-800 dark:text-amber-200 leading-relaxed",children:"This service complies with applicable laws including COPPA and GDPR. By proceeding, you confirm your eligibility and consent to our data practices as outlined in our Privacy Policy."})]})]})}),t&&a.jsx(W,{className:"p-4 bg-green-50 border-green-200 dark:bg-green-950 dark:border-green-800",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Zs,{className:"w-5 h-5 text-green-600 dark:text-green-400"}),a.jsx("p",{className:"text-sm font-medium text-green-800 dark:text-green-200",children:"Requirements completed. You may now continue setting up your profile."})]})})]})};var Jh=["Enter"," "],U3=["ArrowDown","PageUp","Home"],$_=["ArrowUp","PageDown","End"],F3=[...U3,...$_],z3={ltr:[...Jh,"ArrowRight"],rtl:[...Jh,"ArrowLeft"]},G3={ltr:["ArrowLeft"],rtl:["ArrowRight"]},hl="Menu",[Ki,B3,V3]=ku(hl),[fa,U_]=kr(hl,[V3,Po,od]),ud=Po(),F_=od(),[H3,ha]=fa(hl),[W3,ml]=fa(hl),z_=e=>{const{__scopeMenu:t,open:r=!1,children:n,dir:s,onOpenChange:o,modal:i=!0}=e,l=ud(t),[c,u]=m.useState(null),f=m.useRef(!1),d=Ke(o),h=dl(s);return m.useEffect(()=>{const p=()=>{f.current=!0,document.addEventListener("pointerdown",g,{capture:!0,once:!0}),document.addEventListener("pointermove",g,{capture:!0,once:!0})},g=()=>f.current=!1;return document.addEventListener("keydown",p,{capture:!0}),()=>{document.removeEventListener("keydown",p,{capture:!0}),document.removeEventListener("pointerdown",g,{capture:!0}),document.removeEventListener("pointermove",g,{capture:!0})}},[]),a.jsx(dp,{...l,children:a.jsx(H3,{scope:t,open:r,onOpenChange:d,content:c,onContentChange:u,children:a.jsx(W3,{scope:t,onClose:m.useCallback(()=>d(!1),[d]),isUsingKeyboardRef:f,dir:h,modal:i,children:n})})})};z_.displayName=hl;var q3="MenuAnchor",Kp=m.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e,s=ud(r);return a.jsx($u,{...s,...n,ref:t})});Kp.displayName=q3;var Yp="MenuPortal",[K3,G_]=fa(Yp,{forceMount:void 0}),B_=e=>{const{__scopeMenu:t,forceMount:r,children:n,container:s}=e,o=ha(Yp,t);return a.jsx(K3,{scope:t,forceMount:r,children:a.jsx(gt,{present:r||o.open,children:a.jsx(sl,{asChild:!0,container:s,children:n})})})};B_.displayName=Yp;var jr="MenuContent",[Y3,Qp]=fa(jr),V_=m.forwardRef((e,t)=>{const r=G_(jr,e.__scopeMenu),{forceMount:n=r.forceMount,...s}=e,o=ha(jr,e.__scopeMenu),i=ml(jr,e.__scopeMenu);return a.jsx(Ki.Provider,{scope:e.__scopeMenu,children:a.jsx(gt,{present:n||o.open,children:a.jsx(Ki.Slot,{scope:e.__scopeMenu,children:i.modal?a.jsx(Q3,{...s,ref:t}):a.jsx(X3,{...s,ref:t})})})})}),Q3=m.forwardRef((e,t)=>{const r=ha(jr,e.__scopeMenu),n=m.useRef(null),s=_e(t,n);return m.useEffect(()=>{const o=n.current;if(o)return Sp(o)},[]),a.jsx(Xp,{...e,ref:s,trapFocus:r.open,disableOutsidePointerEvents:r.open,disableOutsideScroll:!0,onFocusOutside:K(e.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>r.onOpenChange(!1)})}),X3=m.forwardRef((e,t)=>{const r=ha(jr,e.__scopeMenu);return a.jsx(Xp,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>r.onOpenChange(!1)})}),Xp=m.forwardRef((e,t)=>{const{__scopeMenu:r,loop:n=!1,trapFocus:s,onOpenAutoFocus:o,onCloseAutoFocus:i,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:u,onPointerDownOutside:f,onFocusOutside:d,onInteractOutside:h,onDismiss:p,disableOutsideScroll:g,...v}=e,y=ha(jr,r),x=ml(jr,r),w=ud(r),b=F_(r),j=B3(r),[_,S]=m.useState(null),N=m.useRef(null),k=_e(t,N,y.onContentChange),C=m.useRef(0),P=m.useRef(""),T=m.useRef(0),M=m.useRef(null),G=m.useRef("right"),$=m.useRef(0),Q=g?nd:m.Fragment,H=g?{as:js,allowPinchZoom:!0}:void 0,Y=D=>{var le,De;const B=P.current+D,I=j().filter(Se=>!Se.disabled),F=document.activeElement,X=(le=I.find(Se=>Se.ref.current===F))==null?void 0:le.textValue,fe=I.map(Se=>Se.textValue),ve=c5(fe,B,X),re=(De=I.find(Se=>Se.textValue===ve))==null?void 0:De.ref.current;(function Se(Fe){P.current=Fe,window.clearTimeout(C.current),Fe!==""&&(C.current=window.setTimeout(()=>Se(""),1e3))})(B),re&&setTimeout(()=>re.focus())};m.useEffect(()=>()=>window.clearTimeout(C.current),[]),Np();const R=m.useCallback(D=>{var I,F;return G.current===((I=M.current)==null?void 0:I.side)&&d5(D,(F=M.current)==null?void 0:F.area)},[]);return a.jsx(Y3,{scope:r,searchRef:P,onItemEnter:m.useCallback(D=>{R(D)&&D.preventDefault()},[R]),onItemLeave:m.useCallback(D=>{var B;R(D)||((B=N.current)==null||B.focus(),S(null))},[R]),onTriggerLeave:m.useCallback(D=>{R(D)&&D.preventDefault()},[R]),pointerGraceTimerRef:T,onPointerGraceIntentChange:m.useCallback(D=>{M.current=D},[]),children:a.jsx(Q,{...H,children:a.jsx(td,{asChild:!0,trapped:s,onMountAutoFocus:K(o,D=>{var B;D.preventDefault(),(B=N.current)==null||B.focus({preventScroll:!0})}),onUnmountAutoFocus:i,children:a.jsx(So,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:u,onPointerDownOutside:f,onFocusOutside:d,onInteractOutside:h,onDismiss:p,children:a.jsx(s_,{asChild:!0,...b,dir:x.dir,orientation:"vertical",loop:n,currentTabStopId:_,onCurrentTabStopIdChange:S,onEntryFocus:K(c,D=>{x.isUsingKeyboardRef.current||D.preventDefault()}),preventScrollOnEntryFocus:!0,children:a.jsx(fp,{role:"menu","aria-orientation":"vertical","data-state":oN(y.open),"data-radix-menu-content":"",dir:x.dir,...w,...v,ref:k,style:{outline:"none",...v.style},onKeyDown:K(v.onKeyDown,D=>{const I=D.target.closest("[data-radix-menu-content]")===D.currentTarget,F=D.ctrlKey||D.altKey||D.metaKey,X=D.key.length===1;I&&(D.key==="Tab"&&D.preventDefault(),!F&&X&&Y(D.key));const fe=N.current;if(D.target!==fe||!F3.includes(D.key))return;D.preventDefault();const re=j().filter(le=>!le.disabled).map(le=>le.ref.current);$_.includes(D.key)&&re.reverse(),i5(re)}),onBlur:K(e.onBlur,D=>{D.currentTarget.contains(D.target)||(window.clearTimeout(C.current),P.current="")}),onPointerMove:K(e.onPointerMove,Yi(D=>{const B=D.target,I=$.current!==D.clientX;if(D.currentTarget.contains(B)&&I){const F=D.clientX>$.current?"right":"left";G.current=F,$.current=D.clientX}}))})})})})})})});V_.displayName=jr;var J3="MenuGroup",Jp=m.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return a.jsx(ie.div,{role:"group",...n,ref:t})});Jp.displayName=J3;var Z3="MenuLabel",H_=m.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return a.jsx(ie.div,{...n,ref:t})});H_.displayName=Z3;var iu="MenuItem",Qx="menu.itemSelect",dd=m.forwardRef((e,t)=>{const{disabled:r=!1,onSelect:n,...s}=e,o=m.useRef(null),i=ml(iu,e.__scopeMenu),l=Qp(iu,e.__scopeMenu),c=_e(t,o),u=m.useRef(!1),f=()=>{const d=o.current;if(!r&&d){const h=new CustomEvent(Qx,{bubbles:!0,cancelable:!0});d.addEventListener(Qx,p=>n==null?void 0:n(p),{once:!0}),Qm(d,h),h.defaultPrevented?u.current=!1:i.onClose()}};return a.jsx(W_,{...s,ref:c,disabled:r,onClick:K(e.onClick,f),onPointerDown:d=>{var h;(h=e.onPointerDown)==null||h.call(e,d),u.current=!0},onPointerUp:K(e.onPointerUp,d=>{var h;u.current||(h=d.currentTarget)==null||h.click()}),onKeyDown:K(e.onKeyDown,d=>{const h=l.searchRef.current!=="";r||h&&d.key===" "||Jh.includes(d.key)&&(d.currentTarget.click(),d.preventDefault())})})});dd.displayName=iu;var W_=m.forwardRef((e,t)=>{const{__scopeMenu:r,disabled:n=!1,textValue:s,...o}=e,i=Qp(iu,r),l=F_(r),c=m.useRef(null),u=_e(t,c),[f,d]=m.useState(!1),[h,p]=m.useState("");return m.useEffect(()=>{const g=c.current;g&&p((g.textContent??"").trim())},[o.children]),a.jsx(Ki.ItemSlot,{scope:r,disabled:n,textValue:s??h,children:a.jsx(a_,{asChild:!0,...l,focusable:!n,children:a.jsx(ie.div,{role:"menuitem","data-highlighted":f?"":void 0,"aria-disabled":n||void 0,"data-disabled":n?"":void 0,...o,ref:u,onPointerMove:K(e.onPointerMove,Yi(g=>{n?i.onItemLeave(g):(i.onItemEnter(g),g.defaultPrevented||g.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:K(e.onPointerLeave,Yi(g=>i.onItemLeave(g))),onFocus:K(e.onFocus,()=>d(!0)),onBlur:K(e.onBlur,()=>d(!1))})})})}),e5="MenuCheckboxItem",q_=m.forwardRef((e,t)=>{const{checked:r=!1,onCheckedChange:n,...s}=e;return a.jsx(J_,{scope:e.__scopeMenu,checked:r,children:a.jsx(dd,{role:"menuitemcheckbox","aria-checked":lu(r)?"mixed":r,...s,ref:t,"data-state":eg(r),onSelect:K(s.onSelect,()=>n==null?void 0:n(lu(r)?!0:!r),{checkForDefaultPrevented:!1})})})});q_.displayName=e5;var K_="MenuRadioGroup",[t5,r5]=fa(K_,{value:void 0,onValueChange:()=>{}}),Y_=m.forwardRef((e,t)=>{const{value:r,onValueChange:n,...s}=e,o=Ke(n);return a.jsx(t5,{scope:e.__scopeMenu,value:r,onValueChange:o,children:a.jsx(Jp,{...s,ref:t})})});Y_.displayName=K_;var Q_="MenuRadioItem",X_=m.forwardRef((e,t)=>{const{value:r,...n}=e,s=r5(Q_,e.__scopeMenu),o=r===s.value;return a.jsx(J_,{scope:e.__scopeMenu,checked:o,children:a.jsx(dd,{role:"menuitemradio","aria-checked":o,...n,ref:t,"data-state":eg(o),onSelect:K(n.onSelect,()=>{var i;return(i=s.onValueChange)==null?void 0:i.call(s,r)},{checkForDefaultPrevented:!1})})})});X_.displayName=Q_;var Zp="MenuItemIndicator",[J_,n5]=fa(Zp,{checked:!1}),Z_=m.forwardRef((e,t)=>{const{__scopeMenu:r,forceMount:n,...s}=e,o=n5(Zp,r);return a.jsx(gt,{present:n||lu(o.checked)||o.checked===!0,children:a.jsx(ie.span,{...s,ref:t,"data-state":eg(o.checked)})})});Z_.displayName=Zp;var s5="MenuSeparator",eN=m.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return a.jsx(ie.div,{role:"separator","aria-orientation":"horizontal",...n,ref:t})});eN.displayName=s5;var a5="MenuArrow",tN=m.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e,s=ud(r);return a.jsx(hp,{...s,...n,ref:t})});tN.displayName=a5;var o5="MenuSub",[N$,rN]=fa(o5),li="MenuSubTrigger",nN=m.forwardRef((e,t)=>{const r=ha(li,e.__scopeMenu),n=ml(li,e.__scopeMenu),s=rN(li,e.__scopeMenu),o=Qp(li,e.__scopeMenu),i=m.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=o,u={__scopeMenu:e.__scopeMenu},f=m.useCallback(()=>{i.current&&window.clearTimeout(i.current),i.current=null},[]);return m.useEffect(()=>f,[f]),m.useEffect(()=>{const d=l.current;return()=>{window.clearTimeout(d),c(null)}},[l,c]),a.jsx(Kp,{asChild:!0,...u,children:a.jsx(W_,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":s.contentId,"data-state":oN(r.open),...e,ref:Su(t,s.onTriggerChange),onClick:d=>{var h;(h=e.onClick)==null||h.call(e,d),!(e.disabled||d.defaultPrevented)&&(d.currentTarget.focus(),r.open||r.onOpenChange(!0))},onPointerMove:K(e.onPointerMove,Yi(d=>{o.onItemEnter(d),!d.defaultPrevented&&!e.disabled&&!r.open&&!i.current&&(o.onPointerGraceIntentChange(null),i.current=window.setTimeout(()=>{r.onOpenChange(!0),f()},100))})),onPointerLeave:K(e.onPointerLeave,Yi(d=>{var p,g;f();const h=(p=r.content)==null?void 0:p.getBoundingClientRect();if(h){const v=(g=r.content)==null?void 0:g.dataset.side,y=v==="right",x=y?-5:5,w=h[y?"left":"right"],b=h[y?"right":"left"];o.onPointerGraceIntentChange({area:[{x:d.clientX+x,y:d.clientY},{x:w,y:h.top},{x:b,y:h.top},{x:b,y:h.bottom},{x:w,y:h.bottom}],side:v}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>o.onPointerGraceIntentChange(null),300)}else{if(o.onTriggerLeave(d),d.defaultPrevented)return;o.onPointerGraceIntentChange(null)}})),onKeyDown:K(e.onKeyDown,d=>{var p;const h=o.searchRef.current!=="";e.disabled||h&&d.key===" "||z3[n.dir].includes(d.key)&&(r.onOpenChange(!0),(p=r.content)==null||p.focus(),d.preventDefault())})})})});nN.displayName=li;var sN="MenuSubContent",aN=m.forwardRef((e,t)=>{const r=G_(jr,e.__scopeMenu),{forceMount:n=r.forceMount,...s}=e,o=ha(jr,e.__scopeMenu),i=ml(jr,e.__scopeMenu),l=rN(sN,e.__scopeMenu),c=m.useRef(null),u=_e(t,c);return a.jsx(Ki.Provider,{scope:e.__scopeMenu,children:a.jsx(gt,{present:n||o.open,children:a.jsx(Ki.Slot,{scope:e.__scopeMenu,children:a.jsx(Xp,{id:l.contentId,"aria-labelledby":l.triggerId,...s,ref:u,align:"start",side:i.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:f=>{var d;i.isUsingKeyboardRef.current&&((d=c.current)==null||d.focus()),f.preventDefault()},onCloseAutoFocus:f=>f.preventDefault(),onFocusOutside:K(e.onFocusOutside,f=>{f.target!==l.trigger&&o.onOpenChange(!1)}),onEscapeKeyDown:K(e.onEscapeKeyDown,f=>{i.onClose(),f.preventDefault()}),onKeyDown:K(e.onKeyDown,f=>{var p;const d=f.currentTarget.contains(f.target),h=G3[i.dir].includes(f.key);d&&h&&(o.onOpenChange(!1),(p=l.trigger)==null||p.focus(),f.preventDefault())})})})})})});aN.displayName=sN;function oN(e){return e?"open":"closed"}function lu(e){return e==="indeterminate"}function eg(e){return lu(e)?"indeterminate":e?"checked":"unchecked"}function i5(e){const t=document.activeElement;for(const r of e)if(r===t||(r.focus(),document.activeElement!==t))return}function l5(e,t){return e.map((r,n)=>e[(t+n)%e.length])}function c5(e,t,r){const s=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,o=r?e.indexOf(r):-1;let i=l5(e,Math.max(o,0));s.length===1&&(i=i.filter(u=>u!==r));const c=i.find(u=>u.toLowerCase().startsWith(s.toLowerCase()));return c!==r?c:void 0}function u5(e,t){const{x:r,y:n}=e;let s=!1;for(let o=0,i=t.length-1;o<t.length;i=o++){const l=t[o].x,c=t[o].y,u=t[i].x,f=t[i].y;c>n!=f>n&&r<(u-l)*(n-c)/(f-c)+l&&(s=!s)}return s}function d5(e,t){if(!t)return!1;const r={x:e.clientX,y:e.clientY};return u5(r,t)}function Yi(e){return t=>t.pointerType==="mouse"?e(t):void 0}var f5=z_,h5=Kp,m5=B_,p5=V_,g5=Jp,v5=H_,x5=dd,y5=q_,w5=Y_,b5=X_,j5=Z_,_5=eN,N5=tN,S5=nN,k5=aN,tg="DropdownMenu",[C5,S$]=kr(tg,[U_]),zt=U_(),[E5,iN]=C5(tg),lN=e=>{const{__scopeDropdownMenu:t,children:r,dir:n,open:s,defaultOpen:o,onOpenChange:i,modal:l=!0}=e,c=zt(t),u=m.useRef(null),[f=!1,d]=dn({prop:s,defaultProp:o,onChange:i});return a.jsx(E5,{scope:t,triggerId:Rn(),triggerRef:u,contentId:Rn(),open:f,onOpenChange:d,onOpenToggle:m.useCallback(()=>d(h=>!h),[d]),modal:l,children:a.jsx(f5,{...c,open:f,onOpenChange:d,dir:n,modal:l,children:r})})};lN.displayName=tg;var cN="DropdownMenuTrigger",uN=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,disabled:n=!1,...s}=e,o=iN(cN,r),i=zt(r);return a.jsx(h5,{asChild:!0,...i,children:a.jsx(ie.button,{type:"button",id:o.triggerId,"aria-haspopup":"menu","aria-expanded":o.open,"aria-controls":o.open?o.contentId:void 0,"data-state":o.open?"open":"closed","data-disabled":n?"":void 0,disabled:n,...s,ref:Su(t,o.triggerRef),onPointerDown:K(e.onPointerDown,l=>{!n&&l.button===0&&l.ctrlKey===!1&&(o.onOpenToggle(),o.open||l.preventDefault())}),onKeyDown:K(e.onKeyDown,l=>{n||(["Enter"," "].includes(l.key)&&o.onOpenToggle(),l.key==="ArrowDown"&&o.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});uN.displayName=cN;var P5="DropdownMenuPortal",dN=e=>{const{__scopeDropdownMenu:t,...r}=e,n=zt(t);return a.jsx(m5,{...n,...r})};dN.displayName=P5;var fN="DropdownMenuContent",hN=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=iN(fN,r),o=zt(r),i=m.useRef(!1);return a.jsx(p5,{id:s.contentId,"aria-labelledby":s.triggerId,...o,...n,ref:t,onCloseAutoFocus:K(e.onCloseAutoFocus,l=>{var c;i.current||(c=s.triggerRef.current)==null||c.focus(),i.current=!1,l.preventDefault()}),onInteractOutside:K(e.onInteractOutside,l=>{const c=l.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0,f=c.button===2||u;(!s.modal||f)&&(i.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});hN.displayName=fN;var T5="DropdownMenuGroup",R5=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=zt(r);return a.jsx(g5,{...s,...n,ref:t})});R5.displayName=T5;var M5="DropdownMenuLabel",mN=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=zt(r);return a.jsx(v5,{...s,...n,ref:t})});mN.displayName=M5;var A5="DropdownMenuItem",pN=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=zt(r);return a.jsx(x5,{...s,...n,ref:t})});pN.displayName=A5;var D5="DropdownMenuCheckboxItem",gN=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=zt(r);return a.jsx(y5,{...s,...n,ref:t})});gN.displayName=D5;var O5="DropdownMenuRadioGroup",I5=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=zt(r);return a.jsx(w5,{...s,...n,ref:t})});I5.displayName=O5;var L5="DropdownMenuRadioItem",vN=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=zt(r);return a.jsx(b5,{...s,...n,ref:t})});vN.displayName=L5;var $5="DropdownMenuItemIndicator",xN=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=zt(r);return a.jsx(j5,{...s,...n,ref:t})});xN.displayName=$5;var U5="DropdownMenuSeparator",yN=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=zt(r);return a.jsx(_5,{...s,...n,ref:t})});yN.displayName=U5;var F5="DropdownMenuArrow",z5=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=zt(r);return a.jsx(N5,{...s,...n,ref:t})});z5.displayName=F5;var G5="DropdownMenuSubTrigger",wN=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=zt(r);return a.jsx(S5,{...s,...n,ref:t})});wN.displayName=G5;var B5="DropdownMenuSubContent",bN=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=zt(r);return a.jsx(k5,{...s,...n,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});bN.displayName=B5;var V5=lN,H5=uN,W5=dN,jN=hN,_N=mN,NN=pN,SN=gN,kN=vN,CN=xN,EN=yN,PN=wN,TN=bN;const rg=V5,ng=H5,q5=m.forwardRef(({className:e,inset:t,children:r,...n},s)=>a.jsxs(PN,{ref:s,className:te("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",e),...n,children:[r,a.jsx(ob,{className:"ml-auto h-4 w-4"})]}));q5.displayName=PN.displayName;const K5=m.forwardRef(({className:e,...t},r)=>a.jsx(TN,{ref:r,className:te("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));K5.displayName=TN.displayName;const fd=m.forwardRef(({className:e,sideOffset:t=4,...r},n)=>a.jsx(W5,{children:a.jsx(jN,{ref:n,sideOffset:t,className:te("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));fd.displayName=jN.displayName;const xr=m.forwardRef(({className:e,inset:t,...r},n)=>a.jsx(NN,{ref:n,className:te("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...r}));xr.displayName=NN.displayName;const Y5=m.forwardRef(({className:e,children:t,checked:r,...n},s)=>a.jsxs(SN,{ref:s,className:te("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:r,...n,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(CN,{children:a.jsx($r,{className:"h-4 w-4"})})}),t]}));Y5.displayName=SN.displayName;const Q5=m.forwardRef(({className:e,children:t,...r},n)=>a.jsxs(kN,{ref:n,className:te("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(CN,{children:a.jsx(h2,{className:"h-2 w-2 fill-current"})})}),t]}));Q5.displayName=kN.displayName;const X5=m.forwardRef(({className:e,inset:t,...r},n)=>a.jsx(_N,{ref:n,className:te("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...r}));X5.displayName=_N.displayName;const RN=m.forwardRef(({className:e,...t},r)=>a.jsx(EN,{ref:r,className:te("-mx-1 my-1 h-px bg-muted",e),...t}));RN.displayName=EN.displayName;const J5=({groupId:e,memberCount:t})=>{const{user:r}=ge(),[n,s]=m.useState([]),[o,i]=m.useState(!1),[l,c]=m.useState(!1),u=async()=>{if(l){i(!0);try{const{data:d,error:h}=await E.from("group_members").select(`
          user_id,
          joined_at,
          profiles!inner(username)
        `).eq("group_id",e).order("joined_at",{ascending:!0});if(h)throw h;const p=(d==null?void 0:d.map(g=>{var v;return{user_id:g.user_id,username:((v=g.profiles)==null?void 0:v.username)||"Unknown User",joined_at:g.joined_at}}))||[];s(p)}catch(d){console.error("Error fetching group members:",d)}finally{i(!1)}}};m.useEffect(()=>{u()},[l,e]);const f=d=>{const h=new Date(d),g=(new Date().getTime()-h.getTime())/(1e3*60*60);return g<24?"Today":g<48?"Yesterday":`${Math.floor(g/24)} days ago`};return a.jsxs(Ht,{open:l,onOpenChange:c,children:[a.jsx(ji,{asChild:!0,children:a.jsxs(O,{variant:"ghost",size:"sm",className:"flex items-center gap-1 text-muted-foreground hover:text-foreground",children:[a.jsx(st,{className:"w-4 h-4"}),a.jsxs("span",{className:"text-sm",children:[t," member",t!==1?"s":""]})]})}),a.jsxs(Lt,{className:"max-w-md",children:[a.jsx(nr,{children:a.jsxs(qt,{className:"flex items-center gap-2",children:[a.jsx(st,{className:"w-5 h-5"}),"Group Members (",t,")"]})}),a.jsx(Gr,{className:"max-h-96",children:o?a.jsx("div",{className:"flex items-center justify-center py-8",children:a.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary"})}):a.jsx("div",{className:"space-y-3",children:n.map((d,h)=>a.jsx("div",{className:"flex items-center justify-between p-3 rounded-lg bg-muted/30",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-8 h-8 rounded-full bg-primary/20 flex items-center justify-center text-sm font-medium",children:d.username.charAt(0).toUpperCase()}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"font-medium text-sm",children:d.username}),d.user_id===(r==null?void 0:r.id)&&a.jsx(oe,{variant:"outline",className:"text-xs",children:"You"}),h===0&&a.jsx("div",{title:"First to join",children:a.jsx(mt,{className:"w-3 h-3 text-yellow-500"})})]}),a.jsxs("span",{className:"text-xs text-muted-foreground",children:["Joined ",f(d.joined_at)]})]})]})},d.user_id))})}),a.jsx("div",{className:"text-center text-xs text-muted-foreground mt-4",children:"Members are ordered by join date"})]})]})},Z5=e=>typeof e!="string"?"":e.toString().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;"),eI=e=>{if(typeof e!="string")return{isValid:!1,sanitizedMessage:"",error:"Message must be a string"};const t=e.trim();if(t.length===0)return{isValid:!1,sanitizedMessage:"",error:"Message cannot be empty"};if(t.length>1e3)return{isValid:!1,sanitizedMessage:"",error:"Message too long (max 1000 characters)"};const r=[/<script\b/i,/javascript:/i,/data:text\/html/i,/vbscript:/i,/on\w+\s*=/i,/expression\s*\(/i];for(const s of r)if(s.test(t))return{isValid:!1,sanitizedMessage:"",error:"Message contains potentially dangerous content"};return{isValid:!0,sanitizedMessage:Z5(t)}},la=({size:e="md",className:t,text:r})=>{const n={sm:"w-4 h-4",md:"w-6 h-6",lg:"w-8 h-8"};return a.jsxs("div",{className:te("flex items-center justify-center gap-2",t),children:[a.jsx("div",{className:te("animate-spin rounded-full border-2 border-muted border-t-primary",n[e])}),r&&a.jsx("span",{className:"text-sm text-muted-foreground animate-pulse",children:r})]})},tI=({onRecordingComplete:e,disabled:t})=>{const[r,n]=m.useState(!1),[s,o]=m.useState(0),[i,l]=m.useState(null),[c,u]=m.useState(!1),[f,d]=m.useState(!1),h=m.useRef(null),p=m.useRef(null),g=m.useRef(null),v=m.useRef([]),y=m.useRef(null),{toast:x}=Be(),{trackActivity:w}=hn(),b=m.useCallback(async()=>{try{const T=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0}});p.current=T,v.current=[];const M=new MediaRecorder(T,{mimeType:"audio/webm;codecs=opus"});h.current=M,M.ondataavailable=G=>{G.data.size>0&&v.current.push(G.data)},M.onstop=()=>{const G=new Blob(v.current,{type:"audio/webm"});l(G),d(!0);const $=URL.createObjectURL(G);y.current=new Audio($),y.current.onended=()=>u(!1),_()},M.start(1e3),n(!0),o(0),g.current=setInterval(()=>{o(G=>G+1)},1e3)}catch(T){console.error("Error starting recording:",T),T instanceof Error?T.name==="NotAllowedError"?x({title:"Microphone Permission Denied",description:"Please allow microphone access in your browser settings to record voice messages.",variant:"destructive"}):T.name==="NotFoundError"?x({title:"No Microphone Found",description:"No microphone detected. Please connect a microphone and try again.",variant:"destructive"}):T.name==="NotReadableError"?x({title:"Microphone In Use",description:"Microphone is being used by another application. Please close other apps and try again.",variant:"destructive"}):x({title:"Recording Error",description:"Failed to access microphone. Please check your browser settings and try again.",variant:"destructive"}):x({title:"Recording Error",description:"Failed to access microphone. Please check permissions.",variant:"destructive"})}},[e,x]),j=m.useCallback(()=>{h.current&&r&&h.current.stop()},[r]),_=m.useCallback(()=>{g.current&&(clearInterval(g.current),g.current=null),p.current&&(p.current.getTracks().forEach(T=>T.stop()),p.current=null),n(!1),o(0),h.current=null},[]),S=m.useCallback(()=>{y.current&&(c?(y.current.pause(),u(!1)):(y.current.play(),u(!0)))},[c]),N=m.useCallback(()=>{i&&(e(i),C(),x({title:"Voice message sent!",description:"Your recording has been shared with the group."}))},[i,e,x,w]),k=m.useCallback(()=>{C(),b()},[b]),C=m.useCallback(()=>{y.current&&(y.current.pause(),URL.revokeObjectURL(y.current.src),y.current=null),l(null),d(!1),u(!1),o(0)},[]),P=T=>{const M=Math.floor(T/60),G=T%60;return`${M}:${G.toString().padStart(2,"0")}`};return r?a.jsxs("div",{className:"flex items-center gap-2 p-2 rounded-lg bg-destructive/10 border border-destructive/20",children:[a.jsxs("div",{className:"flex items-center gap-2 text-destructive",children:[a.jsx("div",{className:"w-2 h-2 bg-destructive rounded-full animate-pulse"}),a.jsx("span",{className:"text-sm font-medium",children:P(s)})]}),a.jsx(O,{onClick:j,size:"sm",variant:"destructive",className:"h-8 w-8 p-0",children:a.jsx(S2,{className:"h-4 w-4"})})]}):f&&i?a.jsxs("div",{className:"flex items-center gap-2 p-3 rounded-lg bg-primary/10 border border-primary/20",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(O,{onClick:S,size:"sm",variant:"ghost",className:"h-8 w-8 p-0",children:c?a.jsx(cb,{className:"h-4 w-4"}):a.jsx(fb,{className:"h-4 w-4"})}),a.jsxs("span",{className:"text-sm text-muted-foreground",children:[P(s)," recording"]})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsxs(O,{onClick:N,size:"sm",className:"h-8 px-3 bg-primary hover:bg-primary/90",children:[a.jsx(_2,{className:"h-3 w-3 mr-1"}),"Send"]}),a.jsx(O,{onClick:k,size:"sm",variant:"outline",className:"h-8 w-8 p-0",children:a.jsx(hb,{className:"h-3 w-3"})}),a.jsx(O,{onClick:C,size:"sm",variant:"outline",className:"h-8 w-8 p-0 text-destructive hover:text-destructive",children:a.jsx(gb,{className:"h-3 w-3"})})]})]}):a.jsx(O,{onClick:b,disabled:t,size:"sm",variant:"outline",className:"h-10 w-10 p-0 rounded-full hover:bg-primary/10",children:a.jsx(mc,{className:"h-4 w-4"})})};var sg="Popover",[MN,k$]=kr(sg,[Po]),pl=Po(),[rI,As]=MN(sg),AN=e=>{const{__scopePopover:t,children:r,open:n,defaultOpen:s,onOpenChange:o,modal:i=!1}=e,l=pl(t),c=m.useRef(null),[u,f]=m.useState(!1),[d=!1,h]=dn({prop:n,defaultProp:s,onChange:o});return a.jsx(dp,{...l,children:a.jsx(rI,{scope:t,contentId:Rn(),triggerRef:c,open:d,onOpenChange:h,onOpenToggle:m.useCallback(()=>h(p=>!p),[h]),hasCustomAnchor:u,onCustomAnchorAdd:m.useCallback(()=>f(!0),[]),onCustomAnchorRemove:m.useCallback(()=>f(!1),[]),modal:i,children:r})})};AN.displayName=sg;var DN="PopoverAnchor",nI=m.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,s=As(DN,r),o=pl(r),{onCustomAnchorAdd:i,onCustomAnchorRemove:l}=s;return m.useEffect(()=>(i(),()=>l()),[i,l]),a.jsx($u,{...o,...n,ref:t})});nI.displayName=DN;var ON="PopoverTrigger",IN=m.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,s=As(ON,r),o=pl(r),i=_e(t,s.triggerRef),l=a.jsx(ie.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":zN(s.open),...n,ref:i,onClick:K(e.onClick,s.onOpenToggle)});return s.hasCustomAnchor?l:a.jsx($u,{asChild:!0,...o,children:l})});IN.displayName=ON;var ag="PopoverPortal",[sI,aI]=MN(ag,{forceMount:void 0}),LN=e=>{const{__scopePopover:t,forceMount:r,children:n,container:s}=e,o=As(ag,t);return a.jsx(sI,{scope:t,forceMount:r,children:a.jsx(gt,{present:r||o.open,children:a.jsx(sl,{asChild:!0,container:s,children:n})})})};LN.displayName=ag;var bo="PopoverContent",$N=m.forwardRef((e,t)=>{const r=aI(bo,e.__scopePopover),{forceMount:n=r.forceMount,...s}=e,o=As(bo,e.__scopePopover);return a.jsx(gt,{present:n||o.open,children:o.modal?a.jsx(oI,{...s,ref:t}):a.jsx(iI,{...s,ref:t})})});$N.displayName=bo;var oI=m.forwardRef((e,t)=>{const r=As(bo,e.__scopePopover),n=m.useRef(null),s=_e(t,n),o=m.useRef(!1);return m.useEffect(()=>{const i=n.current;if(i)return Sp(i)},[]),a.jsx(nd,{as:js,allowPinchZoom:!0,children:a.jsx(UN,{...e,ref:s,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:K(e.onCloseAutoFocus,i=>{var l;i.preventDefault(),o.current||(l=r.triggerRef.current)==null||l.focus()}),onPointerDownOutside:K(e.onPointerDownOutside,i=>{const l=i.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;o.current=u},{checkForDefaultPrevented:!1}),onFocusOutside:K(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1})})})}),iI=m.forwardRef((e,t)=>{const r=As(bo,e.__scopePopover),n=m.useRef(!1),s=m.useRef(!1);return a.jsx(UN,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var i,l;(i=e.onCloseAutoFocus)==null||i.call(e,o),o.defaultPrevented||(n.current||(l=r.triggerRef.current)==null||l.focus(),o.preventDefault()),n.current=!1,s.current=!1},onInteractOutside:o=>{var c,u;(c=e.onInteractOutside)==null||c.call(e,o),o.defaultPrevented||(n.current=!0,o.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const i=o.target;((u=r.triggerRef.current)==null?void 0:u.contains(i))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&s.current&&o.preventDefault()}})}),UN=m.forwardRef((e,t)=>{const{__scopePopover:r,trapFocus:n,onOpenAutoFocus:s,onCloseAutoFocus:o,disableOutsidePointerEvents:i,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onInteractOutside:f,...d}=e,h=As(bo,r),p=pl(r);return Np(),a.jsx(td,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:s,onUnmountAutoFocus:o,children:a.jsx(So,{asChild:!0,disableOutsidePointerEvents:i,onInteractOutside:f,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onDismiss:()=>h.onOpenChange(!1),children:a.jsx(fp,{"data-state":zN(h.open),role:"dialog",id:h.contentId,...p,...d,ref:t,style:{...d.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),FN="PopoverClose",lI=m.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,s=As(FN,r);return a.jsx(ie.button,{type:"button",...n,ref:t,onClick:K(e.onClick,()=>s.onOpenChange(!1))})});lI.displayName=FN;var cI="PopoverArrow",uI=m.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,s=pl(r);return a.jsx(hp,{...s,...n,ref:t})});uI.displayName=cI;function zN(e){return e?"open":"closed"}var dI=AN,fI=IN,hI=LN,GN=$N;const mI=dI,pI=fI,BN=m.forwardRef(({className:e,align:t="center",sideOffset:r=4,...n},s)=>a.jsx(hI,{children:a.jsx(GN,{ref:s,align:t,sideOffset:r,className:te("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})}));BN.displayName=GN.displayName;const gI=({onGifSelect:e,disabled:t=!1,compact:r=!1})=>{const[n,s]=m.useState(!1),[o,i]=m.useState(""),[l,c]=m.useState([]),[u,f]=m.useState(!1),[d,h]=m.useState(null);Be(),m.useEffect(()=>{n&&l.length===0&&!o&&p()},[n]);const p=async()=>{{h("GIPHY API key not configured");return}},g=async()=>{{h("GIPHY API key not configured");return}},v=y=>{e(y.images.fixed_height.url),s(!1),i("")};return r?a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex gap-2",children:[a.jsx(ht,{placeholder:"Search GIFs...",value:o,onChange:y=>i(y.target.value),onKeyPress:y=>y.key==="Enter"&&g(),className:"flex-1"}),a.jsx(O,{onClick:g,size:"sm",disabled:u,children:a.jsx(bh,{className:"w-4 h-4"})})]}),a.jsx("div",{className:"grid grid-cols-2 gap-2 max-h-60 overflow-y-auto",children:u?a.jsx("div",{className:"col-span-2 flex items-center justify-center py-8",children:a.jsx(la,{text:"Loading GIFs..."})}):d?a.jsx("div",{className:"col-span-2 text-center py-8 text-destructive",children:d}):l.length>0?l.map(y=>{var x,w;return a.jsx("div",{className:"relative aspect-square rounded-lg overflow-hidden cursor-pointer hover:scale-105 transition-transform",onClick:()=>v(y),children:a.jsx("img",{src:((x=y.images.fixed_height)==null?void 0:x.url)||((w=y.images.preview_gif)==null?void 0:w.url),alt:y.title,className:"w-full h-full object-cover"})},y.id)}):a.jsx("div",{className:"col-span-2 text-center py-8 text-muted-foreground",children:"No GIFs found"})})]}):a.jsxs(mI,{open:n,onOpenChange:s,children:[a.jsx(pI,{asChild:!0,children:a.jsx(O,{variant:"ghost",size:"sm",disabled:t,className:"h-10 w-10 p-0 rounded-full hover-scale",children:a.jsx(y2,{className:"h-4 w-4"})})}),a.jsxs(BN,{className:"w-80 p-0",side:"top",children:[a.jsx("div",{className:"p-4 border-b",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx(bh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),a.jsx(ht,{placeholder:"Search GIFs...",value:o,onChange:y=>i(y.target.value),onKeyPress:y=>y.key==="Enter"&&g(),className:"pl-10"})]}),a.jsx(O,{onClick:g,size:"sm",disabled:u,children:"Search"})]})}),a.jsx(Gr,{className:"h-64",children:a.jsx("div",{className:"grid grid-cols-2 gap-2 p-4",children:u?a.jsx("div",{className:"col-span-2 flex items-center justify-center py-8",children:a.jsx(la,{text:"Loading GIFs..."})}):d?a.jsx("div",{className:"col-span-2 text-center py-8 text-destructive",children:d}):l.length>0?l.map(y=>a.jsx("button",{onClick:()=>v(y),className:"aspect-square rounded-md overflow-hidden hover:opacity-80 transition-opacity",children:a.jsx("img",{src:y.images.fixed_height.url,alt:y.title,className:"w-full h-full object-cover"})},y.id)):a.jsx("div",{className:"col-span-2 text-center py-8 text-muted-foreground",children:"No GIFs found. Try a different search term."})})})]})]})},vI=e=>a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.8,...e,children:[a.jsx("circle",{cx:"12",cy:"12",r:"9"}),a.jsx("path",{d:"M12 8v8M8 12h8"})]}),xI=e=>a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.8,...e,children:[a.jsx("rect",{x:"3",y:"9",width:"18",height:"8",rx:"4"}),a.jsx("path",{d:"M8 13h-3M6.5 11.5v3"}),a.jsx("circle",{cx:"16.5",cy:"12.5",r:"1"}),a.jsx("circle",{cx:"18.5",cy:"14.5",r:"1"})]}),ff=e=>a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.8,...e,children:a.jsx("path",{d:"M4 13a8 8 0 1 1 16 0v5a2 2 0 0 1-2 2h-1v-7h3M4 20h1a2 2 0 0 0 2-2v-5H4"})}),yI=({onSendMessage:e,onSendGif:t,onSendVoice:r,onToolSelect:n,disabled:s,loading:o,groupId:i,groupName:l})=>{const[c,u]=m.useState(""),[f,d]=m.useState(!1),[h,p]=m.useState(!1),[g,v]=m.useState(!1),{toast:y}=Be(),{joinVoiceRoom:x,leaveVoiceRoom:w,isConnected:b}=W1(),j=m.useRef(null),_=m.useRef(null);m.useEffect(()=>{j.current&&(j.current.style.height="0px",j.current.style.height=Math.min(j.current.scrollHeight,160)+"px")},[c]),m.useEffect(()=>{const C=P=>{_.current&&!_.current.contains(P.target)&&v(!1)};return g&&document.addEventListener("mousedown",C),()=>{document.removeEventListener("mousedown",C)}},[g]);const S=async()=>{if(c.trim()&&!f){const C=eI(c);if(!C.isValid){y({title:"Invalid Message",description:C.error||"Message contains invalid content",variant:"destructive"});return}d(!0),await e(C.sanitizedMessage,"text")&&u(""),d(!1)}},N=C=>{C.key==="Enter"&&!C.shiftKey&&(C.preventDefault(),S())},k=()=>{i&&l&&(b?w():v(!0))};return a.jsxs("div",{className:"w-full px-2 sm:px-3 py-2 bg-background border-t border-border",children:[a.jsxs("div",{className:"flex items-end gap-1 sm:gap-2 rounded-full bg-zinc-800/70 backdrop-blur px-2 sm:px-3 py-2 ring-1 ring-zinc-700 shadow-lg",children:[a.jsx("textarea",{ref:j,value:c,disabled:s||f,onChange:C=>u(C.target.value),onKeyDown:N,placeholder:"Message...",className:"flex-1 resize-none bg-transparent text-zinc-100 placeholder:text-zinc-400 outline-none leading-5 sm:leading-6 max-h-32 sm:max-h-40 min-h-[36px] sm:min-h-[40px] py-1.5 sm:py-2 text-sm sm:text-base","aria-label":"Message input"}),a.jsx("div",{className:"relative",children:a.jsx(tI,{onRecordingComplete:r,disabled:s||f})}),a.jsx("div",{className:"relative",children:a.jsx(gI,{onGifSelect:t,disabled:s||f})}),a.jsx("button",{type:"button",onClick:S,disabled:s||f||!c.trim(),className:"p-1.5 sm:p-2 rounded-full hover:bg-zinc-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed flex-shrink-0","aria-label":"Send message",children:f?a.jsx(la,{size:"sm"}):a.jsx("svg",{className:"h-4 w-4 sm:h-5 sm:w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})}),a.jsxs("div",{className:"relative",children:[a.jsx("button",{type:"button",onClick:()=>p(C=>!C),className:"p-1.5 sm:p-2 rounded-full hover:bg-zinc-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 flex-shrink-0","aria-expanded":h,"aria-haspopup":"menu","aria-label":"Open actions",children:a.jsx(vI,{className:"h-5 w-5 sm:h-7 sm:w-7"})}),h&&a.jsxs("div",{className:"absolute right-0 bottom-12 min-w-[220px] rounded-xl bg-zinc-900/95 backdrop-blur border border-zinc-700 shadow-xl p-1 z-50",children:[a.jsx(Xx,{icon:a.jsx(xI,{className:"h-5 w-5"}),label:"Start a Game",onClick:()=>{p(!1),n("game")}}),i&&l&&a.jsx(Xx,{icon:a.jsx(ff,{className:"h-5 w-5"}),label:b?"Leave Voice Room":"Start Voice Room",onClick:()=>{p(!1),k()}})]})]})]}),g&&a.jsx("div",{ref:_,className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:a.jsx("div",{className:"bg-zinc-900/95 backdrop-blur border border-zinc-700 rounded-xl shadow-xl p-6 min-w-[300px]",children:a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"text-lg font-medium text-zinc-100 text-center",children:"Join Voice Room"}),a.jsx("div",{className:"text-sm text-zinc-400 text-center mb-4",children:"Choose your microphone preference"}),a.jsxs("button",{onClick:async()=>{v(!1),await x(i,l,!0)},className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-zinc-800 text-zinc-100 focus:outline-none border border-zinc-700",children:[a.jsx(ff,{className:"h-5 w-5"}),a.jsxs("div",{className:"text-left",children:[a.jsx("div",{className:"font-medium",children:"With Microphone"}),a.jsx("div",{className:"text-xs text-zinc-400",children:"Speak and listen"})]})]}),a.jsxs("button",{onClick:async()=>{v(!1),await x(i,l,!1)},className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-zinc-800 text-zinc-100 focus:outline-none border border-zinc-700",children:[a.jsx(ff,{className:"h-5 w-5"}),a.jsxs("div",{className:"text-left",children:[a.jsx("div",{className:"font-medium",children:"Listen Only"}),a.jsx("div",{className:"text-xs text-zinc-400",children:"Hear others but can't speak"})]})]}),a.jsx("button",{onClick:()=>v(!1),className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-zinc-800 text-zinc-500 focus:outline-none",children:a.jsx("span",{className:"text-sm",children:"Cancel"})})]})})}),a.jsxs("div",{className:"px-2 pt-1 text-[11px] text-zinc-400 select-none",children:["Press ",a.jsx("kbd",{className:"px-1 py-0.5 rounded bg-zinc-700/60",children:"Enter"})," to send · ",a.jsx("kbd",{className:"px-1 py-0.5 rounded bg-zinc-700/60",children:"Shift"}),"+",a.jsx("kbd",{className:"px-1 py-0.5 rounded bg-zinc-700/60",children:"Enter"})," for a new line"]})]})};function Xx({icon:e,label:t,onClick:r}){return a.jsxs("button",{onClick:r,className:"w-full flex items-center gap-3 px-3 py-2.5 rounded-lg hover:bg-zinc-800 text-zinc-100 focus:outline-none",children:[a.jsx("span",{className:"shrink-0 text-zinc-200",children:e}),a.jsx("span",{className:"text-sm",children:t})]})}const wI=()=>{const{user:e}=ge(),{toast:t}=Be(),[r,n]=m.useState({canSwitch:!1,remainingSwitches:0,switchLimit:1,loading:!0});m.useEffect(()=>{e&&s()},[e]);const s=async()=>{if(e)try{n(g=>({...g,loading:!0}));const{data:c,error:u}=await E.rpc("get_remaining_switches",{p_user_id:e.id});if(u)throw u;const{data:f,error:d}=await E.rpc("get_user_switch_limit",{p_user_id:e.id});if(d)throw d;const{data:h,error:p}=await E.rpc("can_user_switch_groups",{p_user_id:e.id});if(p)throw p;n({canSwitch:h,remainingSwitches:c,switchLimit:f,loading:!1})}catch(c){console.error("Error fetching switch data:",c),n(u=>({...u,loading:!1}))}},o=async c=>{if(!e)return null;try{const{data:u,error:f}=await E.from("profiles").select("genres, personality").eq("user_id",e.id).single();if(f)throw f;const{data:d,error:h}=await E.from("groups").select(`
          id,
          name,
          vibe_label,
          current_members,
          max_members,
          group_personalities!inner(
            dominant_traits,
            favorite_activities
          )
        `).eq("lifecycle_stage","active").neq("id",c).lt("current_members","max_members");if(h)throw h;if(!d||d.length===0){const{data:g,error:v}=await E.from("groups").select("id, name, vibe_label").eq("lifecycle_stage","active").neq("id",c).lt("current_members","max_members").limit(1);if(v)throw v;return(g==null?void 0:g[0])||null}const p=d.map(g=>{let v=0;const y=g.group_personalities;if(u.genres&&(y!=null&&y.favorite_activities)){const x=u.genres.filter(w=>y.favorite_activities.includes(w)).length;v+=x*2}if(u.personality&&(y!=null&&y.dominant_traits)){const x=u.personality.filter(w=>y.dominant_traits.includes(w)).length;v+=x}return{...g,score:v}});return p.sort((g,v)=>v.score-g.score),p[0]||null}catch(u){return console.error("Error finding similar group:",u),null}},i=async(c,u)=>{if(!e)return!1;try{const{data:f,error:d}=await E.rpc("use_group_switch",{p_user_id:e.id});if(d)throw d;if(!f)return t({title:"Switch Limit Reached",description:"You've used all your group switches for this month.",variant:"destructive"}),!1;const{error:h}=await E.from("group_members").delete().eq("group_id",u).eq("user_id",e.id);if(h)throw h;const{error:p}=await E.from("group_members").insert({group_id:c,user_id:e.id});if(p)throw p;return await s(),t({title:"Successfully Switched Groups!",description:"Welcome to your new group chat!"}),!0}catch(f){return console.error("Error switching groups:",f),t({title:"Switch Failed",description:"Failed to switch groups. Please try again.",variant:"destructive"}),!1}};return{...r,performGroupSwitch:async c=>{if(!r.canSwitch)return t({title:"No Switches Available",description:"You've used all your group switches for this month.",variant:"destructive"}),{success:!1,newGroupId:null};const u=await o(c);if(!u)return t({title:"No Available Groups",description:"No suitable groups are currently available. Please try again later.",variant:"destructive"}),{success:!1,newGroupId:null};const f=await i(u.id,c);return{success:f,newGroupId:f?u.id:null,newGroupData:u}},refreshSwitchData:s}},bI=({isOpen:e,onClose:t,groupId:r,groupName:n,onSwitchSuccess:s})=>{const[o,i]=m.useState(!1),{canSwitch:l,remainingSwitches:c,switchLimit:u,performGroupSwitch:f}=wI(),d=async()=>{i(!0);try{const p=await f(r);p.success&&p.newGroupId&&(s(p.newGroupId,p.newGroupData),t())}catch(p){console.error("Error during group switch:",p)}finally{i(!1)}},h=u>1;return a.jsx(Ht,{open:e,onOpenChange:t,children:a.jsxs(Lt,{className:"max-w-md",children:[a.jsxs(nr,{children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(In,{className:"w-5 h-5 text-amber-500"}),a.jsx(qt,{children:"Leave Group Chat?"})]}),a.jsxs(cs,{className:"space-y-3 pt-2",children:[a.jsxs("p",{children:["Are you sure you want to leave ",a.jsxs("strong",{children:['"',n,'"']}),"? You'll be randomly matched to another group with similar preferences."]}),a.jsxs("div",{className:"p-3 rounded-lg bg-muted/50 space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm font-medium",children:"Group switches available:"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs(oe,{variant:c>0?"default":"destructive",children:[c," of ",u]}),h&&a.jsx(mt,{className:"w-4 h-4 text-yellow-500"})]})]}),a.jsx("p",{className:"text-xs text-muted-foreground",children:h?"Premium members get 5 group switches per month":"Regular members get 1 group switch per month"}),!l&&a.jsxs("div",{className:"flex items-center gap-2 text-xs text-amber-600",children:[a.jsx(In,{className:"w-3 h-3"}),a.jsx("span",{children:"No switches remaining this month"})]})]})]})]}),a.jsxs(kj,{className:"flex gap-2",children:[a.jsx(O,{variant:"outline",onClick:t,disabled:o,children:"Stay in Group"}),a.jsx(O,{variant:"destructive",onClick:d,disabled:!l||o,children:o?a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-4 h-4 animate-spin rounded-full border-2 border-background border-t-transparent"}),"Finding New Group..."]}):a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(st,{className:"w-4 h-4"}),"Switch Groups"]})})]})]})})},jI=({typingUsers:e})=>{const[t,r]=m.useState("");if(m.useEffect(()=>{if(e.length===0)return;const s=setInterval(()=>{r(o=>o==="..."?"":`${o}.`)},500);return()=>clearInterval(s)},[e.length]),e.length===0)return null;const n=()=>e.length===1?`${e[0].username} is typing${t}`:e.length===2?`${e[0].username} and ${e[1].username} are typing${t}`:`${e.length} people are typing${t}`;return a.jsxs("div",{className:"px-4 py-2 text-sm text-muted-foreground italic flex items-center gap-2",children:[a.jsxs("div",{className:"flex gap-1",children:[a.jsx("div",{className:"w-2 h-2 bg-primary rounded-full animate-bounce",style:{animationDelay:"0ms"}}),a.jsx("div",{className:"w-2 h-2 bg-primary rounded-full animate-bounce",style:{animationDelay:"150ms"}}),a.jsx("div",{className:"w-2 h-2 bg-primary rounded-full animate-bounce",style:{animationDelay:"300ms"}})]}),a.jsx("span",{children:n()})]})},_I=({pinnedMessages:e,onUnpin:t,className:r=""})=>{const n=o=>o.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),s=o=>{switch(o.messageType){case"text":return a.jsx("p",{className:"text-sm text-foreground line-clamp-2",children:o.content});case"gif":return a.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[a.jsx(oe,{variant:"secondary",children:"GIF"}),a.jsx("span",{children:"Shared a GIF"})]});case"voice":return a.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[a.jsx(Au,{className:"h-4 w-4"}),a.jsx("span",{children:"Voice message"})]});default:return null}};return e.length===0?null:a.jsxs(W,{className:`border-b rounded-none ${r}`,children:[a.jsx("div",{className:"p-3 border-b bg-muted/30",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(db,{className:"h-4 w-4 text-primary"}),a.jsx("span",{className:"font-medium text-sm",children:"Pinned Messages"}),a.jsx(oe,{variant:"secondary",className:"text-xs",children:e.length})]})}),a.jsx(Gr,{className:"max-h-32",children:a.jsx("div",{className:"p-2 space-y-2",children:e.map(o=>a.jsxs("div",{className:"flex items-start gap-2 p-2 rounded-lg bg-background hover:bg-muted/50 transition-colors",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:o.username}),a.jsx("span",{className:"text-xs text-muted-foreground",children:n(o.pinnedAt)})]}),s(o)]}),a.jsx(O,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 shrink-0",onClick:()=>t(o.id),children:a.jsx(cn,{className:"h-3 w-3"})})]},o.id))})})]})},NI=()=>{const[e,t]=m.useState(new Map),r=async o=>{if(e.has(o))return e.get(o);try{const{data:i,error:l}=await E.from("profiles").select("mood_emoji, show_mood_emoji").eq("user_id",o).single();if(l)throw l;const c={userId:o,moodEmoji:i.mood_emoji||null,showMoodEmoji:i.show_mood_emoji||!1};return t(u=>new Map(u).set(o,c)),c}catch(i){console.error("Error fetching user mood info:",i);const l={userId:o,moodEmoji:null,showMoodEmoji:!1};return t(c=>new Map(c).set(o,l)),l}};return{getUserMoodInfo:r,getUserDisplayName:async(o,i)=>{const l=await r(i);return l.showMoodEmoji&&l.moodEmoji?`${o} ${l.moodEmoji}`:o},clearCache:()=>{t(new Map)}}},VN=e=>{const{user:t}=ge(),[r,n]=m.useState(new Map),[s,o]=m.useState(!1),i=m.useRef(null),l=m.useRef(!0),c=m.useCallback(async g=>{if(t!=null&&t.id)try{await E.from("profiles").update({last_seen_at:new Date().toISOString(),is_online:g}).eq("user_id",t.id)}catch(v){console.error("Error updating online status:",v)}},[t==null?void 0:t.id]),u=m.useCallback(async()=>{o(!1),await c(!1)},[c]),f=m.useCallback(async()=>{t!=null&&t.id&&(o(!0),await c(!0))},[c,t==null?void 0:t.id]),d=m.useCallback(async()=>{if(!(!e||!(t!=null&&t.id)||!l.current))try{const{data:g}=await E.from("group_members").select(`
          user_id,
          profiles(
            username,
            last_seen_at,
            is_online,
            show_online_status
          )
        `).eq("group_id",e);if(g){const v=new Map;g.forEach(y=>{if(y.profiles){const x=y.profiles,w=x.is_online&&x.show_online_status;v.set(y.user_id,{user_id:y.user_id,username:x.username,last_seen_at:x.last_seen_at,isOnline:w,showOnlineStatus:x.show_online_status}),y.user_id===t.id&&o(w)}}),n(v)}}catch(g){console.error("Error fetching online users:",g)}},[e,t==null?void 0:t.id]),h=m.useCallback(g=>{const v=r.get(g);return v?{isOnline:v.isOnline,lastSeen:new Date(v.last_seen_at),showOnlineStatus:v.showOnlineStatus}:{isOnline:!1,lastSeen:new Date,showOnlineStatus:!1}},[r]),p=m.useCallback(()=>{let g=0;return r.forEach(v=>{v.isOnline&&g++}),g},[r]);return m.useEffect(()=>(e&&(t!=null&&t.id)&&(f(),d(),i.current=setInterval(d,2*60*1e3)),()=>{i.current&&clearInterval(i.current)}),[e,t==null?void 0:t.id]),m.useEffect(()=>{t!=null&&t.id||(o(!1),n(new Map))},[t==null?void 0:t.id]),m.useEffect(()=>()=>{l.current=!1,i.current&&clearInterval(i.current)},[]),{isOnline:s,onlineUsers:r,getOnlineCount:p,getUserOnlineStatus:h,setOnline:f,setOffline:u}},og=m.forwardRef(({className:e,...t},r)=>a.jsx("textarea",{className:te("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...t}));og.displayName="Textarea";const SI=()=>{const{user:e}=ge(),[t,r]=m.useState(!1);return{loading:t,moderateContent:async(f,d,h)=>{if(!e)return{flagged:!1};try{const{data:p,error:g}=await E.functions.invoke("content-moderation",{body:{content:f,messageId:d,userId:e.id,chatType:h}});return g?(console.error("Moderation error:",g),{flagged:!1}):p}catch(p){return console.error("Moderation request failed:",p),{flagged:!1}}},blockUser:async f=>{if(!e)return!1;r(!0);try{const{error:d}=await E.from("user_moderation_actions").insert({user_id:e.id,target_user_id:f,action_type:"block"});return d?(console.error("Error blocking user:",d),!1):!0}finally{r(!1)}},muteUser:async f=>{if(!e)return!1;r(!0);try{const{error:d}=await E.from("user_moderation_actions").insert({user_id:e.id,target_user_id:f,action_type:"mute"});return d?(console.error("Error muting user:",d),!1):!0}finally{r(!1)}},unblockUser:async f=>{if(!e)return!1;r(!0);try{const{error:d}=await E.from("user_moderation_actions").delete().eq("user_id",e.id).eq("target_user_id",f).eq("action_type","block");return d?(console.error("Error unblocking user:",d),!1):!0}finally{r(!1)}},unmuteUser:async f=>{if(!e)return!1;r(!0);try{const{error:d}=await E.from("user_moderation_actions").delete().eq("user_id",e.id).eq("target_user_id",f).eq("action_type","mute");return d?(console.error("Error unmuting user:",d),!1):!0}finally{r(!1)}},reportMessage:async f=>{if(!e)return!1;r(!0);try{const{error:d}=await E.from("user_reports").insert({reporter_id:e.id,reported_message_id:f.messageId,chat_type:f.chatType,report_reason:f.reason,additional_context:f.additionalContext});return d?(console.error("Error reporting message:",d),!1):!0}finally{r(!1)}},checkUserStatus:async f=>{try{const{data:d}=await E.rpc("is_user_shadow_muted",{user_id_param:f}),{data:h}=await E.rpc("is_user_locked_out",{user_id_param:f});return{isShadowMuted:d,isLockedOut:h}}catch(d){return console.error("Error checking user status:",d),{isShadowMuted:!1,isLockedOut:!1}}}}},kI=["Hate speech or harassment","Bullying or intimidation","Threats of violence","Spam or unwanted content","Inappropriate content","Other"],CI=({messageId:e,authorId:t,chatType:r})=>{const{user:n}=ge(),{blockUser:s,muteUser:o,reportMessage:i,loading:l}=SI(),[c,u]=m.useState(!1),[f,d]=m.useState(""),[h,p]=m.useState("");if((n==null?void 0:n.id)===t)return null;const g=async()=>{await s(t)?Ur.success("User blocked successfully"):Ur.error("Failed to block user")},v=async()=>{await o(t)?Ur.success("User muted successfully"):Ur.error("Failed to mute user")},y=()=>{u(!0)},x=async()=>{if(!f){Ur.error("Please select a reason for reporting");return}await i({messageId:e,chatType:r,reason:f,additionalContext:h||void 0})?(Ur.success("Message reported successfully"),u(!1),d(""),p("")):Ur.error("Failed to report message")};return a.jsxs(a.Fragment,{children:[a.jsxs(rg,{children:[a.jsx(ng,{asChild:!0,children:a.jsx(O,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 text-muted-foreground hover:text-foreground",children:a.jsx(ib,{size:14})})}),a.jsxs(fd,{align:"end",className:"w-48",children:[a.jsxs(xr,{onClick:y,className:"text-yellow-600",children:[a.jsx(lb,{size:16,className:"mr-2"}),"Report Message"]}),a.jsx(RN,{}),a.jsxs(xr,{onClick:v,className:"text-orange-600",children:[a.jsx(Wc,{size:16,className:"mr-2"}),"Mute User"]}),a.jsxs(xr,{onClick:g,className:"text-red-600",children:[a.jsx(o2,{size:16,className:"mr-2"}),"Block User"]})]})]}),a.jsx(Ht,{open:c,onOpenChange:u,children:a.jsxs(Lt,{className:"sm:max-w-md",children:[a.jsxs(nr,{children:[a.jsxs(qt,{className:"flex items-center gap-2",children:[a.jsx(In,{className:"text-yellow-500",size:20}),"Report Message"]}),a.jsx(cs,{children:"Help us understand what's wrong with this message."})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Why are you reporting this message?"}),a.jsx("div",{className:"space-y-2",children:kI.map(w=>a.jsxs("label",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"radio",name:"report-reason",value:w,checked:f===w,onChange:b=>d(b.target.value),className:"text-primary"}),a.jsx("span",{className:"text-sm",children:w})]},w))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Additional context (optional)"}),a.jsx(og,{value:h,onChange:w=>p(w.target.value),placeholder:"Provide any additional details...",className:"min-h-20"})]}),a.jsxs("div",{className:"flex gap-2 justify-end",children:[a.jsx(O,{variant:"outline",onClick:()=>u(!1),children:"Cancel"}),a.jsx(O,{onClick:x,disabled:l||!f,className:"bg-red-600 hover:bg-red-700",children:l?"Reporting...":"Submit Report"})]})]})]})})]})},EI=({reason:e="Flagged for review",confidence:t})=>a.jsxs(dR,{children:[a.jsx(fR,{asChild:!0,children:a.jsx("div",{className:"flex items-center",children:a.jsx(lb,{size:14,className:"text-gray-400 hover:text-gray-600 transition-colors"})})}),a.jsx(t1,{side:"top",className:"max-w-xs",children:a.jsxs("div",{className:"text-sm",children:[a.jsx("p",{className:"font-medium",children:"Content flagged"}),a.jsx("p",{className:"text-muted-foreground",children:e}),t&&a.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Confidence: ",Math.round(t*100),"%"]})]})})]}),PI=["👍","❤️","😂","😮","😢","😡"],TI=({message:e,chatType:t="group",onReaction:r,onReact:n,onPin:s,onHideMessage:o,currentUserId:i,groupId:l})=>{const c=r||n,{user:u}=ge(),{getUserDisplayName:f}=NI(),{getUserOnlineStatus:d}=VN(l||""),[h,p]=m.useState(!1),[g,v]=m.useState(!1),[y,x]=m.useState(null),[w,b]=m.useState(e.username),[j,_]=m.useState(0),[S,N]=m.useState(!1),k=(u==null?void 0:u.id)===e.userId,C=d(e.userId);m.useEffect(()=>{const R=async()=>{try{const{data:I,error:F}=await E.from("flagged_messages").select("id, flag_reason, confidence_score").eq("message_id",e.id).eq("chat_type",t).maybeSingle();if(F){console.error("Error checking flag status:",F);return}I&&x({id:I.id,flag_reason:I.flag_reason,confidence_score:I.confidence_score})}catch(I){console.error("Error checking flag status:",I)}},D=async()=>{if(e.userId){const I=await f(e.username,e.userId);b(I)}},B=async()=>{try{const{data:I,error:F}=await E.from("user_engagement").select("achievement_points").eq("user_id",e.userId).maybeSingle();I&&!F&&_(I.achievement_points||0)}catch{_(0)}};R(),D(),B()},[e.id,e.username,e.userId,t,f]);const P=R=>R.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),[T,M]=m.useState(null),G=()=>{if(e.voiceAudioUrl)if(h&&T)T.pause(),p(!1);else{let R=T;R||(R=new Audio(e.voiceAudioUrl),M(R),R.onended=()=>{p(!1),M(null)},R.onerror=()=>{p(!1),M(null)}),R.play().then(()=>{p(!0)}).catch(()=>{p(!1),M(null)})}},$=()=>{s&&s(e.id,e.content||"",e.username,e.messageType,e.gifUrl,e.voiceAudioUrl)},Q=()=>{N(!0),o&&o(e.id)},H=R=>{if(!i||!R)return a.jsx("span",{children:R});const D=/@(\w+)/g,B=[];let I=0,F;for(;(F=D.exec(R))!==null;)F.index>I&&B.push(R.substring(I,F.index)),B.push(a.jsx("span",{className:"bg-primary/20 text-primary font-medium px-1 rounded",children:F[0]},F.index)),I=F.index+F[0].length;return I<R.length&&B.push(R.substring(I)),a.jsx(a.Fragment,{children:B})},Y=()=>{switch(e.messageType){case"text":return a.jsx("div",{className:"text-sm leading-relaxed break-words",children:H(e.content||"")});case"gif":return a.jsx("div",{className:"rounded-lg overflow-hidden max-w-xs",children:a.jsx("img",{src:e.gifUrl,alt:"GIF",className:"w-full h-auto",loading:"lazy"})});case"voice":return a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center gap-2 p-2 rounded-lg bg-primary/10",children:[a.jsx(O,{onClick:G,size:"sm",variant:"ghost",className:"h-8 w-8 p-0 rounded-full",children:h?a.jsx(cb,{className:"h-4 w-4"}):a.jsx(fb,{className:"h-4 w-4"})}),a.jsx(Au,{className:"h-4 w-4 text-muted-foreground"}),a.jsx("span",{className:"text-xs text-muted-foreground",children:"Voice message"})]}),e.voiceTranscription&&a.jsxs("p",{className:"text-sm text-muted-foreground italic",children:['"',e.voiceTranscription,'"']})]});default:return null}};return S?null:a.jsx("div",{className:`flex ${k?"justify-end":"justify-start"} mb-4 group`,children:a.jsxs("div",{className:`max-w-[70%] ${k?"ml-auto":"mr-auto"} relative`,children:[a.jsxs("div",{className:`flex items-center gap-2 mb-1 ${k?"justify-end":"justify-start"}`,children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:w}),!k&&C&&a.jsx("div",{className:"flex items-center gap-1",children:C.isOnline?a.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse",title:"Online"}):a.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full",title:`Last seen ${C.lastSeen.toLocaleTimeString()}`})})]}),j>0&&a.jsxs(oe,{variant:"secondary",className:"text-xs px-1 py-0 h-4",children:[j," ⭐"]}),y&&a.jsx(EI,{reason:y.flag_reason,confidence:y.confidence_score}),a.jsx("span",{className:"text-xs text-muted-foreground",children:P(e.timestamp)}),!k&&a.jsx(CI,{messageId:e.id,authorId:e.userId,chatType:t}),a.jsxs(rg,{children:[a.jsx(ng,{asChild:!0,children:a.jsx(O,{variant:"ghost",size:"sm",className:"h-4 w-4 p-0",children:a.jsx(ib,{className:"h-3 w-3"})})}),a.jsxs(fd,{children:[s&&a.jsxs(xr,{onClick:$,children:[a.jsx(db,{className:"h-4 w-4 mr-2"}),"Pin Message"]}),a.jsxs(xr,{onClick:Q,children:[a.jsx(Bc,{className:"h-4 w-4 mr-2"}),"Hide Message"]})]})]})]}),a.jsx(W,{className:`p-3 ${k?"bg-primary text-primary-foreground ml-2":"bg-card mr-2"} rounded-2xl ${k?"rounded-br-md":"rounded-bl-md"} shadow-sm cursor-pointer transition-all hover:shadow-md`,onClick:()=>v(!g),children:Y()}),e.reactions&&e.reactions.length>0&&a.jsx("div",{className:`flex gap-1 mt-1 ${k?"justify-end mr-2":"justify-start ml-2"}`,children:e.reactions.map(R=>a.jsxs(O,{variant:"ghost",size:"sm",className:"h-6 px-2 text-xs rounded-full bg-secondary/50 hover:bg-secondary",onClick:()=>c&&c(e.id,R.emoji),children:[R.emoji," ",R.count]},R.emoji))}),g&&a.jsx("div",{className:`flex gap-1 mt-2 p-2 bg-popover border rounded-lg shadow-md ${k?"mr-2":"ml-2"}`,children:PI.map(R=>a.jsx(O,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 text-lg hover:bg-secondary",onClick:()=>{c&&c(e.id,R),v(!1)},children:R},R))})]})})};var ig="Avatar",[RI,C$]=kr(ig),[MI,HN]=RI(ig),WN=m.forwardRef((e,t)=>{const{__scopeAvatar:r,...n}=e,[s,o]=m.useState("idle");return a.jsx(MI,{scope:r,imageLoadingStatus:s,onImageLoadingStatusChange:o,children:a.jsx(ie.span,{...n,ref:t})})});WN.displayName=ig;var qN="AvatarImage",KN=m.forwardRef((e,t)=>{const{__scopeAvatar:r,src:n,onLoadingStatusChange:s=()=>{},...o}=e,i=HN(qN,r),l=AI(n,o.referrerPolicy),c=Ke(u=>{s(u),i.onImageLoadingStatusChange(u)});return Wr(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?a.jsx(ie.img,{...o,ref:t,src:n}):null});KN.displayName=qN;var YN="AvatarFallback",QN=m.forwardRef((e,t)=>{const{__scopeAvatar:r,delayMs:n,...s}=e,o=HN(YN,r),[i,l]=m.useState(n===void 0);return m.useEffect(()=>{if(n!==void 0){const c=window.setTimeout(()=>l(!0),n);return()=>window.clearTimeout(c)}},[n]),i&&o.imageLoadingStatus!=="loaded"?a.jsx(ie.span,{...s,ref:t}):null});QN.displayName=YN;function AI(e,t){const[r,n]=m.useState("idle");return Wr(()=>{if(!e){n("error");return}let s=!0;const o=new window.Image,i=l=>()=>{s&&n(l)};return n("loading"),o.onload=i("loaded"),o.onerror=i("error"),o.src=e,t&&(o.referrerPolicy=t),()=>{s=!1}},[e,t]),r}var XN=WN,JN=KN,ZN=QN;const eS=m.forwardRef(({className:e,...t},r)=>a.jsx(XN,{ref:r,className:te("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));eS.displayName=XN.displayName;const DI=m.forwardRef(({className:e,...t},r)=>a.jsx(JN,{ref:r,className:te("aspect-square h-full w-full",e),...t}));DI.displayName=JN.displayName;const tS=m.forwardRef(({className:e,...t},r)=>a.jsx(ZN,{ref:r,className:te("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));tS.displayName=ZN.displayName;const OI=({groupName:e})=>{const{isConnected:t,participants:r,participantCount:n,isMuted:s,isDeafened:o,isSpeaking:i,handRaised:l,isCollapsed:c,leaveVoiceRoom:u,toggleMute:f,toggleDeafen:d,toggleHandRaise:h,toggleCollapse:p}=W1(),[g,v]=m.useState(!1);if(!t)return null;const y=j=>j.split(" ").map(_=>_.charAt(0)).join("").toUpperCase().slice(0,2),x=j=>j.isMuted?a.jsx(Iv,{className:"h-3 w-3 text-red-500"}):j.isDeafened?a.jsx(Wc,{className:"h-3 w-3 text-orange-500"}):j.isSpeaking?a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(mc,{className:"h-3 w-3 text-green-500"}),a.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"})]}):a.jsx(mc,{className:"h-3 w-3 text-gray-400"}),w=j=>j.handRaised?a.jsx(Ov,{className:"h-3 w-3 text-yellow-500"}):x(j),b=j=>{const _=j.hasMicrophone!==!1;return a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("span",{className:"text-sm font-medium",children:j.name}),!_&&a.jsx("span",{className:"text-xs text-gray-500 bg-gray-100 dark:bg-gray-700 px-1 rounded",children:"(listening)"})]})};return a.jsxs(W,{className:te("fixed z-40 transition-all duration-300 shadow-xl border-2","bottom-20 right-6","lg:top-20 lg:right-6 lg:bottom-auto",c?"w-80 h-16":"w-96 h-[500px] lg:w-[400px] lg:h-[600px]",t?"border-green-500":"border-gray-300"),children:[a.jsx(ue,{className:"pb-2 cursor-pointer",onClick:p,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs(de,{className:"text-sm flex items-center gap-2",children:[a.jsx(Au,{className:"h-4 w-4 text-green-500"}),"Voice Room",a.jsx(oe,{variant:"secondary",className:"text-xs",children:e})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs(oe,{variant:"outline",className:"text-xs",children:[a.jsx(st,{className:"h-3 w-3 mr-1"}),n]}),c?a.jsx(u2,{className:"h-4 w-4"}):a.jsx(l2,{className:"h-4 w-4"})]})]})}),!c&&a.jsxs(J,{className:"space-y-4",children:[a.jsxs("div",{className:"flex gap-2 mb-3",children:[a.jsxs(O,{variant:s?"destructive":"default",size:"sm",onClick:f,className:"flex-1",children:[s?a.jsx(Iv,{className:"h-4 w-4 mr-2"}):a.jsx(mc,{className:"h-4 w-4 mr-2"}),s?"Unmute":"Mute"]}),a.jsxs(O,{variant:o?"destructive":"outline",size:"sm",onClick:d,className:"flex-1",children:[o?a.jsx(Wc,{className:"h-4 w-4 mr-2"}):a.jsx(x2,{className:"h-4 w-4 mr-2"}),o?"Undeafen":"Deafen"]})]}),a.jsxs("div",{className:"flex gap-2 mb-4",children:[a.jsxs(O,{variant:l?"default":"outline",size:"sm",onClick:h,className:te("flex-1",l&&"bg-yellow-500 hover:bg-yellow-600 text-white"),children:[a.jsx(Ov,{className:"h-4 w-4 mr-2"}),l?"Lower Hand":"Raise Hand"]}),a.jsxs(O,{variant:"outline",size:"sm",onClick:()=>v(!g),className:"flex-1",children:[a.jsx(tp,{className:"h-4 w-4 mr-2"}),"Settings"]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("h4",{className:"text-sm font-medium flex items-center gap-2",children:[a.jsx(st,{className:"h-4 w-4"}),"Participants (",n,")"]}),a.jsxs("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:[r.map(j=>a.jsxs("div",{className:te("flex items-center gap-2 p-2 rounded-lg transition-all duration-200",j.isSpeaking?"bg-green-50 border border-green-200":"bg-gray-50",j.handRaised&&"bg-yellow-50 border border-yellow-200"),children:[a.jsxs("div",{className:"relative",children:[a.jsx(eS,{className:"h-8 w-8",children:a.jsx(tS,{className:"text-xs",children:y(j.name)})}),j.isSpeaking&&a.jsx("div",{className:"absolute -bottom-1 -right-1 w-3 h-3 bg-green-500 rounded-full animate-pulse"})]}),a.jsx("div",{className:"flex-1 truncate",children:b(j)}),w(j)]},j.userId)),r.length===0&&a.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"No other participants yet"})]})]}),g&&a.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-lg space-y-3",children:[a.jsx("h5",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:"Voice Settings"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-xs text-gray-700 dark:text-gray-300",children:"Microphone Access"}),a.jsx(oe,{variant:s?"destructive":"default",className:"text-xs",children:s?"Muted":"Active"})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-xs text-gray-700 dark:text-gray-300",children:"Audio Output"}),a.jsx(oe,{variant:o?"destructive":"default",className:"text-xs",children:o?"Deafened":"Active"})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-xs text-gray-700 dark:text-gray-300",children:"Hand Raised"}),a.jsx(oe,{variant:l?"default":"outline",className:"text-xs",children:l?"Yes":"No"})]}),a.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 text-center pt-2 border-t border-gray-200 dark:border-gray-600",children:"Use the controls above to adjust your voice settings"})]})]}),a.jsxs(O,{variant:"destructive",size:"sm",onClick:u,className:"w-full",children:[a.jsx(j2,{className:"h-4 w-4 mr-2"}),"Leave Voice Room"]})]})]})};var II="Label",rS=m.forwardRef((e,t)=>a.jsx(ie.label,{...e,ref:t,onMouseDown:r=>{var s;r.target.closest("button, input, select, textarea")||((s=e.onMouseDown)==null||s.call(e,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));rS.displayName=II;var nS=rS;const LI=Pu("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),kn=m.forwardRef(({className:e,...t},r)=>a.jsx(nS,{ref:r,className:te(LI(),e),...t}));kn.displayName=nS.displayName;function $I(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}const sS=A.createContext({drawerRef:{current:null},overlayRef:{current:null},onPress:()=>{},onRelease:()=>{},onDrag:()=>{},onNestedDrag:()=>{},onNestedOpenChange:()=>{},onNestedRelease:()=>{},openProp:void 0,dismissible:!1,isOpen:!1,isDragging:!1,keyboardIsOpen:{current:!1},snapPointsOffset:null,snapPoints:null,handleOnly:!1,modal:!1,shouldFade:!1,activeSnapPoint:null,onOpenChange:()=>{},setActiveSnapPoint:()=>{},closeDrawer:()=>{},direction:"bottom",shouldScaleBackground:!1,setBackgroundColorOnScale:!0,noBodyStyles:!1,container:null,autoFocus:!1}),Lo=()=>{const e=A.useContext(sS);if(!e)throw new Error("useDrawerContext must be used within a Drawer.Root");return e};$I(`[data-vaul-drawer]{touch-action:none;will-change:transform;transition:transform .5s cubic-bezier(.32, .72, 0, 1);animation-duration:.5s;animation-timing-function:cubic-bezier(0.32,0.72,0,1)}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=bottom][data-state=open]{animation-name:slideFromBottom}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=bottom][data-state=closed]{animation-name:slideToBottom}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=top][data-state=open]{animation-name:slideFromTop}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=top][data-state=closed]{animation-name:slideToTop}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=left][data-state=open]{animation-name:slideFromLeft}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=left][data-state=closed]{animation-name:slideToLeft}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=right][data-state=open]{animation-name:slideFromRight}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=right][data-state=closed]{animation-name:slideToRight}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=bottom]{transform:translate3d(0,100%,0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=top]{transform:translate3d(0,-100%,0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=left]{transform:translate3d(-100%,0,0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=right]{transform:translate3d(100%,0,0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=top]{transform:translate3d(0,var(--snap-point-height,0),0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=bottom]{transform:translate3d(0,var(--snap-point-height,0),0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=left]{transform:translate3d(var(--snap-point-height,0),0,0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=right]{transform:translate3d(var(--snap-point-height,0),0,0)}[data-vaul-overlay][data-vaul-snap-points=false]{animation-duration:.5s;animation-timing-function:cubic-bezier(0.32,0.72,0,1)}[data-vaul-overlay][data-vaul-snap-points=false][data-state=open]{animation-name:fadeIn}[data-vaul-overlay][data-state=closed]{animation-name:fadeOut}[data-vaul-overlay][data-vaul-snap-points=true]{opacity:0;transition:opacity .5s cubic-bezier(.32, .72, 0, 1)}[data-vaul-overlay][data-vaul-snap-points=true]{opacity:1}[data-vaul-drawer]:not([data-vaul-custom-container=true])::after{content:'';position:absolute;background:inherit;background-color:inherit}[data-vaul-drawer][data-vaul-drawer-direction=top]::after{top:initial;bottom:100%;left:0;right:0;height:200%}[data-vaul-drawer][data-vaul-drawer-direction=bottom]::after{top:100%;bottom:initial;left:0;right:0;height:200%}[data-vaul-drawer][data-vaul-drawer-direction=left]::after{left:initial;right:100%;top:0;bottom:0;width:200%}[data-vaul-drawer][data-vaul-drawer-direction=right]::after{left:100%;right:initial;top:0;bottom:0;width:200%}[data-vaul-overlay][data-vaul-snap-points=true]:not([data-vaul-snap-points-overlay=true]):not(
[data-state=closed]
){opacity:0}[data-vaul-overlay][data-vaul-snap-points-overlay=true]{opacity:1}[data-vaul-handle]{display:block;position:relative;opacity:.7;background:#e2e2e4;margin-left:auto;margin-right:auto;height:5px;width:32px;border-radius:1rem;touch-action:pan-y}[data-vaul-handle]:active,[data-vaul-handle]:hover{opacity:1}[data-vaul-handle-hitarea]{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);width:max(100%,2.75rem);height:max(100%,2.75rem);touch-action:inherit}@media (hover:hover) and (pointer:fine){[data-vaul-drawer]{user-select:none}}@media (pointer:fine){[data-vaul-handle-hitarea]:{width:100%;height:100%}}@keyframes fadeIn{from{opacity:0}to{opacity:1}}@keyframes fadeOut{to{opacity:0}}@keyframes slideFromBottom{from{transform:translate3d(0,100%,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToBottom{to{transform:translate3d(0,100%,0)}}@keyframes slideFromTop{from{transform:translate3d(0,-100%,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToTop{to{transform:translate3d(0,-100%,0)}}@keyframes slideFromLeft{from{transform:translate3d(-100%,0,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToLeft{to{transform:translate3d(-100%,0,0)}}@keyframes slideFromRight{from{transform:translate3d(100%,0,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToRight{to{transform:translate3d(100%,0,0)}}`);const UI=24,FI=typeof window<"u"?m.useLayoutEffect:m.useEffect;function Jx(...e){return(...t)=>{for(let r of e)typeof r=="function"&&r(...t)}}function zI(){return lg(/^Mac/)}function GI(){return lg(/^iPhone/)}function Zx(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}function BI(){return lg(/^iPad/)||zI()&&navigator.maxTouchPoints>1}function aS(){return GI()||BI()}function lg(e){return typeof window<"u"&&window.navigator!=null?e.test(window.navigator.platform):void 0}const hf=typeof document<"u"&&window.visualViewport;function ey(e){let t=window.getComputedStyle(e);return/(auto|scroll)/.test(t.overflow+t.overflowX+t.overflowY)}function oS(e){for(ey(e)&&(e=e.parentElement);e&&!ey(e);)e=e.parentElement;return e||document.scrollingElement||document.documentElement}const VI=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);let Xl=0,mf;function HI(e={}){let{isDisabled:t}=e;FI(()=>{if(!t)return Xl++,Xl===1&&aS()&&(mf=WI()),()=>{Xl--,Xl===0&&(mf==null||mf())}},[t])}function WI(){let e,t=0,r=d=>{e=oS(d.target),!(e===document.documentElement&&e===document.body)&&(t=d.changedTouches[0].pageY)},n=d=>{if(!e||e===document.documentElement||e===document.body){d.preventDefault();return}let h=d.changedTouches[0].pageY,p=e.scrollTop,g=e.scrollHeight-e.clientHeight;g!==0&&((p<=0&&h>t||p>=g&&h<t)&&d.preventDefault(),t=h)},s=d=>{let h=d.target;Zh(h)&&h!==document.activeElement&&(d.preventDefault(),h.style.transform="translateY(-2000px)",h.focus(),requestAnimationFrame(()=>{h.style.transform=""}))},o=d=>{let h=d.target;Zh(h)&&(h.style.transform="translateY(-2000px)",requestAnimationFrame(()=>{h.style.transform="",hf&&(hf.height<window.innerHeight?requestAnimationFrame(()=>{ty(h)}):hf.addEventListener("resize",()=>ty(h),{once:!0}))}))},i=()=>{window.scrollTo(0,0)},l=window.pageXOffset,c=window.pageYOffset,u=Jx(qI(document.documentElement,"paddingRight",`${window.innerWidth-document.documentElement.clientWidth}px`));window.scrollTo(0,0);let f=Jx(Jo(document,"touchstart",r,{passive:!1,capture:!0}),Jo(document,"touchmove",n,{passive:!1,capture:!0}),Jo(document,"touchend",s,{passive:!1,capture:!0}),Jo(document,"focus",o,!0),Jo(window,"scroll",i));return()=>{u(),f(),window.scrollTo(l,c)}}function qI(e,t,r){let n=e.style[t];return e.style[t]=r,()=>{e.style[t]=n}}function Jo(e,t,r,n){return e.addEventListener(t,r,n),()=>{e.removeEventListener(t,r,n)}}function ty(e){let t=document.scrollingElement||document.documentElement;for(;e&&e!==t;){let r=oS(e);if(r!==document.documentElement&&r!==document.body&&r!==e){let n=r.getBoundingClientRect().top,s=e.getBoundingClientRect().top,o=e.getBoundingClientRect().bottom;const i=r.getBoundingClientRect().bottom+UI;o>i&&(r.scrollTop+=s-n)}e=r.parentElement}}function Zh(e){return e instanceof HTMLInputElement&&!VI.has(e.type)||e instanceof HTMLTextAreaElement||e instanceof HTMLElement&&e.isContentEditable}function KI(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function YI(...e){return t=>e.forEach(r=>KI(r,t))}function iS(...e){return m.useCallback(YI(...e),e)}const lS=new WeakMap;function ot(e,t,r=!1){if(!e||!(e instanceof HTMLElement))return;let n={};Object.entries(t).forEach(([s,o])=>{if(s.startsWith("--")){e.style.setProperty(s,o);return}n[s]=e.style[s],e.style[s]=o}),!r&&lS.set(e,n)}function QI(e,t){if(!e||!(e instanceof HTMLElement))return;let r=lS.get(e);r&&(e.style[t]=r[t])}const it=e=>{switch(e){case"top":case"bottom":return!0;case"left":case"right":return!1;default:return e}};function Jl(e,t){if(!e)return null;const r=window.getComputedStyle(e),n=r.transform||r.webkitTransform||r.mozTransform;let s=n.match(/^matrix3d\((.+)\)$/);return s?parseFloat(s[1].split(", ")[it(t)?13:12]):(s=n.match(/^matrix\((.+)\)$/),s?parseFloat(s[1].split(", ")[it(t)?5:4]):null)}function XI(e){return 8*(Math.log(e+1)-2)}function pf(e,t){if(!e)return()=>{};const r=e.style.cssText;return Object.assign(e.style,t),()=>{e.style.cssText=r}}function JI(...e){return(...t)=>{for(const r of e)typeof r=="function"&&r(...t)}}const We={DURATION:.5,EASE:[.32,.72,0,1]},cS=.4,ZI=.25,eL=100,uS=8,$s=16,em=26,gf="vaul-dragging";function dS(e){const t=A.useRef(e);return A.useEffect(()=>{t.current=e}),A.useMemo(()=>(...r)=>t.current==null?void 0:t.current.call(t,...r),[])}function tL({defaultProp:e,onChange:t}){const r=A.useState(e),[n]=r,s=A.useRef(n),o=dS(t);return A.useEffect(()=>{s.current!==n&&(o(n),s.current=n)},[n,s,o]),r}function fS({prop:e,defaultProp:t,onChange:r=()=>{}}){const[n,s]=tL({defaultProp:t,onChange:r}),o=e!==void 0,i=o?e:n,l=dS(r),c=A.useCallback(u=>{if(o){const d=typeof u=="function"?u(e):u;d!==e&&l(d)}else s(u)},[o,e,s,l]);return[i,c]}function rL({activeSnapPointProp:e,setActiveSnapPointProp:t,snapPoints:r,drawerRef:n,overlayRef:s,fadeFromIndex:o,onSnapPointChange:i,direction:l="bottom",container:c,snapToSequentialPoint:u}){const[f,d]=fS({prop:e,defaultProp:r==null?void 0:r[0],onChange:t}),[h,p]=A.useState(typeof window<"u"?{innerWidth:window.innerWidth,innerHeight:window.innerHeight}:void 0);A.useEffect(()=>{function N(){p({innerWidth:window.innerWidth,innerHeight:window.innerHeight})}return window.addEventListener("resize",N),()=>window.removeEventListener("resize",N)},[]);const g=A.useMemo(()=>f===(r==null?void 0:r[r.length-1])||null,[r,f]),v=A.useMemo(()=>r==null?void 0:r.findIndex(N=>N===f),[r,f]),y=r&&r.length>0&&(o||o===0)&&!Number.isNaN(o)&&r[o]===f||!r,x=A.useMemo(()=>{const N=c?{width:c.getBoundingClientRect().width,height:c.getBoundingClientRect().height}:typeof window<"u"?{width:window.innerWidth,height:window.innerHeight}:{width:0,height:0};var k;return(k=r==null?void 0:r.map(C=>{const P=typeof C=="string";let T=0;if(P&&(T=parseInt(C,10)),it(l)){const G=P?T:h?C*N.height:0;return h?l==="bottom"?N.height-G:-N.height+G:G}const M=P?T:h?C*N.width:0;return h?l==="right"?N.width-M:-N.width+M:M}))!=null?k:[]},[r,h,c]),w=A.useMemo(()=>v!==null?x==null?void 0:x[v]:null,[x,v]),b=A.useCallback(N=>{var k;const C=(k=x==null?void 0:x.findIndex(P=>P===N))!=null?k:null;i(C),ot(n.current,{transition:`transform ${We.DURATION}s cubic-bezier(${We.EASE.join(",")})`,transform:it(l)?`translate3d(0, ${N}px, 0)`:`translate3d(${N}px, 0, 0)`}),x&&C!==x.length-1&&C!==o&&C<o?ot(s.current,{transition:`opacity ${We.DURATION}s cubic-bezier(${We.EASE.join(",")})`,opacity:"0"}):ot(s.current,{transition:`opacity ${We.DURATION}s cubic-bezier(${We.EASE.join(",")})`,opacity:"1"}),d(r==null?void 0:r[Math.max(C,0)])},[n.current,r,x,o,s,d]);A.useEffect(()=>{if(f||e){var N;const k=(N=r==null?void 0:r.findIndex(C=>C===e||C===f))!=null?N:-1;x&&k!==-1&&typeof x[k]=="number"&&b(x[k])}},[f,e,r,x,b]);function j({draggedDistance:N,closeDrawer:k,velocity:C,dismissible:P}){if(o===void 0)return;const T=l==="bottom"||l==="right"?(w??0)-N:(w??0)+N,M=v===o-1,G=v===0,$=N>0;if(M&&ot(s.current,{transition:`opacity ${We.DURATION}s cubic-bezier(${We.EASE.join(",")})`}),!u&&C>2&&!$){P?k():b(x[0]);return}if(!u&&C>2&&$&&x&&r){b(x[r.length-1]);return}const Q=x==null?void 0:x.reduce((Y,R)=>typeof Y!="number"||typeof R!="number"?Y:Math.abs(R-T)<Math.abs(Y-T)?R:Y),H=it(l)?window.innerHeight:window.innerWidth;if(C>cS&&Math.abs(N)<H*.4){const Y=$?1:-1;if(Y>0&&g){b(x[r.length-1]);return}if(G&&Y<0&&P&&k(),v===null)return;b(x[v+Y]);return}b(Q)}function _({draggedDistance:N}){if(w===null)return;const k=l==="bottom"||l==="right"?w-N:w+N;(l==="bottom"||l==="right")&&k<x[x.length-1]||(l==="top"||l==="left")&&k>x[x.length-1]||ot(n.current,{transform:it(l)?`translate3d(0, ${k}px, 0)`:`translate3d(${k}px, 0, 0)`})}function S(N,k){if(!r||typeof v!="number"||!x||o===void 0)return null;const C=v===o-1;if(v>=o&&k)return 0;if(C&&!k)return 1;if(!y&&!C)return null;const T=C?v+1:v-1,M=C?x[T]-x[T-1]:x[T+1]-x[T],G=N/Math.abs(M);return C?1-G:G}return{isLastSnapPoint:g,activeSnapPoint:f,shouldFade:y,getPercentageDragged:S,setActiveSnapPoint:d,activeSnapPointIndex:v,onRelease:j,onDrag:_,snapPointsOffset:x}}const nL=()=>()=>{};function sL(){const{direction:e,isOpen:t,shouldScaleBackground:r,setBackgroundColorOnScale:n,noBodyStyles:s}=Lo(),o=A.useRef(null),i=m.useMemo(()=>document.body.style.backgroundColor,[]);function l(){return(window.innerWidth-em)/window.innerWidth}A.useEffect(()=>{if(t&&r){o.current&&clearTimeout(o.current);const c=document.querySelector("[data-vaul-drawer-wrapper]")||document.querySelector("[vaul-drawer-wrapper]");if(!c)return;JI(n&&!s?pf(document.body,{background:"black"}):nL,pf(c,{transformOrigin:it(e)?"top":"left",transitionProperty:"transform, border-radius",transitionDuration:`${We.DURATION}s`,transitionTimingFunction:`cubic-bezier(${We.EASE.join(",")})`}));const u=pf(c,{borderRadius:`${uS}px`,overflow:"hidden",...it(e)?{transform:`scale(${l()}) translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)`}:{transform:`scale(${l()}) translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)`}});return()=>{u(),o.current=window.setTimeout(()=>{i?document.body.style.background=i:document.body.style.removeProperty("background")},We.DURATION*1e3)}}},[t,r,i])}let Zo=null;function aL({isOpen:e,modal:t,nested:r,hasBeenOpened:n,preventScrollRestoration:s,noBodyStyles:o}){const[i,l]=A.useState(()=>typeof window<"u"?window.location.href:""),c=A.useRef(0),u=A.useCallback(()=>{if(Zx()&&Zo===null&&e&&!o){Zo={position:document.body.style.position,top:document.body.style.top,left:document.body.style.left,height:document.body.style.height,right:"unset"};const{scrollX:d,innerHeight:h}=window;document.body.style.setProperty("position","fixed","important"),Object.assign(document.body.style,{top:`${-c.current}px`,left:`${-d}px`,right:"0px",height:"auto"}),window.setTimeout(()=>window.requestAnimationFrame(()=>{const p=h-window.innerHeight;p&&c.current>=h&&(document.body.style.top=`${-(c.current+p)}px`)}),300)}},[e]),f=A.useCallback(()=>{if(Zx()&&Zo!==null&&!o){const d=-parseInt(document.body.style.top,10),h=-parseInt(document.body.style.left,10);Object.assign(document.body.style,Zo),window.requestAnimationFrame(()=>{if(s&&i!==window.location.href){l(window.location.href);return}window.scrollTo(h,d)}),Zo=null}},[i]);return A.useEffect(()=>{function d(){c.current=window.scrollY}return d(),window.addEventListener("scroll",d),()=>{window.removeEventListener("scroll",d)}},[]),A.useEffect(()=>{r||!n||(e?(!window.matchMedia("(display-mode: standalone)").matches&&u(),t||window.setTimeout(()=>{f()},500)):f())},[e,n,i,t,r,u,f]),{restorePositionSetting:f}}function hS({open:e,onOpenChange:t,children:r,onDrag:n,onRelease:s,snapPoints:o,shouldScaleBackground:i=!1,setBackgroundColorOnScale:l=!0,closeThreshold:c=ZI,scrollLockTimeout:u=eL,dismissible:f=!0,handleOnly:d=!1,fadeFromIndex:h=o&&o.length-1,activeSnapPoint:p,setActiveSnapPoint:g,fixed:v,modal:y=!0,onClose:x,nested:w,noBodyStyles:b,direction:j="bottom",defaultOpen:_=!1,disablePreventScroll:S=!0,snapToSequentialPoint:N=!1,preventScrollRestoration:k=!1,repositionInputs:C=!0,onAnimationEnd:P,container:T,autoFocus:M=!1}){var G,$;const[Q=!1,H]=fS({defaultProp:_,prop:e,onChange:V=>{t==null||t(V),!V&&!w&&Re(),setTimeout(()=>{P==null||P(V)},We.DURATION*1e3),V&&!y&&typeof window<"u"&&window.requestAnimationFrame(()=>{document.body.style.pointerEvents="auto"}),V||(document.body.style.pointerEvents="auto")}}),[Y,R]=A.useState(!1),[D,B]=A.useState(!1),[I,F]=A.useState(!1),X=A.useRef(null),fe=A.useRef(null),ve=A.useRef(null),re=A.useRef(null),le=A.useRef(null),De=A.useRef(!1),Se=A.useRef(null),Fe=A.useRef(0),et=A.useRef(!1),Rt=A.useRef(0),ne=A.useRef(null),wt=A.useRef(((G=ne.current)==null?void 0:G.getBoundingClientRect().height)||0),Ee=A.useRef((($=ne.current)==null?void 0:$.getBoundingClientRect().width)||0),Ne=A.useRef(0),bt=A.useCallback(V=>{o&&V===dr.length-1&&(fe.current=new Date)},[]),{activeSnapPoint:Oe,activeSnapPointIndex:je,setActiveSnapPoint:tt,onRelease:Er,snapPointsOffset:dr,onDrag:Pr,shouldFade:pn,getPercentageDragged:ee}=rL({snapPoints:o,activeSnapPointProp:p,setActiveSnapPointProp:g,drawerRef:ne,fadeFromIndex:h,overlayRef:X,onSnapPointChange:bt,direction:j,container:T,snapToSequentialPoint:N});HI({isDisabled:!Q||D||!y||I||!Y||!C||!S});const{restorePositionSetting:Re}=aL({isOpen:Q,modal:y,nested:w,hasBeenOpened:Y,preventScrollRestoration:k,noBodyStyles:b});function jt(){return(window.innerWidth-em)/window.innerWidth}function gn(V){var se,ae;!f&&!o||ne.current&&!ne.current.contains(V.target)||(wt.current=((se=ne.current)==null?void 0:se.getBoundingClientRect().height)||0,Ee.current=((ae=ne.current)==null?void 0:ae.getBoundingClientRect().width)||0,B(!0),ve.current=new Date,aS()&&window.addEventListener("touchend",()=>De.current=!1,{once:!0}),V.target.setPointerCapture(V.pointerId),Fe.current=it(j)?V.pageY:V.pageX)}function Qr(V,se){var ae,ye;let me=V;const rt=(ae=window.getSelection())==null?void 0:ae.toString(),at=ne.current?Jl(ne.current,j):null,Mt=new Date;if(me.hasAttribute("data-vaul-no-drag")||me.closest("[data-vaul-no-drag]"))return!1;if(j==="right"||j==="left")return!0;if(fe.current&&Mt.getTime()-fe.current.getTime()<500)return!1;if(at!==null&&(j==="bottom"?at>0:at<0))return!0;if(rt&&rt.length>0)return!1;if(Mt.getTime()-((ye=le.current)==null?void 0:ye.getTime())<u&&at===0||se)return le.current=Mt,!1;for(;me;){if(me.scrollHeight>me.clientHeight){if(me.scrollTop!==0)return le.current=new Date,!1;if(me.getAttribute("role")==="dialog")return!0}me=me.parentNode}return!0}function $o(V){if(ne.current&&D){const se=j==="bottom"||j==="right"?1:-1,ae=(Fe.current-(it(j)?V.pageY:V.pageX))*se,ye=ae>0,me=o&&!f&&!ye;if(me&&je===0)return;const rt=Math.abs(ae),at=document.querySelector("[data-vaul-drawer-wrapper]"),Mt=j==="bottom"||j==="top"?wt.current:Ee.current;let Xt=rt/Mt;const vn=ee(rt,ye);if(vn!==null&&(Xt=vn),me&&Xt>=1||!De.current&&!Qr(V.target,ye))return;if(ne.current.classList.add(gf),De.current=!0,ot(ne.current,{transition:"none"}),ot(X.current,{transition:"none"}),o&&Pr({draggedDistance:ae}),ye&&!o){const hr=XI(ae),ga=Math.min(hr*-1,0)*se;ot(ne.current,{transform:it(j)?`translate3d(0, ${ga}px, 0)`:`translate3d(${ga}px, 0, 0)`});return}const Tr=1-Xt;if((pn||h&&je===h-1)&&(n==null||n(V,Xt),ot(X.current,{opacity:`${Tr}`,transition:"none"},!0)),at&&X.current&&i){const hr=Math.min(jt()+Xt*(1-jt()),1),ga=8-Xt*8,Uo=Math.max(0,14-Xt*14);ot(at,{borderRadius:`${ga}px`,transform:it(j)?`scale(${hr}) translate3d(0, ${Uo}px, 0)`:`scale(${hr}) translate3d(${Uo}px, 0, 0)`,transition:"none"},!0)}if(!o){const hr=rt*se;ot(ne.current,{transform:it(j)?`translate3d(0, ${hr}px, 0)`:`translate3d(${hr}px, 0, 0)`})}}}A.useEffect(()=>{var V;function se(){if(!ne.current||!C)return;const ae=document.activeElement;if(Zh(ae)||et.current){var ye;const me=((ye=window.visualViewport)==null?void 0:ye.height)||0,rt=window.innerHeight;let at=rt-me;const Mt=ne.current.getBoundingClientRect().height||0,Xt=Mt>rt*.8;Ne.current||(Ne.current=Mt);const vn=ne.current.getBoundingClientRect().top;if(Math.abs(Rt.current-at)>60&&(et.current=!et.current),o&&o.length>0&&dr&&je){const Tr=dr[je]||0;at+=Tr}if(Rt.current=at,Mt>me||et.current){const Tr=ne.current.getBoundingClientRect().height;let hr=Tr;Tr>me&&(hr=me-(Xt?vn:em)),v?ne.current.style.height=`${Tr-Math.max(at,0)}px`:ne.current.style.height=`${Math.max(hr,me-vn)}px`}else ne.current.style.height=`${Ne.current}px`;o&&o.length>0&&!et.current?ne.current.style.bottom="0px":ne.current.style.bottom=`${Math.max(at,0)}px`}}return(V=window.visualViewport)==null||V.addEventListener("resize",se),()=>{var ae;return(ae=window.visualViewport)==null?void 0:ae.removeEventListener("resize",se)}},[je,o,dr]);function zn(V){ma(),x==null||x(),V||H(!1),setTimeout(()=>{o&&tt(o[0])},We.DURATION*1e3)}function Ds(){if(!ne.current)return;const V=document.querySelector("[data-vaul-drawer-wrapper]"),se=Jl(ne.current,j);ot(ne.current,{transform:"translate3d(0, 0, 0)",transition:`transform ${We.DURATION}s cubic-bezier(${We.EASE.join(",")})`}),ot(X.current,{transition:`opacity ${We.DURATION}s cubic-bezier(${We.EASE.join(",")})`,opacity:"1"}),i&&se&&se>0&&Q&&ot(V,{borderRadius:`${uS}px`,overflow:"hidden",...it(j)?{transform:`scale(${jt()}) translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)`,transformOrigin:"top"}:{transform:`scale(${jt()}) translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)`,transformOrigin:"left"},transitionProperty:"transform, border-radius",transitionDuration:`${We.DURATION}s`,transitionTimingFunction:`cubic-bezier(${We.EASE.join(",")})`},!0)}function ma(){!D||!ne.current||(ne.current.classList.remove(gf),De.current=!1,B(!1),re.current=new Date)}function Os(V){if(!D||!ne.current)return;ne.current.classList.remove(gf),De.current=!1,B(!1),re.current=new Date;const se=Jl(ne.current,j);if(!Qr(V.target,!1)||!se||Number.isNaN(se)||ve.current===null)return;const ae=re.current.getTime()-ve.current.getTime(),ye=Fe.current-(it(j)?V.pageY:V.pageX),me=Math.abs(ye)/ae;if(me>.05&&(F(!0),setTimeout(()=>{F(!1)},200)),o){Er({draggedDistance:ye*(j==="bottom"||j==="right"?1:-1),closeDrawer:zn,velocity:me,dismissible:f}),s==null||s(V,!0);return}if(j==="bottom"||j==="right"?ye>0:ye<0){Ds(),s==null||s(V,!0);return}if(me>cS){zn(),s==null||s(V,!1);return}var rt;const at=Math.min((rt=ne.current.getBoundingClientRect().height)!=null?rt:0,window.innerHeight);var Mt;const Xt=Math.min((Mt=ne.current.getBoundingClientRect().width)!=null?Mt:0,window.innerWidth),vn=j==="left"||j==="right";if(Math.abs(se)>=(vn?Xt:at)*c){zn(),s==null||s(V,!1);return}s==null||s(V,!0),Ds()}A.useEffect(()=>(Q&&(ot(document.documentElement,{scrollBehavior:"auto"}),fe.current=new Date),()=>{QI(document.documentElement,"scrollBehavior")}),[Q]);function pa(V){const se=V?(window.innerWidth-$s)/window.innerWidth:1,ae=V?-$s:0;Se.current&&window.clearTimeout(Se.current),ot(ne.current,{transition:`transform ${We.DURATION}s cubic-bezier(${We.EASE.join(",")})`,transform:`scale(${se}) translate3d(0, ${ae}px, 0)`}),!V&&ne.current&&(Se.current=setTimeout(()=>{const ye=Jl(ne.current,j);ot(ne.current,{transition:"none",transform:it(j)?`translate3d(0, ${ye}px, 0)`:`translate3d(${ye}px, 0, 0)`})},500))}function fr(V,se){if(se<0)return;const ae=(window.innerWidth-$s)/window.innerWidth,ye=ae+se*(1-ae),me=-$s+se*$s;ot(ne.current,{transform:it(j)?`scale(${ye}) translate3d(0, ${me}px, 0)`:`scale(${ye}) translate3d(${me}px, 0, 0)`,transition:"none"})}function gl(V,se){const ae=it(j)?window.innerHeight:window.innerWidth,ye=se?(ae-$s)/ae:1,me=se?-$s:0;se&&ot(ne.current,{transition:`transform ${We.DURATION}s cubic-bezier(${We.EASE.join(",")})`,transform:it(j)?`scale(${ye}) translate3d(0, ${me}px, 0)`:`scale(${ye}) translate3d(${me}px, 0, 0)`})}return A.createElement(bj,{defaultOpen:_,onOpenChange:V=>{!f&&!V||(V?R(!0):zn(!0),H(V))},open:Q},A.createElement(sS.Provider,{value:{activeSnapPoint:Oe,snapPoints:o,setActiveSnapPoint:tt,drawerRef:ne,overlayRef:X,onOpenChange:t,onPress:gn,onRelease:Os,onDrag:$o,dismissible:f,handleOnly:d,isOpen:Q,isDragging:D,shouldFade:pn,closeDrawer:zn,onNestedDrag:fr,onNestedOpenChange:pa,onNestedRelease:gl,keyboardIsOpen:et,modal:y,snapPointsOffset:dr,direction:j,shouldScaleBackground:i,setBackgroundColorOnScale:l,noBodyStyles:b,container:T,autoFocus:M}},r))}const mS=A.forwardRef(function({...e},t){const{overlayRef:r,snapPoints:n,onRelease:s,shouldFade:o,isOpen:i,modal:l}=Lo(),c=iS(t,r),u=n&&n.length>0;return l?A.createElement(Tp,{onMouseUp:s,ref:c,"data-vaul-overlay":"","data-vaul-snap-points":i&&u?"true":"false","data-vaul-snap-points-overlay":i&&o?"true":"false",...e}):(typeof window<"u"&&window.requestAnimationFrame(()=>{document.body.style.pointerEvents="auto"}),null)});mS.displayName="Drawer.Overlay";const pS=A.forwardRef(function({onPointerDownOutside:e,style:t,onOpenAutoFocus:r,...n},s){const{drawerRef:o,onPress:i,onRelease:l,onDrag:c,keyboardIsOpen:u,snapPointsOffset:f,modal:d,isOpen:h,direction:p,snapPoints:g,container:v,handleOnly:y,autoFocus:x}=Lo(),[w,b]=A.useState(!1),j=iS(s,o),_=A.useRef(null),S=A.useRef(null),N=A.useRef(!1),k=g&&g.length>0;sL();const C=(T,M,G=0)=>{if(N.current)return!0;const $=Math.abs(T.y),Q=Math.abs(T.x),H=Q>$,Y=["bottom","right"].includes(M)?1:-1;if(M==="left"||M==="right"){if(!(T.x*Y<0)&&Q>=0&&Q<=G)return H}else if(!(T.y*Y<0)&&$>=0&&$<=G)return!H;return N.current=!0,!0};A.useEffect(()=>{k&&window.requestAnimationFrame(()=>{b(!0)})},[]);function P(T){_.current=null,N.current=!1,l(T)}return A.createElement(Rp,{"data-vaul-drawer-direction":p,"data-vaul-drawer":"","data-vaul-delayed-snap-points":w?"true":"false","data-vaul-snap-points":h&&k?"true":"false","data-vaul-custom-container":v?"true":"false",...n,ref:j,style:f&&f.length>0?{"--snap-point-height":`${f[0]}px`,...t}:t,onPointerDown:T=>{y||(n.onPointerDown==null||n.onPointerDown.call(n,T),_.current={x:T.pageX,y:T.pageY},i(T))},onOpenAutoFocus:T=>{r==null||r(T),x||T.preventDefault()},onPointerDownOutside:T=>{if(e==null||e(T),!d||T.defaultPrevented){T.preventDefault();return}u.current&&(u.current=!1)},onFocusOutside:T=>{if(!d){T.preventDefault();return}},onPointerMove:T=>{if(S.current=T,y||(n.onPointerMove==null||n.onPointerMove.call(n,T),!_.current))return;const M=T.pageY-_.current.y,G=T.pageX-_.current.x,$=T.pointerType==="touch"?10:2;C({x:G,y:M},p,$)?c(T):(Math.abs(G)>$||Math.abs(M)>$)&&(_.current=null)},onPointerUp:T=>{n.onPointerUp==null||n.onPointerUp.call(n,T),_.current=null,N.current=!1,l(T)},onPointerOut:T=>{n.onPointerOut==null||n.onPointerOut.call(n,T),P(S.current)},onContextMenu:T=>{n.onContextMenu==null||n.onContextMenu.call(n,T),P(S.current)}})});pS.displayName="Drawer.Content";const oL=250,iL=120,gS=A.forwardRef(function({preventCycle:e=!1,children:t,...r},n){const{closeDrawer:s,isDragging:o,snapPoints:i,activeSnapPoint:l,setActiveSnapPoint:c,dismissible:u,handleOnly:f,isOpen:d,onPress:h,onDrag:p}=Lo(),g=A.useRef(null),v=A.useRef(!1);function y(){if(v.current){b();return}window.setTimeout(()=>{x()},iL)}function x(){if(o||e||v.current){b();return}if(b(),(!i||i.length===0)&&u){s();return}if(l===i[i.length-1]&&u){s();return}const _=i.findIndex(N=>N===l);if(_===-1)return;const S=i[_+1];c(S)}function w(){g.current=window.setTimeout(()=>{v.current=!0},oL)}function b(){window.clearTimeout(g.current),v.current=!1}return A.createElement("div",{onClick:y,onPointerCancel:b,onPointerDown:j=>{f&&h(j),w()},onPointerMove:j=>{f&&p(j)},ref:n,"data-vaul-drawer-visible":d?"true":"false","data-vaul-handle":"","aria-hidden":"true",...r},A.createElement("span",{"data-vaul-handle-hitarea":"","aria-hidden":"true"},t))});gS.displayName="Drawer.Handle";function lL({onDrag:e,onOpenChange:t,...r}){const{onNestedDrag:n,onNestedOpenChange:s,onNestedRelease:o}=Lo();if(!n)throw new Error("Drawer.NestedRoot must be placed in another drawer");return A.createElement(hS,{nested:!0,onClose:()=>{s(!1)},onDrag:(i,l)=>{n(i,l),e==null||e(i,l)},onOpenChange:i=>{i&&s(i)},onRelease:o,...r})}function cL(e){const t=Lo(),{container:r=t.container,...n}=e;return A.createElement(_j,{container:r,...n})}const Fn={Root:hS,NestedRoot:lL,Content:pS,Overlay:mS,Trigger:jj,Portal:cL,Handle:gS,Close:Nj,Title:Mp,Description:Ap},vS=({shouldScaleBackground:e=!0,...t})=>a.jsx(Fn.Root,{shouldScaleBackground:e,...t});vS.displayName="Drawer";const uL=Fn.Portal,xS=m.forwardRef(({className:e,...t},r)=>a.jsx(Fn.Overlay,{ref:r,className:te("fixed inset-0 z-50 bg-black/80",e),...t}));xS.displayName=Fn.Overlay.displayName;const yS=m.forwardRef(({className:e,children:t,...r},n)=>a.jsxs(uL,{children:[a.jsx(xS,{}),a.jsxs(Fn.Content,{ref:n,className:te("fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background",e),...r,children:[a.jsx("div",{className:"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted"}),t]})]}));yS.displayName="DrawerContent";const wS=m.forwardRef(({className:e,...t},r)=>a.jsx(Fn.Title,{ref:r,className:te("text-lg font-semibold leading-none tracking-tight",e),...t}));wS.displayName=Fn.Title.displayName;const dL=m.forwardRef(({className:e,...t},r)=>a.jsx(Fn.Description,{ref:r,className:te("text-sm text-muted-foreground",e),...t}));dL.displayName=Fn.Description.displayName;const cg=({children:e,open:t,onOpenChange:r,title:n="Modal",className:s})=>_p()?a.jsx(vS,{open:t,onOpenChange:r,children:a.jsxs(yS,{className:s,children:[a.jsx(mo,{children:a.jsx(wS,{children:n})}),a.jsx("div",{className:"max-h-[85vh] overflow-y-auto p-4",children:e})]})}):a.jsx(Ht,{open:t,onOpenChange:r,children:a.jsxs(Lt,{className:`max-w-2xl max-h-[90vh] overflow-y-auto ${s}`,children:[a.jsx(mo,{children:a.jsx(qt,{children:n})}),a.jsx("div",{className:"p-1",children:e})]})}),fL=[{type:"two-truths",title:"Two Truths & a Lie",content:"Share two true facts and one lie about yourself. Let others guess which is which!",action:"Start Game"},{type:"this-or-that",title:"This or That",content:"Quick choices: Pizza or Burgers? Summer or Winter? Books or Movies?",action:"Ask Question"},{type:"emoji-riddle",title:"Emoji Riddle",content:"Guess what movie, song, or phrase these emojis represent! 🎬🍿",action:"Create Riddle"}],hL=({onGameSelect:e,disabled:t})=>{const[r,n]=m.useState(!1),[s,o]=m.useState(null),[i,l]=m.useState(5),[c,u]=m.useState(!1),f=h=>{o(h),u(!0)},d=()=>{if(!s)return;e({"two-truths":"twoTruths","this-or-that":"thisorthat","emoji-riddle":"emojiriddle"}[s.type],i),n(!1),o(null),u(!1)};return a.jsxs(a.Fragment,{children:[a.jsx(O,{variant:"outline",size:"sm",onClick:()=>n(!0),disabled:t,className:"hover-scale",children:a.jsx(Tu,{className:"w-4 h-4"})}),a.jsx(cg,{open:r,onOpenChange:h=>{h||(n(!1),o(null),u(!1))},title:"Quick Games",className:"max-w-md",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"text-center mb-6",children:[a.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Choose a Game"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Fast, fun activities to energize your chat"})]}),a.jsx("div",{className:"grid gap-3",children:fL.map(h=>a.jsxs(W,{className:"cursor-pointer hover:shadow-md transition-all duration-200 hover:scale-[1.02] border-2 hover:border-primary/50",onClick:()=>f(h),children:[a.jsx(ue,{className:"pb-2",children:a.jsxs(de,{className:"text-lg flex items-center justify-between",children:[h.title,a.jsx(Js,{className:"w-4 h-4 text-muted-foreground"})]})}),a.jsxs(J,{children:[a.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:h.content}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-xs text-primary font-medium",children:h.action}),a.jsx(O,{size:"sm",variant:"ghost",className:"h-6 px-2",children:"Try →"})]})]})]},h.type))}),c&&s&&a.jsxs("div",{className:"pt-4 border-t space-y-4",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("h3",{className:"font-semibold mb-2",children:"Game Settings"}),a.jsxs("p",{className:"text-sm text-muted-foreground mb-4",children:["Configure ",s.title," duration"]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs(kn,{className:"text-sm font-medium flex items-center gap-2",children:[a.jsx(Ts,{className:"w-4 h-4"}),"Game Duration: ",i," minute",i!==1?"s":""]}),a.jsx(Lp,{value:[i],onValueChange:h=>l(h[0]),min:1,max:10,step:1,className:"w-full"}),a.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[a.jsx("span",{children:"1 min"}),a.jsx("span",{children:"10 min"})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(O,{onClick:d,className:"flex-1",disabled:t,children:[a.jsx(st,{className:"w-4 h-4 mr-2"}),"Start Game"]}),a.jsx(O,{onClick:()=>{u(!1),o(null)},variant:"outline",children:"Cancel"})]})]})]}),a.jsx("div",{className:"text-center pt-2",children:a.jsx("p",{className:"text-xs text-muted-foreground",children:"Games start instantly and need no external setup"})})]})})]})},ry={twoTruths:{title:"Two Truths & a Lie",description:"Share two true facts and one lie about yourself. Let others guess which is which!",icon:"🎭",color:"bg-orange-50 border-orange-200 dark:bg-orange-950/20 dark:border-orange-800"},thisorthat:{title:"This or That",description:"Quick choices: Pizza or Burgers? Summer or Winter? Books or Movies?",icon:"⚖️",color:"bg-blue-50 border-blue-200 dark:bg-blue-950/20 dark:border-blue-800"},emojiriddle:{title:"Emoji Riddle",description:"Guess what movie, song, or phrase these emojis represent!",icon:"🧩",color:"bg-yellow-50 border-yellow-200 dark:bg-yellow-950/20 dark:border-yellow-800"}},mL=({isOpen:e,onClose:t,onParticipate:r,onDecline:n,gameType:s,gameDuration:o,creatorUsername:i})=>{const l=ry[s]||ry.twoTruths;return a.jsx(cg,{open:e,onOpenChange:t,title:"",className:"max-w-md",children:a.jsxs(W,{className:`${l.color} border-2`,children:[a.jsxs(ue,{className:"text-center pb-4",children:[a.jsx("div",{className:"flex items-center justify-center mb-2",children:a.jsx("span",{className:"text-4xl",children:l.icon})}),a.jsx(de,{className:"text-xl",children:l.title}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:[i," wants to start a game!"]})]}),a.jsxs(J,{className:"space-y-4",children:[a.jsx("div",{className:"text-center",children:a.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:l.description})}),a.jsxs("div",{className:"flex items-center justify-center gap-4 text-sm",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(Ts,{className:"w-4 h-4 text-muted-foreground"}),a.jsxs("span",{children:[o," min"]})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(st,{className:"w-4 h-4 text-muted-foreground"}),a.jsx("span",{children:"Group Game"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs(O,{onClick:r,className:"w-full",size:"lg",children:[a.jsx(Tu,{className:"w-4 h-4 mr-2"}),"Join Game"]}),a.jsxs(O,{onClick:n,variant:"outline",className:"w-full",children:[a.jsx(cn,{className:"w-4 h-4 mr-2"}),"Maybe Later"]})]}),a.jsx("div",{className:"text-center",children:a.jsx("p",{className:"text-xs text-muted-foreground",children:"You can leave the game anytime if you change your mind"})})]})]})})},ny={twoTruths:{title:"Two Truths & a Lie",icon:"🎭",color:"bg-orange-50 border-orange-200 dark:bg-orange-950/20 dark:border-orange-800"},thisorthat:{title:"This or That",icon:"⚖️",color:"bg-blue-50 border-blue-200 dark:bg-blue-950/20 dark:border-blue-800"},emojiriddle:{title:"Emoji Riddle",icon:"🧩",color:"bg-yellow-50 border-yellow-200 dark:bg-yellow-950/20 dark:border-yellow-800"}},pL=({game:e,onExit:t,currentUserId:r,currentUsername:n})=>{const[s,o]=m.useState(""),[i,l]=m.useState(!0),c=ny[e.gameType]||ny.twoTruths;m.useEffect(()=>{const f=()=>{const h=new Date,p=e.roundEndsAt.getTime()-h.getTime();if(p<=0){o("Game Ended");return}const g=Math.floor(p/(1e3*60)),v=Math.floor(p%(1e3*60)/1e3);o(`${g}:${v.toString().padStart(2,"0")}`)};f();const d=setInterval(f,1e3);return()=>clearInterval(d)},[e.roundEndsAt]);const u=()=>{l(!1),t()};return i?a.jsxs(W,{className:`${c.color} border-2 mb-4`,children:[a.jsx(ue,{className:"pb-3",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-2xl",children:c.icon}),a.jsxs("div",{children:[a.jsx(de,{className:"text-lg",children:c.title}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Active Game Session"})]})]}),a.jsx(O,{onClick:u,variant:"ghost",size:"sm",className:"text-muted-foreground hover:text-destructive",children:a.jsx(cn,{className:"w-4 h-4"})})]})}),a.jsxs(J,{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(Ts,{className:"w-4 h-4 text-muted-foreground"}),a.jsx("span",{className:"font-medium",children:s})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(st,{className:"w-4 h-4 text-muted-foreground"}),a.jsx("span",{children:"Group Game"})]})]}),a.jsxs(oe,{variant:"secondary",className:"flex items-center gap-1",children:[a.jsx(Tu,{className:"w-3 h-3"}),"Active"]})]}),a.jsx("div",{className:"text-center",children:a.jsx("p",{className:"text-sm text-muted-foreground",children:"Game is in progress! Participate in the chat or wait for the next round."})}),a.jsx("div",{className:"flex gap-2",children:a.jsxs(O,{onClick:u,variant:"outline",size:"sm",className:"flex-1",children:[a.jsx(cn,{className:"w-4 h-4 mr-2"}),"Leave Game"]})})]})]}):null},gL=({onCreatePoll:e,onCancel:t})=>{const[r,n]=m.useState(""),[s,o]=m.useState(["",""]),i=()=>{s.length<6&&o([...s,""])},l=(f,d)=>{const h=[...s];h[f]=d,o(h)},c=f=>{s.length>2&&o(s.filter((d,h)=>h!==f))},u=()=>{const f=s.filter(d=>d.trim());r.trim()&&f.length>=2&&e(r.trim(),f)};return a.jsxs(W,{className:"w-full max-w-md mx-auto",children:[a.jsx(ue,{children:a.jsxs(de,{className:"text-sm flex items-center gap-2",children:[a.jsx(i2,{className:"h-4 w-4"}),"Create Poll"]})}),a.jsxs(J,{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-medium mb-1 block",children:"Question"}),a.jsx(ht,{placeholder:"What's your question?",value:r,onChange:f=>n(f.target.value),className:"text-sm"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-medium mb-2 block",children:"Options"}),a.jsx("div",{className:"space-y-2",children:s.map((f,d)=>a.jsxs("div",{className:"flex gap-2",children:[a.jsx(ht,{placeholder:`Option ${d+1}`,value:f,onChange:h=>l(d,h.target.value),className:"text-sm"}),s.length>2&&a.jsx(O,{variant:"ghost",size:"sm",onClick:()=>c(d),className:"h-9 w-9 p-0",children:a.jsx(cn,{className:"h-3 w-3"})})]},d))}),s.length<6&&a.jsxs(O,{variant:"ghost",size:"sm",onClick:i,className:"mt-2 h-8 text-xs",children:[a.jsx(Ru,{className:"h-3 w-3 mr-1"}),"Add Option"]})]}),a.jsxs("div",{className:"flex gap-2 pt-2",children:[a.jsx(O,{variant:"outline",size:"sm",onClick:t,className:"flex-1",children:"Cancel"}),a.jsx(O,{size:"sm",onClick:u,disabled:!r.trim()||s.filter(f=>f.trim()).length<2,className:"flex-1",children:"Create Poll"})]})]})]})},vL=({playlist:e,currentUserId:t,onAddSong:r})=>{const[n,s]=m.useState(""),[o,i]=m.useState(!1),l=()=>{n.trim()&&(r(n.trim()),s(""),i(!1))},c=u=>{const d=Math.floor((new Date().getTime()-u.getTime())/(1e3*60));return d<1?"just now":d<60?`${d}m ago`:d<1440?`${Math.floor(d/60)}h ago`:`${Math.floor(d/1440)}d ago`};return a.jsxs(W,{className:"w-full max-w-lg mx-auto bg-card/50 backdrop-blur-sm",children:[a.jsx(ue,{className:"pb-3",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(wh,{className:"h-4 w-4 text-primary"}),a.jsx(de,{className:"text-sm",children:e.name})]}),a.jsxs(oe,{variant:"secondary",className:"text-xs",children:[e.songs.length," songs"]})]})}),a.jsxs(J,{className:"space-y-3",children:[a.jsx("div",{className:"space-y-2",children:o?a.jsxs("div",{className:"flex gap-2",children:[a.jsx(ht,{placeholder:"Song name, artist, or Spotify link...",value:n,onChange:u=>s(u.target.value),onKeyPress:u=>u.key==="Enter"&&l(),className:"text-sm",autoFocus:!0}),a.jsx(O,{size:"sm",onClick:l,disabled:!n.trim(),children:"Add"}),a.jsx(O,{variant:"ghost",size:"sm",onClick:()=>i(!1),children:"Cancel"})]}):a.jsxs(O,{variant:"outline",size:"sm",onClick:()=>i(!0),className:"w-full justify-start",children:[a.jsx(Ru,{className:"h-3 w-3 mr-2"}),"Add a song"]})}),e.songs.length>0?a.jsx(Gr,{className:"h-48",children:a.jsx("div",{className:"space-y-2",children:e.songs.map((u,f)=>a.jsxs("div",{className:"flex items-center gap-3 p-2 rounded-lg bg-muted/50",children:[a.jsx("div",{className:"flex items-center justify-center w-6 h-6 rounded bg-primary/10 text-xs font-medium text-primary",children:f+1}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("p",{className:"text-sm font-medium truncate",children:u.title}),u.spotifyUrl&&a.jsx(O,{variant:"ghost",size:"sm",className:"h-5 w-5 p-0",onClick:()=>window.open(u.spotifyUrl,"_blank"),children:a.jsx(ep,{className:"h-3 w-3"})})]}),a.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[a.jsx("span",{children:u.artist}),a.jsx("span",{children:"•"}),a.jsxs("span",{children:["by ",u.addedBy]}),a.jsx("span",{children:"•"}),a.jsx("span",{children:c(u.addedAt)})]})]})]},u.id))})}):a.jsxs("div",{className:"text-center py-6 text-muted-foreground",children:[a.jsx(wh,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),a.jsx("p",{className:"text-sm",children:"No songs yet"}),a.jsx("p",{className:"text-xs",children:"Add the first song to get started!"})]}),a.jsxs("div",{className:"text-xs text-muted-foreground bg-muted/30 rounded-lg p-3",children:[a.jsx("p",{className:"font-medium mb-1",children:"💡 How to add songs:"}),a.jsx("p",{children:'• Type song name and artist: "Bohemian Rhapsody Queen"'}),a.jsx("p",{children:"• Paste Spotify link"}),a.jsx("p",{children:"• Use /addsong command in chat"})]})]})]})},xL=({onCreatePlaylist:e,onCancel:t})=>{const[r,n]=m.useState(""),s=()=>{r.trim()&&e(r.trim())};return a.jsxs(W,{className:"w-full max-w-md mx-auto",children:[a.jsx(ue,{children:a.jsxs(de,{className:"text-sm flex items-center gap-2",children:[a.jsx(wh,{className:"h-4 w-4"}),"Create Playlist"]})}),a.jsxs(J,{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-medium mb-1 block",children:"Playlist Name"}),a.jsx(ht,{placeholder:"e.g., Group Favorites, Study Vibes...",value:r,onChange:o=>n(o.target.value),onKeyPress:o=>o.key==="Enter"&&s(),className:"text-sm",autoFocus:!0})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(O,{variant:"outline",size:"sm",onClick:t,className:"flex-1",children:"Cancel"}),a.jsx(O,{size:"sm",onClick:s,disabled:!r.trim(),className:"flex-1",children:"Create"})]})]})]})},sy=[{question:"Would you rather...",options:["Have the ability to time travel to the past","Have the ability to time travel to the future"]},{question:"Would you rather...",options:["Always be 10 minutes late","Always be 20 minutes early"]},{question:"Would you rather...",options:["Be able to speak every language fluently","Be able to play every musical instrument perfectly"]},{question:"Would you rather...",options:["Live in a world without music","Live in a world without movies"]},{question:"Would you rather...",options:["Have unlimited money but only 5 years to live","Live forever but be poor"]},{question:"Would you rather...",options:["Always know when someone is lying to you","Always get away with lying"]},{question:"Would you rather...",options:["Be the smartest person in the room","Be the funniest person in the room"]},{question:"Would you rather...",options:["Have the power of invisibility","Have the power to read minds"]}],yL=({game:e,currentUserId:t,currentUsername:r,onGuess:n})=>{const[s,o]=m.useState("");hn();const i=e.guesses.some(h=>h.userId===t),l=e.guesses.find(h=>h.userId===t),c=e.createdBy===t,u=!!e.revealedAt,f=e.statements.find(h=>h.isLie);m.useEffect(()=>{const h=()=>{const g=new Date,v=e.expiresAt.getTime()-g.getTime();if(v<=0){o("Expired");return}const y=Math.floor(v/(1e3*60)),x=Math.floor(v%(1e3*60)/1e3);o(`${y}:${x.toString().padStart(2,"0")}`)};h();const p=setInterval(h,1e3);return()=>clearInterval(p)},[e.expiresAt]);const d=h=>e.guesses.filter(p=>p.guessedStatementId===h);return a.jsxs(W,{className:"w-full max-w-lg mx-auto bg-gradient-to-br from-orange-50 to-red-50 dark:from-orange-950/20 dark:to-red-950/20 border-orange-200 dark:border-orange-800",children:[a.jsxs(ue,{className:"pb-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(xh,{className:"h-4 w-4 text-orange-600"}),a.jsx(de,{className:"text-sm text-orange-600",children:"Two Truths and a Lie"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs(oe,{variant:"outline",className:"text-xs",children:[a.jsx(Ts,{className:"h-3 w-3 mr-1"}),s]}),a.jsxs(oe,{variant:"secondary",className:"text-xs",children:[e.guesses.length," guesses"]})]})]}),a.jsxs("div",{className:"text-xs text-muted-foreground",children:["by ",e.createdByUsername]})]}),a.jsxs(J,{className:"space-y-4",children:[a.jsx("div",{className:"space-y-3",children:e.statements.map((h,p)=>{const g=d(h.id),v=(l==null?void 0:l.guessedStatementId)===h.id,y=u&&h.isLie,x=u&&v&&!h.isLie;return a.jsx(O,{variant:v?"default":"outline",className:`w-full justify-start text-left h-auto p-4 ${y?"bg-red-100 border-red-300 dark:bg-red-950/50 dark:border-red-800":x?"bg-gray-100 border-gray-300 dark:bg-gray-800 dark:border-gray-600":""}`,onClick:()=>{!i&&!u&&n(e.id,h.id)},disabled:i||u||c,children:a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("span",{className:"text-sm font-medium",children:[p+1,". ",h.text]}),u&&h.isLie&&a.jsx(oe,{variant:"destructive",className:"text-xs",children:"LIE"})]}),u&&g.length>0&&a.jsxs("div",{className:"text-xs text-muted-foreground",children:["Guessed by: ",g.map(w=>w.username).join(", ")]})]})},h.id)})}),i&&!u&&a.jsx("div",{className:"text-center",children:a.jsxs(oe,{variant:"secondary",className:"text-xs",children:[a.jsx(ph,{className:"h-3 w-3 mr-1"}),"You guessed: Statement ",e.statements.findIndex(h=>h.id===(l==null?void 0:l.guessedStatementId))+1]})}),u&&a.jsxs("div",{className:"text-center space-y-2",children:[a.jsxs(oe,{variant:"destructive",className:"text-sm",children:['The lie was: "',f==null?void 0:f.text,'"']}),l&&a.jsx(oe,{variant:(f==null?void 0:f.id)===l.guessedStatementId?"default":"secondary",className:"text-xs",children:(f==null?void 0:f.id)===l.guessedStatementId?"🎉 You got it right!":"😅 Better luck next time!"})]}),c&&!u&&a.jsxs("div",{className:"text-xs text-muted-foreground bg-muted/30 rounded-lg p-3 text-center",children:[a.jsx(Bc,{className:"h-4 w-4 mx-auto mb-1"}),a.jsx("p",{children:"Wait for others to guess. Results will be revealed automatically."})]}),!c&&!i&&!u&&a.jsxs("div",{className:"text-xs text-muted-foreground bg-muted/30 rounded-lg p-3 text-center",children:[a.jsx(xh,{className:"h-4 w-4 mx-auto mb-1"}),a.jsx("p",{children:"Which statement do you think is the lie?"})]})]})]})},wL=({onCreateGame:e,onCancel:t})=>{const[r,n]=m.useState(["","",""]),[s,o]=m.useState(null),i=(c,u)=>{const f=[...r];f[c]=u,n(f)},l=()=>{if(r.filter(u=>u.trim()).length===3&&s!==null){const u=r.map((f,d)=>({text:f.trim(),isLie:d===s}));e(u.map(f=>f.text))}};return a.jsxs(W,{className:"w-full max-w-md mx-auto",children:[a.jsxs(ue,{children:[a.jsxs(de,{className:"text-sm flex items-center gap-2",children:[a.jsx(xh,{className:"h-4 w-4"}),"Create Two Truths and a Lie"]}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Write 3 statements about yourself - 2 truths and 1 lie"})]}),a.jsxs(J,{className:"space-y-4",children:[a.jsx("div",{className:"space-y-3",children:r.map((c,u)=>a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("label",{className:"text-xs font-medium",children:["Statement ",u+1]}),a.jsx(O,{variant:s===u?"destructive":"outline",size:"sm",onClick:()=>o(s===u?null:u),className:"h-6 text-xs",children:s===u?"LIE":"Mark as lie"})]}),a.jsx(og,{placeholder:"Tell us something about yourself...",value:c,onChange:f=>i(u,f.target.value),className:"text-sm min-h-[60px]",rows:2})]},u))}),a.jsxs("div",{className:"text-xs text-muted-foreground bg-muted/30 rounded-lg p-3",children:[a.jsx("p",{className:"font-medium mb-1",children:"💡 Tips:"}),a.jsx("p",{children:"• Make the lie believable"}),a.jsx("p",{children:"• Keep all statements interesting"}),a.jsx("p",{children:"• Mark which one is the lie"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(O,{variant:"outline",size:"sm",onClick:t,className:"flex-1",children:"Cancel"}),a.jsx(O,{size:"sm",onClick:l,disabled:r.some(c=>!c.trim())||s===null,className:"flex-1",children:"Start Game"})]})]})]})},bL=({prompt:e,currentUserId:t,onVote:r})=>{const[n,s]=m.useState(""),o=e.options.reduce((u,f)=>u+f.votes,0),i=e.options.some(u=>u.voters.includes(t)),l=e.options.find(u=>u.voters.includes(t));m.useEffect(()=>{const u=()=>{const d=new Date,h=e.expiresAt.getTime()-d.getTime();if(h<=0){s("Expired");return}const p=Math.floor(h/(1e3*60*60)),g=Math.floor(h%(1e3*60*60)/(1e3*60));p>0?s(`${p}h ${g}m`):s(`${g}m`)};u();const f=setInterval(u,6e4);return()=>clearInterval(f)},[e.expiresAt]);const c=u=>o>0?u/o*100:50;return a.jsxs(W,{className:"w-full max-w-lg mx-auto bg-gradient-to-br from-blue-50 to-purple-50 dark:from-blue-950/20 dark:to-purple-950/20 border-blue-200 dark:border-blue-800",children:[a.jsx(ue,{className:"pb-3",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(mb,{className:"h-4 w-4 text-blue-600"}),a.jsx(de,{className:"text-sm text-blue-600",children:"This or That"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs(oe,{variant:"outline",className:"text-xs",children:[a.jsx(Ts,{className:"h-3 w-3 mr-1"}),n]}),a.jsxs(oe,{variant:"secondary",className:"text-xs",children:[o," votes"]})]})]})}),a.jsxs(J,{className:"space-y-4",children:[a.jsx("div",{className:"text-center",children:a.jsx("h3",{className:"text-lg font-semibold mb-4",children:e.question})}),a.jsx("div",{className:"grid grid-cols-2 gap-4",children:e.options.map((u,f)=>{const d=c(u.votes),h=u.voters.includes(t),p=i&&u.votes>=Math.max(...e.options.map(g=>g.votes));return a.jsxs("div",{className:"space-y-2",children:[a.jsxs(O,{variant:h?"default":"outline",className:`w-full h-24 flex flex-col items-center justify-center text-center ${p&&i?"ring-2 ring-primary/50":""}`,onClick:()=>!i&&r(e.id,u.id),disabled:i||n==="Expired",children:[a.jsx("div",{className:"text-2xl mb-1",children:u.emoji}),a.jsx("div",{className:"text-sm font-medium",children:u.text}),i&&a.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:[u.votes," (",Math.round(d),"%)"]})]}),i&&a.jsx(Ya,{value:d,className:"h-2"})]},u.id)})}),a.jsx("div",{className:"text-center text-lg font-bold text-muted-foreground",children:"VS"}),i&&a.jsx("div",{className:"text-center",children:a.jsxs(oe,{variant:"secondary",className:"text-xs",children:["You chose: ",l==null?void 0:l.emoji," ",l==null?void 0:l.text]})}),!i&&n!=="Expired"&&a.jsxs("div",{className:"text-center text-xs text-muted-foreground bg-muted/30 rounded-lg p-3",children:[a.jsx(al,{className:"h-4 w-4 mx-auto mb-1"}),a.jsx("p",{children:"Make your choice and see what the group thinks!"})]})]})]})},ay=[{question:"Which would you choose?",options:[{text:"Coffee",emoji:"☕"},{text:"Tea",emoji:"🍵"}]},{question:"What's your preference?",options:[{text:"Beach",emoji:"🏖️"},{text:"Mountains",emoji:"🏔️"}]},{question:"Pick your superpower:",options:[{text:"Flying",emoji:"🦅"},{text:"Invisibility",emoji:"👻"}]},{question:"Ideal weather:",options:[{text:"Sunny",emoji:"☀️"},{text:"Rainy",emoji:"🌧️"}]},{question:"Entertainment choice:",options:[{text:"Movies",emoji:"🎬"},{text:"Books",emoji:"📚"}]},{question:"Social setting:",options:[{text:"Party",emoji:"🎉"},{text:"Quiet Night",emoji:"🕯️"}]},{question:"Travel style:",options:[{text:"Adventure",emoji:"🎒"},{text:"Luxury",emoji:"🏖️"}]},{question:"Food preference:",options:[{text:"Pizza",emoji:"🍕"},{text:"Burger",emoji:"🍔"}]}],jL=({riddle:e,currentUserId:t,currentUsername:r,onGuess:n})=>{const[s,o]=m.useState(""),[i,l]=m.useState("");e.guesses.some(h=>h.userId===t);const c=!!e.solvedBy,u=e.guesses.filter(h=>h.userId===t);m.useEffect(()=>{const h=()=>{const g=new Date,v=e.expiresAt.getTime()-g.getTime();if(v<=0){l("Expired");return}const y=Math.floor(v/(1e3*60)),x=Math.floor(v%(1e3*60)/1e3);l(`${y}:${x.toString().padStart(2,"0")}`)};h();const p=setInterval(h,1e3);return()=>clearInterval(p)},[e.expiresAt]);const f=()=>{s.trim()&&!c&&(n(e.id,s.trim()),o(""))},d=h=>{h.key==="Enter"&&f()};return a.jsxs(W,{className:"w-full max-w-lg mx-auto bg-gradient-to-br from-yellow-50 to-orange-50 dark:from-yellow-950/20 dark:to-orange-950/20 border-yellow-200 dark:border-yellow-800",children:[a.jsx(ue,{className:"pb-3",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(br,{className:"h-4 w-4 text-yellow-600"}),a.jsx(de,{className:"text-sm text-yellow-600",children:"Emoji Riddle"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs(oe,{variant:"outline",className:"text-xs",children:[a.jsx(Ts,{className:"h-3 w-3 mr-1"}),i]}),a.jsxs(oe,{variant:"secondary",className:"text-xs",children:[e.guesses.length," guesses"]})]})]})}),a.jsxs(J,{className:"space-y-4",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-4xl mb-4 p-6 bg-white/50 dark:bg-gray-800/50 rounded-lg",children:e.emojis}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"What do these emojis represent?"})]}),c&&a.jsxs("div",{className:"text-center space-y-2",children:[a.jsxs(oe,{variant:"default",className:"text-sm",children:[a.jsx(xs,{className:"h-3 w-3 mr-1"}),"Solved by ",e.solvedBy,"!"]}),a.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-950/20 rounded-lg",children:[a.jsxs("p",{className:"text-sm font-medium text-green-800 dark:text-green-200",children:["Answer: ",e.answer]}),a.jsxs("p",{className:"text-xs text-green-600 dark:text-green-400 mt-2",children:["💡 ",e.funFact]})]})]}),!c&&i!=="Expired"&&a.jsx("div",{className:"space-y-2",children:a.jsxs("div",{className:"flex gap-2",children:[a.jsx(ht,{placeholder:"Type your guess...",value:s,onChange:h=>o(h.target.value),onKeyPress:d,className:"text-sm",autoFocus:!0}),a.jsx(O,{size:"sm",onClick:f,disabled:!s.trim(),children:"Guess"})]})}),!c&&e.guesses.length>=2&&a.jsx("div",{className:"text-center",children:a.jsxs(oe,{variant:"outline",className:"text-xs",children:[a.jsx(w2,{className:"h-3 w-3 mr-1"}),"Hint: ",e.hint]})}),u.length>0&&a.jsxs("div",{className:"space-y-1",children:[a.jsx("p",{className:"text-xs font-medium text-muted-foreground",children:"Your guesses:"}),a.jsx("div",{className:"flex flex-wrap gap-1",children:u.map((h,p)=>a.jsx(oe,{variant:"secondary",className:"text-xs",children:h.guess},p))})]}),e.guesses.length>0&&!c&&a.jsxs("div",{className:"space-y-1",children:[a.jsx("p",{className:"text-xs font-medium text-muted-foreground",children:"Recent guesses:"}),a.jsx("div",{className:"text-xs space-y-1 max-h-20 overflow-y-auto",children:e.guesses.slice(-3).reverse().map((h,p)=>a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("span",{className:"text-muted-foreground",children:[h.username,":"]}),a.jsx("span",{children:h.guess})]},p))})]}),!c&&e.guesses.length===0&&a.jsxs("div",{className:"text-xs text-muted-foreground bg-muted/30 rounded-lg p-3 text-center",children:[a.jsx(br,{className:"h-4 w-4 mx-auto mb-1"}),a.jsx("p",{children:"Look at the emojis and guess what they represent!"}),a.jsx("p",{className:"mt-1",children:"Could be a movie, book, phrase, or concept."})]})]})]})},oy=[{emojis:"🦁👑🏰",answer:"The Lion King",hint:"Disney movie about royalty",funFact:"The Lion King was the highest-grossing traditionally animated film until Frozen!"},{emojis:"🕷️👨🏠",answer:"Spider-Man",hint:"Superhero with web powers",funFact:"Spider-Man first appeared in comics in 1962 and was created by Stan Lee!"},{emojis:"⭐🛸💫",answer:"Star Wars",hint:"Space saga with lightsabers",funFact:"The first Star Wars movie was initially rejected by several studios!"},{emojis:"🍕🐢🥷",answer:"Teenage Mutant Ninja Turtles",hint:"Four reptilian heroes",funFact:"The TMNT were originally created as a parody of comic book tropes!"},{emojis:"🏃‍♀️🍫🏭",answer:"Charlie and the Chocolate Factory",hint:"Sweet adventure story",funFact:"Roald Dahl wrote this after working for a chocolate company!"},{emojis:"❄️👸🏰",answer:"Frozen",hint:"Disney movie about sisterly love",funFact:"Let It Go was originally written as a villain song!"},{emojis:"🧙‍♂️💍🌋",answer:"Lord of the Rings",hint:"Fantasy epic about destroying jewelry",funFact:"Tolkien invented entire languages for this story!"},{emojis:"🦈🏊‍♀️🩸",answer:"Jaws",hint:"Classic thriller about ocean danger",funFact:"The mechanical shark barely worked during filming!"}],_L=e=>{const{user:t}=ge(),[r,n]=m.useState([]),[s,o]=m.useState(!0),i=m.useRef(new Map),l=3e4,c=m.useCallback(async(h=!1)=>{try{o(!0);const p=`${e}-${t==null?void 0:t.id}`,g=Date.now();if(!h&&i.current.has(p)){const _=i.current.get(p);if(_&&g-_.timestamp<l)return console.log("Using cached messages for group:",e),n(_.data),o(!1),_.data}console.log("Fetching messages for group:",e);const{data:v,error:y}=await E.from("chat_messages").select(`
          id,
          content,
          message_type,
          gif_url,
          voice_audio_url,
          voice_transcription,
          created_at,
          user_id,
          profiles!inner(
            user_id,
            username,
            full_name,
            avatar_url,
            mood_emoji
          )
        `).eq("group_id",e).order("created_at",{ascending:!0}).limit(50);if(y)throw console.error("Error fetching messages:",y),y;const x=(v==null?void 0:v.map(_=>_.id))||[],{data:w,error:b}=await E.from("message_reactions").select("message_id, emoji, user_id").in("message_id",x);b&&console.warn("Error fetching reactions:",b),console.log("Messages fetched:",(v==null?void 0:v.length)||0);const j=(v==null?void 0:v.map(_=>{const N=((w==null?void 0:w.filter(P=>P.message_id===_.id))||[]).reduce((P,T)=>{const M=P.find(G=>G.emoji===T.emoji);return M?(M.count+=1,M.userIds.push(T.user_id)):P.push({emoji:T.emoji,count:1,userIds:[T.user_id]}),P},[]),k=_.profiles,C=(k==null?void 0:k.full_name)||(k==null?void 0:k.username)||"Unknown User";return{id:_.id,content:_.content,messageType:_.message_type,gifUrl:_.gif_url,voiceAudioUrl:_.voice_audio_url,voiceTranscription:_.voice_transcription,username:C,timestamp:new Date(_.created_at),userId:_.user_id,reactions:N}}))||[];console.log("Transformed messages:",j.length),n(j),i.current.set(p,{data:j,timestamp:g})}catch(p){console.error("Error fetching messages:",p),Ur.error("Failed to load messages")}finally{o(!1)}},[e,t==null?void 0:t.id]),u=m.useCallback(()=>{console.log("Setting up real-time subscription for group:",e);const h=`chat-${e}-${Date.now()}`,p=E.channel(h).on("postgres_changes",{event:"INSERT",schema:"public",table:"chat_messages",filter:`group_id=eq.${e}`},async g=>{console.log("🆕 NEW MESSAGE RECEIVED:",g.new);try{const{data:v}=await E.from("profiles").select("user_id, username, full_name, avatar_url, mood_emoji").eq("user_id",g.new.user_id).single();if(v){const y=v,x=(y==null?void 0:y.full_name)||(y==null?void 0:y.username)||"Unknown User",w={id:g.new.id,content:g.new.content,messageType:g.new.message_type,gifUrl:g.new.gif_url,voiceAudioUrl:g.new.voice_audio_url,voiceTranscription:g.new.voice_transcription,username:x,timestamp:new Date(g.new.created_at),userId:g.new.user_id,reactions:[]};n(b=>[...b,w])}else setTimeout(()=>c(),100)}catch(v){console.error("Error fetching profile for new message:",v),setTimeout(()=>c(),100)}}).on("postgres_changes",{event:"INSERT",schema:"public",table:"message_reactions"},g=>{console.log("👍 NEW REACTION:",g.new),setTimeout(()=>c(),100)}).on("postgres_changes",{event:"DELETE",schema:"public",table:"message_reactions"},g=>{console.log("👎 REACTION REMOVED:",g.old),setTimeout(()=>c(),100)}).subscribe(g=>{console.log("📡 Subscription status:",g)});return()=>{console.log("🧹 Cleaning up subscription:",h),E.removeChannel(p)}},[e,c]);return m.useEffect(()=>{if(e)return console.log("🚀 Setting up chat for group:",e),c(),u()},[e,c,u]),{messages:r,loading:s,addMessage:async h=>{if(!t)return console.error("No user found when trying to send message"),!1;try{console.log("📤 SENDING MESSAGE:",h);const p={content:h.content,message_type:h.messageType,gif_url:h.gifUrl,voice_audio_url:h.voiceAudioUrl,voice_transcription:h.voiceTranscription,user_id:t.id,group_id:e};console.log("💾 Inserting into database:",p);const{data:g,error:v}=await E.from("chat_messages").insert(p).select();if(v)throw console.error("❌ Database error:",v),v;if(console.log("✅ Message inserted successfully:",g),e&&e.trim()!=="")try{await E.rpc("track_karma_activity",{p_user_id:t.id,p_group_id:e,p_activity_type:"message",p_points:1,p_description:"Sent a message",p_multiplier:1})}catch(y){console.warn("Failed to track karma for message:",y)}else console.warn("Cannot track karma for message: invalid groupId",{groupId:e});return!0}catch(p){return console.error("💥 Error adding message:",p),Ur.error("Failed to send message"),!1}},addReaction:async(h,p)=>{if(!t)return!1;try{console.log("Adding reaction:",{messageId:h,emoji:p,userId:t.id});const{data:g}=await E.from("chat_messages").select("group_id").eq("id",h).single(),{data:v}=await E.from("message_reactions").select("id").eq("message_id",h).eq("user_id",t.id).eq("emoji",p).maybeSingle();if(v){const{error:y}=await E.from("message_reactions").delete().eq("id",v.id);if(y)throw y;console.log("Reaction removed")}else{const{error:y}=await E.from("message_reactions").insert({message_id:h,user_id:t.id,emoji:p});if(y)throw y;if(console.log("Reaction added"),g!=null&&g.group_id&&g.group_id.trim()!=="")try{await E.rpc("track_karma_activity",{p_user_id:t.id,p_group_id:g.group_id,p_activity_type:"reaction",p_points:1,p_description:"Gave a reaction",p_multiplier:1})}catch(x){console.warn("Failed to track karma for reaction:",x)}else console.warn("Cannot track karma for reaction: invalid group_id",{group_id:g==null?void 0:g.group_id})}return!0}catch(g){return console.error("Error handling reaction:",g),Ur.error("Failed to add reaction"),!1}},refetch:c}},NL=(e,t)=>{const[r,n]=m.useState([]),s=m.useRef(),o=m.useRef(!1);m.useEffect(()=>{if(!e)return;const u=E.channel(`typing-${e}`).on("presence",{event:"sync"},()=>{const d=u.presenceState(),h=[];Object.keys(d).forEach(p=>{if(p!==t){const g=d[p];if(g.length>0){const v=g[0];v.typing&&Date.now()-v.timestamp<3e3&&h.push({userId:p,username:v.username,timestamp:v.timestamp})}}}),n(h)}).subscribe(),f=setInterval(()=>{n(d=>d.filter(h=>Date.now()-h.timestamp<3e3))},1e3);return()=>{E.removeChannel(u),clearInterval(f)}},[e,t]);const i=async u=>{if(o.current)return;o.current=!0,await E.channel(`typing-${e}`).track({typing:!0,username:u,timestamp:Date.now()})},l=async()=>{if(!o.current)return;o.current=!1,await E.channel(`typing-${e}`).untrack()};return{typingUsers:r,handleTyping:u=>{i(u),s.current&&clearTimeout(s.current),s.current=setTimeout(()=>{l()},2e3)},stopTyping:l}},SL=e=>{const{user:t}=ge(),{toast:r}=Be(),[n,s]=m.useState([]),[o,i]=m.useState(!0);m.useEffect(()=>{e&&(l(),c())},[e]);const l=async()=>{try{i(!0),s([])}catch(d){console.error("Error fetching pinned messages:",d)}finally{i(!1)}},c=()=>()=>{};return{pinnedMessages:n,loading:o,pinMessage:async(d,h,p,g,v,y)=>{if(!t)return!1;try{const x={id:`pinned-${Date.now()}`,messageId:d,content:h,username:p,pinnedBy:t.id,pinnedAt:new Date,messageType:g,gifUrl:v,voiceAudioUrl:y};return s(w=>[...w,x]),r({title:"Message Pinned",description:"Message has been pinned to the top of the chat."}),!0}catch(x){return console.error("Error pinning message:",x),r({title:"Pin Failed",description:"Failed to pin message. Please try again.",variant:"destructive"}),!1}},unpinMessage:async d=>{if(!t)return!1;try{return s(h=>h.filter(p=>p.id!==d)),r({title:"Message Unpinned",description:"Message has been removed from pinned messages."}),!0}catch(h){return console.error("Error unpinning message:",h),r({title:"Unpin Failed",description:"Failed to unpin message. Please try again.",variant:"destructive"}),!1}}}},kL=e=>{const{user:t}=ge(),[r,n]=m.useState(new Set),[s,o]=m.useState(!1),i=m.useRef(null),l=m.useCallback(async()=>{if(!(!(t!=null&&t.id)||!e))try{o(!0);const{data:d,error:h}=await E.from("user_cleared_messages").select("message_id").eq("user_id",t.id).eq("group_id",e);if(h)throw h;const p=(d==null?void 0:d.map(g=>g.message_id))||[];n(new Set(p))}catch(d){console.error("Error loading cleared messages:",d)}finally{o(!1)}},[t==null?void 0:t.id,e]),c=m.useCallback(async d=>{if(!(!(t!=null&&t.id)||!e||d.length===0))try{o(!0);const h=d.map(g=>({user_id:t.id,group_id:e,message_id:g})),{error:p}=await E.from("user_cleared_messages").upsert(h,{onConflict:"user_id,group_id,message_id",ignoreDuplicates:!0});if(p)throw p;return n(g=>{const v=new Set(g);return d.forEach(y=>v.add(y)),v}),!0}catch(h){return console.error("Error clearing messages:",h),!1}finally{o(!1)}},[t==null?void 0:t.id,e]),u=m.useCallback(d=>r.has(d),[r]),f=m.useCallback(async()=>{if(t!=null&&t.id)try{const{error:d}=await E.from("user_cleared_messages").delete().eq("user_id",t.id);if(d)throw d;n(new Set)}catch(d){console.error("Error clearing all cleared messages:",d)}},[t==null?void 0:t.id]);return m.useEffect(()=>{if(t!=null&&t.id&&e){const d=t.id+"_"+Date.now();i.current!==d&&(n(new Set),i.current=d),l()}},[l,t==null?void 0:t.id,e]),m.useEffect(()=>{t!=null&&t.id||(n(new Set),i.current=null)},[t==null?void 0:t.id]),m.useEffect(()=>{const d=()=>{n(new Set),i.current=null};return window.addEventListener("auth:logout",d),()=>window.removeEventListener("auth:logout",d)},[]),{clearedMessageIds:r,loading:s,clearMessages:c,isMessageCleared:u,loadClearedMessages:l,clearAllClearedMessages:f}},CL=e=>{const{user:t}=ge(),{trackKarmaActivity:r}=ul(),[n,s]=m.useState([]),[o,i]=m.useState([]),[l,c]=m.useState([]),[u,f]=m.useState(!1),d=m.useCallback(async()=>{if(!(!e||!(t!=null&&t.id)))try{f(!0);const{data:_,error:S}=await E.from("user_cleared_messages").select("message_id").eq("user_id",t.id).eq("group_id",e);if(S)throw S;const N=(_==null?void 0:_.map(Y=>Y.message_id))||[];let k=E.from("this_or_that_games").select(`
          *,
          this_or_that_votes (
            user_id,
            choice
          )
        `).eq("group_id",e).eq("is_active",!0).gt("expires_at",new Date().toISOString());N.length>0&&(k=k.not("id","in",`(${N.join(",")})`));const{data:C,error:P}=await k.order("created_at",{ascending:!1});if(P)throw P;let T=E.from("emoji_riddle_games").select(`
          *,
          emoji_riddle_guesses (
            user_id,
            guess,
            created_at
          )
        `).eq("group_id",e).eq("is_active",!0).gt("expires_at",new Date().toISOString());N.length>0&&(T=T.not("id","in",`(${N.join(",")})`));const{data:M,error:G}=await T.order("created_at",{ascending:!1});if(G)throw G;let $=E.from("truth_lie_games").select(`
          *,
          truth_lie_guesses (
            user_id,
            guessed_lie_number,
            is_correct,
            created_at
          )
        `).eq("group_id",e).eq("is_active",!0).gt("expires_at",new Date().toISOString());N.length>0&&($=$.not("id","in",`(${N.join(",")})`));const{data:Q,error:H}=await $.order("created_at",{ascending:!1});if(H)throw H;s(C||[]),i(M||[]),c(Q||[])}catch(_){console.error("Error loading games:",_)}finally{f(!1)}},[e]),h=m.useCallback(async(_,S,N,k=5)=>{if(!(t!=null&&t.id)||!e)return console.error("Missing user ID or group ID for game creation"),null;if(!(_!=null&&_.trim())||!(S!=null&&S.trim())||!(N!=null&&N.trim()))return console.error("Invalid game data: missing required fields",{question:_,optionA:S,optionB:N}),null;try{const{data:C,error:P}=await E.from("this_or_that_games").insert({group_id:e,created_by:t.id,question:_.trim(),option_a:S.trim(),option_b:N.trim(),expires_at:new Date(Date.now()+k*60*1e3).toISOString()}).select().single();if(P)throw console.error("Supabase error creating This or That game:",P),P;return await r("game_participation",2,"Created This or That game",1,e),s(T=>[C,...T]),C}catch(C){return console.error("Error creating This or That game:",C),null}},[t==null?void 0:t.id,e,r]),p=m.useCallback(async(_,S,N,k,C=5)=>{if(!(t!=null&&t.id)||!e)return null;try{const{data:P,error:T}=await E.from("emoji_riddle_games").insert({group_id:e,created_by:t.id,emojis:_,answer:S,hint:N,fun_fact:k,expires_at:new Date(Date.now()+C*60*1e3).toISOString()}).select().single();if(T)throw T;return await r("game_participation",2,"Created Emoji Riddle game",1,e),i(M=>[P,...M]),P}catch(P){return console.error("Error creating Emoji Riddle game:",P),null}},[t==null?void 0:t.id,e,r]),g=m.useCallback(async(_,S,N=5)=>{if(!(t!=null&&t.id)||!e||_.length!==3)return null;try{const{data:k,error:C}=await E.from("truth_lie_games").insert({group_id:e,created_by:t.id,statement_1:_[0],statement_2:_[1],statement_3:_[2],lie_statement_number:S,expires_at:new Date(Date.now()+N*60*1e3).toISOString()}).select().single();if(C)throw C;return await r("game_participation",2,"Created Two Truths and a Lie game",1,e),c(P=>[k,...P]),k}catch(k){return console.error("Error creating Truth Lie game:",k),null}},[t==null?void 0:t.id,e,r]),v=m.useCallback(async(_,S)=>{if(!(t!=null&&t.id)||!e)return!1;try{const{error:N}=await E.from("this_or_that_votes").insert({game_id:_,user_id:t.id,choice:S});if(N)throw N;return await r("game_participation",2,"Voted on This or That game",1,e),await d(),!0}catch(N){return console.error("Error voting on This or That:",N),!1}},[t==null?void 0:t.id,e,d,r]),y=m.useCallback(async(_,S)=>{if(!(t!=null&&t.id)||!e)return!1;try{const{error:N}=await E.from("emoji_riddle_guesses").insert({game_id:_,user_id:t.id,guess:S.trim()});if(N)throw N;return await r("game_participation",2,"Guessed Emoji Riddle",1,e),await d(),!0}catch(N){return console.error("Error submitting riddle guess:",N),!1}},[t==null?void 0:t.id,e,d,r]),x=m.useCallback(async(_,S)=>{if(!(t!=null&&t.id)||!e)return!1;try{const{data:N,error:k}=await E.from("truth_lie_games").select("lie_statement_number").eq("id",_).single();if(k)throw k;const C=S===N.lie_statement_number,{error:P}=await E.from("truth_lie_guesses").insert({game_id:_,user_id:t.id,guessed_lie_number:S,is_correct:C});if(P)throw P;return await r(C?"game_win":"game_participation",C?5:2,C?"Correctly guessed Two Truths and a Lie":"Guessed Two Truths and a Lie",1,e),await d(),!0}catch(N){return console.error("Error submitting truth lie guess:",N),!1}},[t==null?void 0:t.id,e,d,r]),w=m.useCallback(async(_,S)=>{if(!e)return!1;try{let N="";switch(_){case"thisorthat":N="this_or_that_games";break;case"emojiriddle":N="emoji_riddle_games";break;case"twoTruths":N="truth_lie_games";break;default:return!1}const{error:k}=await E.from(N).update({is_active:!1}).eq("id",S).eq("group_id",e);if(k)throw k;switch(_){case"thisorthat":s(C=>C.filter(P=>P.id!==S));break;case"emojiriddle":i(C=>C.filter(P=>P.id!==S));break;case"twoTruths":c(C=>C.filter(P=>P.id!==S));break}return!0}catch(N){return console.error("Error ending game:",N),!1}},[e]),b=m.useCallback(async(_,S)=>{if(!e)return!1;try{switch(_){case"thisorthat":await E.from("this_or_that_votes").delete().eq("game_id",S),await E.from("this_or_that_games").delete().eq("id",S).eq("group_id",e);break;case"emojiriddle":await E.from("emoji_riddle_guesses").delete().eq("game_id",S),await E.from("emoji_riddle_games").delete().eq("id",S).eq("group_id",e);break;case"twoTruths":await E.from("truth_lie_guesses").delete().eq("game_id",S),await E.from("truth_lie_games").delete().eq("id",S).eq("group_id",e);break}switch(_){case"thisorthat":s(N=>N.filter(k=>k.id!==S));break;case"emojiriddle":i(N=>N.filter(k=>k.id!==S));break;case"twoTruths":c(N=>N.filter(k=>k.id!==S));break}return console.log(`Game data deleted: ${_} (${S})`),!0}catch(N){return console.error("Error deleting game data:",N),!1}},[e]),j=m.useCallback(async()=>{if(e)try{const _=new Date().toISOString(),{data:S,error:N}=await E.from("this_or_that_games").select("id").eq("group_id",e).eq("is_active",!0).lt("expires_at",_);if(N)throw N;for(const M of S||[])await b("thisorthat",M.id);const{data:k,error:C}=await E.from("emoji_riddle_games").select("id").eq("group_id",e).eq("is_active",!0).lt("expires_at",_);if(C)throw C;for(const M of k||[])await b("emojiriddle",M.id);const{data:P,error:T}=await E.from("truth_lie_games").select("id").eq("group_id",e).eq("is_active",!0).lt("expires_at",_);if(T)throw T;for(const M of P||[])await b("twoTruths",M.id);console.log("Expired games cleaned up")}catch(_){console.error("Error cleaning up expired games:",_)}},[e,b]);return m.useEffect(()=>{d()},[d]),m.useEffect(()=>{j();const _=setInterval(j,5*60*1e3);return()=>clearInterval(_)},[j]),{thisOrThatGames:n,emojiRiddleGames:o,truthLieGames:l,loading:u,createThisOrThatGame:h,createEmojiRiddleGame:p,createTruthLieGame:g,voteThisOrThat:v,submitRiddleGuess:y,submitTruthLieGuess:x,endGame:w,deleteGameData:b,cleanupExpiredGames:j,loadGames:d}},iy={enabledGames:{thisOrThat:!0,emojiRiddle:!0,twoTruths:!0},gameDuration:5},EL=()=>{const{user:e}=ge(),[t,r]=m.useState(iy),[n,s]=m.useState(!1),o=m.useCallback(async()=>{if(e!=null&&e.id)try{s(!0);const{data:f,error:d}=await E.from("user_game_preferences").select("enabled_games, game_duration").eq("user_id",e.id).maybeSingle();if(d)throw d;f?r({enabledGames:{thisOrThat:f.enabled_games.thisOrThat??!0,emojiRiddle:f.enabled_games.emojiRiddle??!0,twoTruths:f.enabled_games.twoTruths??!0},gameDuration:f.game_duration??5}):await i(iy)}catch(f){console.error("Error loading game preferences:",f)}finally{s(!1)}},[e==null?void 0:e.id]),i=m.useCallback(async f=>{if(!(e!=null&&e.id))return!1;try{s(!0);const{error:d}=await E.from("user_game_preferences").upsert({user_id:e.id,enabled_games:f.enabledGames,game_duration:f.gameDuration,updated_at:new Date().toISOString()},{onConflict:"user_id"});if(d)throw d;return r(f),!0}catch(d){return console.error("Error saving game preferences:",d),!1}finally{s(!1)}},[e==null?void 0:e.id]),l=m.useCallback(async(f,d)=>{const h={...t,[f]:d};return await i(h)},[t,i]),c=m.useCallback(async(f,d)=>{const h={...t,enabledGames:{...t.enabledGames,[f]:d}};return await i(h)},[t,i]),u=m.useCallback(async f=>{const d=Math.min(10,Math.max(1,f));return await l("gameDuration",d)},[l]);return m.useEffect(()=>{o()},[o]),{preferences:t,loading:n,savePreferences:i,updatePreference:l,updateEnabledGames:c,updateGameDuration:u,loadPreferences:o}},PL=()=>{const{user:e}=ge(),[t,r]=m.useState({user:null,group:null,chat:[],loading:!1,error:null});m.useEffect(()=>{e&&n()},[e]);const n=async()=>{if(e){r(f=>({...f,loading:!0,error:null}));try{const[f,d]=await Promise.all([s(),o()]),h=f,p=d;let g=[];p&&(g=await i(p.id)),r({user:h,group:p,chat:g,loading:!1,error:null})}catch(f){console.error("Error loading initial data:",f),r(d=>({...d,loading:!1,error:"Failed to load app data"}))}}},s=async()=>{if(!e)return null;const{data:f,error:d}=await E.from("profiles").select("*").eq("user_id",e.id).single();if(d)throw d;return{id:f.user_id,username:f.username,personality:f.personality||[],genres:f.genres||[],mood:f.mood||5,mood_emoji:f.mood_emoji}},o=async()=>{if(!e)return null;const{data:f,error:d}=await E.from("group_members").select("group_id").eq("user_id",e.id).single();if(d||!f)return null;const{data:h,error:p}=await E.from("groups").select("*").eq("id",f.group_id).single();if(p)throw p;return{id:h.id,name:h.name,vibe_label:h.vibe_label,current_members:h.current_members,max_members:h.max_members,lifecycle_stage:h.lifecycle_stage}},i=async f=>{const{data:d,error:h}=await E.from("chat_messages").select(`
        id,
        content,
        message_type,
        gif_url,
        voice_audio_url,
        voice_transcription,
        created_at,
        user_id,
        profiles!inner(
          user_id,
          username,
          full_name,
          avatar_url,
          mood_emoji
        )
      `).eq("group_id",f).order("created_at",{ascending:!1}).limit(50);if(h)throw h;return!d||d.length===0?[]:d.map(p=>{const g=p.profiles,v=(g==null?void 0:g.full_name)||(g==null?void 0:g.username)||"Unknown User";return{id:p.id,content:p.content,messageType:p.message_type,gifUrl:p.gif_url,voiceAudioUrl:p.voice_audio_url,voiceTranscription:p.voice_transcription,username:v,timestamp:new Date(p.created_at),userId:p.user_id,reactions:[]}}).reverse()};return{...t,loadInitialData:n,updateChatMessages:f=>{r(d=>({...d,chat:f}))},appendMessage:f=>{r(d=>({...d,chat:[...d.chat,f]}))},updateGroupInfo:f=>{r(d=>({...d,group:d.group?{...d.group,...f}:null}))}}},TL=({groupId:e,onNewMessage:t,onReactionUpdate:r,onOnlineUsersUpdate:n})=>{const{user:s}=ge(),[o,i]=m.useState(!1),l=m.useRef(null),c=m.useRef(!0),u=m.useCallback(()=>{l.current&&(console.log("🧹 Cleaning up real-time subscription"),E.removeChannel(l.current),l.current=null),i(!1)},[]),f=m.useCallback(async p=>{if(!c.current)return;const g=p.new;try{const{data:v}=await E.from("profiles").select("username").eq("user_id",g.user_id).single(),y={id:g.id,content:g.content,messageType:g.message_type,gifUrl:g.gif_url,voiceAudioUrl:g.voice_audio_url,voiceTranscription:g.voice_transcription,username:(v==null?void 0:v.username)||"Unknown User",timestamp:new Date(g.created_at),userId:g.user_id,reactions:[]};t(y)}catch(v){console.error("Error processing new message:",v)}},[t]),d=m.useCallback(async p=>{if(c.current)try{const g=p.presence||{},v=Object.keys(g);if(v.length===0){n(new Map);return}const{data:y}=await E.from("profiles").select("user_id, username, last_seen_at, show_online_status, is_online").in("user_id",v),x=new Map;y==null||y.forEach(w=>{const b=g[w.user_id],j=b&&b.length>0;x.set(w.user_id,{user_id:w.user_id,username:w.username,last_seen_at:w.last_seen_at,isOnline:j&&w.show_online_status,showOnlineStatus:w.show_online_status})}),n(x)}catch(g){console.error("Error processing online status update:",g)}},[n]),h=m.useCallback(()=>{if(!e||!(s!=null&&s.id)||l.current)return;console.log("🔌 Connecting to real-time chat...");const p=E.channel(`chat-${e}`,{config:{presence:{key:s.id}}});p.on("postgres_changes",{event:"INSERT",schema:"public",table:"chat_messages",filter:`group_id=eq.${e}`},f).on("postgres_changes",{event:"*",schema:"public",table:"message_reactions",filter:`group_id=eq.${e}`},r).on("presence",{event:"sync"},d).on("presence",{event:"join"},d).on("presence",{event:"leave"},d).subscribe(g=>{console.log("📡 Subscription status:",g),g==="SUBSCRIBED"?(i(!0),console.log("✅ Real-time chat connected")):(g==="CHANNEL_ERROR"||g==="TIMED_OUT")&&(i(!1),console.log("❌ Real-time chat disconnected"))}),l.current=p,p.track({user_id:s.id,online_at:new Date().toISOString()})},[e,s==null?void 0:s.id,f,r,d]);return m.useEffect(()=>(e&&(s!=null&&s.id)&&h(),()=>{c.current=!1,u()}),[e,s==null?void 0:s.id]),m.useEffect(()=>()=>{c.current=!1,u()},[]),{isConnected:o,reconnect:h,disconnect:u}},RL=()=>{const[e,t]=m.useState([]),r=m.useCallback((o,i,l)=>{const c={id:crypto.randomUUID(),question:o,options:i.map(u=>({id:crypto.randomUUID(),text:u,votes:0,voters:[]})),createdBy:l,createdAt:new Date,isActive:!0};return t(u=>[...u,c]),c},[]),n=m.useCallback((o,i,l)=>{t(c=>c.map(u=>{if(u.id!==o)return u;const f=u.options.map(d=>{const h=d.voters.includes(l),p=d.id===i;return h&&!p?{...d,voters:d.voters.filter(g=>g!==l),votes:d.votes-1}:!h&&p?{...d,voters:[...d.voters,l],votes:d.votes+1}:d});return{...u,options:f}}))},[]),s=m.useCallback(o=>{t(i=>i.map(l=>l.id===o?{...l,isActive:!1}:l))},[]);return{polls:e,createPoll:r,votePoll:n,closePoll:s}},ML=()=>{const[e,t]=m.useState([]),r=m.useCallback(o=>{const i={id:crypto.randomUUID(),name:o,songs:[],createdAt:new Date,collaborative:!0};return t(l=>[...l,i]),i},[]),n=m.useCallback((o,i,l)=>{const u=(d=>{if(d.includes("spotify.com"))return{title:"Spotify Track",artist:"Unknown Artist",spotifyUrl:d};const h=d.split(" ");if(h.length>=2){const p=h.slice(0,-1).join(" "),g=h[h.length-1];return{title:p,artist:g}}return{title:d,artist:"Unknown Artist"}})(i),f={id:crypto.randomUUID(),title:u.title,artist:u.artist,addedBy:l,addedAt:new Date,spotifyUrl:u.spotifyUrl};return t(d=>d.map(h=>h.id===o?{...h,songs:[...h.songs,f]}:h)),f},[]),s=m.useCallback(()=>e.find(o=>o.collaborative)||null,[e]);return{playlists:e,createPlaylist:r,addSongToPlaylist:n,getActivePlaylist:s}},AL=()=>{const[e,t]=m.useState([]),r=m.useCallback((s,o)=>{const i=new Date,l=new Date(i.getTime()+30*60*1e3),c={id:crypto.randomUUID(),question:s,options:o.map(u=>({id:crypto.randomUUID(),text:u,votes:0,voters:[]})),createdAt:i,expiresAt:l,isActive:!0};return t(u=>[...u,c]),c},[]),n=m.useCallback((s,o,i)=>{t(l=>l.map(c=>{if(c.id!==s)return c;const u=c.options.map(f=>{const d=f.voters.includes(i),h=f.id===o;return d&&!h?{...f,voters:f.voters.filter(p=>p!==i),votes:f.votes-1}:!d&&h?{...f,voters:[...f.voters,i],votes:f.votes+1}:f});return{...c,options:u}}))},[]);return{prompts:e,createPrompt:r,votePrompt:n}},DL=()=>{const[e,t]=m.useState([]),[r,n]=m.useState(!0);m.useEffect(()=>{s()},[]);const s=async()=>{try{const{data:i,error:l}=await E.from("daily_prompts").select("*").eq("is_active",!0).gt("expires_at",new Date().toISOString()).order("created_at",{ascending:!1});if(l){console.error("Error fetching daily prompts:",l);return}t((i==null?void 0:i.map(c=>({id:c.id,prompt_text:c.prompt_text,prompt_type:c.prompt_type,expires_at:new Date(c.expires_at),created_at:new Date(c.created_at)})))||[])}catch(i){console.error("Error fetching daily prompts:",i)}finally{n(!1)}};return{prompts:e,loading:r,getTodaysPrompt:()=>{const i=new Date;i.setHours(0,0,0,0);const l=e.filter(c=>{const u=new Date(c.created_at);return u.setHours(0,0,0,0),u.getTime()===i.getTime()});return l.length>0?l[0]:null},refresh:s}},ei={maxMessagesPerMinute:20,maxMessagesPerHour:200,cooldownPeriod:5e3},OL=()=>{const{user:e}=ge(),[t,r]=m.useState(0),[n,s]=m.useState({minute:0,hour:0});m.useEffect(()=>{const u=setInterval(()=>{s(d=>({...d,minute:0}))},6e4),f=setInterval(()=>{s(d=>({...d,hour:0}))},36e5);return()=>{clearInterval(u),clearInterval(f)}},[]);const o=u=>{const d=c(u).trim();if(!d)return{isValid:!1,error:"Message cannot be empty"};if(d.length>2e3)return{isValid:!1,error:"Message is too long (max 2000 characters)"};const h=[/(\bunion\b|\bselect\b|\binsert\b|\bupdate\b|\bdelete\b|\bdrop\b|\bcreate\b|\balter\b|\bexec\b|\bexecute\b).*(\bfrom\b|\binto\b|\bset\b|\btable\b|\bdatabase\b)/gi,/(\-\-|\#|\/\*|\*\/|\;)/g,/(\bor\b|\band\b)\s*\d+\s*=\s*\d+/gi,/(\bxp_|\bsp_|\b@@)/gi,/(\bwaitfor\b|\bdelay\b)/gi];for(const y of h)if(y.test(d))return console.warn("Potential SQL injection attempt detected:",d),{isValid:!1,error:"Message contains suspicious content"};const p=[/<.*>/g,/javascript:/gi,/vbscript:/gi,/on\w+\s*=/gi,/data:text\/html/gi,/data:application\/javascript/gi,/expression\s*\(/gi,/url\s*\(/gi,/import\s*\(/gi,/eval\s*\(/gi,/document\./gi,/window\./gi,/alert\s*\(/gi,/confirm\s*\(/gi,/prompt\s*\(/gi,/<iframe/gi,/<script/gi,/<object/gi,/<embed/gi,/<link/gi,/<style/gi];for(const y of p)if(y.test(d))return console.warn("Potential XSS attempt detected:",d),{isValid:!1,error:"Message contains invalid content"};const g=[/\b(spam|scam|phishing|malware|virus)\b/i,/\b(fuck|shit|damn|bitch|asshole|pussy|dick|cock)\b/i,/(buy\s+now|click\s+here|free\s+money|make\s+money\s+fast)/gi,/(http[s]?:\/\/[^\s]+){3,}/g,/([A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,}){2,}/g];for(const y of g)if(y.test(d))return{isValid:!1,error:"Message contains inappropriate content"};return/(.)\1{10,}/g.test(d)?{isValid:!1,error:"Message contains too many repetitive characters"}:{isValid:!0}},i=async()=>{if(!e)return!1;const u=Date.now();if(u-t<ei.cooldownPeriod)return Dt({title:"Please wait",description:"You're sending messages too quickly. Please slow down.",variant:"destructive"}),!1;if(n.minute>=ei.maxMessagesPerMinute)return Dt({title:"Rate Limit Exceeded",description:"You've sent too many messages this minute. Please wait.",variant:"destructive"}),!1;if(n.hour>=ei.maxMessagesPerHour)return Dt({title:"Rate Limit Exceeded",description:"You've sent too many messages this hour. Please wait.",variant:"destructive"}),!1;try{const{data:f,error:d}=await E.from("chat_messages").select("id").eq("user_id",e.id).gte("created_at",new Date(Date.now()-6e4).toISOString()).limit(ei.maxMessagesPerMinute);return d?(console.error("Rate limit check failed:",d),!0):f&&f.length>=ei.maxMessagesPerMinute?(Dt({title:"Rate Limit Exceeded",description:"You're sending messages too quickly. Please slow down.",variant:"destructive"}),!1):(s(h=>({minute:h.minute+1,hour:h.hour+1})),r(u),!0)}catch(f){return console.error("Rate limit check error:",f),!0}},l=u=>{try{const f=new URL(u),d=["malware.com","phishing.net","scam.org","virus.com","bit.ly","tinyurl.com","goo.gl","t.co"],h=["http:","https:"],p=f.hostname.toLowerCase();return h.includes(f.protocol)?d.some(v=>p.includes(v))?{isValid:!1,error:"URL is not allowed"}:/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/.test(p)?{isValid:!1,error:"IP addresses are not allowed"}:{isValid:!0}:{isValid:!1,error:"Only HTTP and HTTPS URLs are allowed"}}catch{return{isValid:!1,error:"Invalid URL format"}}},c=u=>typeof u!="string"?"":u.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,"").replace(/<iframe\b[^<]*(?:(?!<\/iframe>)<[^<]*)*<\/iframe>/gi,"").replace(/<object\b[^<]*(?:(?!<\/object>)<[^<]*)*<\/object>/gi,"").replace(/<embed\b[^<]*(?:(?!<\/embed>)<[^<]*)*<\/embed>/gi,"").replace(/<link\b[^<]*(?:(?!<\/link>)<[^<]*)*<\/link>/gi,"").replace(/<style\b[^<]*(?:(?!<\/style>)<[^<]*)*<\/style>/gi,"").replace(/<[^>]*>/g,"").replace(/javascript:/gi,"").replace(/vbscript:/gi,"").replace(/data:text\/html/gi,"").replace(/data:application\/javascript/gi,"").replace(/on\w+\s*=/gi,"").replace(/expression\s*\(/gi,"").replace(/url\s*\(/gi,"").replace(/import\s*\(/gi,"").replace(/eval\s*\(/gi,"").replace(/document\./gi,"").replace(/window\./gi,"").replace(/global\./gi,"").replace(/alert\s*\(/gi,"").replace(/confirm\s*\(/gi,"").replace(/prompt\s*\(/gi,"").replace(/\0/g,"").replace(/\s+/g," ").trim();return{validateMessageContent:o,checkRateLimit:i,validateUrl:l,sanitizeInput:c}},IL={enableMemoryMonitoring:!0,enableNetworkMonitoring:!0,enableRenderMonitoring:!0,sampleRate:.1},LL=(e={})=>{const t={...IL,...e},r=m.useRef({renderTime:0,memoryUsage:0,networkLatency:0,errorCount:0}),n=m.useRef(0),s=m.useRef(0),o=m.useCallback(()=>{t.enableRenderMonitoring&&Math.random()<t.sampleRate&&(n.current=performance.now())},[t]),i=m.useCallback(()=>{if(n.current>0){const p=performance.now()-n.current;r.current.renderTime=p,n.current=0,p>16&&console.warn(`Slow render detected: ${p.toFixed(2)}ms`)}},[]),l=m.useCallback(()=>{if(t.enableMemoryMonitoring&&"memory"in performance){const p=performance.memory;p&&(r.current.memoryUsage=p.usedJSHeapSize/1024/1024,r.current.memoryUsage>100&&console.warn(`High memory usage: ${r.current.memoryUsage.toFixed(2)}MB`))}},[t]),c=m.useCallback(()=>{t.enableNetworkMonitoring&&Math.random()<t.sampleRate&&(s.current=performance.now())},[t]),u=m.useCallback(()=>{if(s.current>0){const p=performance.now()-s.current;r.current.networkLatency=p,s.current=0,p>2e3&&console.warn(`Slow network request: ${p.toFixed(2)}ms`)}},[]),f=m.useCallback((p,g)=>{r.current.errorCount++,console.error(`Error in ${g}:`,p),typeof window<"u"&&window.gtag&&window.gtag("event","exception",{description:p.message,fatal:!1,custom_map:{context:g}})},[]),d=m.useCallback((p,g)=>{typeof window<"u"&&window.gtag&&window.gtag("event","user_action",{action:p,...g})},[]),h=m.useCallback((p,g,v)=>{typeof window<"u"&&window.gtag&&window.gtag("event","performance_metric",{metric:p,value:g,...v})},[]);return m.useEffect(()=>{if(!t.enableMemoryMonitoring)return;const p=setInterval(l,3e4);return()=>clearInterval(p)},[t.enableMemoryMonitoring,l]),m.useEffect(()=>{const p=new PerformanceObserver(g=>{for(const v of g.getEntries())v.entryType==="measure"&&h(v.name,v.duration)});return p.observe({entryTypes:["measure"]}),()=>p.disconnect()},[h]),{metrics:r.current,startRenderTimer:o,endRenderTimer:i,startNetworkTimer:c,endNetworkTimer:u,trackError:f,trackUserAction:d,trackPerformance:h,updateMemoryUsage:l}},$L=()=>{const{user:e}=ge(),{toast:t}=Be(),[r,n]=m.useState({database:!0,realtime:!0,auth:!0,storage:!0,lastChecked:new Date}),[s,o]=m.useState(navigator.onLine);m.useEffect(()=>{const l=()=>o(!0),c=()=>o(!1);return window.addEventListener("online",l),window.addEventListener("offline",c),()=>{window.removeEventListener("online",l),window.removeEventListener("offline",c)}},[]),m.useEffect(()=>{s||t({title:"Connection Lost",description:"You're currently offline. Some features may not work.",variant:"destructive"})},[s,t]);const i=async()=>{const l={database:!1,realtime:!1,auth:!1,storage:!1,lastChecked:new Date};try{const{error:c}=await E.from("profiles").select("id").limit(1);l.database=!c,l.auth=!!e||!!(await E.auth.getSession()).data.session,l.realtime=!0,l.storage=!0}catch(c){console.error("Health check failed:",c)}return n(l),l.database||t({title:"Database Connection Lost",description:"Unable to connect to the database. Please refresh the page.",variant:"destructive"}),l};return m.useEffect(()=>{i();const l=setInterval(i,3e4);return()=>clearInterval(l)},[e]),{health:r,isOnline:s,checkHealth:i}},tm=({achievement:e,size:t="md",showDetails:r=!1})=>{const n={sm:"text-lg",md:"text-2xl",lg:"text-4xl"};return r?a.jsx(W,{className:"hover:bg-accent/50 transition-colors",children:a.jsxs(J,{className:"p-4 flex items-center gap-3",children:[a.jsx("div",{className:`${n[t]} flex-shrink-0`,children:e.badge_icon}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-semibold text-sm",children:e.achievement_title}),a.jsx("p",{className:"text-xs text-muted-foreground",children:e.achievement_description}),a.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[a.jsxs(oe,{variant:"secondary",className:"text-xs",children:[e.points," pts"]}),a.jsx("span",{className:"text-xs text-muted-foreground",children:e.unlocked_at.toLocaleDateString()})]})]})]})}):a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:n[t],children:e.badge_icon}),t!=="sm"&&a.jsxs("div",{children:[a.jsx("span",{className:"text-sm font-medium",children:e.achievement_title}),a.jsx(oe,{variant:"secondary",className:"ml-2 text-xs",children:e.points})]})]})},UL=({onClose:e})=>{const{engagement:t,achievements:r,loading:n}=hn();if(n)return a.jsx(W,{className:"w-full max-w-2xl mx-auto",children:a.jsx(J,{className:"p-6",children:a.jsx("div",{className:"text-center",children:"Loading your progress..."})})});const s=t?{messages:Math.min(t.messages_sent_today/10*100,100),reactions:Math.min(t.reactions_given_today/5*100,100),tools:Math.min(t.tools_used_today/3*100,100)}:{messages:0,reactions:0,tools:0};return a.jsx("div",{className:"fixed inset-0 bg-background/80 backdrop-blur-sm z-50",children:a.jsx("div",{className:"fixed inset-4 flex items-center justify-center",children:a.jsxs(W,{className:"w-full max-w-4xl max-h-[90vh] overflow-hidden",children:[a.jsx(ue,{className:"relative",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(xs,{className:"h-6 w-6 text-primary"}),a.jsx(de,{className:"text-2xl",children:"Your Progress"})]}),a.jsx(O,{variant:"ghost",onClick:e,children:"✕"})]})}),a.jsx(J,{className:"p-6 overflow-y-auto",children:a.jsxs(id,{defaultValue:"overview",className:"space-y-6",children:[a.jsxs(fl,{className:"grid w-full grid-cols-3",children:[a.jsx(sr,{value:"overview",children:"Overview"}),a.jsx(sr,{value:"achievements",children:"Achievements"}),a.jsx(sr,{value:"progress",children:"Daily Progress"})]}),a.jsxs(ar,{value:"overview",className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[a.jsx(W,{children:a.jsxs(J,{className:"p-4 text-center",children:[a.jsx(hc,{className:"h-8 w-8 text-orange-500 mx-auto mb-2"}),a.jsx("div",{className:"text-2xl font-bold",children:(t==null?void 0:t.daily_streak)||0}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"Day Streak"})]})}),a.jsx(W,{children:a.jsxs(J,{className:"p-4 text-center",children:[a.jsx(xs,{className:"h-8 w-8 text-yellow-500 mx-auto mb-2"}),a.jsx("div",{className:"text-2xl font-bold",children:(t==null?void 0:t.achievement_points)||0}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Points"})]})}),a.jsx(W,{children:a.jsxs(J,{className:"p-4 text-center",children:[a.jsx(ln,{className:"h-8 w-8 text-blue-500 mx-auto mb-2"}),a.jsx("div",{className:"text-2xl font-bold",children:(t==null?void 0:t.messages_sent_today)||0}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"Messages Today"})]})}),a.jsx(W,{children:a.jsxs(J,{className:"p-4 text-center",children:[a.jsx(al,{className:"h-8 w-8 text-pink-500 mx-auto mb-2"}),a.jsx("div",{className:"text-2xl font-bold",children:(t==null?void 0:t.reactions_given_today)||0}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"Reactions Today"})]})})]}),a.jsxs(W,{children:[a.jsx(ue,{children:a.jsxs(de,{className:"flex items-center gap-2",children:[a.jsx(vb,{className:"h-5 w-5"}),"Recent Achievements"]})}),a.jsx(J,{children:r.length>0?a.jsx("div",{className:"space-y-2",children:r.slice(0,3).map(o=>a.jsx(tm,{achievement:o,showDetails:!0},o.id))}):a.jsx("p",{className:"text-muted-foreground text-center py-4",children:"Start chatting to unlock your first achievement!"})})]})]}),a.jsx(ar,{value:"achievements",className:"space-y-4",children:r.length>0?a.jsx("div",{className:"grid gap-3",children:r.map(o=>a.jsx(tm,{achievement:o,showDetails:!0},o.id))}):a.jsx(W,{children:a.jsxs(J,{className:"p-8 text-center",children:[a.jsx(xs,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No achievements yet"}),a.jsx("p",{className:"text-muted-foreground",children:"Start participating in your group to unlock achievements!"})]})})}),a.jsxs(ar,{value:"progress",className:"space-y-6",children:[a.jsxs(W,{children:[a.jsx(ue,{children:a.jsxs(de,{className:"flex items-center gap-2",children:[a.jsx(ab,{className:"h-5 w-5"}),"Today's Goals"]})}),a.jsxs(J,{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[a.jsx("span",{children:"Messages (Goal: 10)"}),a.jsxs("span",{children:[(t==null?void 0:t.messages_sent_today)||0,"/10"]})]}),a.jsx(Ya,{value:s.messages})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[a.jsx("span",{children:"Reactions (Goal: 5)"}),a.jsxs("span",{children:[(t==null?void 0:t.reactions_given_today)||0,"/5"]})]}),a.jsx(Ya,{value:s.reactions})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[a.jsx("span",{children:"Tools Used (Goal: 3)"}),a.jsxs("span",{children:[(t==null?void 0:t.tools_used_today)||0,"/3"]})]}),a.jsx(Ya,{value:s.tools})]})]})]}),a.jsxs(W,{children:[a.jsx(ue,{children:a.jsx(de,{children:"Available Achievements"})}),a.jsx(J,{className:"space-y-2",children:a.jsxs("div",{className:"text-sm space-y-1",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{children:"💬"}),a.jsx("span",{children:"First Steps - Send your first message (10 pts)"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{children:"🔥"}),a.jsx("span",{children:"Getting Started - 3 day streak (25 pts)"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{children:"⭐"}),a.jsx("span",{children:"Week Warrior - 7 day streak (50 pts)"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{children:"🦋"}),a.jsx("span",{children:"Social Butterfly - 10+ reactions in one day (30 pts)"})]})]})})]})]})]})})]})})})},FL=({groupId:e,groupName:t,onClose:r})=>{const[n,s]=m.useState([]),[o,i]=m.useState(!1),{user:l}=ge(),{toast:c}=Be(),u=()=>Math.random().toString(36).substring(2,8).toUpperCase(),f=async()=>{if(l){i(!0);try{const p=u(),{data:g,error:v}=await E.from("group_invites").insert({group_id:e,inviter_id:l.id,invite_code:p,max_uses:5}).select().single();if(v){c({title:"Error",description:"Failed to create invite link",variant:"destructive"});return}const y=g,x={id:y.id,invite_code:y.invite_code,max_uses:y.max_uses,current_uses:y.current_uses,expires_at:new Date(y.expires_at),is_active:y.is_active,created_at:new Date(y.created_at)};s(w=>[x,...w]),c({title:"Invite Created!",description:"Share this code with friends to join your group"})}catch(p){console.error("Error creating invite:",p),c({title:"Error",description:"Failed to create invite link",variant:"destructive"})}finally{i(!1)}}},d=async p=>{try{const g=`Join my group "${t}" on SyncChat! Use invite code: ${p}`;await navigator.clipboard.writeText(g),c({title:"Copied!",description:"Invite message copied to clipboard"})}catch{c({title:"Error",description:"Failed to copy to clipboard",variant:"destructive"})}},h=async p=>{if(navigator.share)try{await navigator.share({title:`Join ${t} on SyncChat`,text:`Use invite code: ${p}`,url:window.location.origin})}catch{}else d(p)};return a.jsx("div",{className:"fixed inset-0 bg-background/80 backdrop-blur-sm z-50",children:a.jsx("div",{className:"fixed inset-4 flex items-center justify-center",children:a.jsxs(W,{className:"w-full max-w-md",children:[a.jsxs(ue,{children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(jh,{className:"h-5 w-5 text-primary"}),a.jsx(de,{children:"Invite Friends"})]}),a.jsx(O,{variant:"ghost",size:"sm",onClick:r,children:"✕"})]}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:["Share ",t," with your friends"]})]}),a.jsxs(J,{className:"space-y-4",children:[a.jsx(O,{onClick:f,disabled:o,className:"w-full",children:o?"Creating...":"Create New Invite"}),a.jsx("div",{className:"space-y-3",children:n.length>0?n.map(p=>a.jsx(W,{className:"border",children:a.jsxs(J,{className:"p-4 space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("div",{className:"font-mono text-lg font-bold",children:p.invite_code}),a.jsx("div",{className:"flex items-center gap-2",children:a.jsx(oe,{variant:p.is_active?"default":"secondary",className:"text-xs",children:p.is_active?"Active":"Expired"})})]}),a.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(st,{className:"h-3 w-3"}),a.jsxs("span",{children:[p.current_uses,"/",p.max_uses]})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(Ts,{className:"h-3 w-3"}),a.jsxs("span",{children:[Math.ceil((p.expires_at.getTime()-new Date().getTime())/(1e3*60*60*24)),"d left"]})]})]}),p.is_active&&a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(O,{variant:"outline",size:"sm",onClick:()=>d(p.invite_code),className:"flex-1",children:[a.jsx(m2,{className:"h-3 w-3 mr-1"}),"Copy"]}),a.jsxs(O,{size:"sm",onClick:()=>h(p.invite_code),className:"flex-1",children:[a.jsx(jh,{className:"h-3 w-3 mr-1"}),"Share"]})]})]})},p.id)):a.jsx("div",{className:"text-center py-4 text-muted-foreground",children:"No active invites. Create one to get started!"})})]})]})})})};class zL{constructor(){ze(this,"activeGame",null);ze(this,"timer",null);ze(this,"callbacks",null);ze(this,"storageKey","activeGameState");ze(this,"handleStorageChange",t=>{t.key===this.storageKey&&!t.newValue&&this.activeGame&&this.clearActiveGame()});ze(this,"handleVisibilityChange",()=>{document.hidden&&this.activeGame?(this.saveActiveGame(),this.clearTimer()):!document.hidden&&this.activeGame&&this.startTimer()});window.addEventListener("storage",this.handleStorageChange),document.addEventListener("visibilitychange",this.handleVisibilityChange),this.loadActiveGame()}saveActiveGame(){this.activeGame&&localStorage.setItem(this.storageKey,JSON.stringify(this.activeGame))}loadActiveGame(){try{const t=localStorage.getItem(this.storageKey);if(t){const r=JSON.parse(t);new Date(r.roundEndsAt)>new Date?this.activeGame={...r,roundEndsAt:new Date(r.roundEndsAt)}:this.clearActiveGame()}}catch(t){console.warn("Failed to load active game:",t),this.clearActiveGame()}}clearTimer(){this.timer&&(clearInterval(this.timer),this.timer=null)}startTimer(){!this.activeGame||!this.callbacks||(this.clearTimer(),this.timer=setInterval(()=>{var n,s,o;if(!this.activeGame)return;const t=new Date,r=Math.max(0,this.activeGame.roundEndsAt.getTime()-t.getTime());r<=0?((n=this.callbacks)==null||n.onTimeEnd(),this.clearActiveGame()):(o=(s=this.callbacks)==null?void 0:s.onTick)==null||o.call(s,r)},1e3))}startGame(t,r,n,s){if(this.activeGame)return!1;const o=new Date(Date.now()+n*60*1e3);return this.activeGame={gameType:t,gameId:r,roundEndsAt:o,duration:n},this.callbacks=s,this.saveActiveGame(),this.startTimer(),!0}endGame(){this.clearActiveGame()}clearActiveGame(){this.clearTimer(),this.activeGame=null,this.callbacks=null,localStorage.removeItem(this.storageKey)}getActiveGame(){return this.activeGame}getRemainingTime(){return this.activeGame?Math.max(0,this.activeGame.roundEndsAt.getTime()-Date.now()):0}cleanup(){this.clearActiveGame(),window.removeEventListener("storage",this.handleStorageChange),document.removeEventListener("visibilitychange",this.handleVisibilityChange)}}const ti=new zL,GL=({open:e,onOpenChange:t,groupId:r})=>{const[n,s]=m.useState(""),[o,i]=m.useState([]),[l,c]=m.useState(!1),[u,f]=m.useState(null),{user:d}=ge(),{isPremium:h,loading:p}=Ms(),{toast:g}=Be();m.useEffect(()=>{e&&d&&r&&v()},[e,d,r]);const v=async()=>{if(!(!d||!r)){c(!0),f(null);try{const{data:w,error:b}=await E.from("group_members").select(`
          id,
          user_id,
          profiles!inner(username)
        `).eq("group_id",r).eq("status","active").neq("user_id",d.id);if(b){console.error("Database error loading group members:",b),f(`Database error: ${b.message}`);return}w&&i(w.map(j=>({id:j.id,user_id:j.user_id,username:j.profiles.username})))}catch(w){console.error("Error loading group members:",w),f(`Failed to load group members: ${w instanceof Error?w.message:"Unknown error"}`),g({title:"Error",description:"Failed to load group members.",variant:"destructive"})}finally{c(!1)}}},y=async(w,b)=>{if(!h){g({title:"Premium Required",description:"Direct messaging is available exclusively for premium subscribers.",variant:"destructive"});return}try{const{error:j}=await E.from("reconnection_requests").insert({sender_id:d==null?void 0:d.id,recipient_id:w,status:"pending",message:`Hi ${b}! I'd like to start a direct conversation with you.`});if(j)throw j;const{error:_}=await E.rpc("update_user_engagement",{p_user_id:d==null?void 0:d.id,p_activity_type:"reconnect"});_&&console.error("Error updating engagement:",_),g({title:"DM Request Sent!",description:`Request sent to ${b}. You'll be notified if they accept.`}),t(!1)}catch(j){console.error("Error starting DM:",j),g({title:"Error",description:"Failed to send DM request.",variant:"destructive"})}},x=o.filter(w=>w.username.toLowerCase().includes(n.toLowerCase()));return u?a.jsx(Ht,{open:e,onOpenChange:t,children:a.jsxs(Lt,{className:"max-w-md",children:[a.jsx(nr,{children:a.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[a.jsx(Vc,{className:"h-8 w-8 text-red-500"}),a.jsx(qt,{className:"text-xl",children:"Error Loading DMs"})]})}),a.jsxs("div",{className:"space-y-6 text-center",children:[a.jsx("p",{className:"text-red-500",children:u}),a.jsx(O,{className:"w-full",onClick:()=>{f(null),v()},children:"Retry"})]})]})}):!h&&!p?a.jsx(Ht,{open:e,onOpenChange:t,children:a.jsxs(Lt,{className:"max-w-md",children:[a.jsx(nr,{children:a.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[a.jsx(Vc,{className:"h-8 w-8 text-primary"}),a.jsx(qt,{className:"text-xl",children:"Premium Feature"})]})}),a.jsxs("div",{className:"space-y-6 text-center",children:[a.jsx("p",{className:"text-muted-foreground",children:"Direct messaging is available exclusively for premium subscribers."}),a.jsxs("div",{className:"bg-primary/10 p-4 rounded-lg",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-2 justify-center",children:[a.jsx(mt,{className:"h-5 w-5 text-primary"}),a.jsx("span",{className:"font-medium",children:"Premium Benefits"})]}),a.jsxs("ul",{className:"text-sm space-y-1 text-left",children:[a.jsx("li",{children:"• Send DM requests to group members"}),a.jsx("li",{children:"• 1-on-1 private conversations"}),a.jsx("li",{children:"• No daily limits"})]})]}),a.jsx("div",{className:"space-y-3",children:a.jsx(O,{className:"w-full",onClick:()=>window.open("/success","_blank"),children:"Upgrade to Premium"})})]})]})}):a.jsx(Ht,{open:e,onOpenChange:t,children:a.jsxs(Lt,{className:"max-w-md max-h-[80vh] overflow-hidden",children:[a.jsx(nr,{children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(ln,{className:"h-6 w-6 text-primary"}),a.jsx(qt,{className:"text-xl",children:"Direct Messages"}),a.jsxs("div",{className:"flex items-center gap-1 text-xs text-primary",children:[a.jsx(mt,{className:"h-3 w-3"}),a.jsx("span",{children:"Premium"})]})]}),a.jsx(O,{variant:"ghost",size:"sm",onClick:()=>t(!1),children:a.jsx(cn,{className:"h-4 w-4"})})]})}),a.jsxs("div",{className:"relative",children:[a.jsx(bh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),a.jsx(ht,{placeholder:"Search group members...",value:n,onChange:w=>s(w.target.value),className:"pl-10"})]}),a.jsx("div",{className:"flex-1 overflow-y-auto space-y-3",children:l?a.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-2"}),a.jsx("p",{children:"Loading group members..."})]}):x.length===0?a.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[a.jsx(st,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),a.jsx("p",{children:"No group members found"}),a.jsx("p",{className:"text-sm",children:"Join a group to start sending DMs"})]}):x.map(w=>a.jsx(W,{className:"p-4 hover:shadow-md transition-shadow",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"font-medium",children:w.username}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Group member"})]}),a.jsxs(O,{variant:"outline",size:"sm",onClick:()=>y(w.user_id,w.username),children:[a.jsx(Ru,{className:"h-4 w-4 mr-2"}),"Send DM"]})]})},w.id))})]})})},bS=({groupId:e,groupName:t,groupVibe:r,memberCount:n,onBack:s,onGoHome:o})=>{const{user:i}=ge(),{toast:l}=Be(),{isPremium:c}=Ms(),u=()=>{if(!c){l({title:"Premium Required",description:"Direct messaging is available exclusively for premium subscribers. Upgrade to start private conversations!",variant:"destructive"});return}fe(!0)},f=m.useRef(null),{messages:d,loading:h,addMessage:p,addReaction:g,refetch:v}=_L(e),{typingUsers:y}=NL(e,(i==null?void 0:i.id)||""),{pinnedMessages:x,pinMessage:w,unpinMessage:b}=SL(e),{getOnlineCount:j,onlineUsers:_}=VN(e),S=j();PL();const[N,k]=m.useState(null),[C,P]=m.useState(!1),[T,M]=m.useState(null),[G,$]=m.useState(!1),[Q,H]=m.useState(!1),[Y,R]=m.useState(n),[D,B]=m.useState(!1),[I,F]=m.useState(null),[X,fe]=m.useState(!1),[ve,re]=m.useState(!1),[le,De]=m.useState(null),{clearedMessageIds:Se,clearMessages:Fe,isMessageCleared:et}=kL(e),[Rt,ne]=m.useState(0),wt=m.useCallback(U=>Se.includes(U),[Se]),{isConnected:Ee}=TL({groupId:e,onNewMessage:U=>{Gn.current&&clearTimeout(Gn.current),Gn.current=setTimeout(()=>{hd(),md()},100)},onReactionUpdate:()=>{v()},onOnlineUsersUpdate:U=>{console.log("Online users updated:",U.size)}}),{engagement:Ne,achievements:bt,trackActivity:Oe}=hn(),{trackKarmaActivity:je,trackEnhancedActivity:tt}=ul(),{getTodaysPrompt:Er}=DL(),{validateMessageContent:dr,checkRateLimit:Pr,sanitizeInput:pn}=OL(),{trackError:ee,trackUserAction:Re}=LL();$L(),Er();const{polls:jt,createPoll:gn,votePoll:Qr,closePoll:$o}=RL(),{playlists:zn,createPlaylist:Ds,addSongToPlaylist:ma,getActivePlaylist:Os}=ML(),{prompts:pa,createPrompt:fr,votePrompt:gl}=AL(),{thisOrThatGames:V,emojiRiddleGames:se,truthLieGames:ae,createThisOrThatGame:ye,createEmojiRiddleGame:me,createTruthLieGame:rt,voteThisOrThat:at,submitRiddleGuess:Mt,submitTruthLieGuess:Xt,endGame:vn,deleteGameData:Tr}=CL(e),{preferences:hr,loading:ga}=EL(),Uo=m.useCallback(async()=>{if(e)try{const{data:U}=await E.from("group_members").select("user_id").eq("group_id",e);if(U&&U.length>0){const ce=U.map(Ve=>Ve.user_id),{data:ke}=await E.from("user_engagement").select("user_id, achievement_points").in("user_id",ce);if(ke){const Ve=ke.reduce((He,Ie)=>He+(Ie.achievement_points||0),0);ne(Ve)}}}catch(U){console.error("Error loading group karma:",U),ne(0)}},[e]),ug=m.useRef(0),Gn=m.useRef(),dg=m.useRef(!1),vl=m.useRef(),hd=m.useCallback((U=!1)=>{if(!f.current)return;const ce=f.current.querySelector("[data-radix-scroll-area-viewport]");ce&&(!U&&dg.current||ce.scrollTo({top:ce.scrollHeight,behavior:"smooth"}))},[]),md=m.useCallback(()=>{if(!f.current)return;const U=f.current.querySelector("[data-radix-scroll-area-viewport]");if(!U)return;const ce=U.lastElementChild;ce&&!vl.current&&(vl.current=new IntersectionObserver(([ke])=>{dg.current=!ke.isIntersecting},{threshold:.8}),vl.current.observe(ce))},[]);m.useEffect(()=>{const U=(d==null?void 0:d.length)||0;return U>ug.current&&(ug.current=U,Gn.current&&clearTimeout(Gn.current),Gn.current=setTimeout(()=>{hd(),md()},100)),()=>{Gn.current&&clearTimeout(Gn.current)}},[d==null?void 0:d.length,hd,md]),m.useEffect(()=>()=>{var U;(U=vl.current)==null||U.disconnect()},[]);const fg=m.useCallback(async()=>{if(i!=null&&i.id)try{const{data:U,error:ce}=await E.from("profiles").select("username").eq("user_id",i.id).single();if(ce)throw ce;k(U)}catch(U){console.error("Error loading user profile:",U)}},[i==null?void 0:i.id]),hg=m.useCallback(async()=>{if(e)try{const{data:U,error:ce}=await E.from("group_members").select("user_id",{count:"exact"}).eq("group_id",e);if(ce)throw ce;U&&R(U.length)}catch(U){console.error("Error fetching member count:",U)}},[e]);m.useEffect(()=>{i&&(fg(),hg(),Uo())},[i,e,fg,hg,Uo]);const xl=(U,ce)=>{if(!N)return;if(ga){l({title:"Loading...",description:"Please wait while preferences are loading.",variant:"destructive"});return}const ke=ce||hr.gameDuration;if(console.log("Starting game with duration:",ke,"minutes"),I){l({title:"Game Already Active",description:"Please wait for the current game to finish before starting a new one.",variant:"destructive"});return}De({gameType:U,duration:ke}),re(!0)},mg=U=>{var ce,ke;if(!(!le||!N)){if(re(!1),U){if(ti.startGame(le.gameType,crypto.randomUUID(),le.duration,{onTimeEnd:async()=>{I&&await Tr(I.gameType,I.gameId),F(null),l({title:"Game Ended",description:"Round completed - game data cleaned up!"})},onTick:He=>{const Ie=ti.getActiveGame();Ie&&F({...Ie})}})){const He=ti.getActiveGame();if(He){switch(F(He),le.gameType){case"thisorthat":const Rr=ay[Math.floor(Math.random()*ay.length)],gg=((ce=Rr.options[0])==null?void 0:ce.text)||"",vg=((ke=Rr.options[1])==null?void 0:ke.text)||"";if(!gg||!vg){console.error("Invalid This or That prompt: missing options",Rr),l({title:"Game Error",description:"Failed to create game - invalid prompt data",variant:"destructive"});return}ye(Rr.question,gg,vg,le.duration);break;case"emojiriddle":const wl=oy[Math.floor(Math.random()*oy.length)];me(wl.emojis,wl.answer,wl.hint,wl.funFact,le.duration);break;case"twoTruths":const MS=["I have traveled to 5 different countries","I can speak 3 languages fluently","I have never been on a roller coaster"],AS=Math.floor(Math.random()*3)+1;rt(MS,AS,le.duration);break}Oe("tool");const Ie=Rr=>{switch(Rr){case"thisorthat":return"This or That";case"emojiriddle":return"Emoji Riddle";case"twoTruths":return"Two Truths & a Lie";default:return Rr}},Fo=Rr=>Rr===1?"1 minute":`${Rr} minutes`;l({title:"Game Started",description:`${Ie(le.gameType)} round is now active for ${Fo(le.duration)}!`})}}}else l({title:"Game Declined",description:"No problem! You can join the next game when it starts."});De(null)}},NS=async()=>{if(ti.endGame(),I&&(i!=null&&i.id)&&e)try{await E.from("user_cleared_messages").insert({user_id:i.id,group_id:e,message_id:I.gameId,cleared_at:new Date().toISOString()})}catch(U){console.error("Error clearing game for user:",U)}I&&await vn(I.gameType,I.gameId),F(null),l({title:"Left Game",description:"You've left the current game session."})},yl=U=>{if(N)switch(Oe("tool"),U){case"poll":M("create-poll");break;case"playlist":const ce=Os();M(ce?"playlist":"create-playlist");break;case"addsong":Os()?M("playlist"):l({title:"No Active Playlist",description:"Create a playlist first using /playlist",variant:"destructive"});break;case"wouldyourather":const Ve=sy[Math.floor(Math.random()*sy.length)];fr(Ve.question,Ve.options);break;case"truthslie":M("create-truthlie");break;case"start-thisorthat":xl("thisorthat");break;case"start-emojiriddle":xl("emojiriddle");break;case"start-truthslie":xl("twoTruths");break;case"game":M("game-picker");break}},SS=async(U,ce,ke)=>{if(!i||!N)return!1;const Ve=pn(U),He=dr(Ve);if(!He.isValid)return l({title:"Invalid Message",description:He.error,variant:"destructive"}),!1;if(!await Pr())return!1;P(!0);try{return await p({content:Ve,messageType:ce})?(tt("message"),Re("send_text_message"),!0):!1}catch(Ie){return console.error("Error sending message:",Ie),ee(Ie,"send_text_message"),!1}finally{P(!1)}},kS=async U=>{if(!i||!N)return!1;P(!0);try{return await p({messageType:"gif",gifUrl:U})?(Promise.resolve().then(async()=>{try{Oe("message"),Re("send_gif")}catch(ke){console.warn("Background karma tracking failed for GIF:",ke)}}),!0):!1}catch(ce){return console.error("Error sending GIF:",ce),ee(ce,"send_gif"),!1}finally{P(!1)}},CS=async U=>{if(!i||!N)return!1;P(!0);try{const ce=URL.createObjectURL(U);return await p({messageType:"voice",voiceAudioUrl:ce,voiceTranscription:"Voice message"})?(je("voice",2,"Sent voice message",1,e),!0):!1}catch(ce){return console.error("Error processing voice message:",ce),!1}finally{P(!1)}},ES=async(U,ce)=>{if(i)try{await g(U,ce)&&Oe("reaction")}catch(ke){console.error("Error handling reaction:",ke)}},PS=async U=>{await Fe([U])},TS=async()=>{const U=d.map(ke=>ke.id);await Fe(U)?(I&&(await Tr(I.gameType,I.gameId),ti.endGame(),F(null)),l({title:"Chat cleared",description:"All messages and game data have been permanently deleted"})):l({title:"Error",description:"Failed to clear messages. Please try again.",variant:"destructive"})},pg=()=>{window.location.reload()},RS=()=>{if(!N)return null;switch(T){case"create-poll":return a.jsx(gL,{onCreatePoll:(ce,ke)=>{gn(ce,ke,N.username),M(null),l({title:"Poll Created",description:"Your poll is now live in the chat!"})},onCancel:()=>M(null)});case"create-playlist":return a.jsx(xL,{onCreatePlaylist:ce=>{Ds(ce),M("playlist"),l({title:"Playlist Created",description:`${ce} is ready for songs!`})},onCancel:()=>M(null)});case"playlist":const U=Os();return U?a.jsx(vL,{playlist:U,currentUserId:(i==null?void 0:i.id)||"",onAddSong:ce=>{ma(U.id,ce,N.username),l({title:"Song Added",description:"Added to the collaborative playlist!"})}}):null;case"create-truthlie":return a.jsx(wL,{onCreateGame:ce=>{rt(ce,1),M(null),l({title:"Game Started",description:"Two Truths and a Lie is now active!"})},onCancel:()=>M(null)});case"game-picker":return a.jsx(hL,{onGameSelect:(ce,ke)=>{M(null),xl(ce,ke)},disabled:!1});default:return null}};return a.jsxs(a.Fragment,{children:[a.jsx(OI,{groupName:t}),a.jsx(cg,{open:!!T&&T!=="game-picker",onOpenChange:U=>!U&&M(null),title:"Chat Tools",className:"max-w-2xl",children:RS()}),G&&a.jsx(UL,{onClose:()=>$(!1)}),Q&&a.jsx(FL,{groupId:e,groupName:t,onClose:()=>H(!1)}),a.jsxs("div",{className:"flex flex-col min-h-screen max-w-6xl mx-auto bg-background rounded-lg shadow-lg",children:[a.jsxs("div",{className:"flex items-center justify-between p-3 sm:p-4 border-b bg-gradient-to-r from-background to-muted/30 backdrop-blur-sm sticky top-0 z-10 min-h-[60px]",children:[a.jsx("div",{className:"flex items-center gap-2 md:hidden flex-shrink-0",children:a.jsx(O,{variant:"ghost",size:"sm",onClick:s,className:"p-2 hover:bg-muted/50",children:a.jsx(mh,{className:"w-4 h-4"})})}),a.jsx("div",{className:"flex items-center gap-2 sm:gap-3 min-w-0 flex-1 overflow-hidden",children:a.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 min-w-0 flex-1",children:[a.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 rounded-full bg-gradient-to-r from-purple-500 to-blue-500 flex items-center justify-center flex-shrink-0",children:a.jsx(st,{className:"w-3 h-3 sm:w-4 sm:h-4 text-white"})}),a.jsxs("div",{className:"min-w-0 flex-1 overflow-hidden",children:[a.jsx("h2",{className:"font-semibold text-base sm:text-lg truncate text-foreground",children:t}),a.jsxs("div",{className:"flex items-center gap-1 sm:gap-2 mt-1 flex-wrap",children:[a.jsx(oe,{variant:"secondary",className:"text-xs px-1.5 sm:px-2 py-0.5 text-[10px] sm:text-xs",children:r}),Rt>0&&a.jsxs(oe,{variant:"outline",className:"text-xs px-1.5 sm:px-2 py-0.5 text-[10px] sm:text-xs",children:[Rt," ⭐"]}),S>0&&a.jsxs(oe,{variant:"secondary",className:"text-xs px-1.5 sm:px-2 py-0.5 flex items-center gap-1 text-[10px] sm:text-xs",children:[a.jsx("div",{className:"w-1.5 h-1.5 sm:w-2 sm:h-2 bg-green-500 rounded-full animate-pulse"}),a.jsxs("span",{className:"hidden sm:inline",children:[S," online"]}),a.jsx("span",{className:"sm:hidden",children:S})]}),!Ee&&a.jsxs(oe,{variant:"destructive",className:"text-xs px-1.5 sm:px-2 py-0.5 animate-pulse text-[10px] sm:text-xs",children:[a.jsx("span",{className:"hidden sm:inline",children:"Reconnecting..."}),a.jsx("span",{className:"sm:hidden",children:"..."})]})]})]})]})}),a.jsxs("div",{className:"flex items-center gap-1 sm:gap-2 flex-shrink-0",children:[a.jsx(J5,{groupId:e,memberCount:Y}),a.jsxs(rg,{children:[a.jsx(ng,{asChild:!0,children:a.jsx(O,{variant:"ghost",size:"sm",className:"h-9 w-9 p-0 rounded-full hover:bg-muted/50",title:"More options",children:a.jsx(g2,{className:"w-4 h-4"})})}),a.jsxs(fd,{align:"end",className:"w-48",children:[a.jsxs("div",{className:"md:hidden",children:[a.jsxs(xr,{onClick:pg,children:[a.jsx(Fi,{className:"w-4 h-4 mr-2"}),"Refresh Chat"]}),a.jsxs(xr,{onClick:o,children:[a.jsx(po,{className:"w-4 h-4 mr-2"}),"Go to Home"]}),a.jsxs(xr,{onClick:u,children:[a.jsx(ln,{className:"w-4 h-4 mr-2"}),"Direct Messages"]})]}),a.jsxs(xr,{onClick:TS,children:[a.jsx(v2,{className:"w-4 h-4 mr-2"}),"Clear Chat"]}),a.jsxs(xr,{children:[a.jsx(tp,{className:"w-4 h-4 mr-2"}),"Group Settings"]}),a.jsxs(xr,{children:[a.jsx(jh,{className:"w-4 h-4 mr-2"}),"Share Group"]})]})]}),a.jsxs("div",{className:"hidden md:flex items-center gap-2",children:[a.jsx(O,{variant:"ghost",size:"sm",onClick:pg,className:"h-9 w-9 p-0 rounded-full hover:bg-muted/50",title:"Refresh Chat",children:a.jsx(Fi,{className:"w-4 h-4"})}),a.jsx(O,{variant:"ghost",size:"sm",onClick:o,className:"h-9 w-9 p-0 rounded-full hover:bg-muted/50",title:"Go to Home",children:a.jsx(po,{className:"w-4 h-4"})}),a.jsx(O,{variant:"ghost",size:"sm",onClick:u,className:"h-9 w-9 p-0 rounded-full hover:bg-muted/50",title:"Direct Messages",children:a.jsx(ln,{className:"w-4 h-4"})})]}),a.jsxs(O,{variant:"outline",size:"sm",onClick:()=>B(!0),className:"h-9 px-2 sm:px-3 text-xs sm:text-sm font-medium border-red-200 text-red-600 hover:bg-red-50 hover:border-red-300",children:[a.jsx(mh,{className:"w-3 h-3 sm:w-4 sm:h-4 mr-1"}),a.jsx("span",{className:"hidden sm:inline",children:"Leave"})]})]})]}),a.jsx(_I,{pinnedMessages:x,onUnpin:b}),a.jsx(Gr,{ref:f,className:"flex-1 p-3 sm:p-4 min-h-0",children:a.jsxs("div",{className:"space-y-4",children:[h?a.jsx("div",{className:"text-center py-20",children:a.jsx(la,{size:"lg",text:"Loading messages..."})}):d.length===0?a.jsx("div",{className:"text-center py-10 sm:py-20 text-muted-foreground",children:a.jsxs("div",{className:"max-w-md mx-auto space-y-4",children:[a.jsx("h3",{className:"text-lg sm:text-xl font-medium text-foreground",children:"Ready to connect?"}),a.jsx("p",{className:"text-sm leading-relaxed px-4",children:"Start the conversation! Share what's on your mind, ask a question, or just say hello. Your group is waiting to hear from you."})]})}):d.filter(U=>!et(U.id)).map(U=>a.jsx(TI,{message:U,onReact:ES,onPin:w,onHideMessage:PS,currentUserId:i==null?void 0:i.id,groupId:e},U.id)),I&&a.jsx(pL,{game:I,onExit:NS,currentUserId:(i==null?void 0:i.id)||"",currentUsername:(N==null?void 0:N.username)||"Anonymous"}),(V.length>0||se.length>0||ae.length>0)&&a.jsxs("div",{className:"space-y-4 mt-6 pt-4 border-t",children:[ae.filter(U=>!wt(U.id)).map(U=>{const ke=(U.truth_lie_guesses||[]).map(Ve=>({userId:Ve.user_id,username:"Anonymous",guessedLieNumber:Ve.guessed_lie_number,isCorrect:Ve.is_correct,timestamp:new Date(Ve.created_at)}));return a.jsx(yL,{game:{id:U.id,createdBy:U.created_by,createdByUsername:"Anonymous",statements:[{id:"1",text:U.statement_1,isLie:U.lie_statement_number===1},{id:"2",text:U.statement_2,isLie:U.lie_statement_number===2},{id:"3",text:U.statement_3,isLie:U.lie_statement_number===3}],guesses:ke,isActive:U.is_active,expiresAt:new Date(U.expires_at)},currentUserId:(i==null?void 0:i.id)||"",currentUsername:(N==null?void 0:N.username)||"Anonymous",onGuess:async(Ve,He)=>{if(i!=null&&i.id){const Ie=parseInt(He);await Xt(Ve,Ie)?(Oe("game_participation"),l({title:"Guess submitted!",description:"Your guess has been recorded."})):l({title:"Guess failed",description:"Could not submit your guess. Please try again.",variant:"destructive"})}}},U.id)}),V.filter(U=>!wt(U.id)).map(U=>{const ce=U.this_or_that_votes||[],ke=ce.filter(He=>He.choice==="A"),Ve=ce.filter(He=>He.choice==="B");return a.jsx(bL,{prompt:{id:U.id,question:U.question,options:[{id:"A",text:U.option_a,emoji:"🍕",votes:ke.length,voters:ke.map(He=>He.user_id)},{id:"B",text:U.option_b,emoji:"🍔",votes:Ve.length,voters:Ve.map(He=>He.user_id)}],createdAt:new Date(U.created_at),expiresAt:new Date(U.expires_at),isActive:U.is_active},currentUserId:(i==null?void 0:i.id)||"",onVote:async(He,Ie)=>{i!=null&&i.id&&(await at(He,Ie)?(Oe("tool"),l({title:"Vote submitted!",description:"Your choice has been recorded."})):l({title:"Vote failed",description:"Could not submit your vote. Please try again.",variant:"destructive"}))}},U.id)}),se.filter(U=>!wt(U.id)).map(U=>{var Ve,He;const ke=(U.emoji_riddle_guesses||[]).map(Ie=>({userId:Ie.user_id,username:"Anonymous",guess:Ie.guess,timestamp:new Date(Ie.created_at),isCorrect:Ie.guess.toLowerCase().trim()===U.answer.toLowerCase().trim()}));return a.jsx(jL,{riddle:{id:U.id,emojis:U.emojis,answer:U.answer,hint:U.hint||"",funFact:U.fun_fact||"",guesses:ke,solvedBy:(Ve=ke.find(Ie=>Ie.isCorrect))==null?void 0:Ve.username,solvedAt:(He=ke.find(Ie=>Ie.isCorrect))==null?void 0:He.timestamp,createdAt:new Date(U.created_at),expiresAt:new Date(U.expires_at),isActive:U.is_active},currentUserId:(i==null?void 0:i.id)||"",currentUsername:(N==null?void 0:N.username)||"Anonymous",onGuess:async(Ie,Fo)=>{i!=null&&i.id&&(N!=null&&N.username)&&(await Mt(Ie,Fo)?(Oe("tool"),l({title:"Guess submitted!",description:"Your guess has been recorded."})):l({title:"Guess failed",description:"Could not submit your guess. Please try again.",variant:"destructive"}))}},U.id)})]})]})}),a.jsx(jI,{typingUsers:y}),T==="game-picker"&&a.jsxs("div",{className:"border-t border-border bg-muted/20 p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"text-sm font-medium text-foreground",children:"Select a Game"}),a.jsx("button",{onClick:()=>M(null),className:"text-muted-foreground hover:text-foreground text-lg",children:"✕"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[a.jsxs("button",{onClick:()=>{M(null),yl("start-truthslie")},className:"p-4 text-left rounded-lg border border-border bg-background hover:bg-muted/50 transition-colors",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("div",{className:"w-8 h-8 bg-blue-500/20 rounded-lg flex items-center justify-center",children:a.jsx("span",{className:"text-blue-500 text-sm",children:"🎯"})}),a.jsx("h4",{className:"font-medium text-foreground",children:"Two Truths & a Lie"})]}),a.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Share two true facts and one lie about yourself. Let others guess which is which!"}),a.jsxs("div",{className:"flex items-center text-xs text-blue-500",children:[a.jsx("span",{children:"Start Game"}),a.jsx(Js,{className:"w-3 h-3 ml-1"})]})]}),a.jsxs("button",{onClick:()=>{M(null),yl("start-thisorthat")},className:"p-4 text-left rounded-lg border border-border bg-background hover:bg-muted/50 transition-colors",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("div",{className:"w-8 h-8 bg-green-500/20 rounded-lg flex items-center justify-center",children:a.jsx("span",{className:"text-green-500 text-sm",children:"⚖️"})}),a.jsx("h4",{className:"font-medium text-foreground",children:"This or That"})]}),a.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Quick choices: Pizza or Burgers? Summer or Winter? Books or Movies?"}),a.jsxs("div",{className:"flex items-center text-xs text-green-500",children:[a.jsx("span",{children:"Ask Question"}),a.jsx(Js,{className:"w-3 h-3 ml-1"})]})]}),a.jsxs("button",{onClick:()=>{M(null),yl("start-emojiriddle")},className:"p-4 text-left rounded-lg border border-border bg-background hover:bg-muted/50 transition-colors",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("div",{className:"w-8 h-8 bg-purple-500/20 rounded-lg flex items-center justify-center",children:a.jsx("span",{className:"text-purple-500 text-sm",children:"🧩"})}),a.jsx("h4",{className:"font-medium text-foreground",children:"Emoji Riddle"})]}),a.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Guess what movie, song, or phrase these emojis represent! 🎬🍿"}),a.jsxs("div",{className:"flex items-center text-xs text-purple-500",children:[a.jsx("span",{children:"Create Riddle"}),a.jsx(Js,{className:"w-3 h-3 ml-1"})]})]})]})]}),a.jsx(yI,{onSendMessage:SS,onSendGif:kS,onSendVoice:CS,onToolSelect:yl,disabled:!N||!Ee,loading:C||h,groupId:e,groupName:t})]}),a.jsx(bI,{isOpen:D,onClose:()=>B(!1),groupId:e,groupName:t,onSwitchSuccess:(U,ce)=>{o&&o()}}),a.jsx(GL,{open:X,onOpenChange:fe,groupId:e}),ve&&le&&a.jsx(mL,{isOpen:ve,onClose:()=>re(!1),onParticipate:()=>mg(!0),onDecline:()=>mg(!1),gameType:le.gameType,gameDuration:le.duration,creatorUsername:(N==null?void 0:N.username)||"Anonymous"})]})},BL={group_switch:{icon:a.jsx(st,{className:"h-6 w-6"}),title:"Daily Group Switch Limit Reached",description:"You've used your free group switch for today. Premium users get unlimited group switching!",benefit:"Unlimited group switching"},reconnect:{icon:a.jsx(Mu,{className:"h-6 w-6"}),title:"Premium Feature: Direct Messaging",description:"Direct messaging is available exclusively for premium subscribers. Upgrade to unlock unlimited 1-on-1 private conversations!",benefit:"Unlimited direct messaging with no daily limits"},enhanced_username_changes:{icon:a.jsx(ub,{className:"h-6 w-6"}),title:"Monthly Username Change Limit Reached",description:"You've used all your free username changes this month. Premium users get 5 username changes per month!",benefit:"5 username changes per month"},custom_theme:{icon:a.jsx(go,{className:"h-6 w-6"}),title:"Premium Feature: Custom Themes",description:"Custom group themes are available for premium users. Personalize your groups with unique styles!",benefit:"Unlimited custom themes and styles"}},VL=({open:e,onOpenChange:t,feature:r,currentUsage:n,limit:s})=>{const{createCheckout:o}=Ms(),i=BL[r],l=(c,u=!1)=>{o(c,u),t(!1)};return a.jsx(Ht,{open:e,onOpenChange:t,children:a.jsxs(Lt,{className:"max-w-md",children:[a.jsxs(nr,{children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[a.jsx("div",{className:"text-primary",children:i.icon}),a.jsx(qt,{className:"text-xl",children:i.title})]}),a.jsx(cs,{className:"text-base",children:i.description}),n!==void 0&&s!==void 0&&a.jsxs("div",{className:"text-sm text-muted-foreground mt-2",children:["You've used ",n," of ",s," free uses today."]})]}),a.jsxs("div",{className:"space-y-4 mt-6",children:[a.jsxs("div",{className:"bg-primary/10 p-4 rounded-lg",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[a.jsx(mt,{className:"h-5 w-5 text-primary"}),a.jsx("span",{className:"font-medium",children:"Premium Benefit"})]}),a.jsx("p",{className:"text-sm",children:i.benefit})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx(O,{className:"w-full",onClick:()=>l("monthly"),children:"Upgrade to Monthly ($9.99/mo)"}),a.jsx(O,{variant:"outline",className:"w-full",onClick:()=>l("yearly"),children:"Upgrade to Yearly ($79.99/yr)"}),a.jsx(O,{variant:"ghost",className:"w-full",onClick:()=>l("monthly",!0),children:"Try 3-Day Free Trial"})]}),a.jsx(O,{variant:"ghost",className:"w-full",onClick:()=>t(!1),children:"Maybe Later"})]})]})})},jS=()=>{const{user:e}=ge();return Be(),{addUserToGroup:async(i,l)=>{const c=l||(e==null?void 0:e.id);if(!c)return console.error("❌ No user ID provided for group assignment"),{success:!1,error:"No user ID provided"};const u=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;if(!u.test(i)||!u.test(c))return console.error("❌ Invalid UUID format:",{groupId:i,targetUserId:c}),{success:!1,error:"Invalid ID format provided"};try{console.log("🔄 Calling join_group_safe RPC with:",{p_group_id:i});let f=null,d=null;for(let h=1;h<=3;h++)try{const{data:p,error:g}=await E.rpc("join_group_safe",{p_group_id:i});if(console.log(`💡 join_group_safe RPC response (attempt ${h}):`,{data:p,error:g}),g){if(f=g,console.error(`❌ RPC error adding user to group (attempt ${h}):`,{error:g,code:g.code,message:g.message,details:g.details,hint:g.hint,groupId:i,userId:c}),g.code==="23505"||g.code==="23503"||g.code==="42P01")break;if(h<3){await new Promise(v=>setTimeout(v,1e3*h));continue}}else{d=p;break}}catch(p){if(f=p,console.error(`❌ Network error (attempt ${h}):`,p),h<3){await new Promise(g=>setTimeout(g,1e3*h));continue}}return f&&!d?{success:!1,error:`Failed after 3 attempts: ${f.message}`}:d!=null&&d.ok?(console.log("✅ Successfully added user to group:",d),{success:!0,groupId:d.group_id,groupName:void 0,newMemberCount:d.members}):(console.error("❌ addUserToGroup RPC returned failure:",{ok:d==null?void 0:d.ok,error:d==null?void 0:d.error,members:d==null?void 0:d.members,groupId:i,userId:c}),{success:!1,error:(d==null?void 0:d.error)||"Failed to add user to group",currentMembers:d==null?void 0:d.members,maxMembers:void 0})}catch(f){return console.error("❌ Critical error in addUserToGroup:",f),{success:!1,error:`Critical error: ${f.message}`}}},removeUserFromGroup:async(i,l)=>{const c=l||(e==null?void 0:e.id);if(!c)return{success:!1,error:"No user ID provided"};try{const{data:u,error:f}=await E.rpc("remove_user_from_group",{p_group_id:i,p_user_id:c});if(f)return console.error("Error removing user from group:",f),{success:!1,error:f.message};const d=u;return d!=null&&d.success?{success:!0,groupId:d.group_id,newMemberCount:d.new_member_count}:{success:!1,error:(d==null?void 0:d.error)||"Failed to remove user from group"}}catch(u){return console.error("Error in removeUserFromGroup:",u),{success:!1,error:u.message}}},findAvailableGroupsWithCapacity:async(i,l)=>{try{console.log("🔧 ULTIMATE: Finding available groups using RPC...");const{data:c,error:u}=await E.rpc("get_available_groups",{p_limit:50});return u?(console.error("❌ Error fetching available groups:",u),[]):c!=null&&c.length?(console.log(`📊 Found ${c.length} available groups`),c.map(f=>({...f,actual_member_count:f.current_members}))):(console.log("📊 No available groups found - will create new one"),[])}catch(c){return console.error("❌ Error in findAvailableGroupsWithCapacity:",c),[]}},createNewGroupForCategory:async(i,l)=>{if(!e)throw console.error("❌ No user found in createNewGroupForCategory"),new Error("User not authenticated");console.log("🔧 SIMPLE: Creating new group...");try{const{data:c,error:u}=await E.from("groups").insert({name:`Group-${Date.now()}`,vibe_label:"New Group",current_members:0,max_members:10,is_private:!1,lifecycle_stage:"active"}).select("id, name").single();if(u||!c)throw console.error("❌ Group creation failed:",u),new Error(`Failed to create group: ${u==null?void 0:u.message}`);return console.log("✅ Group created successfully:",c),c}catch(c){throw console.error("❌ Error in createNewGroupForCategory:",c),new Error(`Group creation failed: ${c.message}`)}},getCurrentGroupMemberCount:async i=>{try{const{data:l,error:c}=await E.from("groups").select("current_members, max_members").eq("id",i).single();return c||!l?(console.error("Error getting group member count:",c),null):{currentMembers:l.current_members,maxMembers:l.max_members,hasCapacity:l.current_members<l.max_members}}catch(l){return console.error("Error in getCurrentGroupMemberCount:",l),null}}}},HL=()=>{const{user:e}=ge(),{toast:t}=Be(),{addUserToGroup:r,removeUserFromGroup:n,findAvailableGroupsWithCapacity:s,createNewGroupForCategory:o}=jS(),[i,l]=m.useState({memory:{totalUserCount:0,groupJoinDate:null,groupExpired:!1,matchingMode:"flexible"},needsReshuffle:!1,canTransition:!1,loading:!0});m.useEffect(()=>{e&&c()},[e]);const c=async()=>{if(e)try{const{count:h}=await E.from("profiles").select("*",{count:"exact",head:!0}),{data:p}=await E.from("group_members").select("joined_at, groups!inner(lifecycle_stage)").eq("user_id",e.id).eq("groups.lifecycle_stage","active").single(),g=h||0,v=(p==null?void 0:p.joined_at)||null,y=g<100?"flexible":"strict",x=u(g,v),w=g>=100;l({memory:{totalUserCount:g,groupJoinDate:v,groupExpired:!1,matchingMode:y||"flexible"},needsReshuffle:x,canTransition:w,loading:!1})}catch(h){console.error("Error fetching lifecycle data:",h),l(p=>({...p,loading:!1}))}},u=(h,p)=>{if(h<100||!p)return!1;const g=new Date(p),v=new Date;return v.setDate(v.getDate()-30),g<=v},f=async(h,p)=>{var g,v;if(!e)return console.error("❌ No user found in findAndJoinGroupWithCapacityCheck"),null;console.log("🚨 EMERGENCY MATCH ME: Starting forced group matching...");try{const y=Date.now(),x=`match-${((g=p==null?void 0:p.genres)==null?void 0:g[0])||"general"}-${y}`,{data:w,error:b}=await E.from("groups").insert({name:x,vibe_label:`${((v=p==null?void 0:p.personality)==null?void 0:v[0])||"Match"} Connection`,current_members:0,max_members:10,is_private:!1,lifecycle_stage:"active"}).select("*").single();if(b||!w)throw console.error("❌ EMERGENCY MATCH: Group creation failed:",b),new Error(`Emergency match group creation failed: ${b==null?void 0:b.message}`);console.log("✅ EMERGENCY MATCH: Group created:",w);const{data:j,error:_}=await E.rpc("join_group_safe",{p_group_id:w.id});if(_||!(j!=null&&j.ok))throw console.error("❌ EMERGENCY MATCH: RPC failed:",_||j),new Error(`Emergency match RPC failed: ${(_==null?void 0:_.message)||(j==null?void 0:j.error)}`);return console.log("✅ EMERGENCY MATCH: User added to group successfully"),t({title:"Group Matched!",description:`Welcome to ${w.name}! Ready to chat.`}),{groupId:w.id,groupName:w.name}}catch(y){throw console.error("🚨 EMERGENCY MATCH FAILED:",y),t({title:"Match Failed",description:`Failed to match you to a group: ${y.message}`,variant:"destructive"}),y}};return{lifecycleData:i,refreshLifecycleData:c,findAndJoinGroupWithCapacityCheck:f,performReshuffle:async()=>{if(!e)return!1;try{const{data:h}=await E.from("profiles").select("*").eq("user_id",e.id).single();if(!h)return!1;const{data:p}=await E.from("group_members").select("group_id").eq("user_id",e.id).single();if(p){const v=await n(p.group_id);v.success||console.error("Failed to leave current group:",v.error)}const g=await f("strict",h);if(g)return await c(),t({title:"🎉 Welcome to Your New Group!",description:"You've been matched into a new group based on your preferences."}),{success:!0,groupId:g.groupId};throw new Error("Failed to find or create new group")}catch(h){return console.error("Error performing reshuffle:",h),t({title:"Error",description:"Failed to reshuffle into new group. Please try again.",variant:"destructive"}),{success:!1}}}}},WL=({userProfile:e,onGroupMatched:t})=>{var R,D,B;const[r,n]=m.useState(!1),[s,o]=m.useState(null),[i,l]=m.useState(!0),[c,u]=m.useState(!1),[f,d]=m.useState(!1),[h,p]=m.useState(!1),[g,v]=m.useState(!1),{user:y}=ge(),{toast:x}=Be(),{engagement:w,achievements:b,trackActivity:j}=hn(),{isPremium:_,canUseFeature:S}=Ms(),N=Ao(),{lifecycleData:k,refreshLifecycleData:C,findAndJoinGroupWithCapacityCheck:P,performReshuffle:T}=HL();m.useEffect(()=>{y&&(M(),G(),C())},[y]),m.useEffect(()=>{k.needsReshuffle&&k.canTransition&&s&&v(!0)},[k,s]);const M=async()=>{if(y)try{const{data:I}=await E.from("group_members").select(`
          group_id,
          groups (
            id,
            name,
            vibe_label
          )
        `).eq("user_id",y.id).single();if(I!=null&&I.groups){const{data:F}=await E.from("group_members").select("user_id").eq("group_id",I.group_id),X=[];if(F)for(const ve of F){const{data:re}=await E.from("profiles").select("username").eq("user_id",ve.user_id).single();X.push((re==null?void 0:re.username)||"Unknown")}const fe={id:I.groups.id,name:I.groups.name,vibe_label:I.groups.vibe_label,members:X.map(ve=>({username:ve}))};o(fe),t(fe.id)}}catch(I){console.error("Error checking existing group:",I)}},G=async()=>{if(y)try{const{data:I,error:F}=await E.rpc("can_user_switch_groups",{p_user_id:y.id});if(F){console.error("Error checking switch availability:",F),l(!1);return}l(I)}catch(I){console.error("Error checking switch status:",I),l(!1)}},$=async()=>{if(y)try{await E.from("profiles").upsert({user_id:y.id,username:e.username,genres:e.genres,personality:e.personality,habits:e.habits},{onConflict:"user_id"})}catch(I){throw console.error("Error saving profile:",I),I}},Q=async()=>{var I,F,X,fe;if(!y){console.error("❌ No user available for group matching"),x({title:"Authentication Error",description:"Please log in again to join a group.",variant:"destructive"});return}n(!0);try{try{await $()}catch(Ee){throw console.error("❌ Failed to save user profile:",Ee),new Error(`Profile save failed: ${Ee.message}`)}const{data:ve,error:re}=await E.from("groups").select("id, name, vibe_label, current_members, max_members").lt("current_members",10).eq("lifecycle_stage","active").order("created_at",{ascending:!0}).limit(5);if(re)throw console.error("❌ Error fetching existing groups:",re),new Error(`Failed to fetch groups: ${re.message}`);let le=null,De=0;if(ve&&ve.length>0)for(const Ee of ve){De++;try{const{data:Ne,error:bt}=await E.rpc("join_group_safe",{p_group_id:Ee.id});if(!bt&&(Ne!=null&&Ne.ok)){le=Ee.id;break}else console.warn(`⚠️ Failed to join group ${Ee.name}:`,(bt==null?void 0:bt.message)||(Ne==null?void 0:Ne.error))}catch(Ne){console.warn(`⚠️ Error attempting to join group ${Ee.name}:`,Ne)}}if(!le)try{const{data:Ee,error:Ne}=await E.from("groups").insert({name:`Group-${Date.now()}`,vibe_label:"New Connections",current_members:0,max_members:10,is_private:!1,lifecycle_stage:"active",created_by_user_id:y.id}).select("id, name, vibe_label").single();if(Ne||!Ee)throw console.error("❌ Group creation failed:",Ne),new Error(`Group creation failed: ${(Ne==null?void 0:Ne.message)||"Unknown error"}`);let bt=!1;for(let Oe=1;Oe<=3;Oe++)try{const{data:je,error:tt}=await E.rpc("join_group_safe",{p_group_id:Ee.id});if(!tt&&(je!=null&&je.ok)){le=Ee.id,bt=!0;break}else console.error(`❌ Join attempt ${Oe} failed:`,(tt==null?void 0:tt.message)||(je==null?void 0:je.error)),Oe<3&&await new Promise(Er=>setTimeout(Er,1e3*Oe))}catch(je){console.error(`❌ Join attempt ${Oe} error:`,je),Oe<3&&await new Promise(tt=>setTimeout(tt,1e3*Oe))}if(!bt){try{await E.from("groups").delete().eq("id",Ee.id)}catch{}throw new Error("Failed to join newly created group after 3 attempts")}}catch(Ee){throw console.error("❌ Group creation process failed:",Ee),Ee}if(!le)throw new Error("Could not join any group or create a new one");const{data:Se,error:Fe}=await E.from("groups").select("*").eq("id",le).single();if(Fe||!Se)throw console.error("❌ Failed to fetch group data:",Fe),new Error("Failed to fetch group information after joining");const{data:et,error:Rt}=await E.from("group_members").select(`
          user_id,
          profiles!inner(username)
        `).eq("group_id",le),ne=(et==null?void 0:et.map(Ee=>{var Ne;return{username:((Ne=Ee.profiles)==null?void 0:Ne.username)||"Unknown User"}}))||[{username:e.username}],wt={id:le,name:Se.name,vibe_label:Se.vibe_label||"New Connections",members:ne};o(wt),t(le),x({title:"🎉 Welcome to Your Group!",description:`You've joined ${Se.name} with ${ne.length} members!`,variant:"default"})}catch(ve){console.error("❌ Critical error in group matching:",ve);let re="Failed to find or create group. Please try again.";(I=ve.message)!=null&&I.includes("Profile save")?re="Failed to save your profile. Please check your information and try again.":(F=ve.message)!=null&&F.includes("Group creation")?re="Failed to create a new group. Please try again or contact support.":((X=ve.message)!=null&&X.includes("network")||(fe=ve.message)!=null&&fe.includes("fetch"))&&(re="Network error. Please check your connection and try again."),x({title:"Group Matching Failed",description:re,variant:"destructive"})}finally{n(!1)}},H=async()=>{if(!(!y||!s)){if(!_&&c){p(!0);return}if(!_&&w&&w.group_switches_used_today>=1){p(!0);return}try{await E.from("group_members").delete().eq("user_id",y.id).eq("group_id",s.id),await E.from("groups").update({current_members:Math.max(0,s.members.length-1)}).eq("id",s.id),await j("group_switch"),_||(await E.from("user_switches").upsert({user_id:y.id,has_used_free_switch:!0}),u(!0),l(!1)),o(null),await Q()}catch(I){console.error("Error switching groups:",I),x({title:"Error",description:"Failed to switch groups. Please try again.",variant:"destructive"})}}};if(f&&s)return a.jsx(bS,{groupId:s.id,groupName:s.name,groupVibe:s.vibe_label,memberCount:s.members.length,onBack:()=>d(!1)});const Y=async()=>{const I=await T();I&&typeof I=="object"&&I.success&&(v(!1),o(null),window.location.reload())};return s?a.jsxs("div",{className:"max-w-2xl mx-auto p-6 space-y-6",children:[a.jsx("div",{className:"mb-4 flex justify-start",children:a.jsxs(O,{variant:"outline",onClick:()=>N("/"),className:"flex items-center gap-2",children:[a.jsx(po,{className:"h-4 w-4"}),"Home"]})}),g&&a.jsx(W,{className:"border-orange-200 bg-gradient-to-r from-orange-50 to-yellow-50",children:a.jsx(J,{className:"pt-6",children:a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx("div",{className:"p-2 bg-orange-100 rounded-full",children:a.jsx(Lv,{className:"h-5 w-5 text-orange-600"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-semibold text-orange-900 mb-1",children:"🎉 Your 30-day group has wrapped!"}),a.jsxs("p",{className:"text-sm text-orange-800 mb-4",children:["We've found you a new group match based on your preferences with ",k.memory.totalUserCount,"+ users in our community."]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(O,{onClick:Y,className:"bg-orange-600 hover:bg-orange-700",children:[a.jsx(Lv,{className:"h-4 w-4 mr-2"}),"Join New Group"]}),a.jsx(O,{variant:"outline",onClick:()=>v(!1),className:"border-orange-300 text-orange-700",children:"Stay Here"})]})]})]})})}),a.jsxs(W,{className:"relative overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/10 to-secondary/10"}),_&&a.jsx("div",{className:"absolute top-4 right-4",children:a.jsxs(oe,{className:"bg-gradient-to-r from-yellow-400 to-orange-500 text-white",children:[a.jsx(mt,{className:"h-3 w-3 mr-1"}),"Premium"]})}),a.jsxs(ue,{className:"relative",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(br,{className:"h-5 w-5 text-primary"}),a.jsx(oe,{variant:"secondary",children:s.vibe_label}),k.memory.matchingMode==="strict"&&a.jsx(oe,{variant:"outline",className:"text-xs",children:"Curated Match"})]}),a.jsx(de,{className:"text-2xl",children:s.name})]}),a.jsxs(J,{className:"relative space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[a.jsx(st,{className:"h-4 w-4"}),a.jsxs("span",{children:[s.members.length," members"]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("h4",{className:"font-medium",children:"Group Members:"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:s.members.map((I,F)=>a.jsx(oe,{variant:"outline",children:I.username},F))})]}),w&&a.jsxs("div",{className:"pt-4 border-t space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm font-medium",children:"Your Progress"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(xs,{className:"h-4 w-4 text-yellow-500"}),a.jsxs("span",{className:"text-sm font-bold",children:[w.achievement_points," pts",_&&a.jsx("span",{className:"text-xs text-primary ml-1",children:"(2x rate)"})]})]})]}),b.length>0&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("span",{className:"text-xs text-muted-foreground",children:"Recent Achievement"}),a.jsx(tm,{achievement:b[0],size:"sm"})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-lg font-bold text-primary",children:w.daily_streak}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"Day Streak"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-lg font-bold text-blue-500",children:w.messages_sent_today}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"Messages"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-lg font-bold text-pink-500",children:w.reactions_given_today}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"Reactions"})]})]})]}),a.jsxs("div",{className:"pt-4 border-t",children:[a.jsxs("div",{className:"flex gap-3",children:[a.jsxs(O,{onClick:()=>d(!0),className:"flex items-center gap-2",children:[a.jsx(ln,{className:"h-4 w-4"}),"Open Chat"]}),a.jsxs(O,{variant:"outline",onClick:H,disabled:!_&&!i,className:"flex items-center gap-2",children:[a.jsx(hb,{className:"h-4 w-4"}),_?"Switch Group":i?"Switch Group (Free)":"Switch Group (Premium)"]})]}),!_&&c&&a.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"You've used your free switch. Upgrade to Premium for unlimited switches!"}),_&&a.jsxs("p",{className:"text-sm text-primary mt-2 flex items-center gap-1",children:[a.jsx(mt,{className:"h-3 w-3"}),"Unlimited group switching with Premium"]})]})]})]}),a.jsx(VL,{open:h,onOpenChange:p,feature:"group_switch",currentUsage:(w==null?void 0:w.group_switches_used_today)||0,limit:1})]}):a.jsxs("div",{className:"max-w-2xl mx-auto p-6",children:[a.jsx("div",{className:"mb-4 flex justify-start",children:a.jsxs(O,{variant:"outline",onClick:()=>N("/"),className:"flex items-center gap-2",children:[a.jsx(po,{className:"h-4 w-4"}),"Home"]})}),a.jsxs(W,{className:"text-center",children:[a.jsxs(ue,{children:[a.jsx(de,{className:"text-2xl",children:"Find Your Perfect Group"}),!k.loading&&a.jsxs("div",{className:"flex justify-center gap-2 mt-2",children:[a.jsx(oe,{variant:k.memory.matchingMode==="flexible"?"default":"secondary",children:k.memory.matchingMode==="flexible"?"Quick Match":"Curated Match"}),a.jsxs(oe,{variant:"outline",className:"text-xs",children:[k.memory.totalUserCount," users"]})]})]}),a.jsxs(J,{className:"space-y-6",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsx("p",{className:"text-muted-foreground",children:k.memory.matchingMode==="flexible"?"We'll find you an active group to join and start connecting!":"Based on your preferences, we'll match you with like-minded people in a curated group of up to 10 members."}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("h4",{className:"font-medium",children:"Your Profile Summary:"}),a.jsxs("div",{className:"text-sm text-muted-foreground space-y-1",children:[a.jsxs("p",{children:[((R=e==null?void 0:e.genres)==null?void 0:R.length)||0," favorite genres"]}),a.jsxs("p",{children:[((D=e==null?void 0:e.personality)==null?void 0:D.length)||0," personality traits"]}),a.jsxs("p",{children:[((B=e==null?void 0:e.habits)==null?void 0:B.length)||0," habits"]})]})]})]}),a.jsx(O,{onClick:Q,disabled:r||k.loading,size:"lg",className:"w-full",children:r?a.jsxs(a.Fragment,{children:[a.jsx(b2,{className:"mr-2 h-4 w-4 animate-spin"}),"Finding Your Group..."]}):"Find My Group"})]})]})]})},_S=()=>{const[e,t]=m.useState(!1),[r,n]=m.useState(!1),[s,o]=m.useState({email:"",password:""}),[i,l]=m.useState(!1),[c,u]=m.useState(""),{toast:f}=Be(),{signUp:d,signIn:h}=ge(),[p,g]=m.useState(""),[v,y]=m.useState(!1);A.useEffect(()=>{const S=localStorage.getItem("saved_username");S&&o(N=>({...N,email:S}))},[]);const x=S=>{const{name:N,value:k}=S.target;o(C=>({...C,[N]:k}))},w=async S=>{if(S.preventDefault(),!s.email||!s.password){f({title:"Missing information",description:"Please fill in all fields.",variant:"destructive"});return}if(s.password.length<6){f({title:"Password too short",description:"Password must be at least 6 characters long.",variant:"destructive"});return}t(!0);try{const{data:N,error:k}=await E.rpc("email_exists",{check_email:s.email});if(k&&console.error("Email check error:",k),N){f({title:"Email already exists",description:"An account with this email already exists. Please sign in instead.",variant:"destructive"}),t(!1);return}const C=await d(s.email,s.password);C.error?f({title:"Sign up failed",description:C.error,variant:"destructive"}):(u(s.email),l(!0),o({email:"",password:""}))}catch{f({title:"Sign up failed",description:"An unexpected error occurred. Please try again.",variant:"destructive"})}finally{t(!1)}},b=async S=>{if(S.preventDefault(),!s.email||!s.password){f({title:"Missing information",description:"Please fill in all fields.",variant:"destructive"});return}t(!0);try{const N=await h(s.email,s.password);N.error?f({title:"Sign in failed",description:N.error,variant:"destructive"}):(localStorage.setItem("saved_username",s.email),f({title:"Welcome back!",description:"Successfully signed in."}))}catch{f({title:"Sign in failed",description:"An unexpected error occurred. Please try again.",variant:"destructive"})}finally{t(!1)}},j=async S=>{if(S.preventDefault(),!p){f({title:"Email required",description:"Please enter your email address.",variant:"destructive"});return}t(!0);try{const{error:N}=await E.auth.resetPasswordForEmail(p,{redirectTo:"https://syncchatapp.com/auth/callback"});N?f({title:"Reset failed",description:N.message,variant:"destructive"}):(f({title:"Reset link sent",description:"Check your email for password reset instructions."}),y(!1),g(""))}catch{f({title:"Reset failed",description:"An unexpected error occurred. Please try again.",variant:"destructive"})}finally{t(!1)}},_=async()=>{if(c){t(!0);try{const S=await E.auth.resend({type:"signup",email:c,options:{emailRedirectTo:"https://syncchatapp.com/auth/callback"}});S.error?f({title:"Resend failed",description:S.error.message,variant:"destructive"}):f({title:"Verification email sent",description:"Please check your email for the verification link."})}catch{f({title:"Resend failed",description:"An unexpected error occurred. Please try again.",variant:"destructive"})}finally{t(!1)}}};return i?a.jsx("div",{className:"min-h-screen flex items-center justify-center p-4 bg-gradient-to-br from-purple-50 via-blue-50 to-indigo-50",children:a.jsx(W,{className:"w-full max-w-md glass-card shadow-elegant p-8 text-center",children:a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"flex justify-center",children:a.jsx("div",{className:"w-16 h-16 rounded-full bg-green-100 flex items-center justify-center",children:a.jsx(Zs,{className:"h-8 w-8 text-green-600"})})}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("h2",{className:"text-2xl font-bold",children:"Check Your Email!"}),a.jsxs("p",{className:"text-muted-foreground",children:["We sent a verification link to ",a.jsx("strong",{children:c})]}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Please click the link in your email to verify your account."})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx(O,{onClick:()=>{l(!1),u("")},className:"w-full",children:"Back to Sign In"}),a.jsx(O,{variant:"outline",onClick:_,disabled:e,className:"w-full",children:e?"Sending...":"Resend Email"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Can't find the email? Check your spam folder."})]})]})})}):v?a.jsx("div",{className:"min-h-screen flex items-center justify-center p-4 bg-gradient-to-br from-purple-50 via-blue-50 to-indigo-50",children:a.jsx(W,{className:"w-full max-w-md glass-card shadow-elegant p-8",children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("h2",{className:"text-2xl font-bold",children:"Reset Password"}),a.jsx("p",{className:"text-muted-foreground",children:"Enter your email to receive reset instructions"})]}),a.jsxs("form",{onSubmit:j,className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(kn,{htmlFor:"forgot-email",children:"Email"}),a.jsxs("div",{className:"relative",children:[a.jsx(yi,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),a.jsx(ht,{id:"forgot-email",type:"email",placeholder:"Enter your email",value:p,onChange:S=>g(S.target.value),className:"pl-9",required:!0})]})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx(O,{type:"button",variant:"outline",onClick:()=>y(!1),className:"flex-1",children:"Cancel"}),a.jsx(O,{type:"submit",disabled:e,className:"flex-1",children:e?"Sending...":"Send Reset Link"})]})]})]})})}):a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-blue-50 to-indigo-50",children:a.jsxs("div",{className:"container mx-auto px-4 py-12",children:[a.jsxs("div",{className:"text-center space-y-8 mb-16",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-r from-purple-500 to-blue-500 flex items-center justify-center",children:a.jsx(ln,{className:"h-6 w-6 text-white"})}),a.jsx("h1",{className:"text-4xl md:text-5xl font-bold bg-gradient-to-r from-purple-600 to-blue-600 bg-clip-text text-transparent",children:"SyncChat"})]}),a.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:"Connect with like-minded people, join meaningful conversations, and discover your perfect chat community."})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 max-w-4xl mx-auto",children:[a.jsxs("div",{className:"flex flex-col items-center space-y-3 p-6 rounded-xl bg-white/50 backdrop-blur-sm border border-white/20",children:[a.jsx("div",{className:"w-12 h-12 rounded-full bg-purple-100 flex items-center justify-center",children:a.jsx(st,{className:"h-6 w-6 text-purple-600"})}),a.jsx("h3",{className:"font-semibold text-gray-800",children:"Smart Matching"}),a.jsx("p",{className:"text-sm text-gray-600 text-center",children:"Get matched with people who share your interests and personality"})]}),a.jsxs("div",{className:"flex flex-col items-center space-y-3 p-6 rounded-xl bg-white/50 backdrop-blur-sm border border-white/20",children:[a.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-100 flex items-center justify-center",children:a.jsx(ln,{className:"h-6 w-6 text-blue-600"})}),a.jsx("h3",{className:"font-semibold text-gray-800",children:"Real-time Chat"}),a.jsx("p",{className:"text-sm text-gray-600 text-center",children:"Enjoy seamless conversations with voice, text, and interactive features"})]}),a.jsxs("div",{className:"flex flex-col items-center space-y-3 p-6 rounded-xl bg-white/50 backdrop-blur-sm border border-white/20",children:[a.jsx("div",{className:"w-12 h-12 rounded-full bg-green-100 flex items-center justify-center",children:a.jsx(al,{className:"h-6 w-6 text-green-600"})}),a.jsx("h3",{className:"font-semibold text-gray-800",children:"Meaningful Connections"}),a.jsx("p",{className:"text-sm text-gray-600 text-center",children:"Build lasting friendships through shared experiences and activities"})]})]})]}),a.jsx("div",{className:"max-w-md mx-auto",children:a.jsx(W,{className:"glass-card shadow-elegant p-8",children:a.jsxs("div",{className:"text-center space-y-6",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Welcome to SyncChat"}),a.jsx("p",{className:"text-gray-600",children:"Sign in to your account or create a new one to get started"})]}),a.jsxs(id,{defaultValue:"signin",className:"w-full",children:[a.jsxs(fl,{className:"grid w-full grid-cols-2",children:[a.jsx(sr,{value:"signin",children:"Sign In"}),a.jsx(sr,{value:"signup",children:"Sign Up"})]}),a.jsx(ar,{value:"signin",className:"space-y-4 mt-6",children:a.jsxs("form",{onSubmit:b,className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(kn,{htmlFor:"signin-email",children:"Email"}),a.jsxs("div",{className:"relative",children:[a.jsx(yi,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),a.jsx(ht,{id:"signin-email",name:"email",type:"email",placeholder:"Enter your email",value:s.email,onChange:x,className:"pl-9",required:!0})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(kn,{htmlFor:"signin-password",children:"Password"}),a.jsxs("div",{className:"relative",children:[a.jsx(Vc,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),a.jsx(ht,{id:"signin-password",name:"password",type:r?"text":"password",placeholder:"Enter your password",value:s.password,onChange:x,className:"pl-9 pr-9",required:!0}),a.jsx(O,{type:"button",variant:"ghost",size:"sm",className:"absolute right-1 top-1 h-8 w-8 p-0",onClick:()=>n(!r),children:r?a.jsx(Bc,{className:"h-4 w-4"}):a.jsx(ph,{className:"h-4 w-4"})})]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"checkbox",id:"remember-me",defaultChecked:!0,className:"h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded"}),a.jsx(kn,{htmlFor:"remember-me",className:"text-sm text-muted-foreground",children:"Remember username"})]}),a.jsx(O,{type:"button",variant:"link",onClick:()=>y(!0),className:"text-sm p-0 h-auto",children:"Forgot password?"})]}),a.jsx(O,{type:"submit",disabled:e,className:"w-full",children:e?"Signing in...":"Sign In"})]})}),a.jsx(ar,{value:"signup",className:"space-y-4 mt-6",children:a.jsxs("form",{onSubmit:w,className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(kn,{htmlFor:"signup-email",children:"Email"}),a.jsxs("div",{className:"relative",children:[a.jsx(yi,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),a.jsx(ht,{id:"signup-email",name:"email",type:"email",placeholder:"Enter your email",value:s.email,onChange:x,className:"pl-9",required:!0})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(kn,{htmlFor:"signup-password",children:"Password"}),a.jsxs("div",{className:"relative",children:[a.jsx(Vc,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),a.jsx(ht,{id:"signup-password",name:"password",type:r?"text":"password",placeholder:"Create a password",value:s.password,onChange:x,className:"pl-9 pr-9",required:!0}),a.jsx(O,{type:"button",variant:"ghost",size:"sm",className:"absolute right-1 top-1 h-8 w-8 p-0",onClick:()=>n(!r),children:r?a.jsx(Bc,{className:"h-4 w-4"}):a.jsx(ph,{className:"h-4 w-4"})})]})]}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"Password must be at least 6 characters long"}),a.jsx(O,{type:"submit",disabled:e,className:"w-full",children:e?"Creating account...":"Create Account"})]})})]}),a.jsx("div",{className:"text-center",children:a.jsx("p",{className:"text-xs text-muted-foreground",children:"By signing up, you agree to our Terms of Service and Privacy Policy"})})]})})}),a.jsxs("div",{className:"text-center mt-16 space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm text-gray-500",children:[a.jsx(go,{className:"h-4 w-4"}),a.jsx("span",{children:"Powered by real-time technology"})]}),a.jsx("p",{className:"text-xs text-gray-400",children:"SyncChat v1.0.0 • Connect • Chat • Discover"})]})]})})},qL=()=>{const{user:e}=ge();jS();const{toast:t}=Be(),[r,n]=m.useState(!1),s=l=>!l.username||l.username.trim().length===0?{isValid:!1,error:"Username is required"}:{isValid:!0},o=async(l,c=3,u=1e3)=>{for(let f=1;f<=c;f++)try{return await l()}catch(d){if(f===c)throw d;console.warn(`Operation failed, attempt ${f}/${c}. Retrying in ${u}ms...`),await new Promise(h=>setTimeout(h,u*f))}throw new Error("All retry attempts failed")};return{completeOnboarding:async l=>{var f,d,h,p;if(!(e!=null&&e.id))return console.error("❌ No user ID available:",e),t({title:"Authentication Error",description:"User not properly authenticated. Please sign in again.",variant:"destructive"}),{success:!1};try{const{data:{session:g},error:v}=await E.auth.getSession();if(v||!g)return console.error("❌ Session validation failed:",v),t({title:"Session Expired",description:"Please log in again to continue.",variant:"destructive"}),{success:!1};console.log("✅ Session validated for user:",g.user.email)}catch(g){console.error("❌ Error checking session:",g)}if(!/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(e.id))return console.error("❌ Invalid user ID format:",e.id),t({title:"Invalid User ID",description:"User ID format is invalid. Please contact support.",variant:"destructive"}),{success:!1};console.log("✅ User authentication validated:",{userId:e.id,email:e.email,emailConfirmed:!!e.email_confirmed_at});const u=s(l);if(!u.isValid)return t({title:"Profile Validation Error",description:u.error,variant:"destructive"}),{success:!1};n(!0);try{console.log("🔄 Starting profile creation for user:",e.id),await o(async()=>{const b={user_id:e.id,username:l.username.trim(),genres:Array.isArray(l.genres)?l.genres:[],personality:Array.isArray(l.personality)?l.personality:[],habits:Array.isArray(l.habits)?l.habits:[],updated_at:new Date().toISOString()};console.log("📝 Inserting profile data:",b);const{data:j,error:_}=await E.from("profiles").upsert(b).select();if(console.log("💡 Profile upsert result:",{data:j,error:_}),_){console.error("❌ Profile creation error details:",{code:_.code,message:_.message,details:_.details,hint:_.hint}),console.log("🔄 Trying insert/update approach...");const S=await E.from("profiles").insert(b).select();if(S.error&&S.error.code==="23505"){console.log("🔄 Duplicate key detected, trying update...");const N=await E.from("profiles").update(b).eq("user_id",e.id).select();if(N.error)throw new Error(`Profile creation failed: ${N.error.message}`);return N.data}else{if(S.error)throw new Error(`Profile creation failed: ${S.error.message}`);return S.data}}console.log("✅ Profile created/updated successfully")});const{data:g,error:v}=await E.from("profiles").select("id, username").eq("user_id",e.id).single();if(v||!g)return console.error("Profile verification failed:",v),t({title:"Error",description:"Profile creation could not be verified. Please try again.",variant:"destructive"}),{success:!1};console.log("🔧 ROBUST: Finding group with enhanced error handling and retry logic...");let y=null,x=0;const w=3;for(;x<w&&!y;){x++,console.log(`🔄 Group assignment attempt ${x}/${w}`);try{const{data:b,error:j}=await E.rpc("get_available_groups",{p_limit:5});if(j){if(console.error(`❌ Error finding existing groups (attempt ${x}):`,j),x<w){await new Promise(_=>setTimeout(_,1e3*x));continue}throw new Error(`Failed to find groups: ${j.message}`)}if(b&&b.length>0){console.log(`🔍 Found ${b.length} potential groups to join`);for(const _ of b){console.log(`🔄 Attempting to join: ${_.name} (${_.current_members}/${_.max_members||10})`);try{const{data:S,error:N}=await E.rpc("join_group_safe",{p_group_id:_.id});if(console.log("💡 join_group_safe RPC result for existing group:",{rpcResult:S,rpcError:N}),!N&&(S!=null&&S.ok)){y=_.id,console.log(`✅ Successfully joined existing group: ${_.name} (members: ${S.members})`);break}else console.warn(`⚠️ Failed to join ${_.name}:`,(N==null?void 0:N.message)||(S==null?void 0:S.error))}catch(S){console.warn(`⚠️ Error joining ${_.name}:`,S)}}}if(!y){console.log(`🔧 Creating new group (attempt ${x})...`);const{data:_,error:S}=await E.from("groups").insert({name:`Group-${Date.now()}-${x}`,vibe_label:"New Connections",current_members:0,max_members:10,is_private:!1,lifecycle_stage:"active",created_by_user_id:e.id}).select("id, name").single();if(S||!_){if(console.error(`❌ Group creation failed (attempt ${x}):`,S),x<w){await new Promise(k=>setTimeout(k,1e3*x));continue}throw new Error(`Group creation failed: ${S==null?void 0:S.message}`)}console.log(`✅ New group created: ${_.name}`);let N=!1;for(let k=1;k<=3;k++)try{const{data:C,error:P}=await E.rpc("join_group_safe",{p_group_id:_.id});if(console.log(`💡 join_group_safe RPC result for new group (join attempt ${k}):`,{rpcResult:C,rpcError:P}),!P&&(C!=null&&C.ok)){y=_.id,N=!0,console.log(`✅ Successfully joined new group on attempt ${k}`);break}else console.error(`❌ Join attempt ${k} failed:`,(P==null?void 0:P.message)||(C==null?void 0:C.error)),k<3&&await new Promise(T=>setTimeout(T,1e3*k))}catch(C){console.error(`❌ Join attempt ${k} error:`,C),k<3&&await new Promise(P=>setTimeout(P,1e3*k))}if(!N){try{await E.from("groups").delete().eq("id",_.id),console.log("🧹 Cleaned up unused group")}catch(k){console.error("Failed to clean up unused group:",k)}if(x<w){console.log("⏭️ Retrying entire group assignment process..."),await new Promise(k=>setTimeout(k,2e3*x));continue}throw new Error("Failed to join newly created group after multiple attempts")}}}catch(b){if(console.error(`❌ Group assignment attempt ${x} failed:`,b),x<w){console.log(`⏭️ Retrying in ${2e3*x}ms...`),await new Promise(j=>setTimeout(j,2e3*x));continue}throw b}}if(!y)throw new Error("Failed to assign user to any group after all attempts");try{const{data:b}=await E.from("group_members").select("group_id").eq("user_id",e.id).eq("group_id",y).single();if(!b)throw new Error("Group membership verification failed");try{await E.from("profiles").update({group_id:y}).eq("user_id",e.id),console.log("✅ Profile updated with group_id")}catch{console.warn("⚠️ Profile update failed, but user is in group - continuing onboarding")}console.log("✅ User successfully assigned to group:",y);const{data:j}=await E.from("profiles").select("group_id").eq("user_id",e.id).single();return(j==null?void 0:j.group_id)!==y&&console.warn("⚠️ Profile group_id mismatch after assignment - this is non-critical"),t({title:"🎉 Welcome to Your Group!",description:"You've been successfully matched with other users. Start chatting!",variant:"default"}),window.dispatchEvent(new CustomEvent("onboarding:complete",{detail:{groupId:y}})),{success:!0,groupId:y}}catch(b){return console.error("❌ Group assignment verification failed:",b),t({title:"Assignment Verification Failed",description:"Group assignment may not have completed properly. Please try signing in again.",variant:"destructive"}),{success:!1}}return localStorage.removeItem("incomplete_signup_time"),localStorage.removeItem("onboarding_skipped"),{success:!0,groupId:y||void 0}}catch(g){console.error("❌ CRITICAL ERROR in completeOnboarding:",g),console.error("❌ Error stack:",g.stack),console.error("❌ Error details:",{message:g.message,name:g.name,cause:g.cause});let v="An unexpected error occurred. Please try again.";return(f=g.message)!=null&&f.includes("profile")?v="Failed to create user profile. Please check your information and try again.":(d=g.message)!=null&&d.includes("group")?v="Failed to assign you to a group. Please try again or contact support.":((h=g.message)!=null&&h.includes("network")||(p=g.message)!=null&&p.includes("fetch"))&&(v="Network error. Please check your connection and try again."),t({title:"Onboarding Failed",description:v,variant:"destructive"}),{success:!1}}finally{n(!1)}},isProcessing:r}},KL=({onComplete:e})=>{const{user:t,loading:r,signOut:n}=ge(),{completeOnboarding:s,isProcessing:o}=qL(),{toast:i}=Be(),{theme:l,toggleTheme:c}=K1(),[u,f]=m.useState(0),[d,h]=m.useState(!1),[p,g]=m.useState(null),[v,y]=m.useState({genres:[],personality:[],habits:[],username:""}),[x,w]=m.useState(!1);if(r)return a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(br,{className:"h-6 w-6 text-primary animate-pulse"}),a.jsx("span",{className:"text-muted-foreground",children:"Loading..."})]})});if(!t)return a.jsx(_S,{});const b=async()=>{if(u===0&&!x){i({title:"Legal Consent Required",description:"Please confirm your age and accept our terms to continue.",variant:"destructive"});return}if(u<2)f(u+1);else try{const T=await s(v);T.success?(T.groupId,e()):(console.error("❌ Onboarding failed:",T.error||"Unknown error"),i({title:"Onboarding Failed",description:T.error||"Failed to complete onboarding. Please try again.",variant:"destructive"}))}catch(T){console.error("❌ Critical error in onboarding completion:",T),i({title:"Onboarding Failed",description:"Failed to complete onboarding. Please try again.",variant:"destructive"})}},j=T=>{g(T)},_=()=>{u>0&&f(u-1)},S=T=>{y(M=>({...M,...T}))},N=[{title:"Legal Requirements",subtitle:"Please confirm your age and review our policies",component:a.jsx($3,{onConsentChange:w,isConsentGiven:x})},{title:"Tell us about yourself",subtitle:"Help us find your perfect group match",component:a.jsx(R3,{profile:v,updateProfile:S})},{title:"Your identity",subtitle:"We'll assign you a fun username",component:a.jsx(M3,{profile:v,updateProfile:S})}],k=N[u],C=u===N.length-1,P=u===0?x:u===1?v.genres.length>0||v.personality.length>0||v.habits.length>0:v.username.length>0;return d?a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-background via-background to-muted/30",children:[a.jsx("div",{className:"sticky top-0 z-50 bg-background/80 backdrop-blur-lg border-b border-border/50",children:a.jsxs("div",{className:"max-w-4xl mx-auto px-6 py-4 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-8 h-8 bg-primary rounded-lg flex items-center justify-center",children:a.jsx(br,{className:"w-4 h-4 text-primary-foreground"})}),a.jsx("h1",{className:"text-xl font-bold bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent",children:"SyncChat"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs(O,{variant:"ghost",size:"sm",onClick:n,className:"gap-2",children:[a.jsx(vh,{className:"w-4 h-4"}),"Sign Out"]}),a.jsx(O,{variant:"ghost",size:"icon",onClick:c,className:"rounded-full",children:l==="dark"?a.jsx(_h,{className:"w-4 h-4"}):a.jsx(yh,{className:"w-4 h-4"})})]})]})}),a.jsx(WL,{userProfile:v,onGroupMatched:j})]}):a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-background via-background to-muted/30",children:[a.jsx("div",{className:"sticky top-0 z-50 bg-background/80 backdrop-blur-lg border-b border-border/50",children:a.jsxs("div",{className:"max-w-4xl mx-auto px-6 py-4 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-8 h-8 bg-primary rounded-lg flex items-center justify-center",children:a.jsx(br,{className:"w-4 h-4 text-primary-foreground"})}),a.jsx("h1",{className:"text-xl font-bold bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent",children:"SyncChat"})]}),a.jsx(O,{variant:"ghost",size:"icon",onClick:c,className:"rounded-full",children:l==="dark"?a.jsx(_h,{className:"w-4 h-4"}):a.jsx(yh,{className:"w-4 h-4"})})]})}),a.jsxs("div",{className:"max-w-4xl mx-auto px-6 py-6",children:[a.jsx("div",{className:"flex items-center gap-4 mb-8",children:N.map((T,M)=>a.jsxs(A.Fragment,{children:[a.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium transition-colors ${M<=u?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground"}`,children:M+1}),M<N.length-1&&a.jsx(pr,{className:`flex-1 ${M<u?"bg-primary":"bg-border"}`})]},M))}),a.jsxs(W,{className:"p-8 border-border/50 shadow-xl backdrop-blur-sm",children:[a.jsx("div",{className:"flex justify-end mb-4",children:a.jsxs(O,{variant:"ghost",size:"sm",onClick:async()=>{try{await n(),i({title:"Account creation cancelled",description:"You've been signed out. You can create an account again anytime.",variant:"default"}),window.location.href="/"}catch(T){console.error("Error signing out:",T),window.location.href="/"}},className:"gap-2 text-muted-foreground hover:text-foreground",children:[a.jsx(vh,{className:"w-4 h-4"}),"Exit Account Creation"]})}),a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("h2",{className:"text-3xl font-bold mb-2",children:k.title}),a.jsx("p",{className:"text-muted-foreground text-lg",children:k.subtitle})]}),a.jsx("div",{className:"min-h-[400px]",children:k.component}),a.jsxs("div",{className:"flex items-center justify-between mt-8 pt-6 border-t border-border/50",children:[a.jsxs(O,{variant:"ghost",onClick:_,disabled:u===0,className:"gap-2",children:[a.jsx(c2,{className:"w-4 h-4"}),"Back"]}),a.jsxs(O,{onClick:b,disabled:!P||o,className:"gap-2",children:[o?"Processing...":C?"Complete":"Continue",a.jsx(ob,{className:"w-4 h-4"})]})]})]})]})]})},YL=({onStartMatching:e,onViewProfile:t,onViewSettings:r,className:n})=>{const{user:s}=ge(),{currentGroup:o}=Y1(),{engagement:i}=hn(),[l,c]=m.useState(null),[u,f]=m.useState(!0);m.useEffect(()=>{s&&d()},[s]);const d=async()=>{if(s)try{const{data:y}=await E.from("profiles").select("*").eq("user_id",s.id).single();y&&c(y);const{data:x}=await E.from("group_members").select(`
          group_id,
          groups!inner(
            id,
            name,
            vibe_label,
            created_at,
            lifecycle_stage
          )
        `).eq("user_id",s.id).eq("groups.lifecycle_stage","active").order("joined_at",{ascending:!1}).limit(1).maybeSingle();if(x){const w=x.groups,{data:b,error:j}=await E.from("group_members").select("user_id",{count:"exact"}).eq("group_id",w.id)}}catch(y){console.error("Error loading user data:",y)}finally{f(!1)}},h=async()=>{if(s)try{const{data:y,error:x}=await E.from("group_members").select(`
          group_id,
          groups!inner(
            id,
            name,
            vibe_label,
            current_members,
            lifecycle_stage
          )
        `).eq("user_id",s.id).eq("groups.lifecycle_stage","active").order("joined_at",{ascending:!1}).limit(1).maybeSingle();if(x)throw x;if(y&&y.groups){const w=y.groups,{data:b,error:j}=await E.from("group_members").select("user_id",{count:"exact"}).eq("group_id",w.id);if(j)throw j;e&&e(w.id,{id:w.id,name:w.name,vibe_label:w.vibe_label,actual_member_count:(b==null?void 0:b.length)||0})}else e&&e()}catch(y){console.error("Error checking user group:",y),e&&e()}},p=()=>{console.log("HomePage: Navigating to profile..."),t&&t()},g=()=>{console.log("HomePage: Navigating to settings..."),r&&r()},v=()=>{const y=new Date().getHours();return y<12||y<17,"Hi there"};return u?a.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:a.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary"})}):a.jsx("div",{className:`min-h-screen bg-gradient-to-br from-background via-background to-muted/20 ${n}`,children:a.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[a.jsxs("div",{className:"text-center space-y-6 py-12",children:[a.jsxs("h1",{className:"text-4xl md:text-6xl font-bold bg-gradient-to-r from-foreground via-primary to-primary/60 bg-clip-text text-transparent leading-tight",children:[v(),", ",(l==null?void 0:l.username)||"friend","!"]}),a.jsx("p",{className:"text-xl text-muted-foreground max-w-2xl mx-auto leading-relaxed",children:"Connect with like-minded people, share your vibe, and build meaningful conversations in real-time."})]}),o?a.jsxs(W,{className:"relative overflow-hidden border-2 border-primary/20 bg-gradient-to-r from-primary/5 via-primary/10 to-primary/5 mb-8",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-primary/5 to-transparent"}),a.jsxs(J,{className:"relative p-8",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 bg-primary/20 rounded-xl flex items-center justify-center",children:a.jsx(st,{className:"w-6 h-6 text-primary"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-bold text-foreground",children:"Active Group"}),a.jsx("p",{className:"text-muted-foreground",children:"You're currently connected"})]})]}),a.jsx(oe,{variant:"secondary",className:"px-3 py-1 text-sm font-medium",children:o.vibe_label})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("h4",{className:"text-2xl font-bold text-foreground",children:o.name}),a.jsxs("div",{className:"flex items-center gap-6 text-sm text-muted-foreground",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(st,{className:"w-4 h-4"}),a.jsxs("span",{children:[o.actual_member_count||o.current_members||0," members"]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(hc,{className:"w-4 h-4"}),a.jsxs("span",{children:["Active since ",new Date(o.created_at).toLocaleDateString()]})]})]})]})]})]}):a.jsx(W,{className:"border-2 border-dashed border-muted/50 bg-muted/10 mb-8",children:a.jsxs(J,{className:"p-8 text-center",children:[a.jsx("div",{className:"w-16 h-16 bg-muted/50 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(pb,{className:"w-8 h-8 text-muted-foreground"})}),a.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Ready to Find Your Group?"}),a.jsx("p",{className:"text-muted-foreground mb-6 max-w-md mx-auto",children:"Discover amazing people who share your interests and start meaningful conversations."}),a.jsxs(O,{onClick:h,className:"bg-primary hover:bg-primary/90 text-primary-foreground px-6 py-3",children:[a.jsx(br,{className:"w-4 h-4 mr-2"}),"Find My Group"]})]})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:[a.jsx(W,{className:"group hover:shadow-2xl transition-all duration-300 hover:scale-[1.02] cursor-pointer active:scale-[0.98] border-2 hover:border-primary/30 bg-gradient-to-br from-primary/5 to-primary/10",onClick:h,children:a.jsxs(J,{className:"p-8",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[a.jsx("div",{className:"w-16 h-16 bg-primary/20 rounded-2xl flex items-center justify-center group-hover:scale-110 transition-transform",children:o?a.jsx(ln,{className:"w-8 h-8 text-primary"}):a.jsx(Fi,{className:"w-8 h-8 text-primary"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-xl font-bold text-foreground mb-1",children:o?"Continue Chatting":"Find My Group"}),a.jsx("p",{className:"text-muted-foreground",children:o?`Jump back into ${o.name}`:"Match with your perfect group"})]}),a.jsx(Js,{className:"w-5 h-5 text-primary group-hover:translate-x-1 transition-transform"})]}),o&&a.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[a.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),a.jsxs("span",{children:["Live • ",o.actual_member_count||o.current_members||0," members"]})]})]})}),a.jsx(W,{className:"group hover:shadow-2xl transition-all duration-300 hover:scale-[1.02] cursor-pointer active:scale-[0.98] border-2 hover:border-blue-500/30 bg-gradient-to-br from-blue-500/5 to-blue-500/10",onClick:p,children:a.jsxs(J,{className:"p-8",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[a.jsx("div",{className:"w-16 h-16 bg-blue-500/20 rounded-2xl flex items-center justify-center group-hover:scale-110 transition-transform",children:a.jsx(Hc,{className:"w-8 h-8 text-blue-500"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-xl font-bold text-foreground mb-1",children:"My Profile"}),a.jsx("p",{className:"text-muted-foreground",children:"View stats & achievements"})]}),a.jsx(Js,{className:"w-5 h-5 text-blue-500 group-hover:translate-x-1 transition-transform"})]}),i&&a.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4 border-t border-muted/50",children:[a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"text-2xl font-bold text-blue-500 flex items-center justify-center gap-1",children:[a.jsx(xs,{className:"w-5 h-5"}),i.achievement_points||0]}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"Karma Points"})]}),a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"text-2xl font-bold text-blue-500 flex items-center justify-center gap-1",children:[a.jsx(hc,{className:"w-5 h-5"}),i.daily_streak||0]}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"Day Streak"})]})]})]})}),a.jsx(W,{className:"group hover:shadow-2xl transition-all duration-300 hover:scale-[1.02] cursor-pointer active:scale-[0.98] border-2 hover:border-gray-500/30 bg-gradient-to-br from-gray-500/5 to-gray-500/10",onClick:g,children:a.jsxs(J,{className:"p-8",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[a.jsx("div",{className:"w-16 h-16 bg-gray-500/20 rounded-2xl flex items-center justify-center group-hover:scale-110 transition-transform",children:a.jsx(tp,{className:"w-8 h-8 text-gray-500"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-xl font-bold text-foreground mb-1",children:"Settings"}),a.jsx("p",{className:"text-muted-foreground",children:"Customize your experience"})]}),a.jsx(Js,{className:"w-5 h-5 text-gray-500 group-hover:translate-x-1 transition-transform"})]}),a.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[a.jsx(mt,{className:"w-4 h-4"}),a.jsx("span",{children:"Premium features available"})]})]})})]}),i&&a.jsxs(W,{className:"mb-8",children:[a.jsxs(ue,{children:[a.jsxs(de,{className:"flex items-center gap-2 text-xl",children:[a.jsx(go,{className:"w-5 h-5 text-primary"}),"Today's Activity"]}),a.jsx(Et,{children:"Your engagement stats for today"})]}),a.jsx(J,{children:a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:[a.jsxs("div",{className:"text-center p-4 rounded-xl bg-primary/5 border border-primary/10",children:[a.jsx("div",{className:"text-3xl font-bold text-primary mb-1",children:i.messages_sent_today||0}),a.jsxs("div",{className:"text-sm text-muted-foreground flex items-center justify-center gap-1",children:[a.jsx(ln,{className:"w-4 h-4"}),"Messages"]})]}),a.jsxs("div",{className:"text-center p-4 rounded-xl bg-pink-500/5 border border-pink-500/10",children:[a.jsx("div",{className:"text-3xl font-bold text-pink-500 mb-1",children:i.reactions_given_today||0}),a.jsxs("div",{className:"text-sm text-muted-foreground flex items-center justify-center gap-1",children:[a.jsx(al,{className:"w-4 h-4"}),"Reactions"]})]}),a.jsxs("div",{className:"text-center p-4 rounded-xl bg-orange-500/5 border border-orange-500/10",children:[a.jsx("div",{className:"text-3xl font-bold text-orange-500 mb-1",children:i.daily_streak||0}),a.jsxs("div",{className:"text-sm text-muted-foreground flex items-center justify-center gap-1",children:[a.jsx(hc,{className:"w-4 h-4"}),"Day Streak"]})]}),a.jsxs("div",{className:"text-center p-4 rounded-xl bg-purple-500/5 border border-purple-500/10",children:[a.jsx("div",{className:"text-3xl font-bold text-purple-500 mb-1",children:i.tools_used_today||0}),a.jsxs("div",{className:"text-sm text-muted-foreground flex items-center justify-center gap-1",children:[a.jsx(Tu,{className:"w-4 h-4"}),"Tools Used"]})]})]})})]}),a.jsx("div",{className:"text-center py-12",children:a.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-muted/50",children:[a.jsx(br,{className:"w-4 h-4 text-muted-foreground"}),a.jsx("span",{className:"text-sm text-muted-foreground",children:"Ready to connect and create amazing conversations!"})]})})]})})},ri=()=>{const{user:e}=ge(),{authState:t}=rD(),{userProfile:r,currentGroup:n,isLoading:s,setCurrentGroup:o}=Y1(),i=Mo(),l=Ao(),c=_p(),u=sD(),f=()=>{try{l("/home")}catch(j){console.error("Error in back navigation:",j),l("/home")}},d=()=>{const j=i.pathname;return j==="/profile"?"profile":j==="/settings"?"settings":j==="/chat"?"chat":"home"},[h,p]=m.useState(d());m.useEffect(()=>{const j=d();p(j)},[i.pathname]);const g=async()=>{try{await new Promise(j=>setTimeout(j,2e3)),window.location.reload()}catch{}},v=async(j,_)=>{if(_)o(_);else try{const{data:S}=await E.from("groups").select("*").eq("id",j).maybeSingle();S&&o(S)}catch{}l("/chat")},y=()=>{l("/profile")},x=()=>{l("/settings")},w=async()=>{if(!n&&e)try{const{data:j}=await E.from("group_members").select(`
            group_id,
            groups!inner(
              id,
              name,
              vibe_label,
              current_members,
              max_members,
              lifecycle_stage,
              created_at
            )
          `).eq("user_id",e.id).eq("groups.lifecycle_stage","active").order("joined_at",{ascending:!1}).limit(1).maybeSingle();if(j){const _=j.groups;o({id:_.id,name:_.name,vibe_label:_.vibe_label,current_members:_.current_members,max_members:_.max_members,lifecycle_stage:_.lifecycle_stage,created_at:_.created_at})}}catch(j){console.error("Error loading group data:",j)}l("/chat")};if(!e)return a.jsx(_S,{});if(!e.email_confirmed_at)return a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:a.jsxs("div",{className:"text-center space-y-6 max-w-md mx-auto",children:[a.jsx("div",{className:"text-6xl mb-4",children:"📧"}),a.jsx("h1",{className:"text-2xl font-bold text-foreground",children:"Verify Your Email"}),a.jsx("p",{className:"text-muted-foreground",children:"Please check your email and click the verification link to access all features. You can still use the app, but some features may be limited."}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("button",{onClick:()=>window.location.reload(),className:"w-full px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90",children:"I've Verified My Email"}),a.jsx("button",{onClick:()=>{window.location.href="/"},className:"w-full px-4 py-2 border border-input bg-background rounded-md hover:bg-accent",children:"Continue Anyway"}),a.jsx("button",{onClick:()=>E.auth.signOut(),className:"w-full px-4 py-2 text-muted-foreground hover:text-foreground",children:"Sign Out"})]})]})});if(t.isLoading)return a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:a.jsx("div",{className:"text-center space-y-6 max-w-md mx-auto",children:a.jsx(la,{size:"lg",text:"Checking your account..."})})});if(e&&!r&&s)return a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:a.jsx("div",{className:"text-center space-y-6 max-w-md mx-auto",children:a.jsx(la,{size:"lg",text:"Loading your profile..."})})});if(t.shouldShowOnboarding)return a.jsx(KL,{onComplete:g});const b=()=>h==="profile"?a.jsx("div",{className:"animate-fade-in",children:a.jsx(N3,{onGoHome:()=>l("/home")})}):h==="settings"?a.jsx("div",{className:"animate-fade-in",children:a.jsx(C3,{onGoHome:()=>l("/home")})}):h==="chat"?n?a.jsx("div",{className:"animate-fade-in",children:a.jsx(bS,{groupId:n.id,groupName:n.name,groupVibe:n.vibe||"Friendly",memberCount:n.member_count||0,onBack:f,onGoHome:()=>l("/home")})}):a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:a.jsxs("div",{className:"text-center space-y-6 max-w-md mx-auto",children:[a.jsx("div",{className:"text-6xl mb-4",children:"💬"}),a.jsx("h1",{className:"text-2xl font-bold text-foreground",children:"No Active Group"}),a.jsx("p",{className:"text-muted-foreground",children:"You need to join a group before accessing the chat."}),a.jsx("button",{onClick:()=>l("/home"),className:"px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90",children:"Go to Home"})]})}):a.jsx("div",{className:"animate-fade-in",children:a.jsx(YL,{onStartMatching:(j,_)=>{j&&_?v(j,_):w()},onViewProfile:y,onViewSettings:x})});return a.jsxs("div",{className:`min-h-screen bg-background ${u==="mobile"?"mobile-optimized":u==="desktop"?"laptop-optimized":""}`,children:[a.jsx(oD,{isMobile:c}),a.jsx("div",{className:"pt-14 h-full overflow-hidden",children:b()})]})},QL=()=>{const e=Mo();return m.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",e.pathname)},[e.pathname]),a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),a.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),a.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})},XL=()=>{const e=Ao(),[t]=y1(),{checkSubscription:r}=Ms(),n=t.get("session_id");return m.useEffect(()=>{n&&setTimeout(()=>{r()},2e3)},[n,r]),a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background to-muted flex items-center justify-center p-4",children:a.jsxs(W,{className:"max-w-lg mx-auto text-center",children:[a.jsxs(ue,{children:[a.jsx("div",{className:"flex items-center justify-center space-x-2 mb-4",children:a.jsx("div",{className:"bg-green-100 p-3 rounded-full",children:a.jsx($r,{className:"h-8 w-8 text-green-600"})})}),a.jsx(de,{className:"text-2xl",children:"Welcome to Premium!"}),a.jsx(Et,{className:"text-lg",children:"Your subscription has been activated successfully"})]}),a.jsxs(J,{className:"space-y-6",children:[a.jsxs("div",{className:"bg-primary/10 p-4 rounded-lg",children:[a.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-3",children:[a.jsx(mt,{className:"h-6 w-6 text-primary"}),a.jsx("span",{className:"font-semibold text-lg",children:"Premium Features Unlocked"})]}),a.jsxs("ul",{className:"text-sm space-y-2 text-left",children:[a.jsxs("li",{className:"flex items-center space-x-2",children:[a.jsx($r,{className:"h-4 w-4 text-green-500"}),a.jsx("span",{children:"Create private groups with custom names"})]}),a.jsxs("li",{className:"flex items-center space-x-2",children:[a.jsx($r,{className:"h-4 w-4 text-green-500"}),a.jsx("span",{children:"Unlimited group switching"})]}),a.jsxs("li",{className:"flex items-center space-x-2",children:[a.jsx($r,{className:"h-4 w-4 text-green-500"}),a.jsx("span",{children:"Unlimited direct messaging"})]}),a.jsxs("li",{className:"flex items-center space-x-2",children:[a.jsx($r,{className:"h-4 w-4 text-green-500"}),a.jsx("span",{children:"Custom group themes and emoji packs"})]}),a.jsxs("li",{className:"flex items-center space-x-2",children:[a.jsx($r,{className:"h-4 w-4 text-green-500"}),a.jsx("span",{children:"2x Karma bonus on all achievements"})]}),a.jsxs("li",{className:"flex items-center space-x-2",children:[a.jsx($r,{className:"h-4 w-4 text-green-500"}),a.jsx("span",{children:"Access to exclusive monthly vibe events"})]})]})]}),a.jsx(O,{className:"w-full",onClick:()=>e("/"),size:"lg",children:"Start Chatting with Premium"})]})]})})},JL=()=>{const[e]=y1(),t=Ao(),[r,n]=m.useState(!0),[s,o]=m.useState(null),[i,l]=m.useState("");return m.useEffect(()=>{(async()=>{try{const u=e.get("access_token"),f=e.get("refresh_token"),d=e.get("error"),h=e.get("error_description");if(d){o("error"),l(h||"Authentication failed"),n(!1);return}if(!u){o("error"),l("No access token received"),n(!1);return}const{error:p}=await E.auth.setSession({access_token:u,refresh_token:f||""});if(p){o("error"),l(p.message),n(!1);return}const{data:g,error:v}=await E.auth.getSession();if(v){console.error("AuthCallback failed:",v),o("error"),l("Failed to get session data"),n(!1),setTimeout(()=>{t("/auth",{replace:!0})},2e3);return}const y=g.session;if(y&&y.user.email_confirmed_at){const{data:x}=await E.from("profiles").select("*").eq("user_id",y.user.id).single();o("success"),x?(l("Email verified successfully! Redirecting to app..."),setTimeout(()=>{t("/",{replace:!0})},2e3)):(l("Email verified! Redirecting to onboarding..."),setTimeout(()=>{t("/",{replace:!0})},2e3)),n(!1)}else o("error"),l("Email verification failed. Please try again."),n(!1)}catch(u){console.error("AuthCallback error:",u),o("error"),l(u.message||"An unexpected error occurred"),n(!1),setTimeout(()=>{t("/auth",{replace:!0})},2e3)}})()},[e,t]),r?a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:a.jsxs("div",{className:"text-center space-y-4",children:[a.jsx(la,{size:"lg",text:"Verifying your email..."}),a.jsx("p",{className:"text-muted-foreground",children:"Please wait while we complete the verification process."})]})}):a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:a.jsxs(W,{className:"w-full max-w-md",children:[a.jsxs(ue,{className:"text-center space-y-4",children:[s==="success"?a.jsx("div",{className:"w-16 h-16 mx-auto bg-green-100 rounded-full flex items-center justify-center",children:a.jsx(Zs,{className:"w-8 h-8 text-green-600"})}):a.jsx("div",{className:"w-16 h-16 mx-auto bg-red-100 rounded-full flex items-center justify-center",children:a.jsx(f2,{className:"w-8 h-8 text-red-600"})}),a.jsx(de,{className:"text-2xl font-bold",children:s==="success"?"Email Verified!":"Verification Failed"}),a.jsx("p",{className:"text-muted-foreground",children:i})]}),a.jsx(J,{className:"space-y-4",children:s==="success"?a.jsxs("div",{className:"text-center space-y-2",children:[a.jsxs("p",{className:"text-sm text-green-600",children:[a.jsx(Zs,{className:"w-4 h-4 inline mr-2"}),"Your account is now active"]}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"You'll be redirected to the app shortly..."})]}):a.jsxs("div",{className:"space-y-3",children:[a.jsx(O,{onClick:()=>t("/auth"),className:"w-full",children:"Go to Sign In"}),a.jsx(O,{onClick:()=>t("/"),variant:"outline",className:"w-full",children:"Go to Home"})]})})]})})},ZL=()=>{const[e,t]=m.useState(""),[r,n]=m.useState(!1),[s,o]=m.useState(!1),i=Ao(),{toast:l}=Be(),{resendVerification:c}=ge(),u=async f=>{var d,h,p;if(f.preventDefault(),!e){l({title:"Email required",description:"Please enter your email address.",variant:"destructive"});return}n(!0);try{const{error:g}=await c(e);g?(d=g.message)!=null&&d.includes("already verified")||(h=g.message)!=null&&h.includes("already confirmed")||(p=g.message)!=null&&p.includes("email_confirmed_at")?(l({title:"Email Already Verified",description:"Your email is already verified. You can sign in normally.",variant:"default"}),setTimeout(()=>i("/"),2e3)):l({title:"Failed to resend",description:g.message||"Please try again later.",variant:"destructive"}):(o(!0),l({title:"Verification email sent!",description:"Check your inbox for the confirmation link."}))}catch(g){l({title:"Error",description:g.message||"Failed to resend verification email.",variant:"destructive"})}finally{n(!1)}};return s?a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:a.jsx(W,{className:"w-full max-w-md",children:a.jsxs("div",{className:"p-8 text-center space-y-6",children:[a.jsx("div",{className:"w-16 h-16 mx-auto bg-green-100 rounded-full flex items-center justify-center",children:a.jsx(Zs,{className:"w-8 h-8 text-green-600"})}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("h2",{className:"text-2xl font-bold",children:"Email Sent!"}),a.jsxs("p",{className:"text-muted-foreground",children:["We've sent a verification email to ",a.jsx("strong",{children:e})]}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Please check your inbox and click the verification link."})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx(O,{onClick:()=>i("/"),className:"w-full",children:"Back to Sign In"}),a.jsx(O,{onClick:()=>{o(!1),t("")},variant:"outline",className:"w-full",children:"Send Another Email"})]})]})})}):a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:a.jsxs(W,{className:"w-full max-w-md",children:[a.jsxs(ue,{className:"text-center space-y-4",children:[a.jsx("div",{className:"w-16 h-16 mx-auto bg-blue-100 rounded-full flex items-center justify-center",children:a.jsx(yi,{className:"w-8 h-8 text-blue-600"})}),a.jsx(de,{className:"text-2xl font-bold",children:"Resend Verification Email"}),a.jsx("p",{className:"text-muted-foreground",children:"Enter your email address and we'll send you a new verification link."})]}),a.jsxs(J,{className:"space-y-4",children:[a.jsxs("form",{onSubmit:u,className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(kn,{htmlFor:"email",children:"Email Address"}),a.jsxs("div",{className:"relative",children:[a.jsx(yi,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),a.jsx(ht,{id:"email",type:"email",placeholder:"Enter your email",value:e,onChange:f=>t(f.target.value),className:"pl-9",required:!0})]})]}),a.jsx(O,{type:"submit",disabled:r,className:"w-full",children:r?"Sending...":"Send Verification Email"})]}),a.jsxs(O,{onClick:()=>i("/"),variant:"outline",className:"w-full",children:[a.jsx(mh,{className:"w-4 h-4 mr-2"}),"Back to Sign In"]}),a.jsxs("div",{className:"text-center text-xs text-muted-foreground space-y-1",children:[a.jsx("p",{children:"Can't find the email? Check your spam folder."}),a.jsx("p",{children:"Verification links expire after 24 hours."})]})]})]})})},e$=new DR({defaultOptions:{queries:{retry:1,refetchOnWindowFocus:!1,staleTime:5*60*1e3},mutations:{retry:1}}}),t$=()=>a.jsx(Rx,{children:a.jsx(IR,{client:e$,children:a.jsx(Y4,{children:a.jsx(W4,{children:a.jsx(K4,{children:a.jsxs(uR,{children:[a.jsx(iP,{}),a.jsx(IP,{}),a.jsx(Z4,{}),a.jsx(tD,{}),a.jsxs(PM,{children:[a.jsx(eD,{}),a.jsx(Rx,{children:a.jsxs(SM,{children:[a.jsx(Jr,{path:"/",element:a.jsx(ri,{})}),a.jsx(Jr,{path:"/home",element:a.jsx(ri,{})}),a.jsx(Jr,{path:"/chat",element:a.jsx(ri,{})}),a.jsx(Jr,{path:"/profile",element:a.jsx(ri,{})}),a.jsx(Jr,{path:"/settings",element:a.jsx(ri,{})}),a.jsx(Jr,{path:"/success",element:a.jsx(XL,{})}),a.jsx(Jr,{path:"/auth/callback",element:a.jsx(JL,{})}),a.jsx(Jr,{path:"/email-verification",element:a.jsx(ZL,{})}),a.jsx(Jr,{path:"*",element:a.jsx(QL,{})})]})})]})]})})})})})});Rw(document.getElementById("root")).render(a.jsx(A.StrictMode,{children:a.jsx(t$,{})}));
