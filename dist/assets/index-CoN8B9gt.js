var mS=Object.defineProperty;var ig=e=>{throw TypeError(e)};var pS=(e,t,r)=>t in e?mS(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var xe=(e,t,r)=>pS(e,typeof t!="symbol"?t+"":t,r),ad=(e,t,r)=>t.has(e)||ig("Cannot "+r);var U=(e,t,r)=>(ad(e,t,"read from private field"),r?r.call(e):t.get(e)),Ee=(e,t,r)=>t.has(e)?ig("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),ve=(e,t,r,n)=>(ad(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),wt=(e,t,r)=>(ad(e,t,"access private method"),r);var hl=(e,t,r,n)=>({set _(s){ve(e,t,s,r)},get _(){return U(e,t,n)}});function gS(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in e)){const i=Object.getOwnPropertyDescriptor(n,s);i&&Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();var br=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ty(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function vS(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var s=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return e[n]}})}),r}var ry={exports:{}},nu={},ny={exports:{}},be={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ka=Symbol.for("react.element"),xS=Symbol.for("react.portal"),yS=Symbol.for("react.fragment"),wS=Symbol.for("react.strict_mode"),bS=Symbol.for("react.profiler"),jS=Symbol.for("react.provider"),_S=Symbol.for("react.context"),NS=Symbol.for("react.forward_ref"),SS=Symbol.for("react.suspense"),kS=Symbol.for("react.memo"),CS=Symbol.for("react.lazy"),ag=Symbol.iterator;function ES(e){return e===null||typeof e!="object"?null:(e=ag&&e[ag]||e["@@iterator"],typeof e=="function"?e:null)}var sy={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},oy=Object.assign,iy={};function bi(e,t,r){this.props=e,this.context=t,this.refs=iy,this.updater=r||sy}bi.prototype.isReactComponent={};bi.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};bi.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function ay(){}ay.prototype=bi.prototype;function Xh(e,t,r){this.props=e,this.context=t,this.refs=iy,this.updater=r||sy}var Jh=Xh.prototype=new ay;Jh.constructor=Xh;oy(Jh,bi.prototype);Jh.isPureReactComponent=!0;var lg=Array.isArray,ly=Object.prototype.hasOwnProperty,Zh={current:null},cy={key:!0,ref:!0,__self:!0,__source:!0};function uy(e,t,r){var n,s={},i=null,a=null;if(t!=null)for(n in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(i=""+t.key),t)ly.call(t,n)&&!cy.hasOwnProperty(n)&&(s[n]=t[n]);var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)s[n]===void 0&&(s[n]=l[n]);return{$$typeof:Ka,type:e,key:i,ref:a,props:s,_owner:Zh.current}}function PS(e,t){return{$$typeof:Ka,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function em(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ka}function TS(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var cg=/\/+/g;function ld(e,t){return typeof e=="object"&&e!==null&&e.key!=null?TS(""+e.key):t.toString(36)}function Hl(e,t,r,n,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case Ka:case xS:a=!0}}if(a)return a=e,s=s(a),e=n===""?"."+ld(a,0):n,lg(s)?(r="",e!=null&&(r=e.replace(cg,"$&/")+"/"),Hl(s,t,r,"",function(u){return u})):s!=null&&(em(s)&&(s=PS(s,r+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(cg,"$&/")+"/")+e)),t.push(s)),1;if(a=0,n=n===""?".":n+":",lg(e))for(var l=0;l<e.length;l++){i=e[l];var c=n+ld(i,l);a+=Hl(i,t,r,c,s)}else if(c=ES(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=n+ld(i,l++),a+=Hl(i,t,r,c,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function ml(e,t,r){if(e==null)return e;var n=[],s=0;return Hl(e,n,"","",function(i){return t.call(r,i,s++)}),n}function RS(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var It={current:null},Wl={transition:null},AS={ReactCurrentDispatcher:It,ReactCurrentBatchConfig:Wl,ReactCurrentOwner:Zh};function dy(){throw Error("act(...) is not supported in production builds of React.")}be.Children={map:ml,forEach:function(e,t,r){ml(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return ml(e,function(){t++}),t},toArray:function(e){return ml(e,function(t){return t})||[]},only:function(e){if(!em(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};be.Component=bi;be.Fragment=yS;be.Profiler=bS;be.PureComponent=Xh;be.StrictMode=wS;be.Suspense=SS;be.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=AS;be.act=dy;be.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=oy({},e.props),s=e.key,i=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,a=Zh.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)ly.call(t,c)&&!cy.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:Ka,type:e.type,key:s,ref:i,props:n,_owner:a}};be.createContext=function(e){return e={$$typeof:_S,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:jS,_context:e},e.Consumer=e};be.createElement=uy;be.createFactory=function(e){var t=uy.bind(null,e);return t.type=e,t};be.createRef=function(){return{current:null}};be.forwardRef=function(e){return{$$typeof:NS,render:e}};be.isValidElement=em;be.lazy=function(e){return{$$typeof:CS,_payload:{_status:-1,_result:e},_init:RS}};be.memo=function(e,t){return{$$typeof:kS,type:e,compare:t===void 0?null:t}};be.startTransition=function(e){var t=Wl.transition;Wl.transition={};try{e()}finally{Wl.transition=t}};be.unstable_act=dy;be.useCallback=function(e,t){return It.current.useCallback(e,t)};be.useContext=function(e){return It.current.useContext(e)};be.useDebugValue=function(){};be.useDeferredValue=function(e){return It.current.useDeferredValue(e)};be.useEffect=function(e,t){return It.current.useEffect(e,t)};be.useId=function(){return It.current.useId()};be.useImperativeHandle=function(e,t,r){return It.current.useImperativeHandle(e,t,r)};be.useInsertionEffect=function(e,t){return It.current.useInsertionEffect(e,t)};be.useLayoutEffect=function(e,t){return It.current.useLayoutEffect(e,t)};be.useMemo=function(e,t){return It.current.useMemo(e,t)};be.useReducer=function(e,t,r){return It.current.useReducer(e,t,r)};be.useRef=function(e){return It.current.useRef(e)};be.useState=function(e){return It.current.useState(e)};be.useSyncExternalStore=function(e,t,r){return It.current.useSyncExternalStore(e,t,r)};be.useTransition=function(){return It.current.useTransition()};be.version="18.3.1";ny.exports=be;var m=ny.exports;const A=ty(m),fy=gS({__proto__:null,default:A},[m]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var MS=m,DS=Symbol.for("react.element"),OS=Symbol.for("react.fragment"),IS=Object.prototype.hasOwnProperty,LS=MS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,$S={key:!0,ref:!0,__self:!0,__source:!0};function hy(e,t,r){var n,s={},i=null,a=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(a=t.ref);for(n in t)IS.call(t,n)&&!$S.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)s[n]===void 0&&(s[n]=t[n]);return{$$typeof:DS,type:e,key:i,ref:a,props:s,_owner:LS.current}}nu.Fragment=OS;nu.jsx=hy;nu.jsxs=hy;ry.exports=nu;var o=ry.exports,my={exports:{}},cr={},py={exports:{}},gy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(C,P){var H=C.length;C.push(P);e:for(;0<H;){var $=H-1>>>1,W=C[$];if(0<s(W,P))C[$]=P,C[H]=W,H=$;else break e}}function r(C){return C.length===0?null:C[0]}function n(C){if(C.length===0)return null;var P=C[0],H=C.pop();if(H!==P){C[0]=H;e:for(var $=0,W=C.length,X=W>>>1;$<X;){var fe=2*($+1)-1,ye=C[fe],se=fe+1,ce=C[se];if(0>s(ye,H))se<W&&0>s(ce,ye)?(C[$]=ce,C[se]=H,$=se):(C[$]=ye,C[fe]=H,$=fe);else if(se<W&&0>s(ce,H))C[$]=ce,C[se]=H,$=se;else break e}}return P}function s(C,P){var H=C.sortIndex-P.sortIndex;return H!==0?H:C.id-P.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var a=Date,l=a.now();e.unstable_now=function(){return a.now()-l}}var c=[],u=[],f=1,d=null,h=3,p=!1,g=!1,v=!1,y=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(C){for(var P=r(u);P!==null;){if(P.callback===null)n(u);else if(P.startTime<=C)n(u),P.sortIndex=P.expirationTime,t(c,P);else break;P=r(u)}}function j(C){if(v=!1,b(C),!g)if(r(c)!==null)g=!0,L(_);else{var P=r(u);P!==null&&z(j,P.startTime-C)}}function _(C,P){g=!1,v&&(v=!1,x(k),k=-1),p=!0;var H=h;try{for(b(P),d=r(c);d!==null&&(!(d.expirationTime>P)||C&&!T());){var $=d.callback;if(typeof $=="function"){d.callback=null,h=d.priorityLevel;var W=$(d.expirationTime<=P);P=e.unstable_now(),typeof W=="function"?d.callback=W:d===r(c)&&n(c),b(P)}else n(c);d=r(c)}if(d!==null)var X=!0;else{var fe=r(u);fe!==null&&z(j,fe.startTime-P),X=!1}return X}finally{d=null,h=H,p=!1}}var N=!1,S=null,k=-1,E=5,M=-1;function T(){return!(e.unstable_now()-M<E)}function I(){if(S!==null){var C=e.unstable_now();M=C;var P=!0;try{P=S(!0,C)}finally{P?G():(N=!1,S=null)}}else N=!1}var G;if(typeof w=="function")G=function(){w(I)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,O=F.port2;F.port1.onmessage=I,G=function(){O.postMessage(null)}}else G=function(){y(I,0)};function L(C){S=C,N||(N=!0,G())}function z(C,P){k=y(function(){C(e.unstable_now())},P)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(C){C.callback=null},e.unstable_continueExecution=function(){g||p||(g=!0,L(_))},e.unstable_forceFrameRate=function(C){0>C||125<C?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<C?Math.floor(1e3/C):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(C){switch(h){case 1:case 2:case 3:var P=3;break;default:P=h}var H=h;h=P;try{return C()}finally{h=H}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(C,P){switch(C){case 1:case 2:case 3:case 4:case 5:break;default:C=3}var H=h;h=C;try{return P()}finally{h=H}},e.unstable_scheduleCallback=function(C,P,H){var $=e.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?$+H:$):H=$,C){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=H+W,C={id:f++,callback:P,priorityLevel:C,startTime:H,expirationTime:W,sortIndex:-1},H>$?(C.sortIndex=H,t(u,C),r(c)===null&&C===r(u)&&(v?(x(k),k=-1):v=!0,z(j,H-$))):(C.sortIndex=W,t(c,C),g||p||(g=!0,L(_))),C},e.unstable_shouldYield=T,e.unstable_wrapCallback=function(C){var P=h;return function(){var H=h;h=P;try{return C.apply(this,arguments)}finally{h=H}}}})(gy);py.exports=gy;var US=py.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FS=m,lr=US;function B(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var vy=new Set,ya={};function oo(e,t){ii(e,t),ii(e+"Capture",t)}function ii(e,t){for(ya[e]=t,e=0;e<t.length;e++)vy.add(t[e])}var Tn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ff=Object.prototype.hasOwnProperty,zS=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ug={},dg={};function BS(e){return ff.call(dg,e)?!0:ff.call(ug,e)?!1:zS.test(e)?dg[e]=!0:(ug[e]=!0,!1)}function GS(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function VS(e,t,r,n){if(t===null||typeof t>"u"||GS(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Lt(e,t,r,n,s,i,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=a}var gt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){gt[e]=new Lt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];gt[t]=new Lt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){gt[e]=new Lt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){gt[e]=new Lt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){gt[e]=new Lt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){gt[e]=new Lt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){gt[e]=new Lt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){gt[e]=new Lt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){gt[e]=new Lt(e,5,!1,e.toLowerCase(),null,!1,!1)});var tm=/[\-:]([a-z])/g;function rm(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(tm,rm);gt[t]=new Lt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(tm,rm);gt[t]=new Lt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(tm,rm);gt[t]=new Lt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){gt[e]=new Lt(e,1,!1,e.toLowerCase(),null,!1,!1)});gt.xlinkHref=new Lt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){gt[e]=new Lt(e,1,!1,e.toLowerCase(),null,!0,!0)});function nm(e,t,r,n){var s=gt.hasOwnProperty(t)?gt[t]:null;(s!==null?s.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(VS(t,r,s,n)&&(r=null),n||s===null?BS(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):s.mustUseProperty?e[s.propertyName]=r===null?s.type===3?!1:"":r:(t=s.attributeName,n=s.attributeNamespace,r===null?e.removeAttribute(t):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var $n=FS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,pl=Symbol.for("react.element"),Eo=Symbol.for("react.portal"),Po=Symbol.for("react.fragment"),sm=Symbol.for("react.strict_mode"),hf=Symbol.for("react.profiler"),xy=Symbol.for("react.provider"),yy=Symbol.for("react.context"),om=Symbol.for("react.forward_ref"),mf=Symbol.for("react.suspense"),pf=Symbol.for("react.suspense_list"),im=Symbol.for("react.memo"),qn=Symbol.for("react.lazy"),wy=Symbol.for("react.offscreen"),fg=Symbol.iterator;function $i(e){return e===null||typeof e!="object"?null:(e=fg&&e[fg]||e["@@iterator"],typeof e=="function"?e:null)}var He=Object.assign,cd;function Zi(e){if(cd===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);cd=t&&t[1]||""}return`
`+cd+e}var ud=!1;function dd(e,t){if(!e||ud)return"";ud=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=n.stack.split(`
`),a=s.length-1,l=i.length-1;1<=a&&0<=l&&s[a]!==i[l];)l--;for(;1<=a&&0<=l;a--,l--)if(s[a]!==i[l]){if(a!==1||l!==1)do if(a--,l--,0>l||s[a]!==i[l]){var c=`
`+s[a].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=a&&0<=l);break}}}finally{ud=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Zi(e):""}function HS(e){switch(e.tag){case 5:return Zi(e.type);case 16:return Zi("Lazy");case 13:return Zi("Suspense");case 19:return Zi("SuspenseList");case 0:case 2:case 15:return e=dd(e.type,!1),e;case 11:return e=dd(e.type.render,!1),e;case 1:return e=dd(e.type,!0),e;default:return""}}function gf(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Po:return"Fragment";case Eo:return"Portal";case hf:return"Profiler";case sm:return"StrictMode";case mf:return"Suspense";case pf:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case yy:return(e.displayName||"Context")+".Consumer";case xy:return(e._context.displayName||"Context")+".Provider";case om:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case im:return t=e.displayName||null,t!==null?t:gf(e.type)||"Memo";case qn:t=e._payload,e=e._init;try{return gf(e(t))}catch{}}return null}function WS(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return gf(t);case 8:return t===sm?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function xs(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function by(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function qS(e){var t=by(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(a){n=""+a,i.call(this,a)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function gl(e){e._valueTracker||(e._valueTracker=qS(e))}function jy(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=by(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function dc(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function vf(e,t){var r=t.checked;return He({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function hg(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=xs(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function _y(e,t){t=t.checked,t!=null&&nm(e,"checked",t,!1)}function xf(e,t){_y(e,t);var r=xs(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?yf(e,t.type,r):t.hasOwnProperty("defaultValue")&&yf(e,t.type,xs(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function mg(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function yf(e,t,r){(t!=="number"||dc(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var ea=Array.isArray;function Fo(e,t,r,n){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&n&&(e[r].defaultSelected=!0)}else{for(r=""+xs(r),t=null,s=0;s<e.length;s++){if(e[s].value===r){e[s].selected=!0,n&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function wf(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(B(91));return He({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function pg(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(B(92));if(ea(r)){if(1<r.length)throw Error(B(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:xs(r)}}function Ny(e,t){var r=xs(t.value),n=xs(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function gg(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Sy(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function bf(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Sy(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var vl,ky=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,s){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(vl=vl||document.createElement("div"),vl.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=vl.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function wa(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var oa={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},KS=["Webkit","ms","Moz","O"];Object.keys(oa).forEach(function(e){KS.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),oa[t]=oa[e]})});function Cy(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||oa.hasOwnProperty(e)&&oa[e]?(""+t).trim():t+"px"}function Ey(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=Cy(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,s):e[r]=s}}var YS=He({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function jf(e,t){if(t){if(YS[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(B(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(B(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(B(61))}if(t.style!=null&&typeof t.style!="object")throw Error(B(62))}}function _f(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Nf=null;function am(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Sf=null,zo=null,Bo=null;function vg(e){if(e=Xa(e)){if(typeof Sf!="function")throw Error(B(280));var t=e.stateNode;t&&(t=lu(t),Sf(e.stateNode,e.type,t))}}function Py(e){zo?Bo?Bo.push(e):Bo=[e]:zo=e}function Ty(){if(zo){var e=zo,t=Bo;if(Bo=zo=null,vg(e),t)for(e=0;e<t.length;e++)vg(t[e])}}function Ry(e,t){return e(t)}function Ay(){}var fd=!1;function My(e,t,r){if(fd)return e(t,r);fd=!0;try{return Ry(e,t,r)}finally{fd=!1,(zo!==null||Bo!==null)&&(Ay(),Ty())}}function ba(e,t){var r=e.stateNode;if(r===null)return null;var n=lu(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(B(231,t,typeof r));return r}var kf=!1;if(Tn)try{var Ui={};Object.defineProperty(Ui,"passive",{get:function(){kf=!0}}),window.addEventListener("test",Ui,Ui),window.removeEventListener("test",Ui,Ui)}catch{kf=!1}function QS(e,t,r,n,s,i,a,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(f){this.onError(f)}}var ia=!1,fc=null,hc=!1,Cf=null,XS={onError:function(e){ia=!0,fc=e}};function JS(e,t,r,n,s,i,a,l,c){ia=!1,fc=null,QS.apply(XS,arguments)}function ZS(e,t,r,n,s,i,a,l,c){if(JS.apply(this,arguments),ia){if(ia){var u=fc;ia=!1,fc=null}else throw Error(B(198));hc||(hc=!0,Cf=u)}}function io(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function Dy(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function xg(e){if(io(e)!==e)throw Error(B(188))}function ek(e){var t=e.alternate;if(!t){if(t=io(e),t===null)throw Error(B(188));return t!==e?null:e}for(var r=e,n=t;;){var s=r.return;if(s===null)break;var i=s.alternate;if(i===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===r)return xg(s),e;if(i===n)return xg(s),t;i=i.sibling}throw Error(B(188))}if(r.return!==n.return)r=s,n=i;else{for(var a=!1,l=s.child;l;){if(l===r){a=!0,r=s,n=i;break}if(l===n){a=!0,n=s,r=i;break}l=l.sibling}if(!a){for(l=i.child;l;){if(l===r){a=!0,r=i,n=s;break}if(l===n){a=!0,n=i,r=s;break}l=l.sibling}if(!a)throw Error(B(189))}}if(r.alternate!==n)throw Error(B(190))}if(r.tag!==3)throw Error(B(188));return r.stateNode.current===r?e:t}function Oy(e){return e=ek(e),e!==null?Iy(e):null}function Iy(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Iy(e);if(t!==null)return t;e=e.sibling}return null}var Ly=lr.unstable_scheduleCallback,yg=lr.unstable_cancelCallback,tk=lr.unstable_shouldYield,rk=lr.unstable_requestPaint,Xe=lr.unstable_now,nk=lr.unstable_getCurrentPriorityLevel,lm=lr.unstable_ImmediatePriority,$y=lr.unstable_UserBlockingPriority,mc=lr.unstable_NormalPriority,sk=lr.unstable_LowPriority,Uy=lr.unstable_IdlePriority,su=null,on=null;function ok(e){if(on&&typeof on.onCommitFiberRoot=="function")try{on.onCommitFiberRoot(su,e,void 0,(e.current.flags&128)===128)}catch{}}var Ur=Math.clz32?Math.clz32:lk,ik=Math.log,ak=Math.LN2;function lk(e){return e>>>=0,e===0?32:31-(ik(e)/ak|0)|0}var xl=64,yl=4194304;function ta(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function pc(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,s=e.suspendedLanes,i=e.pingedLanes,a=r&268435455;if(a!==0){var l=a&~s;l!==0?n=ta(l):(i&=a,i!==0&&(n=ta(i)))}else a=r&~s,a!==0?n=ta(a):i!==0&&(n=ta(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&s)&&(s=n&-n,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-Ur(t),s=1<<r,n|=e[r],t&=~s;return n}function ck(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function uk(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var a=31-Ur(i),l=1<<a,c=s[a];c===-1?(!(l&r)||l&n)&&(s[a]=ck(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function Ef(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Fy(){var e=xl;return xl<<=1,!(xl&4194240)&&(xl=64),e}function hd(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Ya(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ur(t),e[t]=r}function dk(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var s=31-Ur(r),i=1<<s;t[s]=0,n[s]=-1,e[s]=-1,r&=~i}}function cm(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-Ur(r),s=1<<n;s&t|e[n]&t&&(e[n]|=t),r&=~s}}var Pe=0;function zy(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var By,um,Gy,Vy,Hy,Pf=!1,wl=[],ls=null,cs=null,us=null,ja=new Map,_a=new Map,Qn=[],fk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function wg(e,t){switch(e){case"focusin":case"focusout":ls=null;break;case"dragenter":case"dragleave":cs=null;break;case"mouseover":case"mouseout":us=null;break;case"pointerover":case"pointerout":ja.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":_a.delete(t.pointerId)}}function Fi(e,t,r,n,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[s]},t!==null&&(t=Xa(t),t!==null&&um(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function hk(e,t,r,n,s){switch(t){case"focusin":return ls=Fi(ls,e,t,r,n,s),!0;case"dragenter":return cs=Fi(cs,e,t,r,n,s),!0;case"mouseover":return us=Fi(us,e,t,r,n,s),!0;case"pointerover":var i=s.pointerId;return ja.set(i,Fi(ja.get(i)||null,e,t,r,n,s)),!0;case"gotpointercapture":return i=s.pointerId,_a.set(i,Fi(_a.get(i)||null,e,t,r,n,s)),!0}return!1}function Wy(e){var t=Fs(e.target);if(t!==null){var r=io(t);if(r!==null){if(t=r.tag,t===13){if(t=Dy(r),t!==null){e.blockedOn=t,Hy(e.priority,function(){Gy(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ql(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Tf(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);Nf=n,r.target.dispatchEvent(n),Nf=null}else return t=Xa(r),t!==null&&um(t),e.blockedOn=r,!1;t.shift()}return!0}function bg(e,t,r){ql(e)&&r.delete(t)}function mk(){Pf=!1,ls!==null&&ql(ls)&&(ls=null),cs!==null&&ql(cs)&&(cs=null),us!==null&&ql(us)&&(us=null),ja.forEach(bg),_a.forEach(bg)}function zi(e,t){e.blockedOn===t&&(e.blockedOn=null,Pf||(Pf=!0,lr.unstable_scheduleCallback(lr.unstable_NormalPriority,mk)))}function Na(e){function t(s){return zi(s,e)}if(0<wl.length){zi(wl[0],e);for(var r=1;r<wl.length;r++){var n=wl[r];n.blockedOn===e&&(n.blockedOn=null)}}for(ls!==null&&zi(ls,e),cs!==null&&zi(cs,e),us!==null&&zi(us,e),ja.forEach(t),_a.forEach(t),r=0;r<Qn.length;r++)n=Qn[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<Qn.length&&(r=Qn[0],r.blockedOn===null);)Wy(r),r.blockedOn===null&&Qn.shift()}var Go=$n.ReactCurrentBatchConfig,gc=!0;function pk(e,t,r,n){var s=Pe,i=Go.transition;Go.transition=null;try{Pe=1,dm(e,t,r,n)}finally{Pe=s,Go.transition=i}}function gk(e,t,r,n){var s=Pe,i=Go.transition;Go.transition=null;try{Pe=4,dm(e,t,r,n)}finally{Pe=s,Go.transition=i}}function dm(e,t,r,n){if(gc){var s=Tf(e,t,r,n);if(s===null)_d(e,t,n,vc,r),wg(e,n);else if(hk(s,e,t,r,n))n.stopPropagation();else if(wg(e,n),t&4&&-1<fk.indexOf(e)){for(;s!==null;){var i=Xa(s);if(i!==null&&By(i),i=Tf(e,t,r,n),i===null&&_d(e,t,n,vc,r),i===s)break;s=i}s!==null&&n.stopPropagation()}else _d(e,t,n,null,r)}}var vc=null;function Tf(e,t,r,n){if(vc=null,e=am(n),e=Fs(e),e!==null)if(t=io(e),t===null)e=null;else if(r=t.tag,r===13){if(e=Dy(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return vc=e,null}function qy(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(nk()){case lm:return 1;case $y:return 4;case mc:case sk:return 16;case Uy:return 536870912;default:return 16}default:return 16}}var ss=null,fm=null,Kl=null;function Ky(){if(Kl)return Kl;var e,t=fm,r=t.length,n,s="value"in ss?ss.value:ss.textContent,i=s.length;for(e=0;e<r&&t[e]===s[e];e++);var a=r-e;for(n=1;n<=a&&t[r-n]===s[i-n];n++);return Kl=s.slice(e,1<n?1-n:void 0)}function Yl(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function bl(){return!0}function jg(){return!1}function ur(e){function t(r,n,s,i,a){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?bl:jg,this.isPropagationStopped=jg,this}return He(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=bl)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=bl)},persist:function(){},isPersistent:bl}),t}var ji={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hm=ur(ji),Qa=He({},ji,{view:0,detail:0}),vk=ur(Qa),md,pd,Bi,ou=He({},Qa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:mm,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Bi&&(Bi&&e.type==="mousemove"?(md=e.screenX-Bi.screenX,pd=e.screenY-Bi.screenY):pd=md=0,Bi=e),md)},movementY:function(e){return"movementY"in e?e.movementY:pd}}),_g=ur(ou),xk=He({},ou,{dataTransfer:0}),yk=ur(xk),wk=He({},Qa,{relatedTarget:0}),gd=ur(wk),bk=He({},ji,{animationName:0,elapsedTime:0,pseudoElement:0}),jk=ur(bk),_k=He({},ji,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Nk=ur(_k),Sk=He({},ji,{data:0}),Ng=ur(Sk),kk={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ck={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ek={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pk(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Ek[e])?!!t[e]:!1}function mm(){return Pk}var Tk=He({},Qa,{key:function(e){if(e.key){var t=kk[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Yl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Ck[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:mm,charCode:function(e){return e.type==="keypress"?Yl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Yl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Rk=ur(Tk),Ak=He({},ou,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Sg=ur(Ak),Mk=He({},Qa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:mm}),Dk=ur(Mk),Ok=He({},ji,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ik=ur(Ok),Lk=He({},ou,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),$k=ur(Lk),Uk=[9,13,27,32],pm=Tn&&"CompositionEvent"in window,aa=null;Tn&&"documentMode"in document&&(aa=document.documentMode);var Fk=Tn&&"TextEvent"in window&&!aa,Yy=Tn&&(!pm||aa&&8<aa&&11>=aa),kg=" ",Cg=!1;function Qy(e,t){switch(e){case"keyup":return Uk.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Xy(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var To=!1;function zk(e,t){switch(e){case"compositionend":return Xy(t);case"keypress":return t.which!==32?null:(Cg=!0,kg);case"textInput":return e=t.data,e===kg&&Cg?null:e;default:return null}}function Bk(e,t){if(To)return e==="compositionend"||!pm&&Qy(e,t)?(e=Ky(),Kl=fm=ss=null,To=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Yy&&t.locale!=="ko"?null:t.data;default:return null}}var Gk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Eg(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Gk[e.type]:t==="textarea"}function Jy(e,t,r,n){Py(n),t=xc(t,"onChange"),0<t.length&&(r=new hm("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var la=null,Sa=null;function Vk(e){c0(e,0)}function iu(e){var t=Mo(e);if(jy(t))return e}function Hk(e,t){if(e==="change")return t}var Zy=!1;if(Tn){var vd;if(Tn){var xd="oninput"in document;if(!xd){var Pg=document.createElement("div");Pg.setAttribute("oninput","return;"),xd=typeof Pg.oninput=="function"}vd=xd}else vd=!1;Zy=vd&&(!document.documentMode||9<document.documentMode)}function Tg(){la&&(la.detachEvent("onpropertychange",e0),Sa=la=null)}function e0(e){if(e.propertyName==="value"&&iu(Sa)){var t=[];Jy(t,Sa,e,am(e)),My(Vk,t)}}function Wk(e,t,r){e==="focusin"?(Tg(),la=t,Sa=r,la.attachEvent("onpropertychange",e0)):e==="focusout"&&Tg()}function qk(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return iu(Sa)}function Kk(e,t){if(e==="click")return iu(t)}function Yk(e,t){if(e==="input"||e==="change")return iu(t)}function Qk(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var zr=typeof Object.is=="function"?Object.is:Qk;function ka(e,t){if(zr(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!ff.call(t,s)||!zr(e[s],t[s]))return!1}return!0}function Rg(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ag(e,t){var r=Rg(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Rg(r)}}function t0(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?t0(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function r0(){for(var e=window,t=dc();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=dc(e.document)}return t}function gm(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Xk(e){var t=r0(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&t0(r.ownerDocument.documentElement,r)){if(n!==null&&gm(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=r.textContent.length,i=Math.min(n.start,s);n=n.end===void 0?i:Math.min(n.end,s),!e.extend&&i>n&&(s=n,n=i,i=s),s=Ag(r,i);var a=Ag(r,n);s&&a&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Jk=Tn&&"documentMode"in document&&11>=document.documentMode,Ro=null,Rf=null,ca=null,Af=!1;function Mg(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Af||Ro==null||Ro!==dc(n)||(n=Ro,"selectionStart"in n&&gm(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),ca&&ka(ca,n)||(ca=n,n=xc(Rf,"onSelect"),0<n.length&&(t=new hm("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Ro)))}function jl(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Ao={animationend:jl("Animation","AnimationEnd"),animationiteration:jl("Animation","AnimationIteration"),animationstart:jl("Animation","AnimationStart"),transitionend:jl("Transition","TransitionEnd")},yd={},n0={};Tn&&(n0=document.createElement("div").style,"AnimationEvent"in window||(delete Ao.animationend.animation,delete Ao.animationiteration.animation,delete Ao.animationstart.animation),"TransitionEvent"in window||delete Ao.transitionend.transition);function au(e){if(yd[e])return yd[e];if(!Ao[e])return e;var t=Ao[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in n0)return yd[e]=t[r];return e}var s0=au("animationend"),o0=au("animationiteration"),i0=au("animationstart"),a0=au("transitionend"),l0=new Map,Dg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ss(e,t){l0.set(e,t),oo(t,[e])}for(var wd=0;wd<Dg.length;wd++){var bd=Dg[wd],Zk=bd.toLowerCase(),eC=bd[0].toUpperCase()+bd.slice(1);Ss(Zk,"on"+eC)}Ss(s0,"onAnimationEnd");Ss(o0,"onAnimationIteration");Ss(i0,"onAnimationStart");Ss("dblclick","onDoubleClick");Ss("focusin","onFocus");Ss("focusout","onBlur");Ss(a0,"onTransitionEnd");ii("onMouseEnter",["mouseout","mouseover"]);ii("onMouseLeave",["mouseout","mouseover"]);ii("onPointerEnter",["pointerout","pointerover"]);ii("onPointerLeave",["pointerout","pointerover"]);oo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));oo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));oo("onBeforeInput",["compositionend","keypress","textInput","paste"]);oo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));oo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));oo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ra="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),tC=new Set("cancel close invalid load scroll toggle".split(" ").concat(ra));function Og(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,ZS(n,t,void 0,e),e.currentTarget=null}function c0(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],s=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var a=n.length-1;0<=a;a--){var l=n[a],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;Og(s,l,u),i=c}else for(a=0;a<n.length;a++){if(l=n[a],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;Og(s,l,u),i=c}}}if(hc)throw e=Cf,hc=!1,Cf=null,e}function Oe(e,t){var r=t[Lf];r===void 0&&(r=t[Lf]=new Set);var n=e+"__bubble";r.has(n)||(u0(t,e,2,!1),r.add(n))}function jd(e,t,r){var n=0;t&&(n|=4),u0(r,e,n,t)}var _l="_reactListening"+Math.random().toString(36).slice(2);function Ca(e){if(!e[_l]){e[_l]=!0,vy.forEach(function(r){r!=="selectionchange"&&(tC.has(r)||jd(r,!1,e),jd(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[_l]||(t[_l]=!0,jd("selectionchange",!1,t))}}function u0(e,t,r,n){switch(qy(t)){case 1:var s=pk;break;case 4:s=gk;break;default:s=dm}r=s.bind(null,t,r,e),s=void 0,!kf||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),n?s!==void 0?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):s!==void 0?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function _d(e,t,r,n,s){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var l=n.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(a===4)for(a=n.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;a=a.return}for(;l!==null;){if(a=Fs(l),a===null)return;if(c=a.tag,c===5||c===6){n=i=a;continue e}l=l.parentNode}}n=n.return}My(function(){var u=i,f=am(r),d=[];e:{var h=l0.get(e);if(h!==void 0){var p=hm,g=e;switch(e){case"keypress":if(Yl(r)===0)break e;case"keydown":case"keyup":p=Rk;break;case"focusin":g="focus",p=gd;break;case"focusout":g="blur",p=gd;break;case"beforeblur":case"afterblur":p=gd;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=_g;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=yk;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=Dk;break;case s0:case o0:case i0:p=jk;break;case a0:p=Ik;break;case"scroll":p=vk;break;case"wheel":p=$k;break;case"copy":case"cut":case"paste":p=Nk;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=Sg}var v=(t&4)!==0,y=!v&&e==="scroll",x=v?h!==null?h+"Capture":null:h;v=[];for(var w=u,b;w!==null;){b=w;var j=b.stateNode;if(b.tag===5&&j!==null&&(b=j,x!==null&&(j=ba(w,x),j!=null&&v.push(Ea(w,j,b)))),y)break;w=w.return}0<v.length&&(h=new p(h,g,null,r,f),d.push({event:h,listeners:v}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",h&&r!==Nf&&(g=r.relatedTarget||r.fromElement)&&(Fs(g)||g[Rn]))break e;if((p||h)&&(h=f.window===f?f:(h=f.ownerDocument)?h.defaultView||h.parentWindow:window,p?(g=r.relatedTarget||r.toElement,p=u,g=g?Fs(g):null,g!==null&&(y=io(g),g!==y||g.tag!==5&&g.tag!==6)&&(g=null)):(p=null,g=u),p!==g)){if(v=_g,j="onMouseLeave",x="onMouseEnter",w="mouse",(e==="pointerout"||e==="pointerover")&&(v=Sg,j="onPointerLeave",x="onPointerEnter",w="pointer"),y=p==null?h:Mo(p),b=g==null?h:Mo(g),h=new v(j,w+"leave",p,r,f),h.target=y,h.relatedTarget=b,j=null,Fs(f)===u&&(v=new v(x,w+"enter",g,r,f),v.target=b,v.relatedTarget=y,j=v),y=j,p&&g)t:{for(v=p,x=g,w=0,b=v;b;b=vo(b))w++;for(b=0,j=x;j;j=vo(j))b++;for(;0<w-b;)v=vo(v),w--;for(;0<b-w;)x=vo(x),b--;for(;w--;){if(v===x||x!==null&&v===x.alternate)break t;v=vo(v),x=vo(x)}v=null}else v=null;p!==null&&Ig(d,h,p,v,!1),g!==null&&y!==null&&Ig(d,y,g,v,!0)}}e:{if(h=u?Mo(u):window,p=h.nodeName&&h.nodeName.toLowerCase(),p==="select"||p==="input"&&h.type==="file")var _=Hk;else if(Eg(h))if(Zy)_=Yk;else{_=qk;var N=Wk}else(p=h.nodeName)&&p.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(_=Kk);if(_&&(_=_(e,u))){Jy(d,_,r,f);break e}N&&N(e,h,u),e==="focusout"&&(N=h._wrapperState)&&N.controlled&&h.type==="number"&&yf(h,"number",h.value)}switch(N=u?Mo(u):window,e){case"focusin":(Eg(N)||N.contentEditable==="true")&&(Ro=N,Rf=u,ca=null);break;case"focusout":ca=Rf=Ro=null;break;case"mousedown":Af=!0;break;case"contextmenu":case"mouseup":case"dragend":Af=!1,Mg(d,r,f);break;case"selectionchange":if(Jk)break;case"keydown":case"keyup":Mg(d,r,f)}var S;if(pm)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else To?Qy(e,r)&&(k="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(k="onCompositionStart");k&&(Yy&&r.locale!=="ko"&&(To||k!=="onCompositionStart"?k==="onCompositionEnd"&&To&&(S=Ky()):(ss=f,fm="value"in ss?ss.value:ss.textContent,To=!0)),N=xc(u,k),0<N.length&&(k=new Ng(k,e,null,r,f),d.push({event:k,listeners:N}),S?k.data=S:(S=Xy(r),S!==null&&(k.data=S)))),(S=Fk?zk(e,r):Bk(e,r))&&(u=xc(u,"onBeforeInput"),0<u.length&&(f=new Ng("onBeforeInput","beforeinput",null,r,f),d.push({event:f,listeners:u}),f.data=S))}c0(d,t)})}function Ea(e,t,r){return{instance:e,listener:t,currentTarget:r}}function xc(e,t){for(var r=t+"Capture",n=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=ba(e,r),i!=null&&n.unshift(Ea(e,i,s)),i=ba(e,t),i!=null&&n.push(Ea(e,i,s))),e=e.return}return n}function vo(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Ig(e,t,r,n,s){for(var i=t._reactName,a=[];r!==null&&r!==n;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&u!==null&&(l=u,s?(c=ba(r,i),c!=null&&a.unshift(Ea(r,c,l))):s||(c=ba(r,i),c!=null&&a.push(Ea(r,c,l)))),r=r.return}a.length!==0&&e.push({event:t,listeners:a})}var rC=/\r\n?/g,nC=/\u0000|\uFFFD/g;function Lg(e){return(typeof e=="string"?e:""+e).replace(rC,`
`).replace(nC,"")}function Nl(e,t,r){if(t=Lg(t),Lg(e)!==t&&r)throw Error(B(425))}function yc(){}var Mf=null,Df=null;function Of(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var If=typeof setTimeout=="function"?setTimeout:void 0,sC=typeof clearTimeout=="function"?clearTimeout:void 0,$g=typeof Promise=="function"?Promise:void 0,oC=typeof queueMicrotask=="function"?queueMicrotask:typeof $g<"u"?function(e){return $g.resolve(null).then(e).catch(iC)}:If;function iC(e){setTimeout(function(){throw e})}function Nd(e,t){var r=t,n=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){e.removeChild(s),Na(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);Na(t)}function ds(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Ug(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var _i=Math.random().toString(36).slice(2),rn="__reactFiber$"+_i,Pa="__reactProps$"+_i,Rn="__reactContainer$"+_i,Lf="__reactEvents$"+_i,aC="__reactListeners$"+_i,lC="__reactHandles$"+_i;function Fs(e){var t=e[rn];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Rn]||r[rn]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Ug(e);e!==null;){if(r=e[rn])return r;e=Ug(e)}return t}e=r,r=e.parentNode}return null}function Xa(e){return e=e[rn]||e[Rn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Mo(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(B(33))}function lu(e){return e[Pa]||null}var $f=[],Do=-1;function ks(e){return{current:e}}function Ie(e){0>Do||(e.current=$f[Do],$f[Do]=null,Do--)}function Me(e,t){Do++,$f[Do]=e.current,e.current=t}var ys={},Ct=ks(ys),Kt=ks(!1),Js=ys;function ai(e,t){var r=e.type.contextTypes;if(!r)return ys;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in r)s[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Yt(e){return e=e.childContextTypes,e!=null}function wc(){Ie(Kt),Ie(Ct)}function Fg(e,t,r){if(Ct.current!==ys)throw Error(B(168));Me(Ct,t),Me(Kt,r)}function d0(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in t))throw Error(B(108,WS(e)||"Unknown",s));return He({},r,n)}function bc(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ys,Js=Ct.current,Me(Ct,e),Me(Kt,Kt.current),!0}function zg(e,t,r){var n=e.stateNode;if(!n)throw Error(B(169));r?(e=d0(e,t,Js),n.__reactInternalMemoizedMergedChildContext=e,Ie(Kt),Ie(Ct),Me(Ct,e)):Ie(Kt),Me(Kt,r)}var _n=null,cu=!1,Sd=!1;function f0(e){_n===null?_n=[e]:_n.push(e)}function cC(e){cu=!0,f0(e)}function Cs(){if(!Sd&&_n!==null){Sd=!0;var e=0,t=Pe;try{var r=_n;for(Pe=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}_n=null,cu=!1}catch(s){throw _n!==null&&(_n=_n.slice(e+1)),Ly(lm,Cs),s}finally{Pe=t,Sd=!1}}return null}var Oo=[],Io=0,jc=null,_c=0,pr=[],gr=0,Zs=null,Nn=1,Sn="";function Os(e,t){Oo[Io++]=_c,Oo[Io++]=jc,jc=e,_c=t}function h0(e,t,r){pr[gr++]=Nn,pr[gr++]=Sn,pr[gr++]=Zs,Zs=e;var n=Nn;e=Sn;var s=32-Ur(n)-1;n&=~(1<<s),r+=1;var i=32-Ur(t)+s;if(30<i){var a=s-s%5;i=(n&(1<<a)-1).toString(32),n>>=a,s-=a,Nn=1<<32-Ur(t)+s|r<<s|n,Sn=i+e}else Nn=1<<i|r<<s|n,Sn=e}function vm(e){e.return!==null&&(Os(e,1),h0(e,1,0))}function xm(e){for(;e===jc;)jc=Oo[--Io],Oo[Io]=null,_c=Oo[--Io],Oo[Io]=null;for(;e===Zs;)Zs=pr[--gr],pr[gr]=null,Sn=pr[--gr],pr[gr]=null,Nn=pr[--gr],pr[gr]=null}var ir=null,rr=null,Ue=!1,Lr=null;function m0(e,t){var r=vr(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Bg(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,ir=e,rr=ds(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,ir=e,rr=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Zs!==null?{id:Nn,overflow:Sn}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=vr(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,ir=e,rr=null,!0):!1;default:return!1}}function Uf(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Ff(e){if(Ue){var t=rr;if(t){var r=t;if(!Bg(e,t)){if(Uf(e))throw Error(B(418));t=ds(r.nextSibling);var n=ir;t&&Bg(e,t)?m0(n,r):(e.flags=e.flags&-4097|2,Ue=!1,ir=e)}}else{if(Uf(e))throw Error(B(418));e.flags=e.flags&-4097|2,Ue=!1,ir=e}}}function Gg(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;ir=e}function Sl(e){if(e!==ir)return!1;if(!Ue)return Gg(e),Ue=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Of(e.type,e.memoizedProps)),t&&(t=rr)){if(Uf(e))throw p0(),Error(B(418));for(;t;)m0(e,t),t=ds(t.nextSibling)}if(Gg(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(B(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){rr=ds(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}rr=null}}else rr=ir?ds(e.stateNode.nextSibling):null;return!0}function p0(){for(var e=rr;e;)e=ds(e.nextSibling)}function li(){rr=ir=null,Ue=!1}function ym(e){Lr===null?Lr=[e]:Lr.push(e)}var uC=$n.ReactCurrentBatchConfig;function Gi(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(B(309));var n=r.stateNode}if(!n)throw Error(B(147,e));var s=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(a){var l=s.refs;a===null?delete l[i]:l[i]=a},t._stringRef=i,t)}if(typeof e!="string")throw Error(B(284));if(!r._owner)throw Error(B(290,e))}return e}function kl(e,t){throw e=Object.prototype.toString.call(t),Error(B(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Vg(e){var t=e._init;return t(e._payload)}function g0(e){function t(x,w){if(e){var b=x.deletions;b===null?(x.deletions=[w],x.flags|=16):b.push(w)}}function r(x,w){if(!e)return null;for(;w!==null;)t(x,w),w=w.sibling;return null}function n(x,w){for(x=new Map;w!==null;)w.key!==null?x.set(w.key,w):x.set(w.index,w),w=w.sibling;return x}function s(x,w){return x=ps(x,w),x.index=0,x.sibling=null,x}function i(x,w,b){return x.index=b,e?(b=x.alternate,b!==null?(b=b.index,b<w?(x.flags|=2,w):b):(x.flags|=2,w)):(x.flags|=1048576,w)}function a(x){return e&&x.alternate===null&&(x.flags|=2),x}function l(x,w,b,j){return w===null||w.tag!==6?(w=Ad(b,x.mode,j),w.return=x,w):(w=s(w,b),w.return=x,w)}function c(x,w,b,j){var _=b.type;return _===Po?f(x,w,b.props.children,j,b.key):w!==null&&(w.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===qn&&Vg(_)===w.type)?(j=s(w,b.props),j.ref=Gi(x,w,b),j.return=x,j):(j=rc(b.type,b.key,b.props,null,x.mode,j),j.ref=Gi(x,w,b),j.return=x,j)}function u(x,w,b,j){return w===null||w.tag!==4||w.stateNode.containerInfo!==b.containerInfo||w.stateNode.implementation!==b.implementation?(w=Md(b,x.mode,j),w.return=x,w):(w=s(w,b.children||[]),w.return=x,w)}function f(x,w,b,j,_){return w===null||w.tag!==7?(w=Ks(b,x.mode,j,_),w.return=x,w):(w=s(w,b),w.return=x,w)}function d(x,w,b){if(typeof w=="string"&&w!==""||typeof w=="number")return w=Ad(""+w,x.mode,b),w.return=x,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case pl:return b=rc(w.type,w.key,w.props,null,x.mode,b),b.ref=Gi(x,null,w),b.return=x,b;case Eo:return w=Md(w,x.mode,b),w.return=x,w;case qn:var j=w._init;return d(x,j(w._payload),b)}if(ea(w)||$i(w))return w=Ks(w,x.mode,b,null),w.return=x,w;kl(x,w)}return null}function h(x,w,b,j){var _=w!==null?w.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return _!==null?null:l(x,w,""+b,j);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case pl:return b.key===_?c(x,w,b,j):null;case Eo:return b.key===_?u(x,w,b,j):null;case qn:return _=b._init,h(x,w,_(b._payload),j)}if(ea(b)||$i(b))return _!==null?null:f(x,w,b,j,null);kl(x,b)}return null}function p(x,w,b,j,_){if(typeof j=="string"&&j!==""||typeof j=="number")return x=x.get(b)||null,l(w,x,""+j,_);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case pl:return x=x.get(j.key===null?b:j.key)||null,c(w,x,j,_);case Eo:return x=x.get(j.key===null?b:j.key)||null,u(w,x,j,_);case qn:var N=j._init;return p(x,w,b,N(j._payload),_)}if(ea(j)||$i(j))return x=x.get(b)||null,f(w,x,j,_,null);kl(w,j)}return null}function g(x,w,b,j){for(var _=null,N=null,S=w,k=w=0,E=null;S!==null&&k<b.length;k++){S.index>k?(E=S,S=null):E=S.sibling;var M=h(x,S,b[k],j);if(M===null){S===null&&(S=E);break}e&&S&&M.alternate===null&&t(x,S),w=i(M,w,k),N===null?_=M:N.sibling=M,N=M,S=E}if(k===b.length)return r(x,S),Ue&&Os(x,k),_;if(S===null){for(;k<b.length;k++)S=d(x,b[k],j),S!==null&&(w=i(S,w,k),N===null?_=S:N.sibling=S,N=S);return Ue&&Os(x,k),_}for(S=n(x,S);k<b.length;k++)E=p(S,x,k,b[k],j),E!==null&&(e&&E.alternate!==null&&S.delete(E.key===null?k:E.key),w=i(E,w,k),N===null?_=E:N.sibling=E,N=E);return e&&S.forEach(function(T){return t(x,T)}),Ue&&Os(x,k),_}function v(x,w,b,j){var _=$i(b);if(typeof _!="function")throw Error(B(150));if(b=_.call(b),b==null)throw Error(B(151));for(var N=_=null,S=w,k=w=0,E=null,M=b.next();S!==null&&!M.done;k++,M=b.next()){S.index>k?(E=S,S=null):E=S.sibling;var T=h(x,S,M.value,j);if(T===null){S===null&&(S=E);break}e&&S&&T.alternate===null&&t(x,S),w=i(T,w,k),N===null?_=T:N.sibling=T,N=T,S=E}if(M.done)return r(x,S),Ue&&Os(x,k),_;if(S===null){for(;!M.done;k++,M=b.next())M=d(x,M.value,j),M!==null&&(w=i(M,w,k),N===null?_=M:N.sibling=M,N=M);return Ue&&Os(x,k),_}for(S=n(x,S);!M.done;k++,M=b.next())M=p(S,x,k,M.value,j),M!==null&&(e&&M.alternate!==null&&S.delete(M.key===null?k:M.key),w=i(M,w,k),N===null?_=M:N.sibling=M,N=M);return e&&S.forEach(function(I){return t(x,I)}),Ue&&Os(x,k),_}function y(x,w,b,j){if(typeof b=="object"&&b!==null&&b.type===Po&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case pl:e:{for(var _=b.key,N=w;N!==null;){if(N.key===_){if(_=b.type,_===Po){if(N.tag===7){r(x,N.sibling),w=s(N,b.props.children),w.return=x,x=w;break e}}else if(N.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===qn&&Vg(_)===N.type){r(x,N.sibling),w=s(N,b.props),w.ref=Gi(x,N,b),w.return=x,x=w;break e}r(x,N);break}else t(x,N);N=N.sibling}b.type===Po?(w=Ks(b.props.children,x.mode,j,b.key),w.return=x,x=w):(j=rc(b.type,b.key,b.props,null,x.mode,j),j.ref=Gi(x,w,b),j.return=x,x=j)}return a(x);case Eo:e:{for(N=b.key;w!==null;){if(w.key===N)if(w.tag===4&&w.stateNode.containerInfo===b.containerInfo&&w.stateNode.implementation===b.implementation){r(x,w.sibling),w=s(w,b.children||[]),w.return=x,x=w;break e}else{r(x,w);break}else t(x,w);w=w.sibling}w=Md(b,x.mode,j),w.return=x,x=w}return a(x);case qn:return N=b._init,y(x,w,N(b._payload),j)}if(ea(b))return g(x,w,b,j);if($i(b))return v(x,w,b,j);kl(x,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,w!==null&&w.tag===6?(r(x,w.sibling),w=s(w,b),w.return=x,x=w):(r(x,w),w=Ad(b,x.mode,j),w.return=x,x=w),a(x)):r(x,w)}return y}var ci=g0(!0),v0=g0(!1),Nc=ks(null),Sc=null,Lo=null,wm=null;function bm(){wm=Lo=Sc=null}function jm(e){var t=Nc.current;Ie(Nc),e._currentValue=t}function zf(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Vo(e,t){Sc=e,wm=Lo=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Wt=!0),e.firstContext=null)}function jr(e){var t=e._currentValue;if(wm!==e)if(e={context:e,memoizedValue:t,next:null},Lo===null){if(Sc===null)throw Error(B(308));Lo=e,Sc.dependencies={lanes:0,firstContext:e}}else Lo=Lo.next=e;return t}var zs=null;function _m(e){zs===null?zs=[e]:zs.push(e)}function x0(e,t,r,n){var s=t.interleaved;return s===null?(r.next=r,_m(t)):(r.next=s.next,s.next=r),t.interleaved=r,An(e,n)}function An(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Kn=!1;function Nm(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function y0(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Cn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function fs(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,ke&2){var s=n.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),n.pending=t,An(e,r)}return s=n.interleaved,s===null?(t.next=t,_m(n)):(t.next=s.next,s.next=t),n.interleaved=t,An(e,r)}function Ql(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,cm(e,r)}}function Hg(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?s=i=a:i=i.next=a,r=r.next}while(r!==null);i===null?s=i=t:i=i.next=t}else s=i=t;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function kc(e,t,r,n){var s=e.updateQueue;Kn=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,a===null?i=u:a.next=u,a=c;var f=e.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==a&&(l===null?f.firstBaseUpdate=u:l.next=u,f.lastBaseUpdate=c))}if(i!==null){var d=s.baseState;a=0,f=u=c=null,l=i;do{var h=l.lane,p=l.eventTime;if((n&h)===h){f!==null&&(f=f.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var g=e,v=l;switch(h=t,p=r,v.tag){case 1:if(g=v.payload,typeof g=="function"){d=g.call(p,d,h);break e}d=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=v.payload,h=typeof g=="function"?g.call(p,d,h):g,h==null)break e;d=He({},d,h);break e;case 2:Kn=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,h=s.effects,h===null?s.effects=[l]:h.push(l))}else p={eventTime:p,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(u=f=p,c=d):f=f.next=p,a|=h;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;h=l,l=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(!0);if(f===null&&(c=d),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=f,t=s.shared.interleaved,t!==null){s=t;do a|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);to|=a,e.lanes=a,e.memoizedState=d}}function Wg(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(B(191,s));s.call(n)}}}var Ja={},an=ks(Ja),Ta=ks(Ja),Ra=ks(Ja);function Bs(e){if(e===Ja)throw Error(B(174));return e}function Sm(e,t){switch(Me(Ra,t),Me(Ta,e),Me(an,Ja),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:bf(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=bf(t,e)}Ie(an),Me(an,t)}function ui(){Ie(an),Ie(Ta),Ie(Ra)}function w0(e){Bs(Ra.current);var t=Bs(an.current),r=bf(t,e.type);t!==r&&(Me(Ta,e),Me(an,r))}function km(e){Ta.current===e&&(Ie(an),Ie(Ta))}var Be=ks(0);function Cc(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var kd=[];function Cm(){for(var e=0;e<kd.length;e++)kd[e]._workInProgressVersionPrimary=null;kd.length=0}var Xl=$n.ReactCurrentDispatcher,Cd=$n.ReactCurrentBatchConfig,eo=0,Ve=null,nt=null,ct=null,Ec=!1,ua=!1,Aa=0,dC=0;function bt(){throw Error(B(321))}function Em(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!zr(e[r],t[r]))return!1;return!0}function Pm(e,t,r,n,s,i){if(eo=i,Ve=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Xl.current=e===null||e.memoizedState===null?pC:gC,e=r(n,s),ua){i=0;do{if(ua=!1,Aa=0,25<=i)throw Error(B(301));i+=1,ct=nt=null,t.updateQueue=null,Xl.current=vC,e=r(n,s)}while(ua)}if(Xl.current=Pc,t=nt!==null&&nt.next!==null,eo=0,ct=nt=Ve=null,Ec=!1,t)throw Error(B(300));return e}function Tm(){var e=Aa!==0;return Aa=0,e}function Jr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ct===null?Ve.memoizedState=ct=e:ct=ct.next=e,ct}function _r(){if(nt===null){var e=Ve.alternate;e=e!==null?e.memoizedState:null}else e=nt.next;var t=ct===null?Ve.memoizedState:ct.next;if(t!==null)ct=t,nt=e;else{if(e===null)throw Error(B(310));nt=e,e={memoizedState:nt.memoizedState,baseState:nt.baseState,baseQueue:nt.baseQueue,queue:nt.queue,next:null},ct===null?Ve.memoizedState=ct=e:ct=ct.next=e}return ct}function Ma(e,t){return typeof t=="function"?t(e):t}function Ed(e){var t=_r(),r=t.queue;if(r===null)throw Error(B(311));r.lastRenderedReducer=e;var n=nt,s=n.baseQueue,i=r.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}n.baseQueue=s=i,r.pending=null}if(s!==null){i=s.next,n=n.baseState;var l=a=null,c=null,u=i;do{var f=u.lane;if((eo&f)===f)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var d={lane:f,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=d,a=n):c=c.next=d,Ve.lanes|=f,to|=f}u=u.next}while(u!==null&&u!==i);c===null?a=n:c.next=l,zr(n,t.memoizedState)||(Wt=!0),t.memoizedState=n,t.baseState=a,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){s=e;do i=s.lane,Ve.lanes|=i,to|=i,s=s.next;while(s!==e)}else s===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Pd(e){var t=_r(),r=t.queue;if(r===null)throw Error(B(311));r.lastRenderedReducer=e;var n=r.dispatch,s=r.pending,i=t.memoizedState;if(s!==null){r.pending=null;var a=s=s.next;do i=e(i,a.action),a=a.next;while(a!==s);zr(i,t.memoizedState)||(Wt=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function b0(){}function j0(e,t){var r=Ve,n=_r(),s=t(),i=!zr(n.memoizedState,s);if(i&&(n.memoizedState=s,Wt=!0),n=n.queue,Rm(S0.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||ct!==null&&ct.memoizedState.tag&1){if(r.flags|=2048,Da(9,N0.bind(null,r,n,s,t),void 0,null),ft===null)throw Error(B(349));eo&30||_0(r,t,s)}return s}function _0(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Ve.updateQueue,t===null?(t={lastEffect:null,stores:null},Ve.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function N0(e,t,r,n){t.value=r,t.getSnapshot=n,k0(t)&&C0(e)}function S0(e,t,r){return r(function(){k0(t)&&C0(e)})}function k0(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!zr(e,r)}catch{return!0}}function C0(e){var t=An(e,1);t!==null&&Fr(t,e,1,-1)}function qg(e){var t=Jr();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ma,lastRenderedState:e},t.queue=e,e=e.dispatch=mC.bind(null,Ve,e),[t.memoizedState,e]}function Da(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=Ve.updateQueue,t===null?(t={lastEffect:null,stores:null},Ve.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function E0(){return _r().memoizedState}function Jl(e,t,r,n){var s=Jr();Ve.flags|=e,s.memoizedState=Da(1|t,r,void 0,n===void 0?null:n)}function uu(e,t,r,n){var s=_r();n=n===void 0?null:n;var i=void 0;if(nt!==null){var a=nt.memoizedState;if(i=a.destroy,n!==null&&Em(n,a.deps)){s.memoizedState=Da(t,r,i,n);return}}Ve.flags|=e,s.memoizedState=Da(1|t,r,i,n)}function Kg(e,t){return Jl(8390656,8,e,t)}function Rm(e,t){return uu(2048,8,e,t)}function P0(e,t){return uu(4,2,e,t)}function T0(e,t){return uu(4,4,e,t)}function R0(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function A0(e,t,r){return r=r!=null?r.concat([e]):null,uu(4,4,R0.bind(null,t,e),r)}function Am(){}function M0(e,t){var r=_r();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Em(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function D0(e,t){var r=_r();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Em(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function O0(e,t,r){return eo&21?(zr(r,t)||(r=Fy(),Ve.lanes|=r,to|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Wt=!0),e.memoizedState=r)}function fC(e,t){var r=Pe;Pe=r!==0&&4>r?r:4,e(!0);var n=Cd.transition;Cd.transition={};try{e(!1),t()}finally{Pe=r,Cd.transition=n}}function I0(){return _r().memoizedState}function hC(e,t,r){var n=ms(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},L0(e))$0(t,r);else if(r=x0(e,t,r,n),r!==null){var s=Ot();Fr(r,e,n,s),U0(r,t,n)}}function mC(e,t,r){var n=ms(e),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(L0(e))$0(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var a=t.lastRenderedState,l=i(a,r);if(s.hasEagerState=!0,s.eagerState=l,zr(l,a)){var c=t.interleaved;c===null?(s.next=s,_m(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}r=x0(e,t,s,n),r!==null&&(s=Ot(),Fr(r,e,n,s),U0(r,t,n))}}function L0(e){var t=e.alternate;return e===Ve||t!==null&&t===Ve}function $0(e,t){ua=Ec=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function U0(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,cm(e,r)}}var Pc={readContext:jr,useCallback:bt,useContext:bt,useEffect:bt,useImperativeHandle:bt,useInsertionEffect:bt,useLayoutEffect:bt,useMemo:bt,useReducer:bt,useRef:bt,useState:bt,useDebugValue:bt,useDeferredValue:bt,useTransition:bt,useMutableSource:bt,useSyncExternalStore:bt,useId:bt,unstable_isNewReconciler:!1},pC={readContext:jr,useCallback:function(e,t){return Jr().memoizedState=[e,t===void 0?null:t],e},useContext:jr,useEffect:Kg,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Jl(4194308,4,R0.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Jl(4194308,4,e,t)},useInsertionEffect:function(e,t){return Jl(4,2,e,t)},useMemo:function(e,t){var r=Jr();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Jr();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=hC.bind(null,Ve,e),[n.memoizedState,e]},useRef:function(e){var t=Jr();return e={current:e},t.memoizedState=e},useState:qg,useDebugValue:Am,useDeferredValue:function(e){return Jr().memoizedState=e},useTransition:function(){var e=qg(!1),t=e[0];return e=fC.bind(null,e[1]),Jr().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=Ve,s=Jr();if(Ue){if(r===void 0)throw Error(B(407));r=r()}else{if(r=t(),ft===null)throw Error(B(349));eo&30||_0(n,t,r)}s.memoizedState=r;var i={value:r,getSnapshot:t};return s.queue=i,Kg(S0.bind(null,n,i,e),[e]),n.flags|=2048,Da(9,N0.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=Jr(),t=ft.identifierPrefix;if(Ue){var r=Sn,n=Nn;r=(n&~(1<<32-Ur(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=Aa++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=dC++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},gC={readContext:jr,useCallback:M0,useContext:jr,useEffect:Rm,useImperativeHandle:A0,useInsertionEffect:P0,useLayoutEffect:T0,useMemo:D0,useReducer:Ed,useRef:E0,useState:function(){return Ed(Ma)},useDebugValue:Am,useDeferredValue:function(e){var t=_r();return O0(t,nt.memoizedState,e)},useTransition:function(){var e=Ed(Ma)[0],t=_r().memoizedState;return[e,t]},useMutableSource:b0,useSyncExternalStore:j0,useId:I0,unstable_isNewReconciler:!1},vC={readContext:jr,useCallback:M0,useContext:jr,useEffect:Rm,useImperativeHandle:A0,useInsertionEffect:P0,useLayoutEffect:T0,useMemo:D0,useReducer:Pd,useRef:E0,useState:function(){return Pd(Ma)},useDebugValue:Am,useDeferredValue:function(e){var t=_r();return nt===null?t.memoizedState=e:O0(t,nt.memoizedState,e)},useTransition:function(){var e=Pd(Ma)[0],t=_r().memoizedState;return[e,t]},useMutableSource:b0,useSyncExternalStore:j0,useId:I0,unstable_isNewReconciler:!1};function Tr(e,t){if(e&&e.defaultProps){t=He({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Bf(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:He({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var du={isMounted:function(e){return(e=e._reactInternals)?io(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Ot(),s=ms(e),i=Cn(n,s);i.payload=t,r!=null&&(i.callback=r),t=fs(e,i,s),t!==null&&(Fr(t,e,s,n),Ql(t,e,s))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Ot(),s=ms(e),i=Cn(n,s);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=fs(e,i,s),t!==null&&(Fr(t,e,s,n),Ql(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Ot(),n=ms(e),s=Cn(r,n);s.tag=2,t!=null&&(s.callback=t),t=fs(e,s,n),t!==null&&(Fr(t,e,n,r),Ql(t,e,n))}};function Yg(e,t,r,n,s,i,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,a):t.prototype&&t.prototype.isPureReactComponent?!ka(r,n)||!ka(s,i):!0}function F0(e,t,r){var n=!1,s=ys,i=t.contextType;return typeof i=="object"&&i!==null?i=jr(i):(s=Yt(t)?Js:Ct.current,n=t.contextTypes,i=(n=n!=null)?ai(e,s):ys),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=du,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function Qg(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&du.enqueueReplaceState(t,t.state,null)}function Gf(e,t,r,n){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs={},Nm(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=jr(i):(i=Yt(t)?Js:Ct.current,s.context=ai(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Bf(e,t,i,r),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&du.enqueueReplaceState(s,s.state,null),kc(e,r,s,n),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function di(e,t){try{var r="",n=t;do r+=HS(n),n=n.return;while(n);var s=r}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function Td(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Vf(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var xC=typeof WeakMap=="function"?WeakMap:Map;function z0(e,t,r){r=Cn(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Rc||(Rc=!0,eh=n),Vf(e,t)},r}function B0(e,t,r){r=Cn(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var s=t.value;r.payload=function(){return n(s)},r.callback=function(){Vf(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){Vf(e,t),typeof n!="function"&&(hs===null?hs=new Set([this]):hs.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),r}function Xg(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new xC;var s=new Set;n.set(t,s)}else s=n.get(t),s===void 0&&(s=new Set,n.set(t,s));s.has(r)||(s.add(r),e=AC.bind(null,e,t,r),t.then(e,e))}function Jg(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Zg(e,t,r,n,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Cn(-1,1),t.tag=2,fs(r,t,1))),r.lanes|=1),e)}var yC=$n.ReactCurrentOwner,Wt=!1;function At(e,t,r,n){t.child=e===null?v0(t,null,r,n):ci(t,e.child,r,n)}function ev(e,t,r,n,s){r=r.render;var i=t.ref;return Vo(t,s),n=Pm(e,t,r,n,i,s),r=Tm(),e!==null&&!Wt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Mn(e,t,s)):(Ue&&r&&vm(t),t.flags|=1,At(e,t,n,s),t.child)}function tv(e,t,r,n,s){if(e===null){var i=r.type;return typeof i=="function"&&!Fm(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,G0(e,t,i,n,s)):(e=rc(r.type,null,n,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var a=i.memoizedProps;if(r=r.compare,r=r!==null?r:ka,r(a,n)&&e.ref===t.ref)return Mn(e,t,s)}return t.flags|=1,e=ps(i,n),e.ref=t.ref,e.return=t,t.child=e}function G0(e,t,r,n,s){if(e!==null){var i=e.memoizedProps;if(ka(i,n)&&e.ref===t.ref)if(Wt=!1,t.pendingProps=n=i,(e.lanes&s)!==0)e.flags&131072&&(Wt=!0);else return t.lanes=e.lanes,Mn(e,t,s)}return Hf(e,t,r,n,s)}function V0(e,t,r){var n=t.pendingProps,s=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Me(Uo,er),er|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Me(Uo,er),er|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,Me(Uo,er),er|=n}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,Me(Uo,er),er|=n;return At(e,t,s,r),t.child}function H0(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Hf(e,t,r,n,s){var i=Yt(r)?Js:Ct.current;return i=ai(t,i),Vo(t,s),r=Pm(e,t,r,n,i,s),n=Tm(),e!==null&&!Wt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Mn(e,t,s)):(Ue&&n&&vm(t),t.flags|=1,At(e,t,r,s),t.child)}function rv(e,t,r,n,s){if(Yt(r)){var i=!0;bc(t)}else i=!1;if(Vo(t,s),t.stateNode===null)Zl(e,t),F0(t,r,n),Gf(t,r,n,s),n=!0;else if(e===null){var a=t.stateNode,l=t.memoizedProps;a.props=l;var c=a.context,u=r.contextType;typeof u=="object"&&u!==null?u=jr(u):(u=Yt(r)?Js:Ct.current,u=ai(t,u));var f=r.getDerivedStateFromProps,d=typeof f=="function"||typeof a.getSnapshotBeforeUpdate=="function";d||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==n||c!==u)&&Qg(t,a,n,u),Kn=!1;var h=t.memoizedState;a.state=h,kc(t,n,a,s),c=t.memoizedState,l!==n||h!==c||Kt.current||Kn?(typeof f=="function"&&(Bf(t,r,f,n),c=t.memoizedState),(l=Kn||Yg(t,r,l,n,h,c,u))?(d||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),a.props=n,a.state=c,a.context=u,n=l):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{a=t.stateNode,y0(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:Tr(t.type,l),a.props=u,d=t.pendingProps,h=a.context,c=r.contextType,typeof c=="object"&&c!==null?c=jr(c):(c=Yt(r)?Js:Ct.current,c=ai(t,c));var p=r.getDerivedStateFromProps;(f=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==d||h!==c)&&Qg(t,a,n,c),Kn=!1,h=t.memoizedState,a.state=h,kc(t,n,a,s);var g=t.memoizedState;l!==d||h!==g||Kt.current||Kn?(typeof p=="function"&&(Bf(t,r,p,n),g=t.memoizedState),(u=Kn||Yg(t,r,u,n,h,g,c)||!1)?(f||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,g,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,g,c)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=g),a.props=n,a.state=g,a.context=c,n=u):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),n=!1)}return Wf(e,t,r,n,i,s)}function Wf(e,t,r,n,s,i){H0(e,t);var a=(t.flags&128)!==0;if(!n&&!a)return s&&zg(t,r,!1),Mn(e,t,i);n=t.stateNode,yC.current=t;var l=a&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&a?(t.child=ci(t,e.child,null,i),t.child=ci(t,null,l,i)):At(e,t,l,i),t.memoizedState=n.state,s&&zg(t,r,!0),t.child}function W0(e){var t=e.stateNode;t.pendingContext?Fg(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Fg(e,t.context,!1),Sm(e,t.containerInfo)}function nv(e,t,r,n,s){return li(),ym(s),t.flags|=256,At(e,t,r,n),t.child}var qf={dehydrated:null,treeContext:null,retryLane:0};function Kf(e){return{baseLanes:e,cachePool:null,transitions:null}}function q0(e,t,r){var n=t.pendingProps,s=Be.current,i=!1,a=(t.flags&128)!==0,l;if((l=a)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),Me(Be,s&1),e===null)return Ff(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=n.children,e=n.fallback,i?(n=t.mode,i=t.child,a={mode:"hidden",children:a},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=mu(a,n,0,null),e=Ks(e,n,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Kf(r),t.memoizedState=qf,e):Mm(t,a));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return wC(e,t,a,n,l,s,r);if(i){i=n.fallback,a=t.mode,s=e.child,l=s.sibling;var c={mode:"hidden",children:n.children};return!(a&1)&&t.child!==s?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=ps(s,c),n.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=ps(l,i):(i=Ks(i,a,r,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,a=e.child.memoizedState,a=a===null?Kf(r):{baseLanes:a.baseLanes|r,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=e.childLanes&~r,t.memoizedState=qf,n}return i=e.child,e=i.sibling,n=ps(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function Mm(e,t){return t=mu({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Cl(e,t,r,n){return n!==null&&ym(n),ci(t,e.child,null,r),e=Mm(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function wC(e,t,r,n,s,i,a){if(r)return t.flags&256?(t.flags&=-257,n=Td(Error(B(422))),Cl(e,t,a,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,s=t.mode,n=mu({mode:"visible",children:n.children},s,0,null),i=Ks(i,s,a,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&ci(t,e.child,null,a),t.child.memoizedState=Kf(a),t.memoizedState=qf,i);if(!(t.mode&1))return Cl(e,t,a,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var l=n.dgst;return n=l,i=Error(B(419)),n=Td(i,n,void 0),Cl(e,t,a,n)}if(l=(a&e.childLanes)!==0,Wt||l){if(n=ft,n!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,An(e,s),Fr(n,e,s,-1))}return Um(),n=Td(Error(B(421))),Cl(e,t,a,n)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=MC.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,rr=ds(s.nextSibling),ir=t,Ue=!0,Lr=null,e!==null&&(pr[gr++]=Nn,pr[gr++]=Sn,pr[gr++]=Zs,Nn=e.id,Sn=e.overflow,Zs=t),t=Mm(t,n.children),t.flags|=4096,t)}function sv(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),zf(e.return,t,r)}function Rd(e,t,r,n,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=s)}function K0(e,t,r){var n=t.pendingProps,s=n.revealOrder,i=n.tail;if(At(e,t,n.children,r),n=Be.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&sv(e,r,t);else if(e.tag===19)sv(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Me(Be,n),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(r=t.child,s=null;r!==null;)e=r.alternate,e!==null&&Cc(e)===null&&(s=r),r=r.sibling;r=s,r===null?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),Rd(t,!1,s,r,i);break;case"backwards":for(r=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Cc(e)===null){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}Rd(t,!0,r,null,i);break;case"together":Rd(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Zl(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Mn(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),to|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(B(153));if(t.child!==null){for(e=t.child,r=ps(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=ps(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function bC(e,t,r){switch(t.tag){case 3:W0(t),li();break;case 5:w0(t);break;case 1:Yt(t.type)&&bc(t);break;case 4:Sm(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,s=t.memoizedProps.value;Me(Nc,n._currentValue),n._currentValue=s;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(Me(Be,Be.current&1),t.flags|=128,null):r&t.child.childLanes?q0(e,t,r):(Me(Be,Be.current&1),e=Mn(e,t,r),e!==null?e.sibling:null);Me(Be,Be.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return K0(e,t,r);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Me(Be,Be.current),n)break;return null;case 22:case 23:return t.lanes=0,V0(e,t,r)}return Mn(e,t,r)}var Y0,Yf,Q0,X0;Y0=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Yf=function(){};Q0=function(e,t,r,n){var s=e.memoizedProps;if(s!==n){e=t.stateNode,Bs(an.current);var i=null;switch(r){case"input":s=vf(e,s),n=vf(e,n),i=[];break;case"select":s=He({},s,{value:void 0}),n=He({},n,{value:void 0}),i=[];break;case"textarea":s=wf(e,s),n=wf(e,n),i=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=yc)}jf(r,n);var a;r=null;for(u in s)if(!n.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(a in l)l.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(ya.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in n){var c=n[u];if(l=s!=null?s[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(r||(r={}),r[a]=c[a])}else r||(i||(i=[]),i.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(ya.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Oe("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}r&&(i=i||[]).push("style",r);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};X0=function(e,t,r,n){r!==n&&(t.flags|=4)};function Vi(e,t){if(!Ue)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function jt(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function jC(e,t,r){var n=t.pendingProps;switch(xm(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return jt(t),null;case 1:return Yt(t.type)&&wc(),jt(t),null;case 3:return n=t.stateNode,ui(),Ie(Kt),Ie(Ct),Cm(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Sl(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Lr!==null&&(nh(Lr),Lr=null))),Yf(e,t),jt(t),null;case 5:km(t);var s=Bs(Ra.current);if(r=t.type,e!==null&&t.stateNode!=null)Q0(e,t,r,n,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(B(166));return jt(t),null}if(e=Bs(an.current),Sl(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[rn]=t,n[Pa]=i,e=(t.mode&1)!==0,r){case"dialog":Oe("cancel",n),Oe("close",n);break;case"iframe":case"object":case"embed":Oe("load",n);break;case"video":case"audio":for(s=0;s<ra.length;s++)Oe(ra[s],n);break;case"source":Oe("error",n);break;case"img":case"image":case"link":Oe("error",n),Oe("load",n);break;case"details":Oe("toggle",n);break;case"input":hg(n,i),Oe("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},Oe("invalid",n);break;case"textarea":pg(n,i),Oe("invalid",n)}jf(r,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var l=i[a];a==="children"?typeof l=="string"?n.textContent!==l&&(i.suppressHydrationWarning!==!0&&Nl(n.textContent,l,e),s=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Nl(n.textContent,l,e),s=["children",""+l]):ya.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&Oe("scroll",n)}switch(r){case"input":gl(n),mg(n,i,!0);break;case"textarea":gl(n),gg(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=yc)}n=s,t.updateQueue=n,n!==null&&(t.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Sy(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=a.createElement(r,{is:n.is}):(e=a.createElement(r),r==="select"&&(a=e,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):e=a.createElementNS(e,r),e[rn]=t,e[Pa]=n,Y0(e,t,!1,!1),t.stateNode=e;e:{switch(a=_f(r,n),r){case"dialog":Oe("cancel",e),Oe("close",e),s=n;break;case"iframe":case"object":case"embed":Oe("load",e),s=n;break;case"video":case"audio":for(s=0;s<ra.length;s++)Oe(ra[s],e);s=n;break;case"source":Oe("error",e),s=n;break;case"img":case"image":case"link":Oe("error",e),Oe("load",e),s=n;break;case"details":Oe("toggle",e),s=n;break;case"input":hg(e,n),s=vf(e,n),Oe("invalid",e);break;case"option":s=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},s=He({},n,{value:void 0}),Oe("invalid",e);break;case"textarea":pg(e,n),s=wf(e,n),Oe("invalid",e);break;default:s=n}jf(r,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?Ey(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&ky(e,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&wa(e,c):typeof c=="number"&&wa(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(ya.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Oe("scroll",e):c!=null&&nm(e,i,c,a))}switch(r){case"input":gl(e),mg(e,n,!1);break;case"textarea":gl(e),gg(e);break;case"option":n.value!=null&&e.setAttribute("value",""+xs(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?Fo(e,!!n.multiple,i,!1):n.defaultValue!=null&&Fo(e,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=yc)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return jt(t),null;case 6:if(e&&t.stateNode!=null)X0(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(B(166));if(r=Bs(Ra.current),Bs(an.current),Sl(t)){if(n=t.stateNode,r=t.memoizedProps,n[rn]=t,(i=n.nodeValue!==r)&&(e=ir,e!==null))switch(e.tag){case 3:Nl(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Nl(n.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[rn]=t,t.stateNode=n}return jt(t),null;case 13:if(Ie(Be),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ue&&rr!==null&&t.mode&1&&!(t.flags&128))p0(),li(),t.flags|=98560,i=!1;else if(i=Sl(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(B(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(B(317));i[rn]=t}else li(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;jt(t),i=!1}else Lr!==null&&(nh(Lr),Lr=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||Be.current&1?st===0&&(st=3):Um())),t.updateQueue!==null&&(t.flags|=4),jt(t),null);case 4:return ui(),Yf(e,t),e===null&&Ca(t.stateNode.containerInfo),jt(t),null;case 10:return jm(t.type._context),jt(t),null;case 17:return Yt(t.type)&&wc(),jt(t),null;case 19:if(Ie(Be),i=t.memoizedState,i===null)return jt(t),null;if(n=(t.flags&128)!==0,a=i.rendering,a===null)if(n)Vi(i,!1);else{if(st!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=Cc(e),a!==null){for(t.flags|=128,Vi(i,!1),n=a.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,e=a.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Me(Be,Be.current&1|2),t.child}e=e.sibling}i.tail!==null&&Xe()>fi&&(t.flags|=128,n=!0,Vi(i,!1),t.lanes=4194304)}else{if(!n)if(e=Cc(a),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Vi(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!Ue)return jt(t),null}else 2*Xe()-i.renderingStartTime>fi&&r!==1073741824&&(t.flags|=128,n=!0,Vi(i,!1),t.lanes=4194304);i.isBackwards?(a.sibling=t.child,t.child=a):(r=i.last,r!==null?r.sibling=a:t.child=a,i.last=a)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Xe(),t.sibling=null,r=Be.current,Me(Be,n?r&1|2:r&1),t):(jt(t),null);case 22:case 23:return $m(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?er&1073741824&&(jt(t),t.subtreeFlags&6&&(t.flags|=8192)):jt(t),null;case 24:return null;case 25:return null}throw Error(B(156,t.tag))}function _C(e,t){switch(xm(t),t.tag){case 1:return Yt(t.type)&&wc(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ui(),Ie(Kt),Ie(Ct),Cm(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return km(t),null;case 13:if(Ie(Be),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(B(340));li()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ie(Be),null;case 4:return ui(),null;case 10:return jm(t.type._context),null;case 22:case 23:return $m(),null;case 24:return null;default:return null}}var El=!1,kt=!1,NC=typeof WeakSet=="function"?WeakSet:Set,J=null;function $o(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){qe(e,t,n)}else r.current=null}function Qf(e,t,r){try{r()}catch(n){qe(e,t,n)}}var ov=!1;function SC(e,t){if(Mf=gc,e=r0(),gm(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var a=0,l=-1,c=-1,u=0,f=0,d=e,h=null;t:for(;;){for(var p;d!==r||s!==0&&d.nodeType!==3||(l=a+s),d!==i||n!==0&&d.nodeType!==3||(c=a+n),d.nodeType===3&&(a+=d.nodeValue.length),(p=d.firstChild)!==null;)h=d,d=p;for(;;){if(d===e)break t;if(h===r&&++u===s&&(l=a),h===i&&++f===n&&(c=a),(p=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=p}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Df={focusedElem:e,selectionRange:r},gc=!1,J=t;J!==null;)if(t=J,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,J=e;else for(;J!==null;){t=J;try{var g=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var v=g.memoizedProps,y=g.memoizedState,x=t.stateNode,w=x.getSnapshotBeforeUpdate(t.elementType===t.type?v:Tr(t.type,v),y);x.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(B(163))}}catch(j){qe(t,t.return,j)}if(e=t.sibling,e!==null){e.return=t.return,J=e;break}J=t.return}return g=ov,ov=!1,g}function da(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&Qf(t,r,i)}s=s.next}while(s!==n)}}function fu(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function Xf(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function J0(e){var t=e.alternate;t!==null&&(e.alternate=null,J0(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[rn],delete t[Pa],delete t[Lf],delete t[aC],delete t[lC])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Z0(e){return e.tag===5||e.tag===3||e.tag===4}function iv(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Z0(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Jf(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=yc));else if(n!==4&&(e=e.child,e!==null))for(Jf(e,t,r),e=e.sibling;e!==null;)Jf(e,t,r),e=e.sibling}function Zf(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(Zf(e,t,r),e=e.sibling;e!==null;)Zf(e,t,r),e=e.sibling}var mt=null,Mr=!1;function Fn(e,t,r){for(r=r.child;r!==null;)ew(e,t,r),r=r.sibling}function ew(e,t,r){if(on&&typeof on.onCommitFiberUnmount=="function")try{on.onCommitFiberUnmount(su,r)}catch{}switch(r.tag){case 5:kt||$o(r,t);case 6:var n=mt,s=Mr;mt=null,Fn(e,t,r),mt=n,Mr=s,mt!==null&&(Mr?(e=mt,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):mt.removeChild(r.stateNode));break;case 18:mt!==null&&(Mr?(e=mt,r=r.stateNode,e.nodeType===8?Nd(e.parentNode,r):e.nodeType===1&&Nd(e,r),Na(e)):Nd(mt,r.stateNode));break;case 4:n=mt,s=Mr,mt=r.stateNode.containerInfo,Mr=!0,Fn(e,t,r),mt=n,Mr=s;break;case 0:case 11:case 14:case 15:if(!kt&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&Qf(r,t,a),s=s.next}while(s!==n)}Fn(e,t,r);break;case 1:if(!kt&&($o(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){qe(r,t,l)}Fn(e,t,r);break;case 21:Fn(e,t,r);break;case 22:r.mode&1?(kt=(n=kt)||r.memoizedState!==null,Fn(e,t,r),kt=n):Fn(e,t,r);break;default:Fn(e,t,r)}}function av(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new NC),t.forEach(function(n){var s=DC.bind(null,e,n);r.has(n)||(r.add(n),n.then(s,s))})}}function Er(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var i=e,a=t,l=a;e:for(;l!==null;){switch(l.tag){case 5:mt=l.stateNode,Mr=!1;break e;case 3:mt=l.stateNode.containerInfo,Mr=!0;break e;case 4:mt=l.stateNode.containerInfo,Mr=!0;break e}l=l.return}if(mt===null)throw Error(B(160));ew(i,a,s),mt=null,Mr=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){qe(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)tw(t,e),t=t.sibling}function tw(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Er(t,e),Qr(e),n&4){try{da(3,e,e.return),fu(3,e)}catch(v){qe(e,e.return,v)}try{da(5,e,e.return)}catch(v){qe(e,e.return,v)}}break;case 1:Er(t,e),Qr(e),n&512&&r!==null&&$o(r,r.return);break;case 5:if(Er(t,e),Qr(e),n&512&&r!==null&&$o(r,r.return),e.flags&32){var s=e.stateNode;try{wa(s,"")}catch(v){qe(e,e.return,v)}}if(n&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,a=r!==null?r.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&_y(s,i),_f(l,a);var u=_f(l,i);for(a=0;a<c.length;a+=2){var f=c[a],d=c[a+1];f==="style"?Ey(s,d):f==="dangerouslySetInnerHTML"?ky(s,d):f==="children"?wa(s,d):nm(s,f,d,u)}switch(l){case"input":xf(s,i);break;case"textarea":Ny(s,i);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?Fo(s,!!i.multiple,p,!1):h!==!!i.multiple&&(i.defaultValue!=null?Fo(s,!!i.multiple,i.defaultValue,!0):Fo(s,!!i.multiple,i.multiple?[]:"",!1))}s[Pa]=i}catch(v){qe(e,e.return,v)}}break;case 6:if(Er(t,e),Qr(e),n&4){if(e.stateNode===null)throw Error(B(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(v){qe(e,e.return,v)}}break;case 3:if(Er(t,e),Qr(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Na(t.containerInfo)}catch(v){qe(e,e.return,v)}break;case 4:Er(t,e),Qr(e);break;case 13:Er(t,e),Qr(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Im=Xe())),n&4&&av(e);break;case 22:if(f=r!==null&&r.memoizedState!==null,e.mode&1?(kt=(u=kt)||f,Er(t,e),kt=u):Er(t,e),Qr(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!f&&e.mode&1)for(J=e,f=e.child;f!==null;){for(d=J=f;J!==null;){switch(h=J,p=h.child,h.tag){case 0:case 11:case 14:case 15:da(4,h,h.return);break;case 1:$o(h,h.return);var g=h.stateNode;if(typeof g.componentWillUnmount=="function"){n=h,r=h.return;try{t=n,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(v){qe(n,r,v)}}break;case 5:$o(h,h.return);break;case 22:if(h.memoizedState!==null){cv(d);continue}}p!==null?(p.return=h,J=p):cv(d)}f=f.sibling}e:for(f=null,d=e;;){if(d.tag===5){if(f===null){f=d;try{s=d.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=d.stateNode,c=d.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=Cy("display",a))}catch(v){qe(e,e.return,v)}}}else if(d.tag===6){if(f===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(v){qe(e,e.return,v)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;f===d&&(f=null),d=d.return}f===d&&(f=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Er(t,e),Qr(e),n&4&&av(e);break;case 21:break;default:Er(t,e),Qr(e)}}function Qr(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(Z0(r)){var n=r;break e}r=r.return}throw Error(B(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(wa(s,""),n.flags&=-33);var i=iv(e);Zf(e,i,s);break;case 3:case 4:var a=n.stateNode.containerInfo,l=iv(e);Jf(e,l,a);break;default:throw Error(B(161))}}catch(c){qe(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function kC(e,t,r){J=e,rw(e)}function rw(e,t,r){for(var n=(e.mode&1)!==0;J!==null;){var s=J,i=s.child;if(s.tag===22&&n){var a=s.memoizedState!==null||El;if(!a){var l=s.alternate,c=l!==null&&l.memoizedState!==null||kt;l=El;var u=kt;if(El=a,(kt=c)&&!u)for(J=s;J!==null;)a=J,c=a.child,a.tag===22&&a.memoizedState!==null?uv(s):c!==null?(c.return=a,J=c):uv(s);for(;i!==null;)J=i,rw(i),i=i.sibling;J=s,El=l,kt=u}lv(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,J=i):lv(e)}}function lv(e){for(;J!==null;){var t=J;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:kt||fu(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!kt)if(r===null)n.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:Tr(t.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&Wg(t,i,n);break;case 3:var a=t.updateQueue;if(a!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Wg(t,a,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var f=u.memoizedState;if(f!==null){var d=f.dehydrated;d!==null&&Na(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(B(163))}kt||t.flags&512&&Xf(t)}catch(h){qe(t,t.return,h)}}if(t===e){J=null;break}if(r=t.sibling,r!==null){r.return=t.return,J=r;break}J=t.return}}function cv(e){for(;J!==null;){var t=J;if(t===e){J=null;break}var r=t.sibling;if(r!==null){r.return=t.return,J=r;break}J=t.return}}function uv(e){for(;J!==null;){var t=J;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{fu(4,t)}catch(c){qe(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var s=t.return;try{n.componentDidMount()}catch(c){qe(t,s,c)}}var i=t.return;try{Xf(t)}catch(c){qe(t,i,c)}break;case 5:var a=t.return;try{Xf(t)}catch(c){qe(t,a,c)}}}catch(c){qe(t,t.return,c)}if(t===e){J=null;break}var l=t.sibling;if(l!==null){l.return=t.return,J=l;break}J=t.return}}var CC=Math.ceil,Tc=$n.ReactCurrentDispatcher,Dm=$n.ReactCurrentOwner,xr=$n.ReactCurrentBatchConfig,ke=0,ft=null,et=null,pt=0,er=0,Uo=ks(0),st=0,Oa=null,to=0,hu=0,Om=0,fa=null,Gt=null,Im=0,fi=1/0,wn=null,Rc=!1,eh=null,hs=null,Pl=!1,os=null,Ac=0,ha=0,th=null,ec=-1,tc=0;function Ot(){return ke&6?Xe():ec!==-1?ec:ec=Xe()}function ms(e){return e.mode&1?ke&2&&pt!==0?pt&-pt:uC.transition!==null?(tc===0&&(tc=Fy()),tc):(e=Pe,e!==0||(e=window.event,e=e===void 0?16:qy(e.type)),e):1}function Fr(e,t,r,n){if(50<ha)throw ha=0,th=null,Error(B(185));Ya(e,r,n),(!(ke&2)||e!==ft)&&(e===ft&&(!(ke&2)&&(hu|=r),st===4&&Xn(e,pt)),Qt(e,n),r===1&&ke===0&&!(t.mode&1)&&(fi=Xe()+500,cu&&Cs()))}function Qt(e,t){var r=e.callbackNode;uk(e,t);var n=pc(e,e===ft?pt:0);if(n===0)r!==null&&yg(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&yg(r),t===1)e.tag===0?cC(dv.bind(null,e)):f0(dv.bind(null,e)),oC(function(){!(ke&6)&&Cs()}),r=null;else{switch(zy(n)){case 1:r=lm;break;case 4:r=$y;break;case 16:r=mc;break;case 536870912:r=Uy;break;default:r=mc}r=uw(r,nw.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function nw(e,t){if(ec=-1,tc=0,ke&6)throw Error(B(327));var r=e.callbackNode;if(Ho()&&e.callbackNode!==r)return null;var n=pc(e,e===ft?pt:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Mc(e,n);else{t=n;var s=ke;ke|=2;var i=ow();(ft!==e||pt!==t)&&(wn=null,fi=Xe()+500,qs(e,t));do try{TC();break}catch(l){sw(e,l)}while(!0);bm(),Tc.current=i,ke=s,et!==null?t=0:(ft=null,pt=0,t=st)}if(t!==0){if(t===2&&(s=Ef(e),s!==0&&(n=s,t=rh(e,s))),t===1)throw r=Oa,qs(e,0),Xn(e,n),Qt(e,Xe()),r;if(t===6)Xn(e,n);else{if(s=e.current.alternate,!(n&30)&&!EC(s)&&(t=Mc(e,n),t===2&&(i=Ef(e),i!==0&&(n=i,t=rh(e,i))),t===1))throw r=Oa,qs(e,0),Xn(e,n),Qt(e,Xe()),r;switch(e.finishedWork=s,e.finishedLanes=n,t){case 0:case 1:throw Error(B(345));case 2:Is(e,Gt,wn);break;case 3:if(Xn(e,n),(n&130023424)===n&&(t=Im+500-Xe(),10<t)){if(pc(e,0)!==0)break;if(s=e.suspendedLanes,(s&n)!==n){Ot(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=If(Is.bind(null,e,Gt,wn),t);break}Is(e,Gt,wn);break;case 4:if(Xn(e,n),(n&4194240)===n)break;for(t=e.eventTimes,s=-1;0<n;){var a=31-Ur(n);i=1<<a,a=t[a],a>s&&(s=a),n&=~i}if(n=s,n=Xe()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*CC(n/1960))-n,10<n){e.timeoutHandle=If(Is.bind(null,e,Gt,wn),n);break}Is(e,Gt,wn);break;case 5:Is(e,Gt,wn);break;default:throw Error(B(329))}}}return Qt(e,Xe()),e.callbackNode===r?nw.bind(null,e):null}function rh(e,t){var r=fa;return e.current.memoizedState.isDehydrated&&(qs(e,t).flags|=256),e=Mc(e,t),e!==2&&(t=Gt,Gt=r,t!==null&&nh(t)),e}function nh(e){Gt===null?Gt=e:Gt.push.apply(Gt,e)}function EC(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],i=s.getSnapshot;s=s.value;try{if(!zr(i(),s))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Xn(e,t){for(t&=~Om,t&=~hu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Ur(t),n=1<<r;e[r]=-1,t&=~n}}function dv(e){if(ke&6)throw Error(B(327));Ho();var t=pc(e,0);if(!(t&1))return Qt(e,Xe()),null;var r=Mc(e,t);if(e.tag!==0&&r===2){var n=Ef(e);n!==0&&(t=n,r=rh(e,n))}if(r===1)throw r=Oa,qs(e,0),Xn(e,t),Qt(e,Xe()),r;if(r===6)throw Error(B(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Is(e,Gt,wn),Qt(e,Xe()),null}function Lm(e,t){var r=ke;ke|=1;try{return e(t)}finally{ke=r,ke===0&&(fi=Xe()+500,cu&&Cs())}}function ro(e){os!==null&&os.tag===0&&!(ke&6)&&Ho();var t=ke;ke|=1;var r=xr.transition,n=Pe;try{if(xr.transition=null,Pe=1,e)return e()}finally{Pe=n,xr.transition=r,ke=t,!(ke&6)&&Cs()}}function $m(){er=Uo.current,Ie(Uo)}function qs(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,sC(r)),et!==null)for(r=et.return;r!==null;){var n=r;switch(xm(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&wc();break;case 3:ui(),Ie(Kt),Ie(Ct),Cm();break;case 5:km(n);break;case 4:ui();break;case 13:Ie(Be);break;case 19:Ie(Be);break;case 10:jm(n.type._context);break;case 22:case 23:$m()}r=r.return}if(ft=e,et=e=ps(e.current,null),pt=er=t,st=0,Oa=null,Om=hu=to=0,Gt=fa=null,zs!==null){for(t=0;t<zs.length;t++)if(r=zs[t],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,i=r.pending;if(i!==null){var a=i.next;i.next=s,n.next=a}r.pending=n}zs=null}return e}function sw(e,t){do{var r=et;try{if(bm(),Xl.current=Pc,Ec){for(var n=Ve.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Ec=!1}if(eo=0,ct=nt=Ve=null,ua=!1,Aa=0,Dm.current=null,r===null||r.return===null){st=1,Oa=t,et=null;break}e:{var i=e,a=r.return,l=r,c=t;if(t=pt,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,f=l,d=f.tag;if(!(f.mode&1)&&(d===0||d===11||d===15)){var h=f.alternate;h?(f.updateQueue=h.updateQueue,f.memoizedState=h.memoizedState,f.lanes=h.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=Jg(a);if(p!==null){p.flags&=-257,Zg(p,a,l,i,t),p.mode&1&&Xg(i,u,t),t=p,c=u;var g=t.updateQueue;if(g===null){var v=new Set;v.add(c),t.updateQueue=v}else g.add(c);break e}else{if(!(t&1)){Xg(i,u,t),Um();break e}c=Error(B(426))}}else if(Ue&&l.mode&1){var y=Jg(a);if(y!==null){!(y.flags&65536)&&(y.flags|=256),Zg(y,a,l,i,t),ym(di(c,l));break e}}i=c=di(c,l),st!==4&&(st=2),fa===null?fa=[i]:fa.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var x=z0(i,c,t);Hg(i,x);break e;case 1:l=c;var w=i.type,b=i.stateNode;if(!(i.flags&128)&&(typeof w.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(hs===null||!hs.has(b)))){i.flags|=65536,t&=-t,i.lanes|=t;var j=B0(i,l,t);Hg(i,j);break e}}i=i.return}while(i!==null)}aw(r)}catch(_){t=_,et===r&&r!==null&&(et=r=r.return);continue}break}while(!0)}function ow(){var e=Tc.current;return Tc.current=Pc,e===null?Pc:e}function Um(){(st===0||st===3||st===2)&&(st=4),ft===null||!(to&268435455)&&!(hu&268435455)||Xn(ft,pt)}function Mc(e,t){var r=ke;ke|=2;var n=ow();(ft!==e||pt!==t)&&(wn=null,qs(e,t));do try{PC();break}catch(s){sw(e,s)}while(!0);if(bm(),ke=r,Tc.current=n,et!==null)throw Error(B(261));return ft=null,pt=0,st}function PC(){for(;et!==null;)iw(et)}function TC(){for(;et!==null&&!tk();)iw(et)}function iw(e){var t=cw(e.alternate,e,er);e.memoizedProps=e.pendingProps,t===null?aw(e):et=t,Dm.current=null}function aw(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=_C(r,t),r!==null){r.flags&=32767,et=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{st=6,et=null;return}}else if(r=jC(r,t,er),r!==null){et=r;return}if(t=t.sibling,t!==null){et=t;return}et=t=e}while(t!==null);st===0&&(st=5)}function Is(e,t,r){var n=Pe,s=xr.transition;try{xr.transition=null,Pe=1,RC(e,t,r,n)}finally{xr.transition=s,Pe=n}return null}function RC(e,t,r,n){do Ho();while(os!==null);if(ke&6)throw Error(B(327));r=e.finishedWork;var s=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(B(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(dk(e,i),e===ft&&(et=ft=null,pt=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Pl||(Pl=!0,uw(mc,function(){return Ho(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=xr.transition,xr.transition=null;var a=Pe;Pe=1;var l=ke;ke|=4,Dm.current=null,SC(e,r),tw(r,e),Xk(Df),gc=!!Mf,Df=Mf=null,e.current=r,kC(r),rk(),ke=l,Pe=a,xr.transition=i}else e.current=r;if(Pl&&(Pl=!1,os=e,Ac=s),i=e.pendingLanes,i===0&&(hs=null),ok(r.stateNode),Qt(e,Xe()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(Rc)throw Rc=!1,e=eh,eh=null,e;return Ac&1&&e.tag!==0&&Ho(),i=e.pendingLanes,i&1?e===th?ha++:(ha=0,th=e):ha=0,Cs(),null}function Ho(){if(os!==null){var e=zy(Ac),t=xr.transition,r=Pe;try{if(xr.transition=null,Pe=16>e?16:e,os===null)var n=!1;else{if(e=os,os=null,Ac=0,ke&6)throw Error(B(331));var s=ke;for(ke|=4,J=e.current;J!==null;){var i=J,a=i.child;if(J.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(J=u;J!==null;){var f=J;switch(f.tag){case 0:case 11:case 15:da(8,f,i)}var d=f.child;if(d!==null)d.return=f,J=d;else for(;J!==null;){f=J;var h=f.sibling,p=f.return;if(J0(f),f===u){J=null;break}if(h!==null){h.return=p,J=h;break}J=p}}}var g=i.alternate;if(g!==null){var v=g.child;if(v!==null){g.child=null;do{var y=v.sibling;v.sibling=null,v=y}while(v!==null)}}J=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,J=a;else e:for(;J!==null;){if(i=J,i.flags&2048)switch(i.tag){case 0:case 11:case 15:da(9,i,i.return)}var x=i.sibling;if(x!==null){x.return=i.return,J=x;break e}J=i.return}}var w=e.current;for(J=w;J!==null;){a=J;var b=a.child;if(a.subtreeFlags&2064&&b!==null)b.return=a,J=b;else e:for(a=w;J!==null;){if(l=J,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:fu(9,l)}}catch(_){qe(l,l.return,_)}if(l===a){J=null;break e}var j=l.sibling;if(j!==null){j.return=l.return,J=j;break e}J=l.return}}if(ke=s,Cs(),on&&typeof on.onPostCommitFiberRoot=="function")try{on.onPostCommitFiberRoot(su,e)}catch{}n=!0}return n}finally{Pe=r,xr.transition=t}}return!1}function fv(e,t,r){t=di(r,t),t=z0(e,t,1),e=fs(e,t,1),t=Ot(),e!==null&&(Ya(e,1,t),Qt(e,t))}function qe(e,t,r){if(e.tag===3)fv(e,e,r);else for(;t!==null;){if(t.tag===3){fv(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(hs===null||!hs.has(n))){e=di(r,e),e=B0(t,e,1),t=fs(t,e,1),e=Ot(),t!==null&&(Ya(t,1,e),Qt(t,e));break}}t=t.return}}function AC(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=Ot(),e.pingedLanes|=e.suspendedLanes&r,ft===e&&(pt&r)===r&&(st===4||st===3&&(pt&130023424)===pt&&500>Xe()-Im?qs(e,0):Om|=r),Qt(e,t)}function lw(e,t){t===0&&(e.mode&1?(t=yl,yl<<=1,!(yl&130023424)&&(yl=4194304)):t=1);var r=Ot();e=An(e,t),e!==null&&(Ya(e,t,r),Qt(e,r))}function MC(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),lw(e,r)}function DC(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,s=e.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(B(314))}n!==null&&n.delete(t),lw(e,r)}var cw;cw=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Kt.current)Wt=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Wt=!1,bC(e,t,r);Wt=!!(e.flags&131072)}else Wt=!1,Ue&&t.flags&1048576&&h0(t,_c,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Zl(e,t),e=t.pendingProps;var s=ai(t,Ct.current);Vo(t,r),s=Pm(null,t,n,e,s,r);var i=Tm();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Yt(n)?(i=!0,bc(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Nm(t),s.updater=du,t.stateNode=s,s._reactInternals=t,Gf(t,n,e,r),t=Wf(null,t,n,!0,i,r)):(t.tag=0,Ue&&i&&vm(t),At(null,t,s,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Zl(e,t),e=t.pendingProps,s=n._init,n=s(n._payload),t.type=n,s=t.tag=IC(n),e=Tr(n,e),s){case 0:t=Hf(null,t,n,e,r);break e;case 1:t=rv(null,t,n,e,r);break e;case 11:t=ev(null,t,n,e,r);break e;case 14:t=tv(null,t,n,Tr(n.type,e),r);break e}throw Error(B(306,n,""))}return t;case 0:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Tr(n,s),Hf(e,t,n,s,r);case 1:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Tr(n,s),rv(e,t,n,s,r);case 3:e:{if(W0(t),e===null)throw Error(B(387));n=t.pendingProps,i=t.memoizedState,s=i.element,y0(e,t),kc(t,n,null,r);var a=t.memoizedState;if(n=a.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=di(Error(B(423)),t),t=nv(e,t,n,r,s);break e}else if(n!==s){s=di(Error(B(424)),t),t=nv(e,t,n,r,s);break e}else for(rr=ds(t.stateNode.containerInfo.firstChild),ir=t,Ue=!0,Lr=null,r=v0(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(li(),n===s){t=Mn(e,t,r);break e}At(e,t,n,r)}t=t.child}return t;case 5:return w0(t),e===null&&Ff(t),n=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,a=s.children,Of(n,s)?a=null:i!==null&&Of(n,i)&&(t.flags|=32),H0(e,t),At(e,t,a,r),t.child;case 6:return e===null&&Ff(t),null;case 13:return q0(e,t,r);case 4:return Sm(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=ci(t,null,n,r):At(e,t,n,r),t.child;case 11:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Tr(n,s),ev(e,t,n,s,r);case 7:return At(e,t,t.pendingProps,r),t.child;case 8:return At(e,t,t.pendingProps.children,r),t.child;case 12:return At(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,s=t.pendingProps,i=t.memoizedProps,a=s.value,Me(Nc,n._currentValue),n._currentValue=a,i!==null)if(zr(i.value,a)){if(i.children===s.children&&!Kt.current){t=Mn(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){a=i.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=Cn(-1,r&-r),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var f=u.pending;f===null?c.next=c:(c.next=f.next,f.next=c),u.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),zf(i.return,r,t),l.lanes|=r;break}c=c.next}}else if(i.tag===10)a=i.type===t.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(B(341));a.lanes|=r,l=a.alternate,l!==null&&(l.lanes|=r),zf(a,r,t),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===t){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}At(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,n=t.pendingProps.children,Vo(t,r),s=jr(s),n=n(s),t.flags|=1,At(e,t,n,r),t.child;case 14:return n=t.type,s=Tr(n,t.pendingProps),s=Tr(n.type,s),tv(e,t,n,s,r);case 15:return G0(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Tr(n,s),Zl(e,t),t.tag=1,Yt(n)?(e=!0,bc(t)):e=!1,Vo(t,r),F0(t,n,s),Gf(t,n,s,r),Wf(null,t,n,!0,e,r);case 19:return K0(e,t,r);case 22:return V0(e,t,r)}throw Error(B(156,t.tag))};function uw(e,t){return Ly(e,t)}function OC(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vr(e,t,r,n){return new OC(e,t,r,n)}function Fm(e){return e=e.prototype,!(!e||!e.isReactComponent)}function IC(e){if(typeof e=="function")return Fm(e)?1:0;if(e!=null){if(e=e.$$typeof,e===om)return 11;if(e===im)return 14}return 2}function ps(e,t){var r=e.alternate;return r===null?(r=vr(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function rc(e,t,r,n,s,i){var a=2;if(n=e,typeof e=="function")Fm(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case Po:return Ks(r.children,s,i,t);case sm:a=8,s|=8;break;case hf:return e=vr(12,r,t,s|2),e.elementType=hf,e.lanes=i,e;case mf:return e=vr(13,r,t,s),e.elementType=mf,e.lanes=i,e;case pf:return e=vr(19,r,t,s),e.elementType=pf,e.lanes=i,e;case wy:return mu(r,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case xy:a=10;break e;case yy:a=9;break e;case om:a=11;break e;case im:a=14;break e;case qn:a=16,n=null;break e}throw Error(B(130,e==null?e:typeof e,""))}return t=vr(a,r,t,s),t.elementType=e,t.type=n,t.lanes=i,t}function Ks(e,t,r,n){return e=vr(7,e,n,t),e.lanes=r,e}function mu(e,t,r,n){return e=vr(22,e,n,t),e.elementType=wy,e.lanes=r,e.stateNode={isHidden:!1},e}function Ad(e,t,r){return e=vr(6,e,null,t),e.lanes=r,e}function Md(e,t,r){return t=vr(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function LC(e,t,r,n,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=hd(0),this.expirationTimes=hd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=hd(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function zm(e,t,r,n,s,i,a,l,c){return e=new LC(e,t,r,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=vr(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Nm(i),e}function $C(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Eo,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function dw(e){if(!e)return ys;e=e._reactInternals;e:{if(io(e)!==e||e.tag!==1)throw Error(B(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Yt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(B(171))}if(e.tag===1){var r=e.type;if(Yt(r))return d0(e,r,t)}return t}function fw(e,t,r,n,s,i,a,l,c){return e=zm(r,n,!0,e,s,i,a,l,c),e.context=dw(null),r=e.current,n=Ot(),s=ms(r),i=Cn(n,s),i.callback=t??null,fs(r,i,s),e.current.lanes=s,Ya(e,s,n),Qt(e,n),e}function pu(e,t,r,n){var s=t.current,i=Ot(),a=ms(s);return r=dw(r),t.context===null?t.context=r:t.pendingContext=r,t=Cn(i,a),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=fs(s,t,a),e!==null&&(Fr(e,s,a,i),Ql(e,s,a)),a}function Dc(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function hv(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Bm(e,t){hv(e,t),(e=e.alternate)&&hv(e,t)}function UC(){return null}var hw=typeof reportError=="function"?reportError:function(e){console.error(e)};function Gm(e){this._internalRoot=e}gu.prototype.render=Gm.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(B(409));pu(e,t,null,null)};gu.prototype.unmount=Gm.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;ro(function(){pu(null,e,null,null)}),t[Rn]=null}};function gu(e){this._internalRoot=e}gu.prototype.unstable_scheduleHydration=function(e){if(e){var t=Vy();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Qn.length&&t!==0&&t<Qn[r].priority;r++);Qn.splice(r,0,e),r===0&&Wy(e)}};function Vm(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function vu(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function mv(){}function FC(e,t,r,n,s){if(s){if(typeof n=="function"){var i=n;n=function(){var u=Dc(a);i.call(u)}}var a=fw(t,n,e,0,null,!1,!1,"",mv);return e._reactRootContainer=a,e[Rn]=a.current,Ca(e.nodeType===8?e.parentNode:e),ro(),a}for(;s=e.lastChild;)e.removeChild(s);if(typeof n=="function"){var l=n;n=function(){var u=Dc(c);l.call(u)}}var c=zm(e,0,!1,null,null,!1,!1,"",mv);return e._reactRootContainer=c,e[Rn]=c.current,Ca(e.nodeType===8?e.parentNode:e),ro(function(){pu(t,c,r,n)}),c}function xu(e,t,r,n,s){var i=r._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var l=s;s=function(){var c=Dc(a);l.call(c)}}pu(t,a,e,s)}else a=FC(r,t,e,s,n);return Dc(a)}By=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=ta(t.pendingLanes);r!==0&&(cm(t,r|1),Qt(t,Xe()),!(ke&6)&&(fi=Xe()+500,Cs()))}break;case 13:ro(function(){var n=An(e,1);if(n!==null){var s=Ot();Fr(n,e,1,s)}}),Bm(e,1)}};um=function(e){if(e.tag===13){var t=An(e,134217728);if(t!==null){var r=Ot();Fr(t,e,134217728,r)}Bm(e,134217728)}};Gy=function(e){if(e.tag===13){var t=ms(e),r=An(e,t);if(r!==null){var n=Ot();Fr(r,e,t,n)}Bm(e,t)}};Vy=function(){return Pe};Hy=function(e,t){var r=Pe;try{return Pe=e,t()}finally{Pe=r}};Sf=function(e,t,r){switch(t){case"input":if(xf(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var s=lu(n);if(!s)throw Error(B(90));jy(n),xf(n,s)}}}break;case"textarea":Ny(e,r);break;case"select":t=r.value,t!=null&&Fo(e,!!r.multiple,t,!1)}};Ry=Lm;Ay=ro;var zC={usingClientEntryPoint:!1,Events:[Xa,Mo,lu,Py,Ty,Lm]},Hi={findFiberByHostInstance:Fs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},BC={bundleType:Hi.bundleType,version:Hi.version,rendererPackageName:Hi.rendererPackageName,rendererConfig:Hi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:$n.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Oy(e),e===null?null:e.stateNode},findFiberByHostInstance:Hi.findFiberByHostInstance||UC,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Tl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Tl.isDisabled&&Tl.supportsFiber)try{su=Tl.inject(BC),on=Tl}catch{}}cr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=zC;cr.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Vm(t))throw Error(B(200));return $C(e,t,null,r)};cr.createRoot=function(e,t){if(!Vm(e))throw Error(B(299));var r=!1,n="",s=hw;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=zm(e,1,!1,null,null,r,!1,n,s),e[Rn]=t.current,Ca(e.nodeType===8?e.parentNode:e),new Gm(t)};cr.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(B(188)):(e=Object.keys(e).join(","),Error(B(268,e)));return e=Oy(t),e=e===null?null:e.stateNode,e};cr.flushSync=function(e){return ro(e)};cr.hydrate=function(e,t,r){if(!vu(t))throw Error(B(200));return xu(null,e,t,!0,r)};cr.hydrateRoot=function(e,t,r){if(!Vm(e))throw Error(B(405));var n=r!=null&&r.hydratedSources||null,s=!1,i="",a=hw;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(a=r.onRecoverableError)),t=fw(t,null,e,1,r??null,s,!1,i,a),e[Rn]=t.current,Ca(e),n)for(e=0;e<n.length;e++)r=n[e],s=r._getVersion,s=s(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new gu(t)};cr.render=function(e,t,r){if(!vu(t))throw Error(B(200));return xu(null,e,t,!1,r)};cr.unmountComponentAtNode=function(e){if(!vu(e))throw Error(B(40));return e._reactRootContainer?(ro(function(){xu(null,null,e,!1,function(){e._reactRootContainer=null,e[Rn]=null})}),!0):!1};cr.unstable_batchedUpdates=Lm;cr.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!vu(r))throw Error(B(200));if(e==null||e._reactInternals===void 0)throw Error(B(38));return xu(e,t,r,!1,n)};cr.version="18.3.1-next-f1338f8080-20240426";function mw(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(mw)}catch(e){console.error(e)}}mw(),my.exports=cr;var Za=my.exports;const pw=ty(Za);var gw,pv=Za;gw=pv.createRoot,pv.hydrateRoot;const GC=1,VC=1e6;let Dd=0;function HC(){return Dd=(Dd+1)%Number.MAX_SAFE_INTEGER,Dd.toString()}const Od=new Map,gv=e=>{if(Od.has(e))return;const t=setTimeout(()=>{Od.delete(e),ma({type:"REMOVE_TOAST",toastId:e})},VC);Od.set(e,t)},WC=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,GC)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(r=>r.id===t.toast.id?{...r,...t.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=t;return r?gv(r):e.toasts.forEach(n=>{gv(n.id)}),{...e,toasts:e.toasts.map(n=>n.id===r||r===void 0?{...n,open:!1}:n)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(r=>r.id!==t.toastId)}}},nc=[];let sc={toasts:[]};function ma(e){sc=WC(sc,e),nc.forEach(t=>{t(sc)})}function Rt({...e}){const t=HC(),r=s=>ma({type:"UPDATE_TOAST",toast:{...s,id:t}}),n=()=>ma({type:"DISMISS_TOAST",toastId:t});return ma({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:s=>{s||n()}}}),{id:t,dismiss:n,update:r}}function Le(){const[e,t]=m.useState(sc);return m.useEffect(()=>(nc.push(t),()=>{const r=nc.indexOf(t);r>-1&&nc.splice(r,1)}),[e]),{...e,toast:Rt,dismiss:r=>ma({type:"DISMISS_TOAST",toastId:r})}}function Y(e,t,{checkForDefaultPrevented:r=!0}={}){return function(s){if(e==null||e(s),r===!1||!s.defaultPrevented)return t==null?void 0:t(s)}}function qC(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function yu(...e){return t=>e.forEach(r=>qC(r,t))}function je(...e){return m.useCallback(yu(...e),e)}function KC(e,t=[]){let r=[];function n(i,a){const l=m.createContext(a),c=r.length;r=[...r,a];function u(d){const{scope:h,children:p,...g}=d,v=(h==null?void 0:h[e][c])||l,y=m.useMemo(()=>g,Object.values(g));return o.jsx(v.Provider,{value:y,children:p})}function f(d,h){const p=(h==null?void 0:h[e][c])||l,g=m.useContext(p);if(g)return g;if(a!==void 0)return a;throw new Error(`\`${d}\` must be used within \`${i}\``)}return u.displayName=i+"Provider",[u,f]}const s=()=>{const i=r.map(a=>m.createContext(a));return function(l){const c=(l==null?void 0:l[e])||i;return m.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return s.scopeName=e,[n,YC(s,...t)]}function YC(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const a=n.reduce((l,{useScope:c,scopeName:u})=>{const d=c(i)[`__scope${u}`];return{...l,...d}},{});return m.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return r.scopeName=t.scopeName,r}var ws=m.forwardRef((e,t)=>{const{children:r,...n}=e,s=m.Children.toArray(r),i=s.find(QC);if(i){const a=i.props.children,l=s.map(c=>c===i?m.Children.count(a)>1?m.Children.only(null):m.isValidElement(a)?a.props.children:null:c);return o.jsx(sh,{...n,ref:t,children:m.isValidElement(a)?m.cloneElement(a,void 0,l):null})}return o.jsx(sh,{...n,ref:t,children:r})});ws.displayName="Slot";var sh=m.forwardRef((e,t)=>{const{children:r,...n}=e;if(m.isValidElement(r)){const s=JC(r);return m.cloneElement(r,{...XC(n,r.props),ref:t?yu(t,s):s})}return m.Children.count(r)>1?m.Children.only(null):null});sh.displayName="SlotClone";var vw=({children:e})=>o.jsx(o.Fragment,{children:e});function QC(e){return m.isValidElement(e)&&e.type===vw}function XC(e,t){const r={...t};for(const n in t){const s=e[n],i=t[n];/^on[A-Z]/.test(n)?s&&i?r[n]=(...l)=>{i(...l),s(...l)}:s&&(r[n]=s):n==="style"?r[n]={...s,...i}:n==="className"&&(r[n]=[s,i].filter(Boolean).join(" "))}return{...e,...r}}function JC(e){var n,s;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function wu(e){const t=e+"CollectionProvider",[r,n]=KC(t),[s,i]=r(t,{collectionRef:{current:null},itemMap:new Map}),a=p=>{const{scope:g,children:v}=p,y=A.useRef(null),x=A.useRef(new Map).current;return o.jsx(s,{scope:g,itemMap:x,collectionRef:y,children:v})};a.displayName=t;const l=e+"CollectionSlot",c=A.forwardRef((p,g)=>{const{scope:v,children:y}=p,x=i(l,v),w=je(g,x.collectionRef);return o.jsx(ws,{ref:w,children:y})});c.displayName=l;const u=e+"CollectionItemSlot",f="data-radix-collection-item",d=A.forwardRef((p,g)=>{const{scope:v,children:y,...x}=p,w=A.useRef(null),b=je(g,w),j=i(u,v);return A.useEffect(()=>(j.itemMap.set(w,{ref:w,...x}),()=>void j.itemMap.delete(w))),o.jsx(ws,{[f]:"",ref:b,children:y})});d.displayName=u;function h(p){const g=i(e+"CollectionConsumer",p);return A.useCallback(()=>{const y=g.collectionRef.current;if(!y)return[];const x=Array.from(y.querySelectorAll(`[${f}]`));return Array.from(g.itemMap.values()).sort((j,_)=>x.indexOf(j.ref.current)-x.indexOf(_.ref.current))},[g.collectionRef,g.itemMap])}return[{Provider:a,Slot:c,ItemSlot:d},h,n]}function ZC(e,t){const r=m.createContext(t),n=i=>{const{children:a,...l}=i,c=m.useMemo(()=>l,Object.values(l));return o.jsx(r.Provider,{value:c,children:a})};n.displayName=e+"Provider";function s(i){const a=m.useContext(r);if(a)return a;if(t!==void 0)return t;throw new Error(`\`${i}\` must be used within \`${e}\``)}return[n,s]}function Nr(e,t=[]){let r=[];function n(i,a){const l=m.createContext(a),c=r.length;r=[...r,a];const u=d=>{var x;const{scope:h,children:p,...g}=d,v=((x=h==null?void 0:h[e])==null?void 0:x[c])||l,y=m.useMemo(()=>g,Object.values(g));return o.jsx(v.Provider,{value:y,children:p})};u.displayName=i+"Provider";function f(d,h){var v;const p=((v=h==null?void 0:h[e])==null?void 0:v[c])||l,g=m.useContext(p);if(g)return g;if(a!==void 0)return a;throw new Error(`\`${d}\` must be used within \`${i}\``)}return[u,f]}const s=()=>{const i=r.map(a=>m.createContext(a));return function(l){const c=(l==null?void 0:l[e])||i;return m.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return s.scopeName=e,[n,eE(s,...t)]}function eE(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const a=n.reduce((l,{useScope:c,scopeName:u})=>{const d=c(i)[`__scope${u}`];return{...l,...d}},{});return m.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return r.scopeName=t.scopeName,r}var tE=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],ie=tE.reduce((e,t)=>{const r=m.forwardRef((n,s)=>{const{asChild:i,...a}=n,l=i?ws:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),o.jsx(l,{...a,ref:s})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function Hm(e,t){e&&Za.flushSync(()=>e.dispatchEvent(t))}function Ge(e){const t=m.useRef(e);return m.useEffect(()=>{t.current=e}),m.useMemo(()=>(...r)=>{var n;return(n=t.current)==null?void 0:n.call(t,...r)},[])}function rE(e,t=globalThis==null?void 0:globalThis.document){const r=Ge(e);m.useEffect(()=>{const n=s=>{s.key==="Escape"&&r(s)};return t.addEventListener("keydown",n,{capture:!0}),()=>t.removeEventListener("keydown",n,{capture:!0})},[r,t])}var nE="DismissableLayer",oh="dismissableLayer.update",sE="dismissableLayer.pointerDownOutside",oE="dismissableLayer.focusOutside",vv,xw=m.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Ni=m.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:a,onDismiss:l,...c}=e,u=m.useContext(xw),[f,d]=m.useState(null),h=(f==null?void 0:f.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=m.useState({}),g=je(t,S=>d(S)),v=Array.from(u.layers),[y]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),x=v.indexOf(y),w=f?v.indexOf(f):-1,b=u.layersWithOutsidePointerEventsDisabled.size>0,j=w>=x,_=aE(S=>{const k=S.target,E=[...u.branches].some(M=>M.contains(k));!j||E||(s==null||s(S),a==null||a(S),S.defaultPrevented||l==null||l())},h),N=lE(S=>{const k=S.target;[...u.branches].some(M=>M.contains(k))||(i==null||i(S),a==null||a(S),S.defaultPrevented||l==null||l())},h);return rE(S=>{w===u.layers.size-1&&(n==null||n(S),!S.defaultPrevented&&l&&(S.preventDefault(),l()))},h),m.useEffect(()=>{if(f)return r&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(vv=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(f)),u.layers.add(f),xv(),()=>{r&&u.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=vv)}},[f,h,r,u]),m.useEffect(()=>()=>{f&&(u.layers.delete(f),u.layersWithOutsidePointerEventsDisabled.delete(f),xv())},[f,u]),m.useEffect(()=>{const S=()=>p({});return document.addEventListener(oh,S),()=>document.removeEventListener(oh,S)},[]),o.jsx(ie.div,{...c,ref:g,style:{pointerEvents:b?j?"auto":"none":void 0,...e.style},onFocusCapture:Y(e.onFocusCapture,N.onFocusCapture),onBlurCapture:Y(e.onBlurCapture,N.onBlurCapture),onPointerDownCapture:Y(e.onPointerDownCapture,_.onPointerDownCapture)})});Ni.displayName=nE;var iE="DismissableLayerBranch",yw=m.forwardRef((e,t)=>{const r=m.useContext(xw),n=m.useRef(null),s=je(t,n);return m.useEffect(()=>{const i=n.current;if(i)return r.branches.add(i),()=>{r.branches.delete(i)}},[r.branches]),o.jsx(ie.div,{...e,ref:s})});yw.displayName=iE;function aE(e,t=globalThis==null?void 0:globalThis.document){const r=Ge(e),n=m.useRef(!1),s=m.useRef(()=>{});return m.useEffect(()=>{const i=l=>{if(l.target&&!n.current){let c=function(){ww(sE,r,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",s.current),s.current=c,t.addEventListener("click",s.current,{once:!0})):c()}else t.removeEventListener("click",s.current);n.current=!1},a=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(a),t.removeEventListener("pointerdown",i),t.removeEventListener("click",s.current)}},[t,r]),{onPointerDownCapture:()=>n.current=!0}}function lE(e,t=globalThis==null?void 0:globalThis.document){const r=Ge(e),n=m.useRef(!1);return m.useEffect(()=>{const s=i=>{i.target&&!n.current&&ww(oE,r,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",s),()=>t.removeEventListener("focusin",s)},[t,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function xv(){const e=new CustomEvent(oh);document.dispatchEvent(e)}function ww(e,t,r,{discrete:n}){const s=r.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&s.addEventListener(e,t,{once:!0}),n?Hm(s,i):s.dispatchEvent(i)}var cE=Ni,uE=yw,Br=globalThis!=null&&globalThis.document?m.useLayoutEffect:()=>{},dE="Portal",el=m.forwardRef((e,t)=>{var l;const{container:r,...n}=e,[s,i]=m.useState(!1);Br(()=>i(!0),[]);const a=r||s&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return a?pw.createPortal(o.jsx(ie.div,{...n,ref:t}),a):null});el.displayName=dE;function fE(e,t){return m.useReducer((r,n)=>t[r][n]??r,e)}var ht=e=>{const{present:t,children:r}=e,n=hE(t),s=typeof r=="function"?r({present:n.isPresent}):m.Children.only(r),i=je(n.ref,mE(s));return typeof r=="function"||n.isPresent?m.cloneElement(s,{ref:i}):null};ht.displayName="Presence";function hE(e){const[t,r]=m.useState(),n=m.useRef({}),s=m.useRef(e),i=m.useRef("none"),a=e?"mounted":"unmounted",[l,c]=fE(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return m.useEffect(()=>{const u=Rl(n.current);i.current=l==="mounted"?u:"none"},[l]),Br(()=>{const u=n.current,f=s.current;if(f!==e){const h=i.current,p=Rl(u);e?c("MOUNT"):p==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(f&&h!==p?"ANIMATION_OUT":"UNMOUNT"),s.current=e}},[e,c]),Br(()=>{if(t){let u;const f=t.ownerDocument.defaultView??window,d=p=>{const v=Rl(n.current).includes(p.animationName);if(p.target===t&&v&&(c("ANIMATION_END"),!s.current)){const y=t.style.animationFillMode;t.style.animationFillMode="forwards",u=f.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=y)})}},h=p=>{p.target===t&&(i.current=Rl(n.current))};return t.addEventListener("animationstart",h),t.addEventListener("animationcancel",d),t.addEventListener("animationend",d),()=>{f.clearTimeout(u),t.removeEventListener("animationstart",h),t.removeEventListener("animationcancel",d),t.removeEventListener("animationend",d)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:m.useCallback(u=>{u&&(n.current=getComputedStyle(u)),r(u)},[])}}function Rl(e){return(e==null?void 0:e.animationName)||"none"}function mE(e){var n,s;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function cn({prop:e,defaultProp:t,onChange:r=()=>{}}){const[n,s]=pE({defaultProp:t,onChange:r}),i=e!==void 0,a=i?e:n,l=Ge(r),c=m.useCallback(u=>{if(i){const d=typeof u=="function"?u(e):u;d!==e&&l(d)}else s(u)},[i,e,s,l]);return[a,c]}function pE({defaultProp:e,onChange:t}){const r=m.useState(e),[n]=r,s=m.useRef(n),i=Ge(t);return m.useEffect(()=>{s.current!==n&&(i(n),s.current=n)},[n,s,i]),r}var gE="VisuallyHidden",hi=m.forwardRef((e,t)=>o.jsx(ie.span,{...e,ref:t,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...e.style}}));hi.displayName=gE;var vE=hi,Wm="ToastProvider",[qm,xE,yE]=wu("Toast"),[bw,BL]=Nr("Toast",[yE]),[wE,bu]=bw(Wm),jw=e=>{const{__scopeToast:t,label:r="Notification",duration:n=5e3,swipeDirection:s="right",swipeThreshold:i=50,children:a}=e,[l,c]=m.useState(null),[u,f]=m.useState(0),d=m.useRef(!1),h=m.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${Wm}\`. Expected non-empty \`string\`.`),o.jsx(qm.Provider,{scope:t,children:o.jsx(wE,{scope:t,label:r,duration:n,swipeDirection:s,swipeThreshold:i,toastCount:u,viewport:l,onViewportChange:c,onToastAdd:m.useCallback(()=>f(p=>p+1),[]),onToastRemove:m.useCallback(()=>f(p=>p-1),[]),isFocusedToastEscapeKeyDownRef:d,isClosePausedRef:h,children:a})})};jw.displayName=Wm;var _w="ToastViewport",bE=["F8"],ih="toast.viewportPause",ah="toast.viewportResume",Nw=m.forwardRef((e,t)=>{const{__scopeToast:r,hotkey:n=bE,label:s="Notifications ({hotkey})",...i}=e,a=bu(_w,r),l=xE(r),c=m.useRef(null),u=m.useRef(null),f=m.useRef(null),d=m.useRef(null),h=je(t,d,a.onViewportChange),p=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),g=a.toastCount>0;m.useEffect(()=>{const y=x=>{var b;n.length!==0&&n.every(j=>x[j]||x.code===j)&&((b=d.current)==null||b.focus())};return document.addEventListener("keydown",y),()=>document.removeEventListener("keydown",y)},[n]),m.useEffect(()=>{const y=c.current,x=d.current;if(g&&y&&x){const w=()=>{if(!a.isClosePausedRef.current){const N=new CustomEvent(ih);x.dispatchEvent(N),a.isClosePausedRef.current=!0}},b=()=>{if(a.isClosePausedRef.current){const N=new CustomEvent(ah);x.dispatchEvent(N),a.isClosePausedRef.current=!1}},j=N=>{!y.contains(N.relatedTarget)&&b()},_=()=>{y.contains(document.activeElement)||b()};return y.addEventListener("focusin",w),y.addEventListener("focusout",j),y.addEventListener("pointermove",w),y.addEventListener("pointerleave",_),window.addEventListener("blur",w),window.addEventListener("focus",b),()=>{y.removeEventListener("focusin",w),y.removeEventListener("focusout",j),y.removeEventListener("pointermove",w),y.removeEventListener("pointerleave",_),window.removeEventListener("blur",w),window.removeEventListener("focus",b)}}},[g,a.isClosePausedRef]);const v=m.useCallback(({tabbingDirection:y})=>{const w=l().map(b=>{const j=b.ref.current,_=[j,...DE(j)];return y==="forwards"?_:_.reverse()});return(y==="forwards"?w.reverse():w).flat()},[l]);return m.useEffect(()=>{const y=d.current;if(y){const x=w=>{var _,N,S;const b=w.altKey||w.ctrlKey||w.metaKey;if(w.key==="Tab"&&!b){const k=document.activeElement,E=w.shiftKey;if(w.target===y&&E){(_=u.current)==null||_.focus();return}const I=v({tabbingDirection:E?"backwards":"forwards"}),G=I.findIndex(F=>F===k);Id(I.slice(G+1))?w.preventDefault():E?(N=u.current)==null||N.focus():(S=f.current)==null||S.focus()}};return y.addEventListener("keydown",x),()=>y.removeEventListener("keydown",x)}},[l,v]),o.jsxs(uE,{ref:c,role:"region","aria-label":s.replace("{hotkey}",p),tabIndex:-1,style:{pointerEvents:g?void 0:"none"},children:[g&&o.jsx(lh,{ref:u,onFocusFromOutsideViewport:()=>{const y=v({tabbingDirection:"forwards"});Id(y)}}),o.jsx(qm.Slot,{scope:r,children:o.jsx(ie.ol,{tabIndex:-1,...i,ref:h})}),g&&o.jsx(lh,{ref:f,onFocusFromOutsideViewport:()=>{const y=v({tabbingDirection:"backwards"});Id(y)}})]})});Nw.displayName=_w;var Sw="ToastFocusProxy",lh=m.forwardRef((e,t)=>{const{__scopeToast:r,onFocusFromOutsideViewport:n,...s}=e,i=bu(Sw,r);return o.jsx(hi,{"aria-hidden":!0,tabIndex:0,...s,ref:t,style:{position:"fixed"},onFocus:a=>{var u;const l=a.relatedTarget;!((u=i.viewport)!=null&&u.contains(l))&&n()}})});lh.displayName=Sw;var ju="Toast",jE="toast.swipeStart",_E="toast.swipeMove",NE="toast.swipeCancel",SE="toast.swipeEnd",kw=m.forwardRef((e,t)=>{const{forceMount:r,open:n,defaultOpen:s,onOpenChange:i,...a}=e,[l=!0,c]=cn({prop:n,defaultProp:s,onChange:i});return o.jsx(ht,{present:r||l,children:o.jsx(EE,{open:l,...a,ref:t,onClose:()=>c(!1),onPause:Ge(e.onPause),onResume:Ge(e.onResume),onSwipeStart:Y(e.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Y(e.onSwipeMove,u=>{const{x:f,y:d}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${f}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${d}px`)}),onSwipeCancel:Y(e.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Y(e.onSwipeEnd,u=>{const{x:f,y:d}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${f}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${d}px`),c(!1)})})})});kw.displayName=ju;var[kE,CE]=bw(ju,{onClose(){}}),EE=m.forwardRef((e,t)=>{const{__scopeToast:r,type:n="foreground",duration:s,open:i,onClose:a,onEscapeKeyDown:l,onPause:c,onResume:u,onSwipeStart:f,onSwipeMove:d,onSwipeCancel:h,onSwipeEnd:p,...g}=e,v=bu(ju,r),[y,x]=m.useState(null),w=je(t,F=>x(F)),b=m.useRef(null),j=m.useRef(null),_=s||v.duration,N=m.useRef(0),S=m.useRef(_),k=m.useRef(0),{onToastAdd:E,onToastRemove:M}=v,T=Ge(()=>{var O;(y==null?void 0:y.contains(document.activeElement))&&((O=v.viewport)==null||O.focus()),a()}),I=m.useCallback(F=>{!F||F===1/0||(window.clearTimeout(k.current),N.current=new Date().getTime(),k.current=window.setTimeout(T,F))},[T]);m.useEffect(()=>{const F=v.viewport;if(F){const O=()=>{I(S.current),u==null||u()},L=()=>{const z=new Date().getTime()-N.current;S.current=S.current-z,window.clearTimeout(k.current),c==null||c()};return F.addEventListener(ih,L),F.addEventListener(ah,O),()=>{F.removeEventListener(ih,L),F.removeEventListener(ah,O)}}},[v.viewport,_,c,u,I]),m.useEffect(()=>{i&&!v.isClosePausedRef.current&&I(_)},[i,_,v.isClosePausedRef,I]),m.useEffect(()=>(E(),()=>M()),[E,M]);const G=m.useMemo(()=>y?Mw(y):null,[y]);return v.viewport?o.jsxs(o.Fragment,{children:[G&&o.jsx(PE,{__scopeToast:r,role:"status","aria-live":n==="foreground"?"assertive":"polite","aria-atomic":!0,children:G}),o.jsx(kE,{scope:r,onClose:T,children:Za.createPortal(o.jsx(qm.ItemSlot,{scope:r,children:o.jsx(cE,{asChild:!0,onEscapeKeyDown:Y(l,()=>{v.isFocusedToastEscapeKeyDownRef.current||T(),v.isFocusedToastEscapeKeyDownRef.current=!1}),children:o.jsx(ie.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":v.swipeDirection,...g,ref:w,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:Y(e.onKeyDown,F=>{F.key==="Escape"&&(l==null||l(F.nativeEvent),F.nativeEvent.defaultPrevented||(v.isFocusedToastEscapeKeyDownRef.current=!0,T()))}),onPointerDown:Y(e.onPointerDown,F=>{F.button===0&&(b.current={x:F.clientX,y:F.clientY})}),onPointerMove:Y(e.onPointerMove,F=>{if(!b.current)return;const O=F.clientX-b.current.x,L=F.clientY-b.current.y,z=!!j.current,C=["left","right"].includes(v.swipeDirection),P=["left","up"].includes(v.swipeDirection)?Math.min:Math.max,H=C?P(0,O):0,$=C?0:P(0,L),W=F.pointerType==="touch"?10:2,X={x:H,y:$},fe={originalEvent:F,delta:X};z?(j.current=X,Al(_E,d,fe,{discrete:!1})):yv(X,v.swipeDirection,W)?(j.current=X,Al(jE,f,fe,{discrete:!1}),F.target.setPointerCapture(F.pointerId)):(Math.abs(O)>W||Math.abs(L)>W)&&(b.current=null)}),onPointerUp:Y(e.onPointerUp,F=>{const O=j.current,L=F.target;if(L.hasPointerCapture(F.pointerId)&&L.releasePointerCapture(F.pointerId),j.current=null,b.current=null,O){const z=F.currentTarget,C={originalEvent:F,delta:O};yv(O,v.swipeDirection,v.swipeThreshold)?Al(SE,p,C,{discrete:!0}):Al(NE,h,C,{discrete:!0}),z.addEventListener("click",P=>P.preventDefault(),{once:!0})}})})})}),v.viewport)})]}):null}),PE=e=>{const{__scopeToast:t,children:r,...n}=e,s=bu(ju,t),[i,a]=m.useState(!1),[l,c]=m.useState(!1);return AE(()=>a(!0)),m.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),l?null:o.jsx(el,{asChild:!0,children:o.jsx(hi,{...n,children:i&&o.jsxs(o.Fragment,{children:[s.label," ",r]})})})},TE="ToastTitle",Cw=m.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e;return o.jsx(ie.div,{...n,ref:t})});Cw.displayName=TE;var RE="ToastDescription",Ew=m.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e;return o.jsx(ie.div,{...n,ref:t})});Ew.displayName=RE;var Pw="ToastAction",Tw=m.forwardRef((e,t)=>{const{altText:r,...n}=e;return r.trim()?o.jsx(Aw,{altText:r,asChild:!0,children:o.jsx(Km,{...n,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${Pw}\`. Expected non-empty \`string\`.`),null)});Tw.displayName=Pw;var Rw="ToastClose",Km=m.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e,s=CE(Rw,r);return o.jsx(Aw,{asChild:!0,children:o.jsx(ie.button,{type:"button",...n,ref:t,onClick:Y(e.onClick,s.onClose)})})});Km.displayName=Rw;var Aw=m.forwardRef((e,t)=>{const{__scopeToast:r,altText:n,...s}=e;return o.jsx(ie.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0,...s,ref:t})});function Mw(e){const t=[];return Array.from(e.childNodes).forEach(n=>{if(n.nodeType===n.TEXT_NODE&&n.textContent&&t.push(n.textContent),ME(n)){const s=n.ariaHidden||n.hidden||n.style.display==="none",i=n.dataset.radixToastAnnounceExclude==="";if(!s)if(i){const a=n.dataset.radixToastAnnounceAlt;a&&t.push(a)}else t.push(...Mw(n))}}),t}function Al(e,t,r,{discrete:n}){const s=r.originalEvent.currentTarget,i=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:r});t&&s.addEventListener(e,t,{once:!0}),n?Hm(s,i):s.dispatchEvent(i)}var yv=(e,t,r=0)=>{const n=Math.abs(e.x),s=Math.abs(e.y),i=n>s;return t==="left"||t==="right"?i&&n>r:!i&&s>r};function AE(e=()=>{}){const t=Ge(e);Br(()=>{let r=0,n=0;return r=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(n)}},[t])}function ME(e){return e.nodeType===e.ELEMENT_NODE}function DE(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const s=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||s?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function Id(e){const t=document.activeElement;return e.some(r=>r===t?!0:(r.focus(),document.activeElement!==t))}var OE=jw,Dw=Nw,Ow=kw,Iw=Cw,Lw=Ew,$w=Tw,Uw=Km;function Fw(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=Fw(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function zw(){for(var e,t,r=0,n="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=Fw(e))&&(n&&(n+=" "),n+=t);return n}const wv=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,bv=zw,_u=(e,t)=>r=>{var n;if((t==null?void 0:t.variants)==null)return bv(e,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:s,defaultVariants:i}=t,a=Object.keys(s).map(u=>{const f=r==null?void 0:r[u],d=i==null?void 0:i[u];if(f===null)return null;const h=wv(f)||wv(d);return s[u][h]}),l=r&&Object.entries(r).reduce((u,f)=>{let[d,h]=f;return h===void 0||(u[d]=h),u},{}),c=t==null||(n=t.compoundVariants)===null||n===void 0?void 0:n.reduce((u,f)=>{let{class:d,className:h,...p}=f;return Object.entries(p).every(g=>{let[v,y]=g;return Array.isArray(y)?y.includes({...i,...l}[v]):{...i,...l}[v]===y})?[...u,d,h]:u},[]);return bv(e,a,c,r==null?void 0:r.class,r==null?void 0:r.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IE=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Bw=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var LE={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $E=m.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:s="",children:i,iconNode:a,...l},c)=>m.createElement("svg",{ref:c,...LE,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:Bw("lucide",s),...l},[...a.map(([u,f])=>m.createElement(u,f)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=(e,t)=>{const r=m.forwardRef(({className:n,...s},i)=>m.createElement($E,{ref:i,iconNode:t,className:Bw(`lucide-${IE(e)}`,n),...s}));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ch=K("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ys=K("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UE=K("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FE=K("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jv=K("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gw=K("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vw=K("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zE=K("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dr=K("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BE=K("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GE=K("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hw=K("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VE=K("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qs=K("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HE=K("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WE=K("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qE=K("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tl=K("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KE=K("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dt=K("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YE=K("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QE=K("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ww=K("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XE=K("Eraser",[["path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21",key:"182aya"}],["path",{d:"M22 21H7",key:"t4ddhn"}],["path",{d:"m5 11 9 9",key:"1mo9qw"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ym=K("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oc=K("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uh=K("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dh=K("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qw=K("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oc=K("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kw=K("Gamepad2",[["line",{x1:"6",x2:"10",y1:"11",y2:"11",key:"1gktln"}],["line",{x1:"8",x2:"8",y1:"9",y2:"13",key:"qnk9ow"}],["line",{x1:"15",x2:"15.01",y1:"12",y2:"12",key:"krot7o"}],["line",{x1:"18",x2:"18.01",y1:"10",y2:"10",key:"1lcuu1"}],["path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",key:"mfqc10"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _v=K("Hand",[["path",{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1fvzgz"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2",key:"1kc0my"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8",key:"10h0bg"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JE=K("Headphones",[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rl=K("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ia=K("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZE=K("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e2=K("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t2=K("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ic=K("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fh=K("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pa=K("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dn=K("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lc=K("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nv=K("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ic=K("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hh=K("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mh=K("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yw=K("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qw=K("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r2=K("PhoneOff",[["path",{d:"M10.68 13.31a16 16 0 0 0 3.41 2.6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7 2 2 0 0 1 1.72 2v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.42 19.42 0 0 1-3.33-2.67m-2.67-3.34a19.79 19.79 0 0 1-3.07-8.63A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91",key:"z86iuo"}],["line",{x1:"22",x2:"2",y1:"2",y2:"22",key:"11kh81"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xw=K("Pin",[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jw=K("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nu=K("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Su=K("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qm=K("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ph=K("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n2=K("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xm=K("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gh=K("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s2=K("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ac=K("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sv=K("Shuffle",[["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 18h1.973a4 4 0 0 0 3.3-1.7l5.454-8.6a4 4 0 0 1 3.3-1.7H22",key:"1ailkh"}],["path",{d:"M2 6h1.972a4 4 0 0 1 3.6 2.2",key:"km57vx"}],["path",{d:"M22 18h-6.041a4 4 0 0 1-3.3-1.8l-.359-.45",key:"os18l9"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zw=K("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yr=K("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kv=K("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o2=K("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ku=K("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vh=K("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eb=K("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tb=K("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rb=K("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const On=K("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gs=K("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $c=K("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nb=K("UsersRound",[["path",{d:"M18 21a8 8 0 0 0-16 0",key:"3ypg7q"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3",key:"10s06x"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vt=K("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cu=K("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uc=K("VolumeX",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ao=K("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mi=K("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),Jm="-",i2=e=>{const t=l2(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:a=>{const l=a.split(Jm);return l[0]===""&&l.length!==1&&l.shift(),sb(l,t)||a2(a)},getConflictingClassGroupIds:(a,l)=>{const c=r[a]||[];return l&&n[a]?[...c,...n[a]]:c}}},sb=(e,t)=>{var a;if(e.length===0)return t.classGroupId;const r=e[0],n=t.nextPart.get(r),s=n?sb(e.slice(1),n):void 0;if(s)return s;if(t.validators.length===0)return;const i=e.join(Jm);return(a=t.validators.find(({validator:l})=>l(i)))==null?void 0:a.classGroupId},Cv=/^\[(.+)\]$/,a2=e=>{if(Cv.test(e)){const t=Cv.exec(e)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},l2=e=>{const{theme:t,prefix:r}=e,n={nextPart:new Map,validators:[]};return u2(Object.entries(e.classGroups),r).forEach(([i,a])=>{xh(a,n,i,t)}),n},xh=(e,t,r,n)=>{e.forEach(s=>{if(typeof s=="string"){const i=s===""?t:Ev(t,s);i.classGroupId=r;return}if(typeof s=="function"){if(c2(s)){xh(s(n),t,r,n);return}t.validators.push({validator:s,classGroupId:r});return}Object.entries(s).forEach(([i,a])=>{xh(a,Ev(t,i),r,n)})})},Ev=(e,t)=>{let r=e;return t.split(Jm).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},c2=e=>e.isThemeGetter,u2=(e,t)=>t?e.map(([r,n])=>{const s=n.map(i=>typeof i=="string"?t+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([a,l])=>[t+a,l])):i);return[r,s]}):e,d2=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,n=new Map;const s=(i,a)=>{r.set(i,a),t++,t>e&&(t=0,n=r,r=new Map)};return{get(i){let a=r.get(i);if(a!==void 0)return a;if((a=n.get(i))!==void 0)return s(i,a),a},set(i,a){r.has(i)?r.set(i,a):s(i,a)}}},ob="!",f2=e=>{const{separator:t,experimentalParseClassName:r}=e,n=t.length===1,s=t[0],i=t.length,a=l=>{const c=[];let u=0,f=0,d;for(let y=0;y<l.length;y++){let x=l[y];if(u===0){if(x===s&&(n||l.slice(y,y+i)===t)){c.push(l.slice(f,y)),f=y+i;continue}if(x==="/"){d=y;continue}}x==="["?u++:x==="]"&&u--}const h=c.length===0?l:l.substring(f),p=h.startsWith(ob),g=p?h.substring(1):h,v=d&&d>f?d-f:void 0;return{modifiers:c,hasImportantModifier:p,baseClassName:g,maybePostfixModifierPosition:v}};return r?l=>r({className:l,parseClassName:a}):a},h2=e=>{if(e.length<=1)return e;const t=[];let r=[];return e.forEach(n=>{n[0]==="["?(t.push(...r.sort(),n),r=[]):r.push(n)}),t.push(...r.sort()),t},m2=e=>({cache:d2(e.cacheSize),parseClassName:f2(e),...i2(e)}),p2=/\s+/,g2=(e,t)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:s}=t,i=[],a=e.trim().split(p2);let l="";for(let c=a.length-1;c>=0;c-=1){const u=a[c],{modifiers:f,hasImportantModifier:d,baseClassName:h,maybePostfixModifierPosition:p}=r(u);let g=!!p,v=n(g?h.substring(0,p):h);if(!v){if(!g){l=u+(l.length>0?" "+l:l);continue}if(v=n(h),!v){l=u+(l.length>0?" "+l:l);continue}g=!1}const y=h2(f).join(":"),x=d?y+ob:y,w=x+v;if(i.includes(w))continue;i.push(w);const b=s(v,g);for(let j=0;j<b.length;++j){const _=b[j];i.push(x+_)}l=u+(l.length>0?" "+l:l)}return l};function v2(){let e=0,t,r,n="";for(;e<arguments.length;)(t=arguments[e++])&&(r=ib(t))&&(n&&(n+=" "),n+=r);return n}const ib=e=>{if(typeof e=="string")return e;let t,r="";for(let n=0;n<e.length;n++)e[n]&&(t=ib(e[n]))&&(r&&(r+=" "),r+=t);return r};function x2(e,...t){let r,n,s,i=a;function a(c){const u=t.reduce((f,d)=>d(f),e());return r=m2(u),n=r.cache.get,s=r.cache.set,i=l,l(c)}function l(c){const u=n(c);if(u)return u;const f=g2(c,r);return s(c,f),f}return function(){return i(v2.apply(null,arguments))}}const De=e=>{const t=r=>r[e]||[];return t.isThemeGetter=!0,t},ab=/^\[(?:([a-z-]+):)?(.+)\]$/i,y2=/^\d+\/\d+$/,w2=new Set(["px","full","screen"]),b2=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,j2=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,_2=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,N2=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,S2=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,gn=e=>Wo(e)||w2.has(e)||y2.test(e),zn=e=>Si(e,"length",M2),Wo=e=>!!e&&!Number.isNaN(Number(e)),Ld=e=>Si(e,"number",Wo),Wi=e=>!!e&&Number.isInteger(Number(e)),k2=e=>e.endsWith("%")&&Wo(e.slice(0,-1)),pe=e=>ab.test(e),Bn=e=>b2.test(e),C2=new Set(["length","size","percentage"]),E2=e=>Si(e,C2,lb),P2=e=>Si(e,"position",lb),T2=new Set(["image","url"]),R2=e=>Si(e,T2,O2),A2=e=>Si(e,"",D2),qi=()=>!0,Si=(e,t,r)=>{const n=ab.exec(e);return n?n[1]?typeof t=="string"?n[1]===t:t.has(n[1]):r(n[2]):!1},M2=e=>j2.test(e)&&!_2.test(e),lb=()=>!1,D2=e=>N2.test(e),O2=e=>S2.test(e),I2=()=>{const e=De("colors"),t=De("spacing"),r=De("blur"),n=De("brightness"),s=De("borderColor"),i=De("borderRadius"),a=De("borderSpacing"),l=De("borderWidth"),c=De("contrast"),u=De("grayscale"),f=De("hueRotate"),d=De("invert"),h=De("gap"),p=De("gradientColorStops"),g=De("gradientColorStopPositions"),v=De("inset"),y=De("margin"),x=De("opacity"),w=De("padding"),b=De("saturate"),j=De("scale"),_=De("sepia"),N=De("skew"),S=De("space"),k=De("translate"),E=()=>["auto","contain","none"],M=()=>["auto","hidden","clip","visible","scroll"],T=()=>["auto",pe,t],I=()=>[pe,t],G=()=>["",gn,zn],F=()=>["auto",Wo,pe],O=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],L=()=>["solid","dashed","dotted","double","none"],z=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],C=()=>["start","end","center","between","around","evenly","stretch"],P=()=>["","0",pe],H=()=>["auto","avoid","all","avoid-page","page","left","right","column"],$=()=>[Wo,pe];return{cacheSize:500,separator:":",theme:{colors:[qi],spacing:[gn,zn],blur:["none","",Bn,pe],brightness:$(),borderColor:[e],borderRadius:["none","","full",Bn,pe],borderSpacing:I(),borderWidth:G(),contrast:$(),grayscale:P(),hueRotate:$(),invert:P(),gap:I(),gradientColorStops:[e],gradientColorStopPositions:[k2,zn],inset:T(),margin:T(),opacity:$(),padding:I(),saturate:$(),scale:$(),sepia:P(),skew:$(),space:I(),translate:I()},classGroups:{aspect:[{aspect:["auto","square","video",pe]}],container:["container"],columns:[{columns:[Bn]}],"break-after":[{"break-after":H()}],"break-before":[{"break-before":H()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...O(),pe]}],overflow:[{overflow:M()}],"overflow-x":[{"overflow-x":M()}],"overflow-y":[{"overflow-y":M()}],overscroll:[{overscroll:E()}],"overscroll-x":[{"overscroll-x":E()}],"overscroll-y":[{"overscroll-y":E()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[v]}],"inset-x":[{"inset-x":[v]}],"inset-y":[{"inset-y":[v]}],start:[{start:[v]}],end:[{end:[v]}],top:[{top:[v]}],right:[{right:[v]}],bottom:[{bottom:[v]}],left:[{left:[v]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Wi,pe]}],basis:[{basis:T()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",pe]}],grow:[{grow:P()}],shrink:[{shrink:P()}],order:[{order:["first","last","none",Wi,pe]}],"grid-cols":[{"grid-cols":[qi]}],"col-start-end":[{col:["auto",{span:["full",Wi,pe]},pe]}],"col-start":[{"col-start":F()}],"col-end":[{"col-end":F()}],"grid-rows":[{"grid-rows":[qi]}],"row-start-end":[{row:["auto",{span:[Wi,pe]},pe]}],"row-start":[{"row-start":F()}],"row-end":[{"row-end":F()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",pe]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",pe]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal",...C()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...C(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...C(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[w]}],px:[{px:[w]}],py:[{py:[w]}],ps:[{ps:[w]}],pe:[{pe:[w]}],pt:[{pt:[w]}],pr:[{pr:[w]}],pb:[{pb:[w]}],pl:[{pl:[w]}],m:[{m:[y]}],mx:[{mx:[y]}],my:[{my:[y]}],ms:[{ms:[y]}],me:[{me:[y]}],mt:[{mt:[y]}],mr:[{mr:[y]}],mb:[{mb:[y]}],ml:[{ml:[y]}],"space-x":[{"space-x":[S]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[S]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",pe,t]}],"min-w":[{"min-w":[pe,t,"min","max","fit"]}],"max-w":[{"max-w":[pe,t,"none","full","min","max","fit","prose",{screen:[Bn]},Bn]}],h:[{h:[pe,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[pe,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[pe,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[pe,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Bn,zn]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Ld]}],"font-family":[{font:[qi]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",pe]}],"line-clamp":[{"line-clamp":["none",Wo,Ld]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",gn,pe]}],"list-image":[{"list-image":["none",pe]}],"list-style-type":[{list:["none","disc","decimal",pe]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[x]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[x]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...L(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",gn,zn]}],"underline-offset":[{"underline-offset":["auto",gn,pe]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:I()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",pe]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",pe]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[x]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...O(),P2]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",E2]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},R2]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[g]}],"gradient-via-pos":[{via:[g]}],"gradient-to-pos":[{to:[g]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[x]}],"border-style":[{border:[...L(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[x]}],"divide-style":[{divide:L()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...L()]}],"outline-offset":[{"outline-offset":[gn,pe]}],"outline-w":[{outline:[gn,zn]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:G()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[x]}],"ring-offset-w":[{"ring-offset":[gn,zn]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Bn,A2]}],"shadow-color":[{shadow:[qi]}],opacity:[{opacity:[x]}],"mix-blend":[{"mix-blend":[...z(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":z()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Bn,pe]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[f]}],invert:[{invert:[d]}],saturate:[{saturate:[b]}],sepia:[{sepia:[_]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[f]}],"backdrop-invert":[{"backdrop-invert":[d]}],"backdrop-opacity":[{"backdrop-opacity":[x]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[_]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",pe]}],duration:[{duration:$()}],ease:[{ease:["linear","in","out","in-out",pe]}],delay:[{delay:$()}],animate:[{animate:["none","spin","ping","pulse","bounce",pe]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[j]}],"scale-x":[{"scale-x":[j]}],"scale-y":[{"scale-y":[j]}],rotate:[{rotate:[Wi,pe]}],"translate-x":[{"translate-x":[k]}],"translate-y":[{"translate-y":[k]}],"skew-x":[{"skew-x":[N]}],"skew-y":[{"skew-y":[N]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",pe]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",pe]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":I()}],"scroll-mx":[{"scroll-mx":I()}],"scroll-my":[{"scroll-my":I()}],"scroll-ms":[{"scroll-ms":I()}],"scroll-me":[{"scroll-me":I()}],"scroll-mt":[{"scroll-mt":I()}],"scroll-mr":[{"scroll-mr":I()}],"scroll-mb":[{"scroll-mb":I()}],"scroll-ml":[{"scroll-ml":I()}],"scroll-p":[{"scroll-p":I()}],"scroll-px":[{"scroll-px":I()}],"scroll-py":[{"scroll-py":I()}],"scroll-ps":[{"scroll-ps":I()}],"scroll-pe":[{"scroll-pe":I()}],"scroll-pt":[{"scroll-pt":I()}],"scroll-pr":[{"scroll-pr":I()}],"scroll-pb":[{"scroll-pb":I()}],"scroll-pl":[{"scroll-pl":I()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",pe]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[gn,zn,Ld]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},L2=x2(I2);function re(...e){return L2(zw(e))}const $2=OE,cb=m.forwardRef(({className:e,...t},r)=>o.jsx(Dw,{ref:r,className:re("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));cb.displayName=Dw.displayName;const U2=_u("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),ub=m.forwardRef(({className:e,variant:t,...r},n)=>o.jsx(Ow,{ref:n,className:re(U2({variant:t}),e),...r}));ub.displayName=Ow.displayName;const F2=m.forwardRef(({className:e,...t},r)=>o.jsx($w,{ref:r,className:re("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));F2.displayName=$w.displayName;const db=m.forwardRef(({className:e,...t},r)=>o.jsx(Uw,{ref:r,className:re("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:o.jsx(ao,{className:"h-4 w-4"})}));db.displayName=Uw.displayName;const fb=m.forwardRef(({className:e,...t},r)=>o.jsx(Iw,{ref:r,className:re("text-sm font-semibold",e),...t}));fb.displayName=Iw.displayName;const hb=m.forwardRef(({className:e,...t},r)=>o.jsx(Lw,{ref:r,className:re("text-sm opacity-90",e),...t}));hb.displayName=Lw.displayName;function z2(){const{toasts:e}=Le();return o.jsxs($2,{children:[e.map(({id:t,title:r,description:n,action:s,...i})=>o.jsxs(ub,{...i,children:[o.jsxs("div",{className:"grid gap-1",children:[r&&o.jsx(fb,{children:r}),n&&o.jsx(hb,{children:n})]}),s,o.jsx(db,{})]},t)),o.jsx(cb,{})]})}var Pv=["light","dark"],B2="(prefers-color-scheme: dark)",G2=m.createContext(void 0),V2={setTheme:e=>{},themes:[]},H2=()=>{var e;return(e=m.useContext(G2))!=null?e:V2};m.memo(({forcedTheme:e,storageKey:t,attribute:r,enableSystem:n,enableColorScheme:s,defaultTheme:i,value:a,attrs:l,nonce:c})=>{let u=i==="system",f=r==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${l.map(g=>`'${g}'`).join(",")})`};`:`var d=document.documentElement,n='${r}',s='setAttribute';`,d=s?Pv.includes(i)&&i?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${i}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",h=(g,v=!1,y=!0)=>{let x=a?a[g]:g,w=v?g+"|| ''":`'${x}'`,b="";return s&&y&&!v&&Pv.includes(g)&&(b+=`d.style.colorScheme = '${g}';`),r==="class"?v||x?b+=`c.add(${w})`:b+="null":x&&(b+=`d[s](n,${w})`),b},p=e?`!function(){${f}${h(e)}}()`:n?`!function(){try{${f}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${u})){var t='${B2}',m=window.matchMedia(t);if(m.media!==t||m.matches){${h("dark")}}else{${h("light")}}}else if(e){${a?`var x=${JSON.stringify(a)};`:""}${h(a?"x[e]":"e",!0)}}${u?"":"else{"+h(i,!1,!1)+"}"}${d}}catch(e){}}()`:`!function(){try{${f}var e=localStorage.getItem('${t}');if(e){${a?`var x=${JSON.stringify(a)};`:""}${h(a?"x[e]":"e",!0)}}else{${h(i,!1,!1)};}${d}}catch(t){}}();`;return m.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:p}})});var W2=e=>{switch(e){case"success":return Y2;case"info":return X2;case"warning":return Q2;case"error":return J2;default:return null}},q2=Array(12).fill(0),K2=({visible:e})=>A.createElement("div",{className:"sonner-loading-wrapper","data-visible":e},A.createElement("div",{className:"sonner-spinner"},q2.map((t,r)=>A.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),Y2=A.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},A.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),Q2=A.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},A.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),X2=A.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},A.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),J2=A.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},A.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),Z2=()=>{let[e,t]=A.useState(document.hidden);return A.useEffect(()=>{let r=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",r),()=>window.removeEventListener("visibilitychange",r)},[]),e},yh=1,eP=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:r,...n}=e,s=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:yh++,i=this.toasts.find(l=>l.id===s),a=e.dismissible===void 0?!0:e.dismissible;return i?this.toasts=this.toasts.map(l=>l.id===s?(this.publish({...l,...e,id:s,title:r}),{...l,...e,id:s,dismissible:a,title:r}):l):this.addToast({title:r,...n,dismissible:a,id:s}),s},this.dismiss=e=>(e||this.toasts.forEach(t=>{this.subscribers.forEach(r=>r({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let r;t.loading!==void 0&&(r=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));let n=e instanceof Promise?e:e(),s=r!==void 0;return n.then(async i=>{if(rP(i)&&!i.ok){s=!1;let a=typeof t.error=="function"?await t.error(`HTTP error! status: ${i.status}`):t.error,l=typeof t.description=="function"?await t.description(`HTTP error! status: ${i.status}`):t.description;this.create({id:r,type:"error",message:a,description:l})}else if(t.success!==void 0){s=!1;let a=typeof t.success=="function"?await t.success(i):t.success,l=typeof t.description=="function"?await t.description(i):t.description;this.create({id:r,type:"success",message:a,description:l})}}).catch(async i=>{if(t.error!==void 0){s=!1;let a=typeof t.error=="function"?await t.error(i):t.error,l=typeof t.description=="function"?await t.description(i):t.description;this.create({id:r,type:"error",message:a,description:l})}}).finally(()=>{var i;s&&(this.dismiss(r),r=void 0),(i=t.finally)==null||i.call(t)}),r},this.custom=(e,t)=>{let r=(t==null?void 0:t.id)||yh++;return this.create({jsx:e(r),id:r,...t}),r},this.subscribers=[],this.toasts=[]}},Zt=new eP,tP=(e,t)=>{let r=(t==null?void 0:t.id)||yh++;return Zt.addToast({title:e,...t,id:r}),r},rP=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",nP=tP,sP=()=>Zt.toasts,Or=Object.assign(nP,{success:Zt.success,info:Zt.info,warning:Zt.warning,error:Zt.error,custom:Zt.custom,message:Zt.message,promise:Zt.promise,dismiss:Zt.dismiss,loading:Zt.loading},{getHistory:sP});function oP(e,{insertAt:t}={}){if(typeof document>"u")return;let r=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t==="top"&&r.firstChild?r.insertBefore(n,r.firstChild):r.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}oP(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999}:where([data-sonner-toaster][data-x-position="right"]){right:max(var(--offset),env(safe-area-inset-right))}:where([data-sonner-toaster][data-x-position="left"]){left:max(var(--offset),env(safe-area-inset-left))}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:max(var(--offset),env(safe-area-inset-top))}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:max(var(--offset),env(safe-area-inset-bottom))}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;background:var(--gray1);color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:0;right:0;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount, 0px));transition:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation:swipe-out .2s ease-out forwards}@keyframes swipe-out{0%{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount)));opacity:1}to{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount) + var(--lift) * -100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;--mobile-offset: 16px;right:var(--mobile-offset);left:var(--mobile-offset);width:100%}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset)}[data-sonner-toaster][data-y-position=bottom]{bottom:20px}[data-sonner-toaster][data-y-position=top]{top:20px}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset);right:var(--mobile-offset);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Ml(e){return e.label!==void 0}var iP=3,aP="32px",lP=4e3,cP=356,uP=14,dP=20,fP=200;function hP(...e){return e.filter(Boolean).join(" ")}var mP=e=>{var t,r,n,s,i,a,l,c,u,f;let{invert:d,toast:h,unstyled:p,interacting:g,setHeights:v,visibleToasts:y,heights:x,index:w,toasts:b,expanded:j,removeToast:_,defaultRichColors:N,closeButton:S,style:k,cancelButtonStyle:E,actionButtonStyle:M,className:T="",descriptionClassName:I="",duration:G,position:F,gap:O,loadingIcon:L,expandByDefault:z,classNames:C,icons:P,closeButtonAriaLabel:H="Close toast",pauseWhenPageIsHidden:$,cn:W}=e,[X,fe]=A.useState(!1),[ye,se]=A.useState(!1),[ce,$e]=A.useState(!1),[Ce,Fe]=A.useState(!1),[Ke,Ut]=A.useState(0),[ne,Et]=A.useState(0),Te=A.useRef(null),Ne=A.useRef(null),xt=w===0,it=w+1<=y,Se=h.type,Je=h.dismissible!==!1,kr=h.className||"",Ft=h.descriptionClassName||"",Wr=A.useMemo(()=>x.findIndex(V=>V.toastId===h.id)||0,[x,h.id]),hn=A.useMemo(()=>{var V;return(V=h.closeButton)!=null?V:S},[h.closeButton,S]),ee=A.useMemo(()=>h.duration||G||lP,[h.duration,G]),Re=A.useRef(0),at=A.useRef(0),mn=A.useRef(0),dr=A.useRef(null),[ho,pn]=F.split("-"),mo=A.useMemo(()=>x.reduce((V,te,oe)=>oe>=Wr?V:V+te.height,0),[x,Wr]),Ts=Z2(),Li=h.invert||d,Rs=Se==="loading";at.current=A.useMemo(()=>Wr*O+mo,[Wr,mo]),A.useEffect(()=>{fe(!0)},[]),A.useLayoutEffect(()=>{if(!X)return;let V=Ne.current,te=V.style.height;V.style.height="auto";let oe=V.getBoundingClientRect().height;V.style.height=te,Et(oe),v(ge=>ge.find(he=>he.toastId===h.id)?ge.map(he=>he.toastId===h.id?{...he,height:oe}:he):[{toastId:h.id,height:oe,position:h.position},...ge])},[X,h.title,h.description,v,h.id]);let Cr=A.useCallback(()=>{se(!0),Ut(at.current),v(V=>V.filter(te=>te.toastId!==h.id)),setTimeout(()=>{_(h)},fP)},[h,_,v,at]);A.useEffect(()=>{if(h.promise&&Se==="loading"||h.duration===1/0||h.type==="loading")return;let V,te=ee;return j||g||$&&Ts?(()=>{if(mn.current<Re.current){let oe=new Date().getTime()-Re.current;te=te-oe}mn.current=new Date().getTime()})():te!==1/0&&(Re.current=new Date().getTime(),V=setTimeout(()=>{var oe;(oe=h.onAutoClose)==null||oe.call(h,h),Cr()},te)),()=>clearTimeout(V)},[j,g,z,h,ee,Cr,h.promise,Se,$,Ts]),A.useEffect(()=>{let V=Ne.current;if(V){let te=V.getBoundingClientRect().height;return Et(te),v(oe=>[{toastId:h.id,height:te,position:h.position},...oe]),()=>v(oe=>oe.filter(ge=>ge.toastId!==h.id))}},[v,h.id]),A.useEffect(()=>{h.delete&&Cr()},[Cr,h.delete]);function po(){return P!=null&&P.loading?A.createElement("div",{className:"sonner-loader","data-visible":Se==="loading"},P.loading):L?A.createElement("div",{className:"sonner-loader","data-visible":Se==="loading"},L):A.createElement(K2,{visible:Se==="loading"})}return A.createElement("li",{"aria-live":h.important?"assertive":"polite","aria-atomic":"true",role:"status",tabIndex:0,ref:Ne,className:W(T,kr,C==null?void 0:C.toast,(t=h==null?void 0:h.classNames)==null?void 0:t.toast,C==null?void 0:C.default,C==null?void 0:C[Se],(r=h==null?void 0:h.classNames)==null?void 0:r[Se]),"data-sonner-toast":"","data-rich-colors":(n=h.richColors)!=null?n:N,"data-styled":!(h.jsx||h.unstyled||p),"data-mounted":X,"data-promise":!!h.promise,"data-removed":ye,"data-visible":it,"data-y-position":ho,"data-x-position":pn,"data-index":w,"data-front":xt,"data-swiping":ce,"data-dismissible":Je,"data-type":Se,"data-invert":Li,"data-swipe-out":Ce,"data-expanded":!!(j||z&&X),style:{"--index":w,"--toasts-before":w,"--z-index":b.length-w,"--offset":`${ye?Ke:at.current}px`,"--initial-height":z?"auto":`${ne}px`,...k,...h.style},onPointerDown:V=>{Rs||!Je||(Te.current=new Date,Ut(at.current),V.target.setPointerCapture(V.pointerId),V.target.tagName!=="BUTTON"&&($e(!0),dr.current={x:V.clientX,y:V.clientY}))},onPointerUp:()=>{var V,te,oe,ge;if(Ce||!Je)return;dr.current=null;let he=Number(((V=Ne.current)==null?void 0:V.style.getPropertyValue("--swipe-amount").replace("px",""))||0),Ye=new Date().getTime()-((te=Te.current)==null?void 0:te.getTime()),Ze=Math.abs(he)/Ye;if(Math.abs(he)>=dP||Ze>.11){Ut(at.current),(oe=h.onDismiss)==null||oe.call(h,h),Cr(),Fe(!0);return}(ge=Ne.current)==null||ge.style.setProperty("--swipe-amount","0px"),$e(!1)},onPointerMove:V=>{var te;if(!dr.current||!Je)return;let oe=V.clientY-dr.current.y,ge=V.clientX-dr.current.x,he=(ho==="top"?Math.min:Math.max)(0,oe),Ye=V.pointerType==="touch"?10:2;Math.abs(he)>Ye?(te=Ne.current)==null||te.style.setProperty("--swipe-amount",`${oe}px`):Math.abs(ge)>Ye&&(dr.current=null)}},hn&&!h.jsx?A.createElement("button",{"aria-label":H,"data-disabled":Rs,"data-close-button":!0,onClick:Rs||!Je?()=>{}:()=>{var V;Cr(),(V=h.onDismiss)==null||V.call(h,h)},className:W(C==null?void 0:C.closeButton,(s=h==null?void 0:h.classNames)==null?void 0:s.closeButton)},A.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},A.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),A.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))):null,h.jsx||A.isValidElement(h.title)?h.jsx||h.title:A.createElement(A.Fragment,null,Se||h.icon||h.promise?A.createElement("div",{"data-icon":"",className:W(C==null?void 0:C.icon,(i=h==null?void 0:h.classNames)==null?void 0:i.icon)},h.promise||h.type==="loading"&&!h.icon?h.icon||po():null,h.type!=="loading"?h.icon||(P==null?void 0:P[Se])||W2(Se):null):null,A.createElement("div",{"data-content":"",className:W(C==null?void 0:C.content,(a=h==null?void 0:h.classNames)==null?void 0:a.content)},A.createElement("div",{"data-title":"",className:W(C==null?void 0:C.title,(l=h==null?void 0:h.classNames)==null?void 0:l.title)},h.title),h.description?A.createElement("div",{"data-description":"",className:W(I,Ft,C==null?void 0:C.description,(c=h==null?void 0:h.classNames)==null?void 0:c.description)},h.description):null),A.isValidElement(h.cancel)?h.cancel:h.cancel&&Ml(h.cancel)?A.createElement("button",{"data-button":!0,"data-cancel":!0,style:h.cancelButtonStyle||E,onClick:V=>{var te,oe;Ml(h.cancel)&&Je&&((oe=(te=h.cancel).onClick)==null||oe.call(te,V),Cr())},className:W(C==null?void 0:C.cancelButton,(u=h==null?void 0:h.classNames)==null?void 0:u.cancelButton)},h.cancel.label):null,A.isValidElement(h.action)?h.action:h.action&&Ml(h.action)?A.createElement("button",{"data-button":!0,"data-action":!0,style:h.actionButtonStyle||M,onClick:V=>{var te,oe;Ml(h.action)&&(V.defaultPrevented||((oe=(te=h.action).onClick)==null||oe.call(te,V),Cr()))},className:W(C==null?void 0:C.actionButton,(f=h==null?void 0:h.classNames)==null?void 0:f.actionButton)},h.action.label):null))};function Tv(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}var pP=e=>{let{invert:t,position:r="bottom-right",hotkey:n=["altKey","KeyT"],expand:s,closeButton:i,className:a,offset:l,theme:c="light",richColors:u,duration:f,style:d,visibleToasts:h=iP,toastOptions:p,dir:g=Tv(),gap:v=uP,loadingIcon:y,icons:x,containerAriaLabel:w="Notifications",pauseWhenPageIsHidden:b,cn:j=hP}=e,[_,N]=A.useState([]),S=A.useMemo(()=>Array.from(new Set([r].concat(_.filter($=>$.position).map($=>$.position)))),[_,r]),[k,E]=A.useState([]),[M,T]=A.useState(!1),[I,G]=A.useState(!1),[F,O]=A.useState(c!=="system"?c:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),L=A.useRef(null),z=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),C=A.useRef(null),P=A.useRef(!1),H=A.useCallback($=>{var W;(W=_.find(X=>X.id===$.id))!=null&&W.delete||Zt.dismiss($.id),N(X=>X.filter(({id:fe})=>fe!==$.id))},[_]);return A.useEffect(()=>Zt.subscribe($=>{if($.dismiss){N(W=>W.map(X=>X.id===$.id?{...X,delete:!0}:X));return}setTimeout(()=>{pw.flushSync(()=>{N(W=>{let X=W.findIndex(fe=>fe.id===$.id);return X!==-1?[...W.slice(0,X),{...W[X],...$},...W.slice(X+1)]:[$,...W]})})})}),[]),A.useEffect(()=>{if(c!=="system"){O(c);return}c==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?O("dark"):O("light")),typeof window<"u"&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",({matches:$})=>{O($?"dark":"light")})},[c]),A.useEffect(()=>{_.length<=1&&T(!1)},[_]),A.useEffect(()=>{let $=W=>{var X,fe;n.every(ye=>W[ye]||W.code===ye)&&(T(!0),(X=L.current)==null||X.focus()),W.code==="Escape"&&(document.activeElement===L.current||(fe=L.current)!=null&&fe.contains(document.activeElement))&&T(!1)};return document.addEventListener("keydown",$),()=>document.removeEventListener("keydown",$)},[n]),A.useEffect(()=>{if(L.current)return()=>{C.current&&(C.current.focus({preventScroll:!0}),C.current=null,P.current=!1)}},[L.current]),_.length?A.createElement("section",{"aria-label":`${w} ${z}`,tabIndex:-1},S.map(($,W)=>{var X;let[fe,ye]=$.split("-");return A.createElement("ol",{key:$,dir:g==="auto"?Tv():g,tabIndex:-1,ref:L,className:a,"data-sonner-toaster":!0,"data-theme":F,"data-y-position":fe,"data-x-position":ye,style:{"--front-toast-height":`${((X=k[0])==null?void 0:X.height)||0}px`,"--offset":typeof l=="number"?`${l}px`:l||aP,"--width":`${cP}px`,"--gap":`${v}px`,...d},onBlur:se=>{P.current&&!se.currentTarget.contains(se.relatedTarget)&&(P.current=!1,C.current&&(C.current.focus({preventScroll:!0}),C.current=null))},onFocus:se=>{se.target instanceof HTMLElement&&se.target.dataset.dismissible==="false"||P.current||(P.current=!0,C.current=se.relatedTarget)},onMouseEnter:()=>T(!0),onMouseMove:()=>T(!0),onMouseLeave:()=>{I||T(!1)},onPointerDown:se=>{se.target instanceof HTMLElement&&se.target.dataset.dismissible==="false"||G(!0)},onPointerUp:()=>G(!1)},_.filter(se=>!se.position&&W===0||se.position===$).map((se,ce)=>{var $e,Ce;return A.createElement(mP,{key:se.id,icons:x,index:ce,toast:se,defaultRichColors:u,duration:($e=p==null?void 0:p.duration)!=null?$e:f,className:p==null?void 0:p.className,descriptionClassName:p==null?void 0:p.descriptionClassName,invert:t,visibleToasts:h,closeButton:(Ce=p==null?void 0:p.closeButton)!=null?Ce:i,interacting:I,position:$,style:p==null?void 0:p.style,unstyled:p==null?void 0:p.unstyled,classNames:p==null?void 0:p.classNames,cancelButtonStyle:p==null?void 0:p.cancelButtonStyle,actionButtonStyle:p==null?void 0:p.actionButtonStyle,removeToast:H,toasts:_.filter(Fe=>Fe.position==se.position),heights:k.filter(Fe=>Fe.position==se.position),setHeights:E,expandByDefault:s,gap:v,loadingIcon:y,expanded:M,pauseWhenPageIsHidden:b,cn:j})}))})):null};const gP=({...e})=>{const{theme:t="system"}=H2();return o.jsx(pP,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})};var vP=fy.useId||(()=>{}),xP=0;function En(e){const[t,r]=m.useState(vP());return Br(()=>{e||r(n=>n??String(xP++))},[e]),e||(t?`radix-${t}`:"")}const yP=["top","right","bottom","left"],bs=Math.min,tr=Math.max,Fc=Math.round,Dl=Math.floor,js=e=>({x:e,y:e}),wP={left:"right",right:"left",bottom:"top",top:"bottom"},bP={start:"end",end:"start"};function wh(e,t,r){return tr(e,bs(t,r))}function In(e,t){return typeof e=="function"?e(t):e}function Ln(e){return e.split("-")[0]}function ki(e){return e.split("-")[1]}function Zm(e){return e==="x"?"y":"x"}function ep(e){return e==="y"?"height":"width"}function _s(e){return["top","bottom"].includes(Ln(e))?"y":"x"}function tp(e){return Zm(_s(e))}function jP(e,t,r){r===void 0&&(r=!1);const n=ki(e),s=tp(e),i=ep(s);let a=s==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(a=zc(a)),[a,zc(a)]}function _P(e){const t=zc(e);return[bh(e),t,bh(t)]}function bh(e){return e.replace(/start|end/g,t=>bP[t])}function NP(e,t,r){const n=["left","right"],s=["right","left"],i=["top","bottom"],a=["bottom","top"];switch(e){case"top":case"bottom":return r?t?s:n:t?n:s;case"left":case"right":return t?i:a;default:return[]}}function SP(e,t,r,n){const s=ki(e);let i=NP(Ln(e),r==="start",n);return s&&(i=i.map(a=>a+"-"+s),t&&(i=i.concat(i.map(bh)))),i}function zc(e){return e.replace(/left|right|bottom|top/g,t=>wP[t])}function kP(e){return{top:0,right:0,bottom:0,left:0,...e}}function mb(e){return typeof e!="number"?kP(e):{top:e,right:e,bottom:e,left:e}}function Bc(e){const{x:t,y:r,width:n,height:s}=e;return{width:n,height:s,top:r,left:t,right:t+n,bottom:r+s,x:t,y:r}}function Rv(e,t,r){let{reference:n,floating:s}=e;const i=_s(t),a=tp(t),l=ep(a),c=Ln(t),u=i==="y",f=n.x+n.width/2-s.width/2,d=n.y+n.height/2-s.height/2,h=n[l]/2-s[l]/2;let p;switch(c){case"top":p={x:f,y:n.y-s.height};break;case"bottom":p={x:f,y:n.y+n.height};break;case"right":p={x:n.x+n.width,y:d};break;case"left":p={x:n.x-s.width,y:d};break;default:p={x:n.x,y:n.y}}switch(ki(t)){case"start":p[a]-=h*(r&&u?-1:1);break;case"end":p[a]+=h*(r&&u?-1:1);break}return p}const CP=async(e,t,r)=>{const{placement:n="bottom",strategy:s="absolute",middleware:i=[],platform:a}=r,l=i.filter(Boolean),c=await(a.isRTL==null?void 0:a.isRTL(t));let u=await a.getElementRects({reference:e,floating:t,strategy:s}),{x:f,y:d}=Rv(u,n,c),h=n,p={},g=0;for(let v=0;v<l.length;v++){const{name:y,fn:x}=l[v],{x:w,y:b,data:j,reset:_}=await x({x:f,y:d,initialPlacement:n,placement:h,strategy:s,middlewareData:p,rects:u,platform:a,elements:{reference:e,floating:t}});f=w??f,d=b??d,p={...p,[y]:{...p[y],...j}},_&&g<=50&&(g++,typeof _=="object"&&(_.placement&&(h=_.placement),_.rects&&(u=_.rects===!0?await a.getElementRects({reference:e,floating:t,strategy:s}):_.rects),{x:f,y:d}=Rv(u,h,c)),v=-1)}return{x:f,y:d,placement:h,strategy:s,middlewareData:p}};async function La(e,t){var r;t===void 0&&(t={});const{x:n,y:s,platform:i,rects:a,elements:l,strategy:c}=e,{boundary:u="clippingAncestors",rootBoundary:f="viewport",elementContext:d="floating",altBoundary:h=!1,padding:p=0}=In(t,e),g=mb(p),y=l[h?d==="floating"?"reference":"floating":d],x=Bc(await i.getClippingRect({element:(r=await(i.isElement==null?void 0:i.isElement(y)))==null||r?y:y.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:u,rootBoundary:f,strategy:c})),w=d==="floating"?{x:n,y:s,width:a.floating.width,height:a.floating.height}:a.reference,b=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),j=await(i.isElement==null?void 0:i.isElement(b))?await(i.getScale==null?void 0:i.getScale(b))||{x:1,y:1}:{x:1,y:1},_=Bc(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:w,offsetParent:b,strategy:c}):w);return{top:(x.top-_.top+g.top)/j.y,bottom:(_.bottom-x.bottom+g.bottom)/j.y,left:(x.left-_.left+g.left)/j.x,right:(_.right-x.right+g.right)/j.x}}const EP=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:n,placement:s,rects:i,platform:a,elements:l,middlewareData:c}=t,{element:u,padding:f=0}=In(e,t)||{};if(u==null)return{};const d=mb(f),h={x:r,y:n},p=tp(s),g=ep(p),v=await a.getDimensions(u),y=p==="y",x=y?"top":"left",w=y?"bottom":"right",b=y?"clientHeight":"clientWidth",j=i.reference[g]+i.reference[p]-h[p]-i.floating[g],_=h[p]-i.reference[p],N=await(a.getOffsetParent==null?void 0:a.getOffsetParent(u));let S=N?N[b]:0;(!S||!await(a.isElement==null?void 0:a.isElement(N)))&&(S=l.floating[b]||i.floating[g]);const k=j/2-_/2,E=S/2-v[g]/2-1,M=bs(d[x],E),T=bs(d[w],E),I=M,G=S-v[g]-T,F=S/2-v[g]/2+k,O=wh(I,F,G),L=!c.arrow&&ki(s)!=null&&F!==O&&i.reference[g]/2-(F<I?M:T)-v[g]/2<0,z=L?F<I?F-I:F-G:0;return{[p]:h[p]+z,data:{[p]:O,centerOffset:F-O-z,...L&&{alignmentOffset:z}},reset:L}}}),PP=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,n;const{placement:s,middlewareData:i,rects:a,initialPlacement:l,platform:c,elements:u}=t,{mainAxis:f=!0,crossAxis:d=!0,fallbackPlacements:h,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:v=!0,...y}=In(e,t);if((r=i.arrow)!=null&&r.alignmentOffset)return{};const x=Ln(s),w=_s(l),b=Ln(l)===l,j=await(c.isRTL==null?void 0:c.isRTL(u.floating)),_=h||(b||!v?[zc(l)]:_P(l)),N=g!=="none";!h&&N&&_.push(...SP(l,v,g,j));const S=[l,..._],k=await La(t,y),E=[];let M=((n=i.flip)==null?void 0:n.overflows)||[];if(f&&E.push(k[x]),d){const F=jP(s,a,j);E.push(k[F[0]],k[F[1]])}if(M=[...M,{placement:s,overflows:E}],!E.every(F=>F<=0)){var T,I;const F=(((T=i.flip)==null?void 0:T.index)||0)+1,O=S[F];if(O)return{data:{index:F,overflows:M},reset:{placement:O}};let L=(I=M.filter(z=>z.overflows[0]<=0).sort((z,C)=>z.overflows[1]-C.overflows[1])[0])==null?void 0:I.placement;if(!L)switch(p){case"bestFit":{var G;const z=(G=M.filter(C=>{if(N){const P=_s(C.placement);return P===w||P==="y"}return!0}).map(C=>[C.placement,C.overflows.filter(P=>P>0).reduce((P,H)=>P+H,0)]).sort((C,P)=>C[1]-P[1])[0])==null?void 0:G[0];z&&(L=z);break}case"initialPlacement":L=l;break}if(s!==L)return{reset:{placement:L}}}return{}}}};function Av(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function Mv(e){return yP.some(t=>e[t]>=0)}const TP=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:r}=t,{strategy:n="referenceHidden",...s}=In(e,t);switch(n){case"referenceHidden":{const i=await La(t,{...s,elementContext:"reference"}),a=Av(i,r.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:Mv(a)}}}case"escaped":{const i=await La(t,{...s,altBoundary:!0}),a=Av(i,r.floating);return{data:{escapedOffsets:a,escaped:Mv(a)}}}default:return{}}}}};async function RP(e,t){const{placement:r,platform:n,elements:s}=e,i=await(n.isRTL==null?void 0:n.isRTL(s.floating)),a=Ln(r),l=ki(r),c=_s(r)==="y",u=["left","top"].includes(a)?-1:1,f=i&&c?-1:1,d=In(t,e);let{mainAxis:h,crossAxis:p,alignmentAxis:g}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return l&&typeof g=="number"&&(p=l==="end"?g*-1:g),c?{x:p*f,y:h*u}:{x:h*u,y:p*f}}const AP=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,n;const{x:s,y:i,placement:a,middlewareData:l}=t,c=await RP(t,e);return a===((r=l.offset)==null?void 0:r.placement)&&(n=l.arrow)!=null&&n.alignmentOffset?{}:{x:s+c.x,y:i+c.y,data:{...c,placement:a}}}}},MP=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:n,placement:s}=t,{mainAxis:i=!0,crossAxis:a=!1,limiter:l={fn:y=>{let{x,y:w}=y;return{x,y:w}}},...c}=In(e,t),u={x:r,y:n},f=await La(t,c),d=_s(Ln(s)),h=Zm(d);let p=u[h],g=u[d];if(i){const y=h==="y"?"top":"left",x=h==="y"?"bottom":"right",w=p+f[y],b=p-f[x];p=wh(w,p,b)}if(a){const y=d==="y"?"top":"left",x=d==="y"?"bottom":"right",w=g+f[y],b=g-f[x];g=wh(w,g,b)}const v=l.fn({...t,[h]:p,[d]:g});return{...v,data:{x:v.x-r,y:v.y-n,enabled:{[h]:i,[d]:a}}}}}},DP=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:r,y:n,placement:s,rects:i,middlewareData:a}=t,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=In(e,t),f={x:r,y:n},d=_s(s),h=Zm(d);let p=f[h],g=f[d];const v=In(l,t),y=typeof v=="number"?{mainAxis:v,crossAxis:0}:{mainAxis:0,crossAxis:0,...v};if(c){const b=h==="y"?"height":"width",j=i.reference[h]-i.floating[b]+y.mainAxis,_=i.reference[h]+i.reference[b]-y.mainAxis;p<j?p=j:p>_&&(p=_)}if(u){var x,w;const b=h==="y"?"width":"height",j=["top","left"].includes(Ln(s)),_=i.reference[d]-i.floating[b]+(j&&((x=a.offset)==null?void 0:x[d])||0)+(j?0:y.crossAxis),N=i.reference[d]+i.reference[b]+(j?0:((w=a.offset)==null?void 0:w[d])||0)-(j?y.crossAxis:0);g<_?g=_:g>N&&(g=N)}return{[h]:p,[d]:g}}}},OP=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var r,n;const{placement:s,rects:i,platform:a,elements:l}=t,{apply:c=()=>{},...u}=In(e,t),f=await La(t,u),d=Ln(s),h=ki(s),p=_s(s)==="y",{width:g,height:v}=i.floating;let y,x;d==="top"||d==="bottom"?(y=d,x=h===(await(a.isRTL==null?void 0:a.isRTL(l.floating))?"start":"end")?"left":"right"):(x=d,y=h==="end"?"top":"bottom");const w=v-f.top-f.bottom,b=g-f.left-f.right,j=bs(v-f[y],w),_=bs(g-f[x],b),N=!t.middlewareData.shift;let S=j,k=_;if((r=t.middlewareData.shift)!=null&&r.enabled.x&&(k=b),(n=t.middlewareData.shift)!=null&&n.enabled.y&&(S=w),N&&!h){const M=tr(f.left,0),T=tr(f.right,0),I=tr(f.top,0),G=tr(f.bottom,0);p?k=g-2*(M!==0||T!==0?M+T:tr(f.left,f.right)):S=v-2*(I!==0||G!==0?I+G:tr(f.top,f.bottom))}await c({...t,availableWidth:k,availableHeight:S});const E=await a.getDimensions(l.floating);return g!==E.width||v!==E.height?{reset:{rects:!0}}:{}}}};function Eu(){return typeof window<"u"}function Ci(e){return pb(e)?(e.nodeName||"").toLowerCase():"#document"}function ar(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function un(e){var t;return(t=(pb(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function pb(e){return Eu()?e instanceof Node||e instanceof ar(e).Node:!1}function Gr(e){return Eu()?e instanceof Element||e instanceof ar(e).Element:!1}function ln(e){return Eu()?e instanceof HTMLElement||e instanceof ar(e).HTMLElement:!1}function Dv(e){return!Eu()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof ar(e).ShadowRoot}function nl(e){const{overflow:t,overflowX:r,overflowY:n,display:s}=Vr(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!["inline","contents"].includes(s)}function IP(e){return["table","td","th"].includes(Ci(e))}function Pu(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function rp(e){const t=np(),r=Gr(e)?Vr(e):e;return r.transform!=="none"||r.perspective!=="none"||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||["transform","perspective","filter"].some(n=>(r.willChange||"").includes(n))||["paint","layout","strict","content"].some(n=>(r.contain||"").includes(n))}function LP(e){let t=Ns(e);for(;ln(t)&&!pi(t);){if(rp(t))return t;if(Pu(t))return null;t=Ns(t)}return null}function np(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function pi(e){return["html","body","#document"].includes(Ci(e))}function Vr(e){return ar(e).getComputedStyle(e)}function Tu(e){return Gr(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Ns(e){if(Ci(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Dv(e)&&e.host||un(e);return Dv(t)?t.host:t}function gb(e){const t=Ns(e);return pi(t)?e.ownerDocument?e.ownerDocument.body:e.body:ln(t)&&nl(t)?t:gb(t)}function $a(e,t,r){var n;t===void 0&&(t=[]),r===void 0&&(r=!0);const s=gb(e),i=s===((n=e.ownerDocument)==null?void 0:n.body),a=ar(s);if(i){const l=jh(a);return t.concat(a,a.visualViewport||[],nl(s)?s:[],l&&r?$a(l):[])}return t.concat(s,$a(s,[],r))}function jh(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function vb(e){const t=Vr(e);let r=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const s=ln(e),i=s?e.offsetWidth:r,a=s?e.offsetHeight:n,l=Fc(r)!==i||Fc(n)!==a;return l&&(r=i,n=a),{width:r,height:n,$:l}}function sp(e){return Gr(e)?e:e.contextElement}function qo(e){const t=sp(e);if(!ln(t))return js(1);const r=t.getBoundingClientRect(),{width:n,height:s,$:i}=vb(t);let a=(i?Fc(r.width):r.width)/n,l=(i?Fc(r.height):r.height)/s;return(!a||!Number.isFinite(a))&&(a=1),(!l||!Number.isFinite(l))&&(l=1),{x:a,y:l}}const $P=js(0);function xb(e){const t=ar(e);return!np()||!t.visualViewport?$P:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function UP(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==ar(e)?!1:t}function no(e,t,r,n){t===void 0&&(t=!1),r===void 0&&(r=!1);const s=e.getBoundingClientRect(),i=sp(e);let a=js(1);t&&(n?Gr(n)&&(a=qo(n)):a=qo(e));const l=UP(i,r,n)?xb(i):js(0);let c=(s.left+l.x)/a.x,u=(s.top+l.y)/a.y,f=s.width/a.x,d=s.height/a.y;if(i){const h=ar(i),p=n&&Gr(n)?ar(n):n;let g=h,v=jh(g);for(;v&&n&&p!==g;){const y=qo(v),x=v.getBoundingClientRect(),w=Vr(v),b=x.left+(v.clientLeft+parseFloat(w.paddingLeft))*y.x,j=x.top+(v.clientTop+parseFloat(w.paddingTop))*y.y;c*=y.x,u*=y.y,f*=y.x,d*=y.y,c+=b,u+=j,g=ar(v),v=jh(g)}}return Bc({width:f,height:d,x:c,y:u})}function FP(e){let{elements:t,rect:r,offsetParent:n,strategy:s}=e;const i=s==="fixed",a=un(n),l=t?Pu(t.floating):!1;if(n===a||l&&i)return r;let c={scrollLeft:0,scrollTop:0},u=js(1);const f=js(0),d=ln(n);if((d||!d&&!i)&&((Ci(n)!=="body"||nl(a))&&(c=Tu(n)),ln(n))){const h=no(n);u=qo(n),f.x=h.x+n.clientLeft,f.y=h.y+n.clientTop}return{width:r.width*u.x,height:r.height*u.y,x:r.x*u.x-c.scrollLeft*u.x+f.x,y:r.y*u.y-c.scrollTop*u.y+f.y}}function zP(e){return Array.from(e.getClientRects())}function _h(e,t){const r=Tu(e).scrollLeft;return t?t.left+r:no(un(e)).left+r}function BP(e){const t=un(e),r=Tu(e),n=e.ownerDocument.body,s=tr(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),i=tr(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let a=-r.scrollLeft+_h(e);const l=-r.scrollTop;return Vr(n).direction==="rtl"&&(a+=tr(t.clientWidth,n.clientWidth)-s),{width:s,height:i,x:a,y:l}}function GP(e,t){const r=ar(e),n=un(e),s=r.visualViewport;let i=n.clientWidth,a=n.clientHeight,l=0,c=0;if(s){i=s.width,a=s.height;const u=np();(!u||u&&t==="fixed")&&(l=s.offsetLeft,c=s.offsetTop)}return{width:i,height:a,x:l,y:c}}function VP(e,t){const r=no(e,!0,t==="fixed"),n=r.top+e.clientTop,s=r.left+e.clientLeft,i=ln(e)?qo(e):js(1),a=e.clientWidth*i.x,l=e.clientHeight*i.y,c=s*i.x,u=n*i.y;return{width:a,height:l,x:c,y:u}}function Ov(e,t,r){let n;if(t==="viewport")n=GP(e,r);else if(t==="document")n=BP(un(e));else if(Gr(t))n=VP(t,r);else{const s=xb(e);n={...t,x:t.x-s.x,y:t.y-s.y}}return Bc(n)}function yb(e,t){const r=Ns(e);return r===t||!Gr(r)||pi(r)?!1:Vr(r).position==="fixed"||yb(r,t)}function HP(e,t){const r=t.get(e);if(r)return r;let n=$a(e,[],!1).filter(l=>Gr(l)&&Ci(l)!=="body"),s=null;const i=Vr(e).position==="fixed";let a=i?Ns(e):e;for(;Gr(a)&&!pi(a);){const l=Vr(a),c=rp(a);!c&&l.position==="fixed"&&(s=null),(i?!c&&!s:!c&&l.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||nl(a)&&!c&&yb(e,a))?n=n.filter(f=>f!==a):s=l,a=Ns(a)}return t.set(e,n),n}function WP(e){let{element:t,boundary:r,rootBoundary:n,strategy:s}=e;const a=[...r==="clippingAncestors"?Pu(t)?[]:HP(t,this._c):[].concat(r),n],l=a[0],c=a.reduce((u,f)=>{const d=Ov(t,f,s);return u.top=tr(d.top,u.top),u.right=bs(d.right,u.right),u.bottom=bs(d.bottom,u.bottom),u.left=tr(d.left,u.left),u},Ov(t,l,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function qP(e){const{width:t,height:r}=vb(e);return{width:t,height:r}}function KP(e,t,r){const n=ln(t),s=un(t),i=r==="fixed",a=no(e,!0,i,t);let l={scrollLeft:0,scrollTop:0};const c=js(0);if(n||!n&&!i)if((Ci(t)!=="body"||nl(s))&&(l=Tu(t)),n){const p=no(t,!0,i,t);c.x=p.x+t.clientLeft,c.y=p.y+t.clientTop}else s&&(c.x=_h(s));let u=0,f=0;if(s&&!n&&!i){const p=s.getBoundingClientRect();f=p.top+l.scrollTop,u=p.left+l.scrollLeft-_h(s,p)}const d=a.left+l.scrollLeft-c.x-u,h=a.top+l.scrollTop-c.y-f;return{x:d,y:h,width:a.width,height:a.height}}function $d(e){return Vr(e).position==="static"}function Iv(e,t){if(!ln(e)||Vr(e).position==="fixed")return null;if(t)return t(e);let r=e.offsetParent;return un(e)===r&&(r=r.ownerDocument.body),r}function wb(e,t){const r=ar(e);if(Pu(e))return r;if(!ln(e)){let s=Ns(e);for(;s&&!pi(s);){if(Gr(s)&&!$d(s))return s;s=Ns(s)}return r}let n=Iv(e,t);for(;n&&IP(n)&&$d(n);)n=Iv(n,t);return n&&pi(n)&&$d(n)&&!rp(n)?r:n||LP(e)||r}const YP=async function(e){const t=this.getOffsetParent||wb,r=this.getDimensions,n=await r(e.floating);return{reference:KP(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function QP(e){return Vr(e).direction==="rtl"}const XP={convertOffsetParentRelativeRectToViewportRelativeRect:FP,getDocumentElement:un,getClippingRect:WP,getOffsetParent:wb,getElementRects:YP,getClientRects:zP,getDimensions:qP,getScale:qo,isElement:Gr,isRTL:QP};function JP(e,t){let r=null,n;const s=un(e);function i(){var l;clearTimeout(n),(l=r)==null||l.disconnect(),r=null}function a(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),i();const{left:u,top:f,width:d,height:h}=e.getBoundingClientRect();if(l||t(),!d||!h)return;const p=Dl(f),g=Dl(s.clientWidth-(u+d)),v=Dl(s.clientHeight-(f+h)),y=Dl(u),w={rootMargin:-p+"px "+-g+"px "+-v+"px "+-y+"px",threshold:tr(0,bs(1,c))||1};let b=!0;function j(_){const N=_[0].intersectionRatio;if(N!==c){if(!b)return a();N?a(!1,N):n=setTimeout(()=>{a(!1,1e-7)},1e3)}b=!1}try{r=new IntersectionObserver(j,{...w,root:s.ownerDocument})}catch{r=new IntersectionObserver(j,w)}r.observe(e)}return a(!0),i}function ZP(e,t,r,n){n===void 0&&(n={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=n,u=sp(e),f=s||i?[...u?$a(u):[],...$a(t)]:[];f.forEach(x=>{s&&x.addEventListener("scroll",r,{passive:!0}),i&&x.addEventListener("resize",r)});const d=u&&l?JP(u,r):null;let h=-1,p=null;a&&(p=new ResizeObserver(x=>{let[w]=x;w&&w.target===u&&p&&(p.unobserve(t),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var b;(b=p)==null||b.observe(t)})),r()}),u&&!c&&p.observe(u),p.observe(t));let g,v=c?no(e):null;c&&y();function y(){const x=no(e);v&&(x.x!==v.x||x.y!==v.y||x.width!==v.width||x.height!==v.height)&&r(),v=x,g=requestAnimationFrame(y)}return r(),()=>{var x;f.forEach(w=>{s&&w.removeEventListener("scroll",r),i&&w.removeEventListener("resize",r)}),d==null||d(),(x=p)==null||x.disconnect(),p=null,c&&cancelAnimationFrame(g)}}const eT=AP,tT=MP,rT=PP,nT=OP,sT=TP,Lv=EP,oT=DP,iT=(e,t,r)=>{const n=new Map,s={platform:XP,...r},i={...s.platform,_c:n};return CP(e,t,{...s,platform:i})};var lc=typeof document<"u"?m.useLayoutEffect:m.useEffect;function Gc(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,n,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(n=r;n--!==0;)if(!Gc(e[n],t[n]))return!1;return!0}if(s=Object.keys(e),r=s.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(t,s[n]))return!1;for(n=r;n--!==0;){const i=s[n];if(!(i==="_owner"&&e.$$typeof)&&!Gc(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function bb(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function $v(e,t){const r=bb(e);return Math.round(t*r)/r}function Ud(e){const t=m.useRef(e);return lc(()=>{t.current=e}),t}function aT(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:n=[],platform:s,elements:{reference:i,floating:a}={},transform:l=!0,whileElementsMounted:c,open:u}=e,[f,d]=m.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[h,p]=m.useState(n);Gc(h,n)||p(n);const[g,v]=m.useState(null),[y,x]=m.useState(null),w=m.useCallback(C=>{C!==N.current&&(N.current=C,v(C))},[]),b=m.useCallback(C=>{C!==S.current&&(S.current=C,x(C))},[]),j=i||g,_=a||y,N=m.useRef(null),S=m.useRef(null),k=m.useRef(f),E=c!=null,M=Ud(c),T=Ud(s),I=Ud(u),G=m.useCallback(()=>{if(!N.current||!S.current)return;const C={placement:t,strategy:r,middleware:h};T.current&&(C.platform=T.current),iT(N.current,S.current,C).then(P=>{const H={...P,isPositioned:I.current!==!1};F.current&&!Gc(k.current,H)&&(k.current=H,Za.flushSync(()=>{d(H)}))})},[h,t,r,T,I]);lc(()=>{u===!1&&k.current.isPositioned&&(k.current.isPositioned=!1,d(C=>({...C,isPositioned:!1})))},[u]);const F=m.useRef(!1);lc(()=>(F.current=!0,()=>{F.current=!1}),[]),lc(()=>{if(j&&(N.current=j),_&&(S.current=_),j&&_){if(M.current)return M.current(j,_,G);G()}},[j,_,G,M,E]);const O=m.useMemo(()=>({reference:N,floating:S,setReference:w,setFloating:b}),[w,b]),L=m.useMemo(()=>({reference:j,floating:_}),[j,_]),z=m.useMemo(()=>{const C={position:r,left:0,top:0};if(!L.floating)return C;const P=$v(L.floating,f.x),H=$v(L.floating,f.y);return l?{...C,transform:"translate("+P+"px, "+H+"px)",...bb(L.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:P,top:H}},[r,l,L.floating,f.x,f.y]);return m.useMemo(()=>({...f,update:G,refs:O,elements:L,floatingStyles:z}),[f,G,O,L,z])}const lT=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:n,padding:s}=typeof e=="function"?e(r):e;return n&&t(n)?n.current!=null?Lv({element:n.current,padding:s}).fn(r):{}:n?Lv({element:n,padding:s}).fn(r):{}}}},cT=(e,t)=>({...eT(e),options:[e,t]}),uT=(e,t)=>({...tT(e),options:[e,t]}),dT=(e,t)=>({...oT(e),options:[e,t]}),fT=(e,t)=>({...rT(e),options:[e,t]}),hT=(e,t)=>({...nT(e),options:[e,t]}),mT=(e,t)=>({...sT(e),options:[e,t]}),pT=(e,t)=>({...lT(e),options:[e,t]});var gT="Arrow",jb=m.forwardRef((e,t)=>{const{children:r,width:n=10,height:s=5,...i}=e;return o.jsx(ie.svg,{...i,ref:t,width:n,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:o.jsx("polygon",{points:"0,0 30,0 15,10"})})});jb.displayName=gT;var vT=jb;function xT(e,t=[]){let r=[];function n(i,a){const l=m.createContext(a),c=r.length;r=[...r,a];function u(d){const{scope:h,children:p,...g}=d,v=(h==null?void 0:h[e][c])||l,y=m.useMemo(()=>g,Object.values(g));return o.jsx(v.Provider,{value:y,children:p})}function f(d,h){const p=(h==null?void 0:h[e][c])||l,g=m.useContext(p);if(g)return g;if(a!==void 0)return a;throw new Error(`\`${d}\` must be used within \`${i}\``)}return u.displayName=i+"Provider",[u,f]}const s=()=>{const i=r.map(a=>m.createContext(a));return function(l){const c=(l==null?void 0:l[e])||i;return m.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return s.scopeName=e,[n,yT(s,...t)]}function yT(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const a=n.reduce((l,{useScope:c,scopeName:u})=>{const d=c(i)[`__scope${u}`];return{...l,...d}},{});return m.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return r.scopeName=t.scopeName,r}function Ru(e){const[t,r]=m.useState(void 0);return Br(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const n=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let a,l;if("borderBoxSize"in i){const c=i.borderBoxSize,u=Array.isArray(c)?c[0]:c;a=u.inlineSize,l=u.blockSize}else a=e.offsetWidth,l=e.offsetHeight;r({width:a,height:l})});return n.observe(e,{box:"border-box"}),()=>n.unobserve(e)}else r(void 0)},[e]),t}var op="Popper",[_b,Ei]=xT(op),[wT,Nb]=_b(op),Sb=e=>{const{__scopePopper:t,children:r}=e,[n,s]=m.useState(null);return o.jsx(wT,{scope:t,anchor:n,onAnchorChange:s,children:r})};Sb.displayName=op;var kb="PopperAnchor",Cb=m.forwardRef((e,t)=>{const{__scopePopper:r,virtualRef:n,...s}=e,i=Nb(kb,r),a=m.useRef(null),l=je(t,a);return m.useEffect(()=>{i.onAnchorChange((n==null?void 0:n.current)||a.current)}),n?null:o.jsx(ie.div,{...s,ref:l})});Cb.displayName=kb;var ip="PopperContent",[bT,jT]=_b(ip),Eb=m.forwardRef((e,t)=>{var ce,$e,Ce,Fe,Ke,Ut;const{__scopePopper:r,side:n="bottom",sideOffset:s=0,align:i="center",alignOffset:a=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:f=0,sticky:d="partial",hideWhenDetached:h=!1,updatePositionStrategy:p="optimized",onPlaced:g,...v}=e,y=Nb(ip,r),[x,w]=m.useState(null),b=je(t,ne=>w(ne)),[j,_]=m.useState(null),N=Ru(j),S=(N==null?void 0:N.width)??0,k=(N==null?void 0:N.height)??0,E=n+(i!=="center"?"-"+i:""),M=typeof f=="number"?f:{top:0,right:0,bottom:0,left:0,...f},T=Array.isArray(u)?u:[u],I=T.length>0,G={padding:M,boundary:T.filter(NT),altBoundary:I},{refs:F,floatingStyles:O,placement:L,isPositioned:z,middlewareData:C}=aT({strategy:"fixed",placement:E,whileElementsMounted:(...ne)=>ZP(...ne,{animationFrame:p==="always"}),elements:{reference:y.anchor},middleware:[cT({mainAxis:s+k,alignmentAxis:a}),c&&uT({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?dT():void 0,...G}),c&&fT({...G}),hT({...G,apply:({elements:ne,rects:Et,availableWidth:Te,availableHeight:Ne})=>{const{width:xt,height:it}=Et.reference,Se=ne.floating.style;Se.setProperty("--radix-popper-available-width",`${Te}px`),Se.setProperty("--radix-popper-available-height",`${Ne}px`),Se.setProperty("--radix-popper-anchor-width",`${xt}px`),Se.setProperty("--radix-popper-anchor-height",`${it}px`)}}),j&&pT({element:j,padding:l}),ST({arrowWidth:S,arrowHeight:k}),h&&mT({strategy:"referenceHidden",...G})]}),[P,H]=Rb(L),$=Ge(g);Br(()=>{z&&($==null||$())},[z,$]);const W=(ce=C.arrow)==null?void 0:ce.x,X=($e=C.arrow)==null?void 0:$e.y,fe=((Ce=C.arrow)==null?void 0:Ce.centerOffset)!==0,[ye,se]=m.useState();return Br(()=>{x&&se(window.getComputedStyle(x).zIndex)},[x]),o.jsx("div",{ref:F.setFloating,"data-radix-popper-content-wrapper":"",style:{...O,transform:z?O.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ye,"--radix-popper-transform-origin":[(Fe=C.transformOrigin)==null?void 0:Fe.x,(Ke=C.transformOrigin)==null?void 0:Ke.y].join(" "),...((Ut=C.hide)==null?void 0:Ut.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:o.jsx(bT,{scope:r,placedSide:P,onArrowChange:_,arrowX:W,arrowY:X,shouldHideArrow:fe,children:o.jsx(ie.div,{"data-side":P,"data-align":H,...v,ref:b,style:{...v.style,animation:z?void 0:"none"}})})})});Eb.displayName=ip;var Pb="PopperArrow",_T={top:"bottom",right:"left",bottom:"top",left:"right"},Tb=m.forwardRef(function(t,r){const{__scopePopper:n,...s}=t,i=jT(Pb,n),a=_T[i.placedSide];return o.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:o.jsx(vT,{...s,ref:r,style:{...s.style,display:"block"}})})});Tb.displayName=Pb;function NT(e){return e!==null}var ST=e=>({name:"transformOrigin",options:e,fn(t){var y,x,w;const{placement:r,rects:n,middlewareData:s}=t,a=((y=s.arrow)==null?void 0:y.centerOffset)!==0,l=a?0:e.arrowWidth,c=a?0:e.arrowHeight,[u,f]=Rb(r),d={start:"0%",center:"50%",end:"100%"}[f],h=(((x=s.arrow)==null?void 0:x.x)??0)+l/2,p=(((w=s.arrow)==null?void 0:w.y)??0)+c/2;let g="",v="";return u==="bottom"?(g=a?d:`${h}px`,v=`${-c}px`):u==="top"?(g=a?d:`${h}px`,v=`${n.floating.height+c}px`):u==="right"?(g=`${-c}px`,v=a?d:`${p}px`):u==="left"&&(g=`${n.floating.width+c}px`,v=a?d:`${p}px`),{data:{x:g,y:v}}}});function Rb(e){const[t,r="center"]=e.split("-");return[t,r]}var ap=Sb,Au=Cb,lp=Eb,cp=Tb,[Mu,GL]=Nr("Tooltip",[Ei]),Du=Ei(),Ab="TooltipProvider",kT=700,Nh="tooltip.open",[CT,up]=Mu(Ab),Mb=e=>{const{__scopeTooltip:t,delayDuration:r=kT,skipDelayDuration:n=300,disableHoverableContent:s=!1,children:i}=e,[a,l]=m.useState(!0),c=m.useRef(!1),u=m.useRef(0);return m.useEffect(()=>{const f=u.current;return()=>window.clearTimeout(f)},[]),o.jsx(CT,{scope:t,isOpenDelayed:a,delayDuration:r,onOpen:m.useCallback(()=>{window.clearTimeout(u.current),l(!1)},[]),onClose:m.useCallback(()=>{window.clearTimeout(u.current),u.current=window.setTimeout(()=>l(!0),n)},[n]),isPointerInTransitRef:c,onPointerInTransitChange:m.useCallback(f=>{c.current=f},[]),disableHoverableContent:s,children:i})};Mb.displayName=Ab;var Ou="Tooltip",[ET,Iu]=Mu(Ou),Db=e=>{const{__scopeTooltip:t,children:r,open:n,defaultOpen:s=!1,onOpenChange:i,disableHoverableContent:a,delayDuration:l}=e,c=up(Ou,e.__scopeTooltip),u=Du(t),[f,d]=m.useState(null),h=En(),p=m.useRef(0),g=a??c.disableHoverableContent,v=l??c.delayDuration,y=m.useRef(!1),[x=!1,w]=cn({prop:n,defaultProp:s,onChange:S=>{S?(c.onOpen(),document.dispatchEvent(new CustomEvent(Nh))):c.onClose(),i==null||i(S)}}),b=m.useMemo(()=>x?y.current?"delayed-open":"instant-open":"closed",[x]),j=m.useCallback(()=>{window.clearTimeout(p.current),p.current=0,y.current=!1,w(!0)},[w]),_=m.useCallback(()=>{window.clearTimeout(p.current),p.current=0,w(!1)},[w]),N=m.useCallback(()=>{window.clearTimeout(p.current),p.current=window.setTimeout(()=>{y.current=!0,w(!0),p.current=0},v)},[v,w]);return m.useEffect(()=>()=>{p.current&&(window.clearTimeout(p.current),p.current=0)},[]),o.jsx(ap,{...u,children:o.jsx(ET,{scope:t,contentId:h,open:x,stateAttribute:b,trigger:f,onTriggerChange:d,onTriggerEnter:m.useCallback(()=>{c.isOpenDelayed?N():j()},[c.isOpenDelayed,N,j]),onTriggerLeave:m.useCallback(()=>{g?_():(window.clearTimeout(p.current),p.current=0)},[_,g]),onOpen:j,onClose:_,disableHoverableContent:g,children:r})})};Db.displayName=Ou;var Sh="TooltipTrigger",Ob=m.forwardRef((e,t)=>{const{__scopeTooltip:r,...n}=e,s=Iu(Sh,r),i=up(Sh,r),a=Du(r),l=m.useRef(null),c=je(t,l,s.onTriggerChange),u=m.useRef(!1),f=m.useRef(!1),d=m.useCallback(()=>u.current=!1,[]);return m.useEffect(()=>()=>document.removeEventListener("pointerup",d),[d]),o.jsx(Au,{asChild:!0,...a,children:o.jsx(ie.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...n,ref:c,onPointerMove:Y(e.onPointerMove,h=>{h.pointerType!=="touch"&&!f.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),f.current=!0)}),onPointerLeave:Y(e.onPointerLeave,()=>{s.onTriggerLeave(),f.current=!1}),onPointerDown:Y(e.onPointerDown,()=>{u.current=!0,document.addEventListener("pointerup",d,{once:!0})}),onFocus:Y(e.onFocus,()=>{u.current||s.onOpen()}),onBlur:Y(e.onBlur,s.onClose),onClick:Y(e.onClick,s.onClose)})})});Ob.displayName=Sh;var PT="TooltipPortal",[VL,TT]=Mu(PT,{forceMount:void 0}),gi="TooltipContent",Ib=m.forwardRef((e,t)=>{const r=TT(gi,e.__scopeTooltip),{forceMount:n=r.forceMount,side:s="top",...i}=e,a=Iu(gi,e.__scopeTooltip);return o.jsx(ht,{present:n||a.open,children:a.disableHoverableContent?o.jsx(Lb,{side:s,...i,ref:t}):o.jsx(RT,{side:s,...i,ref:t})})}),RT=m.forwardRef((e,t)=>{const r=Iu(gi,e.__scopeTooltip),n=up(gi,e.__scopeTooltip),s=m.useRef(null),i=je(t,s),[a,l]=m.useState(null),{trigger:c,onClose:u}=r,f=s.current,{onPointerInTransitChange:d}=n,h=m.useCallback(()=>{l(null),d(!1)},[d]),p=m.useCallback((g,v)=>{const y=g.currentTarget,x={x:g.clientX,y:g.clientY},w=OT(x,y.getBoundingClientRect()),b=IT(x,w),j=LT(v.getBoundingClientRect()),_=UT([...b,...j]);l(_),d(!0)},[d]);return m.useEffect(()=>()=>h(),[h]),m.useEffect(()=>{if(c&&f){const g=y=>p(y,f),v=y=>p(y,c);return c.addEventListener("pointerleave",g),f.addEventListener("pointerleave",v),()=>{c.removeEventListener("pointerleave",g),f.removeEventListener("pointerleave",v)}}},[c,f,p,h]),m.useEffect(()=>{if(a){const g=v=>{const y=v.target,x={x:v.clientX,y:v.clientY},w=(c==null?void 0:c.contains(y))||(f==null?void 0:f.contains(y)),b=!$T(x,a);w?h():b&&(h(),u())};return document.addEventListener("pointermove",g),()=>document.removeEventListener("pointermove",g)}},[c,f,a,u,h]),o.jsx(Lb,{...e,ref:i})}),[AT,MT]=Mu(Ou,{isInside:!1}),Lb=m.forwardRef((e,t)=>{const{__scopeTooltip:r,children:n,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:a,...l}=e,c=Iu(gi,r),u=Du(r),{onClose:f}=c;return m.useEffect(()=>(document.addEventListener(Nh,f),()=>document.removeEventListener(Nh,f)),[f]),m.useEffect(()=>{if(c.trigger){const d=h=>{const p=h.target;p!=null&&p.contains(c.trigger)&&f()};return window.addEventListener("scroll",d,{capture:!0}),()=>window.removeEventListener("scroll",d,{capture:!0})}},[c.trigger,f]),o.jsx(Ni,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:a,onFocusOutside:d=>d.preventDefault(),onDismiss:f,children:o.jsxs(lp,{"data-state":c.stateAttribute,...u,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[o.jsx(vw,{children:n}),o.jsx(AT,{scope:r,isInside:!0,children:o.jsx(vE,{id:c.contentId,role:"tooltip",children:s||n})})]})})});Ib.displayName=gi;var $b="TooltipArrow",DT=m.forwardRef((e,t)=>{const{__scopeTooltip:r,...n}=e,s=Du(r);return MT($b,r).isInside?null:o.jsx(cp,{...s,...n,ref:t})});DT.displayName=$b;function OT(e,t){const r=Math.abs(t.top-e.y),n=Math.abs(t.bottom-e.y),s=Math.abs(t.right-e.x),i=Math.abs(t.left-e.x);switch(Math.min(r,n,s,i)){case i:return"left";case s:return"right";case r:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function IT(e,t,r=5){const n=[];switch(t){case"top":n.push({x:e.x-r,y:e.y+r},{x:e.x+r,y:e.y+r});break;case"bottom":n.push({x:e.x-r,y:e.y-r},{x:e.x+r,y:e.y-r});break;case"left":n.push({x:e.x+r,y:e.y-r},{x:e.x+r,y:e.y+r});break;case"right":n.push({x:e.x-r,y:e.y-r},{x:e.x-r,y:e.y+r});break}return n}function LT(e){const{top:t,right:r,bottom:n,left:s}=e;return[{x:s,y:t},{x:r,y:t},{x:r,y:n},{x:s,y:n}]}function $T(e,t){const{x:r,y:n}=e;let s=!1;for(let i=0,a=t.length-1;i<t.length;a=i++){const l=t[i].x,c=t[i].y,u=t[a].x,f=t[a].y;c>n!=f>n&&r<(u-l)*(n-c)/(f-c)+l&&(s=!s)}return s}function UT(e){const t=e.slice();return t.sort((r,n)=>r.x<n.x?-1:r.x>n.x?1:r.y<n.y?-1:r.y>n.y?1:0),FT(t)}function FT(e){if(e.length<=1)return e.slice();const t=[];for(let n=0;n<e.length;n++){const s=e[n];for(;t.length>=2;){const i=t[t.length-1],a=t[t.length-2];if((i.x-a.x)*(s.y-a.y)>=(i.y-a.y)*(s.x-a.x))t.pop();else break}t.push(s)}t.pop();const r=[];for(let n=e.length-1;n>=0;n--){const s=e[n];for(;r.length>=2;){const i=r[r.length-1],a=r[r.length-2];if((i.x-a.x)*(s.y-a.y)>=(i.y-a.y)*(s.x-a.x))r.pop();else break}r.push(s)}return r.pop(),t.length===1&&r.length===1&&t[0].x===r[0].x&&t[0].y===r[0].y?t:t.concat(r)}var zT=Mb,BT=Db,GT=Ob,Ub=Ib;const VT=zT,HT=BT,WT=GT,Fb=m.forwardRef(({className:e,sideOffset:t=4,...r},n)=>o.jsx(Ub,{ref:n,sideOffset:t,className:re("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r}));Fb.displayName=Ub.displayName;var Lu=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},$u=typeof window>"u"||"Deno"in globalThis;function Rr(){}function qT(e,t){return typeof e=="function"?e(t):e}function KT(e){return typeof e=="number"&&e>=0&&e!==1/0}function YT(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Uv(e,t){return typeof e=="function"?e(t):e}function QT(e,t){return typeof e=="function"?e(t):e}function Fv(e,t){const{type:r="all",exact:n,fetchStatus:s,predicate:i,queryKey:a,stale:l}=e;if(a){if(n){if(t.queryHash!==dp(a,t.options))return!1}else if(!Fa(t.queryKey,a))return!1}if(r!=="all"){const c=t.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||s&&s!==t.state.fetchStatus||i&&!i(t))}function zv(e,t){const{exact:r,status:n,predicate:s,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(r){if(Ua(t.options.mutationKey)!==Ua(i))return!1}else if(!Fa(t.options.mutationKey,i))return!1}return!(n&&t.state.status!==n||s&&!s(t))}function dp(e,t){return((t==null?void 0:t.queryKeyHashFn)||Ua)(e)}function Ua(e){return JSON.stringify(e,(t,r)=>kh(r)?Object.keys(r).sort().reduce((n,s)=>(n[s]=r[s],n),{}):r)}function Fa(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?!Object.keys(t).some(r=>!Fa(e[r],t[r])):!1}function zb(e,t){if(e===t)return e;const r=Bv(e)&&Bv(t);if(r||kh(e)&&kh(t)){const n=r?e:Object.keys(e),s=n.length,i=r?t:Object.keys(t),a=i.length,l=r?[]:{};let c=0;for(let u=0;u<a;u++){const f=r?u:i[u];(!r&&n.includes(f)||r)&&e[f]===void 0&&t[f]===void 0?(l[f]=void 0,c++):(l[f]=zb(e[f],t[f]),l[f]===e[f]&&e[f]!==void 0&&c++)}return s===a&&c===s?e:l}return t}function Bv(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function kh(e){if(!Gv(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!Gv(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function Gv(e){return Object.prototype.toString.call(e)==="[object Object]"}function XT(e){return new Promise(t=>{setTimeout(t,e)})}function JT(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?zb(e,t):t}function ZT(e,t,r=0){const n=[...e,t];return r&&n.length>r?n.slice(1):n}function eR(e,t,r=0){const n=[t,...e];return r&&n.length>r?n.slice(0,-1):n}var fp=Symbol();function Bb(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===fp?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var Gs,Zn,Xo,qx,tR=(qx=class extends Lu{constructor(){super();Ee(this,Gs);Ee(this,Zn);Ee(this,Xo);ve(this,Xo,t=>{if(!$u&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){U(this,Zn)||this.setEventListener(U(this,Xo))}onUnsubscribe(){var t;this.hasListeners()||((t=U(this,Zn))==null||t.call(this),ve(this,Zn,void 0))}setEventListener(t){var r;ve(this,Xo,t),(r=U(this,Zn))==null||r.call(this),ve(this,Zn,t(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(t){U(this,Gs)!==t&&(ve(this,Gs,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){var t;return typeof U(this,Gs)=="boolean"?U(this,Gs):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Gs=new WeakMap,Zn=new WeakMap,Xo=new WeakMap,qx),Gb=new tR,Jo,es,Zo,Kx,rR=(Kx=class extends Lu{constructor(){super();Ee(this,Jo,!0);Ee(this,es);Ee(this,Zo);ve(this,Zo,t=>{if(!$u&&window.addEventListener){const r=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){U(this,es)||this.setEventListener(U(this,Zo))}onUnsubscribe(){var t;this.hasListeners()||((t=U(this,es))==null||t.call(this),ve(this,es,void 0))}setEventListener(t){var r;ve(this,Zo,t),(r=U(this,es))==null||r.call(this),ve(this,es,t(this.setOnline.bind(this)))}setOnline(t){U(this,Jo)!==t&&(ve(this,Jo,t),this.listeners.forEach(n=>{n(t)}))}isOnline(){return U(this,Jo)}},Jo=new WeakMap,es=new WeakMap,Zo=new WeakMap,Kx),Vc=new rR;function nR(){let e,t;const r=new Promise((s,i)=>{e=s,t=i});r.status="pending",r.catch(()=>{});function n(s){Object.assign(r,s),delete r.resolve,delete r.reject}return r.resolve=s=>{n({status:"fulfilled",value:s}),e(s)},r.reject=s=>{n({status:"rejected",reason:s}),t(s)},r}function sR(e){return Math.min(1e3*2**e,3e4)}function Vb(e){return(e??"online")==="online"?Vc.isOnline():!0}var Hb=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function Fd(e){return e instanceof Hb}function Wb(e){let t=!1,r=0,n=!1,s;const i=nR(),a=v=>{var y;n||(h(new Hb(v)),(y=e.abort)==null||y.call(e))},l=()=>{t=!0},c=()=>{t=!1},u=()=>Gb.isFocused()&&(e.networkMode==="always"||Vc.isOnline())&&e.canRun(),f=()=>Vb(e.networkMode)&&e.canRun(),d=v=>{var y;n||(n=!0,(y=e.onSuccess)==null||y.call(e,v),s==null||s(),i.resolve(v))},h=v=>{var y;n||(n=!0,(y=e.onError)==null||y.call(e,v),s==null||s(),i.reject(v))},p=()=>new Promise(v=>{var y;s=x=>{(n||u())&&v(x)},(y=e.onPause)==null||y.call(e)}).then(()=>{var v;s=void 0,n||(v=e.onContinue)==null||v.call(e)}),g=()=>{if(n)return;let v;const y=r===0?e.initialPromise:void 0;try{v=y??e.fn()}catch(x){v=Promise.reject(x)}Promise.resolve(v).then(d).catch(x=>{var N;if(n)return;const w=e.retry??($u?0:3),b=e.retryDelay??sR,j=typeof b=="function"?b(r,x):b,_=w===!0||typeof w=="number"&&r<w||typeof w=="function"&&w(r,x);if(t||!_){h(x);return}r++,(N=e.onFail)==null||N.call(e,r,x),XT(j).then(()=>u()?void 0:p()).then(()=>{t?h(x):g()})})};return{promise:i,cancel:a,continue:()=>(s==null||s(),i),cancelRetry:l,continueRetry:c,canStart:f,start:()=>(f()?g():p().then(g),i)}}function oR(){let e=[],t=0,r=l=>{l()},n=l=>{l()},s=l=>setTimeout(l,0);const i=l=>{t?e.push(l):s(()=>{r(l)})},a=()=>{const l=e;e=[],l.length&&s(()=>{n(()=>{l.forEach(c=>{r(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||a()}return c},batchCalls:l=>(...c)=>{i(()=>{l(...c)})},schedule:i,setNotifyFunction:l=>{r=l},setBatchNotifyFunction:l=>{n=l},setScheduler:l=>{s=l}}}var Mt=oR(),Vs,Yx,qb=(Yx=class{constructor(){Ee(this,Vs)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),KT(this.gcTime)&&ve(this,Vs,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??($u?1/0:5*60*1e3))}clearGcTimeout(){U(this,Vs)&&(clearTimeout(U(this,Vs)),ve(this,Vs,void 0))}},Vs=new WeakMap,Yx),ei,ti,hr,Nt,Wa,Hs,Ar,xn,Qx,iR=(Qx=class extends qb{constructor(t){super();Ee(this,Ar);Ee(this,ei);Ee(this,ti);Ee(this,hr);Ee(this,Nt);Ee(this,Wa);Ee(this,Hs);ve(this,Hs,!1),ve(this,Wa,t.defaultOptions),this.setOptions(t.options),this.observers=[],ve(this,hr,t.cache),this.queryKey=t.queryKey,this.queryHash=t.queryHash,ve(this,ei,lR(this.options)),this.state=t.state??U(this,ei),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=U(this,Nt))==null?void 0:t.promise}setOptions(t){this.options={...U(this,Wa),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&U(this,hr).remove(this)}setData(t,r){const n=JT(this.state.data,t,this.options);return wt(this,Ar,xn).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(t,r){wt(this,Ar,xn).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var n,s;const r=(n=U(this,Nt))==null?void 0:n.promise;return(s=U(this,Nt))==null||s.cancel(t),r?r.then(Rr).catch(Rr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(U(this,ei))}isActive(){return this.observers.some(t=>QT(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===fp||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(t=0){return this.state.isInvalidated||this.state.data===void 0||!YT(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(n=>n.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=U(this,Nt))==null||r.continue()}onOnline(){var r;const t=this.observers.find(n=>n.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=U(this,Nt))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),U(this,hr).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(U(this,Nt)&&(U(this,Hs)?U(this,Nt).cancel({revert:!0}):U(this,Nt).cancelRetry()),this.scheduleGc()),U(this,hr).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||wt(this,Ar,xn).call(this,{type:"invalidate"})}fetch(t,r){var c,u,f;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(U(this,Nt))return U(this,Nt).continueRetry(),U(this,Nt).promise}if(t&&this.setOptions(t),!this.options.queryFn){const d=this.observers.find(h=>h.options.queryFn);d&&this.setOptions(d.options)}const n=new AbortController,s=d=>{Object.defineProperty(d,"signal",{enumerable:!0,get:()=>(ve(this,Hs,!0),n.signal)})},i=()=>{const d=Bb(this.options,r),h={queryKey:this.queryKey,meta:this.meta};return s(h),ve(this,Hs,!1),this.options.persister?this.options.persister(d,h,this):d(h)},a={fetchOptions:r,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:i};s(a),(c=this.options.behavior)==null||c.onFetch(a,this),ve(this,ti,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=a.fetchOptions)==null?void 0:u.meta))&&wt(this,Ar,xn).call(this,{type:"fetch",meta:(f=a.fetchOptions)==null?void 0:f.meta});const l=d=>{var h,p,g,v;Fd(d)&&d.silent||wt(this,Ar,xn).call(this,{type:"error",error:d}),Fd(d)||((p=(h=U(this,hr).config).onError)==null||p.call(h,d,this),(v=(g=U(this,hr).config).onSettled)==null||v.call(g,this.state.data,d,this)),this.scheduleGc()};return ve(this,Nt,Wb({initialPromise:r==null?void 0:r.initialPromise,fn:a.fetchFn,abort:n.abort.bind(n),onSuccess:d=>{var h,p,g,v;if(d===void 0){l(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(d)}catch(y){l(y);return}(p=(h=U(this,hr).config).onSuccess)==null||p.call(h,d,this),(v=(g=U(this,hr).config).onSettled)==null||v.call(g,d,this.state.error,this),this.scheduleGc()},onError:l,onFail:(d,h)=>{wt(this,Ar,xn).call(this,{type:"failed",failureCount:d,error:h})},onPause:()=>{wt(this,Ar,xn).call(this,{type:"pause"})},onContinue:()=>{wt(this,Ar,xn).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0})),U(this,Nt).start()}},ei=new WeakMap,ti=new WeakMap,hr=new WeakMap,Nt=new WeakMap,Wa=new WeakMap,Hs=new WeakMap,Ar=new WeakSet,xn=function(t){const r=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...aR(n.data,this.options),fetchMeta:t.meta??null};case"success":return{...n,data:t.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=t.error;return Fd(s)&&s.revert&&U(this,ti)?{...U(this,ti),fetchStatus:"idle"}:{...n,error:s,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=r(this.state),Mt.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),U(this,hr).notify({query:this,type:"updated",action:t})})},Qx);function aR(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Vb(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function lR(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,n=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var Zr,Xx,cR=(Xx=class extends Lu{constructor(t={}){super();Ee(this,Zr);this.config=t,ve(this,Zr,new Map)}build(t,r,n){const s=r.queryKey,i=r.queryHash??dp(s,r);let a=this.get(i);return a||(a=new iR({cache:this,queryKey:s,queryHash:i,options:t.defaultQueryOptions(r),state:n,defaultOptions:t.getQueryDefaults(s)}),this.add(a)),a}add(t){U(this,Zr).has(t.queryHash)||(U(this,Zr).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const r=U(this,Zr).get(t.queryHash);r&&(t.destroy(),r===t&&U(this,Zr).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Mt.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return U(this,Zr).get(t)}getAll(){return[...U(this,Zr).values()]}find(t){const r={exact:!0,...t};return this.getAll().find(n=>Fv(r,n))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(n=>Fv(t,n)):r}notify(t){Mt.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){Mt.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Mt.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Zr=new WeakMap,Xx),en,Tt,Ws,tn,Vn,Jx,uR=(Jx=class extends qb{constructor(t){super();Ee(this,tn);Ee(this,en);Ee(this,Tt);Ee(this,Ws);this.mutationId=t.mutationId,ve(this,Tt,t.mutationCache),ve(this,en,[]),this.state=t.state||dR(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){U(this,en).includes(t)||(U(this,en).push(t),this.clearGcTimeout(),U(this,Tt).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){ve(this,en,U(this,en).filter(r=>r!==t)),this.scheduleGc(),U(this,Tt).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){U(this,en).length||(this.state.status==="pending"?this.scheduleGc():U(this,Tt).remove(this))}continue(){var t;return((t=U(this,Ws))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var s,i,a,l,c,u,f,d,h,p,g,v,y,x,w,b,j,_,N,S;ve(this,Ws,Wb({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(k,E)=>{wt(this,tn,Vn).call(this,{type:"failed",failureCount:k,error:E})},onPause:()=>{wt(this,tn,Vn).call(this,{type:"pause"})},onContinue:()=>{wt(this,tn,Vn).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>U(this,Tt).canRun(this)}));const r=this.state.status==="pending",n=!U(this,Ws).canStart();try{if(!r){wt(this,tn,Vn).call(this,{type:"pending",variables:t,isPaused:n}),await((i=(s=U(this,Tt).config).onMutate)==null?void 0:i.call(s,t,this));const E=await((l=(a=this.options).onMutate)==null?void 0:l.call(a,t));E!==this.state.context&&wt(this,tn,Vn).call(this,{type:"pending",context:E,variables:t,isPaused:n})}const k=await U(this,Ws).start();return await((u=(c=U(this,Tt).config).onSuccess)==null?void 0:u.call(c,k,t,this.state.context,this)),await((d=(f=this.options).onSuccess)==null?void 0:d.call(f,k,t,this.state.context)),await((p=(h=U(this,Tt).config).onSettled)==null?void 0:p.call(h,k,null,this.state.variables,this.state.context,this)),await((v=(g=this.options).onSettled)==null?void 0:v.call(g,k,null,t,this.state.context)),wt(this,tn,Vn).call(this,{type:"success",data:k}),k}catch(k){try{throw await((x=(y=U(this,Tt).config).onError)==null?void 0:x.call(y,k,t,this.state.context,this)),await((b=(w=this.options).onError)==null?void 0:b.call(w,k,t,this.state.context)),await((_=(j=U(this,Tt).config).onSettled)==null?void 0:_.call(j,void 0,k,this.state.variables,this.state.context,this)),await((S=(N=this.options).onSettled)==null?void 0:S.call(N,void 0,k,t,this.state.context)),k}finally{wt(this,tn,Vn).call(this,{type:"error",error:k})}}finally{U(this,Tt).runNext(this)}}},en=new WeakMap,Tt=new WeakMap,Ws=new WeakMap,tn=new WeakSet,Vn=function(t){const r=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),Mt.batch(()=>{U(this,en).forEach(n=>{n.onMutationUpdate(t)}),U(this,Tt).notify({mutation:this,type:"updated",action:t})})},Jx);function dR(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Jt,qa,Zx,fR=(Zx=class extends Lu{constructor(t={}){super();Ee(this,Jt);Ee(this,qa);this.config=t,ve(this,Jt,new Map),ve(this,qa,Date.now())}build(t,r,n){const s=new uR({mutationCache:this,mutationId:++hl(this,qa)._,options:t.defaultMutationOptions(r),state:n});return this.add(s),s}add(t){const r=Ol(t),n=U(this,Jt).get(r)??[];n.push(t),U(this,Jt).set(r,n),this.notify({type:"added",mutation:t})}remove(t){var n;const r=Ol(t);if(U(this,Jt).has(r)){const s=(n=U(this,Jt).get(r))==null?void 0:n.filter(i=>i!==t);s&&(s.length===0?U(this,Jt).delete(r):U(this,Jt).set(r,s))}this.notify({type:"removed",mutation:t})}canRun(t){var n;const r=(n=U(this,Jt).get(Ol(t)))==null?void 0:n.find(s=>s.state.status==="pending");return!r||r===t}runNext(t){var n;const r=(n=U(this,Jt).get(Ol(t)))==null?void 0:n.find(s=>s!==t&&s.state.isPaused);return(r==null?void 0:r.continue())??Promise.resolve()}clear(){Mt.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}getAll(){return[...U(this,Jt).values()].flat()}find(t){const r={exact:!0,...t};return this.getAll().find(n=>zv(r,n))}findAll(t={}){return this.getAll().filter(r=>zv(t,r))}notify(t){Mt.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return Mt.batch(()=>Promise.all(t.map(r=>r.continue().catch(Rr))))}},Jt=new WeakMap,qa=new WeakMap,Zx);function Ol(e){var t;return((t=e.options.scope)==null?void 0:t.id)??String(e.mutationId)}function Vv(e){return{onFetch:(t,r)=>{var f,d,h,p,g;const n=t.options,s=(h=(d=(f=t.fetchOptions)==null?void 0:f.meta)==null?void 0:d.fetchMore)==null?void 0:h.direction,i=((p=t.state.data)==null?void 0:p.pages)||[],a=((g=t.state.data)==null?void 0:g.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const u=async()=>{let v=!1;const y=b=>{Object.defineProperty(b,"signal",{enumerable:!0,get:()=>(t.signal.aborted?v=!0:t.signal.addEventListener("abort",()=>{v=!0}),t.signal)})},x=Bb(t.options,t.fetchOptions),w=async(b,j,_)=>{if(v)return Promise.reject();if(j==null&&b.pages.length)return Promise.resolve(b);const N={queryKey:t.queryKey,pageParam:j,direction:_?"backward":"forward",meta:t.options.meta};y(N);const S=await x(N),{maxPages:k}=t.options,E=_?eR:ZT;return{pages:E(b.pages,S,k),pageParams:E(b.pageParams,j,k)}};if(s&&i.length){const b=s==="backward",j=b?hR:Hv,_={pages:i,pageParams:a},N=j(n,_);l=await w(_,N,b)}else{const b=e??i.length;do{const j=c===0?a[0]??n.initialPageParam:Hv(n,l);if(c>0&&j==null)break;l=await w(l,j),c++}while(c<b)}return l};t.options.persister?t.fetchFn=()=>{var v,y;return(y=(v=t.options).persister)==null?void 0:y.call(v,u,{queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r)}:t.fetchFn=u}}}function Hv(e,{pages:t,pageParams:r}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,r[n],r):void 0}function hR(e,{pages:t,pageParams:r}){var n;return t.length>0?(n=e.getPreviousPageParam)==null?void 0:n.call(e,t[0],t,r[0],r):void 0}var We,ts,rs,ri,ni,ns,si,oi,ey,mR=(ey=class{constructor(e={}){Ee(this,We);Ee(this,ts);Ee(this,rs);Ee(this,ri);Ee(this,ni);Ee(this,ns);Ee(this,si);Ee(this,oi);ve(this,We,e.queryCache||new cR),ve(this,ts,e.mutationCache||new fR),ve(this,rs,e.defaultOptions||{}),ve(this,ri,new Map),ve(this,ni,new Map),ve(this,ns,0)}mount(){hl(this,ns)._++,U(this,ns)===1&&(ve(this,si,Gb.subscribe(async e=>{e&&(await this.resumePausedMutations(),U(this,We).onFocus())})),ve(this,oi,Vc.subscribe(async e=>{e&&(await this.resumePausedMutations(),U(this,We).onOnline())})))}unmount(){var e,t;hl(this,ns)._--,U(this,ns)===0&&((e=U(this,si))==null||e.call(this),ve(this,si,void 0),(t=U(this,oi))==null||t.call(this),ve(this,oi,void 0))}isFetching(e){return U(this,We).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return U(this,ts).findAll({...e,status:"pending"}).length}getQueryData(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=U(this,We).get(t.queryHash))==null?void 0:r.state.data}ensureQueryData(e){const t=this.getQueryData(e.queryKey);if(t===void 0)return this.fetchQuery(e);{const r=this.defaultQueryOptions(e),n=U(this,We).build(this,r);return e.revalidateIfStale&&n.isStaleByTime(Uv(r.staleTime,n))&&this.prefetchQuery(r),Promise.resolve(t)}}getQueriesData(e){return U(this,We).findAll(e).map(({queryKey:t,state:r})=>{const n=r.data;return[t,n]})}setQueryData(e,t,r){const n=this.defaultQueryOptions({queryKey:e}),s=U(this,We).get(n.queryHash),i=s==null?void 0:s.state.data,a=qT(t,i);if(a!==void 0)return U(this,We).build(this,n).setData(a,{...r,manual:!0})}setQueriesData(e,t,r){return Mt.batch(()=>U(this,We).findAll(e).map(({queryKey:n})=>[n,this.setQueryData(n,t,r)]))}getQueryState(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=U(this,We).get(t.queryHash))==null?void 0:r.state}removeQueries(e){const t=U(this,We);Mt.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=U(this,We),n={type:"active",...e};return Mt.batch(()=>(r.findAll(e).forEach(s=>{s.reset()}),this.refetchQueries(n,t)))}cancelQueries(e={},t={}){const r={revert:!0,...t},n=Mt.batch(()=>U(this,We).findAll(e).map(s=>s.cancel(r)));return Promise.all(n).then(Rr).catch(Rr)}invalidateQueries(e={},t={}){return Mt.batch(()=>{if(U(this,We).findAll(e).forEach(n=>{n.invalidate()}),e.refetchType==="none")return Promise.resolve();const r={...e,type:e.refetchType??e.type??"active"};return this.refetchQueries(r,t)})}refetchQueries(e={},t){const r={...t,cancelRefetch:(t==null?void 0:t.cancelRefetch)??!0},n=Mt.batch(()=>U(this,We).findAll(e).filter(s=>!s.isDisabled()).map(s=>{let i=s.fetch(void 0,r);return r.throwOnError||(i=i.catch(Rr)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(n).then(Rr)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=U(this,We).build(this,t);return r.isStaleByTime(Uv(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Rr).catch(Rr)}fetchInfiniteQuery(e){return e.behavior=Vv(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Rr).catch(Rr)}ensureInfiniteQueryData(e){return e.behavior=Vv(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Vc.isOnline()?U(this,ts).resumePausedMutations():Promise.resolve()}getQueryCache(){return U(this,We)}getMutationCache(){return U(this,ts)}getDefaultOptions(){return U(this,rs)}setDefaultOptions(e){ve(this,rs,e)}setQueryDefaults(e,t){U(this,ri).set(Ua(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...U(this,ri).values()];let r={};return t.forEach(n=>{Fa(e,n.queryKey)&&(r={...r,...n.defaultOptions})}),r}setMutationDefaults(e,t){U(this,ni).set(Ua(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...U(this,ni).values()];let r={};return t.forEach(n=>{Fa(e,n.mutationKey)&&(r={...r,...n.defaultOptions})}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...U(this,rs).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=dp(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.enabled!==!0&&t.queryFn===fp&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...U(this,rs).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){U(this,We).clear(),U(this,ts).clear()}},We=new WeakMap,ts=new WeakMap,rs=new WeakMap,ri=new WeakMap,ni=new WeakMap,ns=new WeakMap,si=new WeakMap,oi=new WeakMap,ey),pR=m.createContext(void 0),gR=({client:e,children:t})=>(m.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),o.jsx(pR.Provider,{value:e,children:t}));/**
 * @remix-run/router v1.20.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function za(){return za=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},za.apply(this,arguments)}var is;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(is||(is={}));const Wv="popstate";function vR(e){e===void 0&&(e={});function t(n,s){let{pathname:i,search:a,hash:l}=n.location;return Ch("",{pathname:i,search:a,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:Yb(s)}return yR(t,r,null,e)}function ot(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Kb(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function xR(){return Math.random().toString(36).substr(2,8)}function qv(e,t){return{usr:e.state,key:e.key,idx:t}}function Ch(e,t,r,n){return r===void 0&&(r=null),za({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Pi(t):t,{state:r,key:t&&t.key||n||xR()})}function Yb(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Pi(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function yR(e,t,r,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:i=!1}=n,a=s.history,l=is.Pop,c=null,u=f();u==null&&(u=0,a.replaceState(za({},a.state,{idx:u}),""));function f(){return(a.state||{idx:null}).idx}function d(){l=is.Pop;let y=f(),x=y==null?null:y-u;u=y,c&&c({action:l,location:v.location,delta:x})}function h(y,x){l=is.Push;let w=Ch(v.location,y,x);u=f()+1;let b=qv(w,u),j=v.createHref(w);try{a.pushState(b,"",j)}catch(_){if(_ instanceof DOMException&&_.name==="DataCloneError")throw _;s.location.assign(j)}i&&c&&c({action:l,location:v.location,delta:1})}function p(y,x){l=is.Replace;let w=Ch(v.location,y,x);u=f();let b=qv(w,u),j=v.createHref(w);a.replaceState(b,"",j),i&&c&&c({action:l,location:v.location,delta:0})}function g(y){let x=s.location.origin!=="null"?s.location.origin:s.location.href,w=typeof y=="string"?y:Yb(y);return w=w.replace(/ $/,"%20"),ot(x,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,x)}let v={get action(){return l},get location(){return e(s,a)},listen(y){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(Wv,d),c=y,()=>{s.removeEventListener(Wv,d),c=null}},createHref(y){return t(s,y)},createURL:g,encodeLocation(y){let x=g(y);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:h,replace:p,go(y){return a.go(y)}};return v}var Kv;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Kv||(Kv={}));function wR(e,t,r){return r===void 0&&(r="/"),bR(e,t,r,!1)}function bR(e,t,r,n){let s=typeof t=="string"?Pi(t):t,i=Jb(s.pathname||"/",r);if(i==null)return null;let a=Qb(e);jR(a);let l=null;for(let c=0;l==null&&c<a.length;++c){let u=MR(i);l=RR(a[c],u,n)}return l}function Qb(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let s=(i,a,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:a,route:i};c.relativePath.startsWith("/")&&(ot(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let u=Xs([n,c.relativePath]),f=r.concat(c);i.children&&i.children.length>0&&(ot(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),Qb(i.children,t,f,u)),!(i.path==null&&!i.index)&&t.push({path:u,score:PR(u,i.index),routesMeta:f})};return e.forEach((i,a)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,a);else for(let c of Xb(i.path))s(i,a,c)}),t}function Xb(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,s=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return s?[i,""]:[i];let a=Xb(n.join("/")),l=[];return l.push(...a.map(c=>c===""?i:[i,c].join("/"))),s&&l.push(...a),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function jR(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:TR(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const _R=/^:[\w-]+$/,NR=3,SR=2,kR=1,CR=10,ER=-2,Yv=e=>e==="*";function PR(e,t){let r=e.split("/"),n=r.length;return r.some(Yv)&&(n+=ER),t&&(n+=SR),r.filter(s=>!Yv(s)).reduce((s,i)=>s+(_R.test(i)?NR:i===""?kR:CR),n)}function TR(e,t){return e.length===t.length&&e.slice(0,-1).every((n,s)=>n===t[s])?e[e.length-1]-t[t.length-1]:0}function RR(e,t,r){let{routesMeta:n}=e,s={},i="/",a=[];for(let l=0;l<n.length;++l){let c=n[l],u=l===n.length-1,f=i==="/"?t:t.slice(i.length)||"/",d=Qv({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},f),h=c.route;if(!d&&u&&r&&!n[n.length-1].route.index&&(d=Qv({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},f)),!d)return null;Object.assign(s,d.params),a.push({params:s,pathname:Xs([i,d.pathname]),pathnameBase:UR(Xs([i,d.pathnameBase])),route:h}),d.pathnameBase!=="/"&&(i=Xs([i,d.pathnameBase]))}return a}function Qv(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=AR(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:n.reduce((u,f,d)=>{let{paramName:h,isOptional:p}=f;if(h==="*"){let v=l[d]||"";a=i.slice(0,i.length-v.length).replace(/(.)\/+$/,"$1")}const g=l[d];return p&&!g?u[h]=void 0:u[h]=(g||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:a,pattern:e}}function AR(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),Kb(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),n]}function MR(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Kb(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Jb(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function DR(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:s=""}=typeof e=="string"?Pi(e):e;return{pathname:r?r.startsWith("/")?r:OR(r,t):t,search:FR(n),hash:zR(s)}}function OR(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function zd(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function IR(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function LR(e,t){let r=IR(e);return t?r.map((n,s)=>s===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function $R(e,t,r,n){n===void 0&&(n=!1);let s;typeof e=="string"?s=Pi(e):(s=za({},e),ot(!s.pathname||!s.pathname.includes("?"),zd("?","pathname","search",s)),ot(!s.pathname||!s.pathname.includes("#"),zd("#","pathname","hash",s)),ot(!s.search||!s.search.includes("#"),zd("#","search","hash",s)));let i=e===""||s.pathname==="",a=i?"/":s.pathname,l;if(a==null)l=r;else{let d=t.length-1;if(!n&&a.startsWith("..")){let h=a.split("/");for(;h[0]==="..";)h.shift(),d-=1;s.pathname=h.join("/")}l=d>=0?t[d]:"/"}let c=DR(s,l),u=a&&a!=="/"&&a.endsWith("/"),f=(i||a===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||f)&&(c.pathname+="/"),c}const Xs=e=>e.join("/").replace(/\/\/+/g,"/"),UR=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),FR=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,zR=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function BR(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Zb=["post","put","patch","delete"];new Set(Zb);const GR=["get",...Zb];new Set(GR);/**
 * React Router v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ba(){return Ba=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ba.apply(this,arguments)}const hp=m.createContext(null),VR=m.createContext(null),Uu=m.createContext(null),Fu=m.createContext(null),Ti=m.createContext({outlet:null,matches:[],isDataRoute:!1}),e1=m.createContext(null);function zu(){return m.useContext(Fu)!=null}function Ri(){return zu()||ot(!1),m.useContext(Fu).location}function t1(e){m.useContext(Uu).static||m.useLayoutEffect(e)}function Ai(){let{isDataRoute:e}=m.useContext(Ti);return e?nA():HR()}function HR(){zu()||ot(!1);let e=m.useContext(hp),{basename:t,future:r,navigator:n}=m.useContext(Uu),{matches:s}=m.useContext(Ti),{pathname:i}=Ri(),a=JSON.stringify(LR(s,r.v7_relativeSplatPath)),l=m.useRef(!1);return t1(()=>{l.current=!0}),m.useCallback(function(u,f){if(f===void 0&&(f={}),!l.current)return;if(typeof u=="number"){n.go(u);return}let d=$R(u,JSON.parse(a),i,f.relative==="path");e==null&&t!=="/"&&(d.pathname=d.pathname==="/"?t:Xs([t,d.pathname])),(f.replace?n.replace:n.push)(d,f.state,f)},[t,n,a,i,e])}function WR(e,t){return qR(e,t)}function qR(e,t,r,n){zu()||ot(!1);let{navigator:s}=m.useContext(Uu),{matches:i}=m.useContext(Ti),a=i[i.length-1],l=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let u=Ri(),f;if(t){var d;let y=typeof t=="string"?Pi(t):t;c==="/"||(d=y.pathname)!=null&&d.startsWith(c)||ot(!1),f=y}else f=u;let h=f.pathname||"/",p=h;if(c!=="/"){let y=c.replace(/^\//,"").split("/");p="/"+h.replace(/^\//,"").split("/").slice(y.length).join("/")}let g=wR(e,{pathname:p}),v=JR(g&&g.map(y=>Object.assign({},y,{params:Object.assign({},l,y.params),pathname:Xs([c,s.encodeLocation?s.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?c:Xs([c,s.encodeLocation?s.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),i,r,n);return t&&v?m.createElement(Fu.Provider,{value:{location:Ba({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:is.Pop}},v):v}function KR(){let e=rA(),t=BR(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return m.createElement(m.Fragment,null,m.createElement("h2",null,"Unexpected Application Error!"),m.createElement("h3",{style:{fontStyle:"italic"}},t),r?m.createElement("pre",{style:s},r):null,null)}const YR=m.createElement(KR,null);class QR extends m.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?m.createElement(Ti.Provider,{value:this.props.routeContext},m.createElement(e1.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function XR(e){let{routeContext:t,match:r,children:n}=e,s=m.useContext(hp);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),m.createElement(Ti.Provider,{value:t},n)}function JR(e,t,r,n){var s;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var i;if(!r)return null;if(r.errors)e=r.matches;else if((i=n)!=null&&i.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let a=e,l=(s=r)==null?void 0:s.errors;if(l!=null){let f=a.findIndex(d=>d.route.id&&(l==null?void 0:l[d.route.id])!==void 0);f>=0||ot(!1),a=a.slice(0,Math.min(a.length,f+1))}let c=!1,u=-1;if(r&&n&&n.v7_partialHydration)for(let f=0;f<a.length;f++){let d=a[f];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(u=f),d.route.id){let{loaderData:h,errors:p}=r,g=d.route.loader&&h[d.route.id]===void 0&&(!p||p[d.route.id]===void 0);if(d.route.lazy||g){c=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}return a.reduceRight((f,d,h)=>{let p,g=!1,v=null,y=null;r&&(p=l&&d.route.id?l[d.route.id]:void 0,v=d.route.errorElement||YR,c&&(u<0&&h===0?(g=!0,y=null):u===h&&(g=!0,y=d.route.hydrateFallbackElement||null)));let x=t.concat(a.slice(0,h+1)),w=()=>{let b;return p?b=v:g?b=y:d.route.Component?b=m.createElement(d.route.Component,null):d.route.element?b=d.route.element:b=f,m.createElement(XR,{match:d,routeContext:{outlet:f,matches:x,isDataRoute:r!=null},children:b})};return r&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?m.createElement(QR,{location:r.location,revalidation:r.revalidation,component:v,error:p,children:w(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):w()},null)}var r1=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(r1||{}),Hc=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Hc||{});function ZR(e){let t=m.useContext(hp);return t||ot(!1),t}function eA(e){let t=m.useContext(VR);return t||ot(!1),t}function tA(e){let t=m.useContext(Ti);return t||ot(!1),t}function n1(e){let t=tA(),r=t.matches[t.matches.length-1];return r.route.id||ot(!1),r.route.id}function rA(){var e;let t=m.useContext(e1),r=eA(Hc.UseRouteError),n=n1(Hc.UseRouteError);return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function nA(){let{router:e}=ZR(r1.UseNavigateStable),t=n1(Hc.UseNavigateStable),r=m.useRef(!1);return t1(()=>{r.current=!0}),m.useCallback(function(s,i){i===void 0&&(i={}),r.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,Ba({fromRouteId:t},i)))},[e,t])}function Xr(e){ot(!1)}function sA(e){let{basename:t="/",children:r=null,location:n,navigationType:s=is.Pop,navigator:i,static:a=!1,future:l}=e;zu()&&ot(!1);let c=t.replace(/^\/*/,"/"),u=m.useMemo(()=>({basename:c,navigator:i,static:a,future:Ba({v7_relativeSplatPath:!1},l)}),[c,l,i,a]);typeof n=="string"&&(n=Pi(n));let{pathname:f="/",search:d="",hash:h="",state:p=null,key:g="default"}=n,v=m.useMemo(()=>{let y=Jb(f,c);return y==null?null:{location:{pathname:y,search:d,hash:h,state:p,key:g},navigationType:s}},[c,f,d,h,p,g,s]);return v==null?null:m.createElement(Uu.Provider,{value:u},m.createElement(Fu.Provider,{children:r,value:v}))}function oA(e){let{children:t,location:r}=e;return WR(Eh(t),r)}new Promise(()=>{});function Eh(e,t){t===void 0&&(t=[]);let r=[];return m.Children.forEach(e,(n,s)=>{if(!m.isValidElement(n))return;let i=[...t,s];if(n.type===m.Fragment){r.push.apply(r,Eh(n.props.children,i));return}n.type!==Xr&&ot(!1),!n.props.index||!n.props.children||ot(!1);let a={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(a.children=Eh(n.props.children,i)),r.push(a)}),r}/**
 * React Router DOM v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ph(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let n=e[r];return t.concat(Array.isArray(n)?n.map(s=>[r,s]):[[r,n]])},[]))}function iA(e,t){let r=Ph(e);return t&&t.forEach((n,s)=>{r.has(s)||t.getAll(s).forEach(i=>{r.append(s,i)})}),r}const aA="6";try{window.__reactRouterVersion=aA}catch{}const lA="startTransition",Xv=fy[lA];function cA(e){let{basename:t,children:r,future:n,window:s}=e,i=m.useRef();i.current==null&&(i.current=vR({window:s,v5Compat:!0}));let a=i.current,[l,c]=m.useState({action:a.action,location:a.location}),{v7_startTransition:u}=n||{},f=m.useCallback(d=>{u&&Xv?Xv(()=>c(d)):c(d)},[c,u]);return m.useLayoutEffect(()=>a.listen(f),[a,f]),m.createElement(sA,{basename:t,children:r,location:l.location,navigationType:l.action,navigator:a,future:n})}var Jv;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Jv||(Jv={}));var Zv;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Zv||(Zv={}));function s1(e){let t=m.useRef(Ph(e)),r=m.useRef(!1),n=Ri(),s=m.useMemo(()=>iA(n.search,r.current?null:t.current),[n.search]),i=Ai(),a=m.useCallback((l,c)=>{const u=Ph(typeof l=="function"?l(s):l);r.current=!0,i("?"+u,c)},[i,s]);return[s,a]}const uA="modulepreload",dA=function(e){return"/"+e},ex={},sl=function(t,r,n){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(r.map(c=>{if(c=dA(c),c in ex)return;ex[c]=!0;const u=c.endsWith(".css"),f=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${f}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":uA,u||(d.as="script"),d.crossOrigin="",d.href=c,l&&d.setAttribute("nonce",l),document.head.appendChild(d),u)return new Promise((h,p)=>{d.addEventListener("load",h),d.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return s.then(a=>{for(const l of a||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})},fA=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>sl(async()=>{const{default:n}=await Promise.resolve().then(()=>Mi);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)};class mp extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class hA extends mp{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class tx extends mp{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class rx extends mp{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Th;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Th||(Th={}));var mA=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function l(f){try{u(n.next(f))}catch(d){a(d)}}function c(f){try{u(n.throw(f))}catch(d){a(d)}}function u(f){f.done?i(f.value):s(f.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};class pA{constructor(t,{headers:r={},customFetch:n,region:s=Th.Any}={}){this.url=t,this.headers=r,this.region=s,this.fetch=fA(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,r={}){var n;return mA(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:a}=r;let l={},{region:c}=r;c||(c=this.region);const u=new URL(`${this.url}/${t}`);c&&c!=="any"&&(l["x-region"]=c,u.searchParams.set("forceFunctionRegion",c));let f;a&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",f=a):typeof a=="string"?(l["Content-Type"]="text/plain",f=a):typeof FormData<"u"&&a instanceof FormData?f=a:(l["Content-Type"]="application/json",f=JSON.stringify(a)));const d=yield this.fetch(u.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),s),body:f}).catch(v=>{throw new hA(v)}),h=d.headers.get("x-relay-error");if(h&&h==="true")throw new tx(d);if(!d.ok)throw new rx(d);let p=((n=d.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),g;return p==="application/json"?g=yield d.json():p==="application/octet-stream"?g=yield d.blob():p==="text/event-stream"?g=d:p==="multipart/form-data"?g=yield d.formData():g=yield d.text(),{data:g,error:null,response:d}}catch(s){return{data:null,error:s,response:s instanceof rx||s instanceof tx?s.context:void 0}}})}}var Vt={},pp={},Bu={},ol={},Gu={},Vu={},gA=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},vi=gA();const vA=vi.fetch,o1=vi.fetch.bind(vi),i1=vi.Headers,xA=vi.Request,yA=vi.Response,Mi=Object.freeze(Object.defineProperty({__proto__:null,Headers:i1,Request:xA,Response:yA,default:o1,fetch:vA},Symbol.toStringTag,{value:"Module"})),wA=vS(Mi);var Hu={};Object.defineProperty(Hu,"__esModule",{value:!0});let bA=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};Hu.default=bA;var a1=br&&br.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Vu,"__esModule",{value:!0});const jA=a1(wA),_A=a1(Hu);let NA=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=jA.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,r){return this.headers=Object.assign({},this.headers),this.headers[t]=r,this}then(t,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const n=this.fetch;let s=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var a,l,c;let u=null,f=null,d=null,h=i.status,p=i.statusText;if(i.ok){if(this.method!=="HEAD"){const x=await i.text();x===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?f=x:f=JSON.parse(x))}const v=(a=this.headers.Prefer)===null||a===void 0?void 0:a.match(/count=(exact|planned|estimated)/),y=(l=i.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");v&&y&&y.length>1&&(d=parseInt(y[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(f)&&(f.length>1?(u={code:"PGRST116",details:`Results contain ${f.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},f=null,d=null,h=406,p="Not Acceptable"):f.length===1?f=f[0]:f=null)}else{const v=await i.text();try{u=JSON.parse(v),Array.isArray(u)&&i.status===404&&(f=[],u=null,h=200,p="OK")}catch{i.status===404&&v===""?(h=204,p="No Content"):u={message:v}}if(u&&this.isMaybeSingle&&(!((c=u==null?void 0:u.details)===null||c===void 0)&&c.includes("0 rows"))&&(u=null,h=200,p="OK"),u&&this.shouldThrowOnError)throw new _A.default(u)}return{error:u,data:f,count:d,status:h,statusText:p}});return this.shouldThrowOnError||(s=s.catch(i=>{var a,l,c;return{error:{message:`${(a=i==null?void 0:i.name)!==null&&a!==void 0?a:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),s.then(t,r)}returns(){return this}overrideTypes(){return this}};Vu.default=NA;var SA=br&&br.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Gu,"__esModule",{value:!0});const kA=SA(Vu);let CA=class extends kA.default{select(t){let r=!1;const n=(t??"*").split("").map(s=>/\s/.test(s)&&!r?"":(s==='"'&&(r=!r),s)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:r=!0,nullsFirst:n,foreignTable:s,referencedTable:i=s}={}){const a=i?`${i}.order`:"order",l=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${l?`${l},`:""}${t}.${r?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:r,referencedTable:n=r}={}){const s=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${t}`),this}range(t,r,{foreignTable:n,referencedTable:s=n}={}){const i=typeof s>"u"?"offset":`${s}.offset`,a=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(a,`${r-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:r=!1,settings:n=!1,buffers:s=!1,wal:i=!1,format:a="text"}={}){var l;const c=[t?"analyze":null,r?"verbose":null,n?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${a}; for="${u}"; options=${c};`,a==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};Gu.default=CA;var EA=br&&br.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ol,"__esModule",{value:!0});const PA=EA(Gu);let TA=class extends PA.default{eq(t,r){return this.url.searchParams.append(t,`eq.${r}`),this}neq(t,r){return this.url.searchParams.append(t,`neq.${r}`),this}gt(t,r){return this.url.searchParams.append(t,`gt.${r}`),this}gte(t,r){return this.url.searchParams.append(t,`gte.${r}`),this}lt(t,r){return this.url.searchParams.append(t,`lt.${r}`),this}lte(t,r){return this.url.searchParams.append(t,`lte.${r}`),this}like(t,r){return this.url.searchParams.append(t,`like.${r}`),this}likeAllOf(t,r){return this.url.searchParams.append(t,`like(all).{${r.join(",")}}`),this}likeAnyOf(t,r){return this.url.searchParams.append(t,`like(any).{${r.join(",")}}`),this}ilike(t,r){return this.url.searchParams.append(t,`ilike.${r}`),this}ilikeAllOf(t,r){return this.url.searchParams.append(t,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(t,r){return this.url.searchParams.append(t,`ilike(any).{${r.join(",")}}`),this}is(t,r){return this.url.searchParams.append(t,`is.${r}`),this}in(t,r){const n=Array.from(new Set(r)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}contains(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cs.{${r.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(r)}`),this}containedBy(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cd.{${r.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(r)}`),this}rangeGt(t,r){return this.url.searchParams.append(t,`sr.${r}`),this}rangeGte(t,r){return this.url.searchParams.append(t,`nxl.${r}`),this}rangeLt(t,r){return this.url.searchParams.append(t,`sl.${r}`),this}rangeLte(t,r){return this.url.searchParams.append(t,`nxr.${r}`),this}rangeAdjacent(t,r){return this.url.searchParams.append(t,`adj.${r}`),this}overlaps(t,r){return typeof r=="string"?this.url.searchParams.append(t,`ov.${r}`):this.url.searchParams.append(t,`ov.{${r.join(",")}}`),this}textSearch(t,r,{config:n,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const a=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${i}fts${a}.${r}`),this}match(t){return Object.entries(t).forEach(([r,n])=>{this.url.searchParams.append(r,`eq.${n}`)}),this}not(t,r,n){return this.url.searchParams.append(t,`not.${r}.${n}`),this}or(t,{foreignTable:r,referencedTable:n=r}={}){const s=n?`${n}.or`:"or";return this.url.searchParams.append(s,`(${t})`),this}filter(t,r,n){return this.url.searchParams.append(t,`${r}.${n}`),this}};ol.default=TA;var RA=br&&br.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Bu,"__esModule",{value:!0});const Ki=RA(ol);let AA=class{constructor(t,{headers:r={},schema:n,fetch:s}){this.url=t,this.headers=r,this.schema=n,this.fetch=s}select(t,{head:r=!1,count:n}={}){const s=r?"HEAD":"GET";let i=!1;const a=(t??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",a),n&&(this.headers.Prefer=`count=${n}`),new Ki.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:r,defaultToNull:n=!0}={}){const s="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),r&&i.push(`count=${r}`),n||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(t)){const a=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(a.length>0){const l=[...new Set(a)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new Ki.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:r,ignoreDuplicates:n=!1,count:s,defaultToNull:i=!0}={}){const a="POST",l=[`resolution=${n?"ignore":"merge"}-duplicates`];if(r!==void 0&&this.url.searchParams.set("on_conflict",r),this.headers.Prefer&&l.push(this.headers.Prefer),s&&l.push(`count=${s}`),i||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(t)){const c=t.reduce((u,f)=>u.concat(Object.keys(f)),[]);if(c.length>0){const u=[...new Set(c)].map(f=>`"${f}"`);this.url.searchParams.set("columns",u.join(","))}}return new Ki.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:r}={}){const n="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),r&&s.push(`count=${r}`),this.headers.Prefer=s.join(","),new Ki.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const r="DELETE",n=[];return t&&n.push(`count=${t}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new Ki.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};Bu.default=AA;var Wu={},qu={};Object.defineProperty(qu,"__esModule",{value:!0});qu.version=void 0;qu.version="0.0.0-automated";Object.defineProperty(Wu,"__esModule",{value:!0});Wu.DEFAULT_HEADERS=void 0;const MA=qu;Wu.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${MA.version}`};var l1=br&&br.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(pp,"__esModule",{value:!0});const DA=l1(Bu),OA=l1(ol),IA=Wu;let LA=class c1{constructor(t,{headers:r={},schema:n,fetch:s}={}){this.url=t,this.headers=Object.assign(Object.assign({},IA.DEFAULT_HEADERS),r),this.schemaName=n,this.fetch=s}from(t){const r=new URL(`${this.url}/${t}`);return new DA.default(r,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new c1(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:n=!1,get:s=!1,count:i}={}){let a;const l=new URL(`${this.url}/rpc/${t}`);let c;n||s?(a=n?"HEAD":"GET",Object.entries(r).filter(([f,d])=>d!==void 0).map(([f,d])=>[f,Array.isArray(d)?`{${d.join(",")}}`:`${d}`]).forEach(([f,d])=>{l.searchParams.append(f,d)})):(a="POST",c=r);const u=Object.assign({},this.headers);return i&&(u.Prefer=`count=${i}`),new OA.default({method:a,url:l,headers:u,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};pp.default=LA;var Di=br&&br.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Vt,"__esModule",{value:!0});Vt.PostgrestError=Vt.PostgrestBuilder=Vt.PostgrestTransformBuilder=Vt.PostgrestFilterBuilder=Vt.PostgrestQueryBuilder=Vt.PostgrestClient=void 0;const u1=Di(pp);Vt.PostgrestClient=u1.default;const d1=Di(Bu);Vt.PostgrestQueryBuilder=d1.default;const f1=Di(ol);Vt.PostgrestFilterBuilder=f1.default;const h1=Di(Gu);Vt.PostgrestTransformBuilder=h1.default;const m1=Di(Vu);Vt.PostgrestBuilder=m1.default;const p1=Di(Hu);Vt.PostgrestError=p1.default;var $A=Vt.default={PostgrestClient:u1.default,PostgrestQueryBuilder:d1.default,PostgrestFilterBuilder:f1.default,PostgrestTransformBuilder:h1.default,PostgrestBuilder:m1.default,PostgrestError:p1.default};const{PostgrestClient:UA,PostgrestQueryBuilder:QL,PostgrestFilterBuilder:XL,PostgrestTransformBuilder:JL,PostgrestBuilder:ZL,PostgrestError:e$}=$A;function FA(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const zA=FA(),BA="2.11.15",GA=`realtime-js/${BA}`,VA="1.0.0",g1=1e4,HA=1e3;var ga;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(ga||(ga={}));var _t;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(_t||(_t={}));var Ir;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Ir||(Ir={}));var Rh;(function(e){e.websocket="websocket"})(Rh||(Rh={}));var $s;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})($s||($s={}));class WA{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,r,n)}_decodeBroadcast(t,r,n){const s=r.getUint8(1),i=r.getUint8(2);let a=this.HEADER_LENGTH+2;const l=n.decode(t.slice(a,a+s));a=a+s;const c=n.decode(t.slice(a,a+i));a=a+i;const u=JSON.parse(n.decode(t.slice(a,t.byteLength)));return{ref:null,topic:l,event:c,payload:u}}}class v1{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ae;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Ae||(Ae={}));const nx=(e,t,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(t).reduce((i,a)=>(i[a]=qA(a,e,t,s),i),{})},qA=(e,t,r,n)=>{const s=t.find(l=>l.name===e),i=s==null?void 0:s.type,a=r[e];return i&&!n.includes(i)?x1(i,a):Ah(a)},x1=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return XA(t,r)}switch(e){case Ae.bool:return KA(t);case Ae.float4:case Ae.float8:case Ae.int2:case Ae.int4:case Ae.int8:case Ae.numeric:case Ae.oid:return YA(t);case Ae.json:case Ae.jsonb:return QA(t);case Ae.timestamp:return JA(t);case Ae.abstime:case Ae.date:case Ae.daterange:case Ae.int4range:case Ae.int8range:case Ae.money:case Ae.reltime:case Ae.text:case Ae.time:case Ae.timestamptz:case Ae.timetz:case Ae.tsrange:case Ae.tstzrange:return Ah(t);default:return Ah(t)}},Ah=e=>e,KA=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},YA=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},QA=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},XA=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let i;const a=e.slice(1,r);try{i=JSON.parse("["+a+"]")}catch{i=a?a.split(","):[]}return i.map(l=>x1(t,l))}return e},JA=e=>typeof e=="string"?e.replace(" ","T"):e,y1=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class Bd{constructor(t,r,n={},s=g1){this.channel=t,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var sx;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(sx||(sx={}));class va{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:i,onLeave:a,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=va.syncState(this.state,s,i,a),this.pendingDiffs.forEach(c=>{this.state=va.syncDiff(this.state,c,i,a)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},s=>{const{onJoin:i,onLeave:a,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=va.syncDiff(this.state,s,i,a),l())}),this.onJoin((s,i,a)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:a})}),this.onLeave((s,i,a)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,s){const i=this.cloneDeep(t),a=this.transformState(r),l={},c={};return this.map(i,(u,f)=>{a[u]||(c[u]=f)}),this.map(a,(u,f)=>{const d=i[u];if(d){const h=f.map(y=>y.presence_ref),p=d.map(y=>y.presence_ref),g=f.filter(y=>p.indexOf(y.presence_ref)<0),v=d.filter(y=>h.indexOf(y.presence_ref)<0);g.length>0&&(l[u]=g),v.length>0&&(c[u]=v)}else l[u]=f}),this.syncDiff(i,{joins:l,leaves:c},n,s)}static syncDiff(t,r,n,s){const{joins:i,leaves:a}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(i,(l,c)=>{var u;const f=(u=t[l])!==null&&u!==void 0?u:[];if(t[l]=this.cloneDeep(c),f.length>0){const d=t[l].map(p=>p.presence_ref),h=f.filter(p=>d.indexOf(p.presence_ref)<0);t[l].unshift(...h)}n(l,f,c)}),this.map(a,(l,c)=>{let u=t[l];if(!u)return;const f=c.map(d=>d.presence_ref);u=u.filter(d=>f.indexOf(d.presence_ref)<0),t[l]=u,s(l,u,c),u.length===0&&delete t[l]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const s=t[n];return"metas"in s?r[n]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=s,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var ox;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(ox||(ox={}));var ix;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(ix||(ix={}));var bn;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(bn||(bn={}));class gp{constructor(t,r={config:{}},n){this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=_t.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Bd(this,Ir.join,this.params,this.timeout),this.rejoinTimer=new v1(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=_t.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=_t.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=_t.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=_t.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ir.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new va(this),this.broadcastEndpointURL=y1(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,r=this.timeout){var n,s;if(this.socket.isConnected()||this.socket.connect(),this.state==_t.closed){const{config:{broadcast:i,presence:a,private:l}}=this.params;this._onError(f=>t==null?void 0:t(bn.CHANNEL_ERROR,f)),this._onClose(()=>t==null?void 0:t(bn.CLOSED));const c={},u={broadcast:i,presence:a,postgres_changes:(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(f=>f.filter))!==null&&s!==void 0?s:[],private:l};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:u},c)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:f})=>{var d;if(this.socket.setAuth(),f===void 0){t==null||t(bn.SUBSCRIBED);return}else{const h=this.bindings.postgres_changes,p=(d=h==null?void 0:h.length)!==null&&d!==void 0?d:0,g=[];for(let v=0;v<p;v++){const y=h[v],{filter:{event:x,schema:w,table:b,filter:j}}=y,_=f&&f[v];if(_&&_.event===x&&_.schema===w&&_.table===b&&_.filter===j)g.push(Object.assign(Object.assign({},y),{id:_.id}));else{this.unsubscribe(),this.state=_t.errored,t==null||t(bn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=g,t&&t(bn.SUBSCRIBED);return}}).receive("error",f=>{this.state=_t.errored,t==null||t(bn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(f).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(bn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this._on(t,r,n)}async send(t,r={}){var n,s;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:a}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:a,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var a,l,c;const u=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(a=this.params)===null||a===void 0?void 0:a.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=_t.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ir.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new Bd(this,Ir.leave,{},t),n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(t,r,n){const s=new AbortController,i=setTimeout(()=>s.abort(),n),a=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(i),a}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Bd(this,t,r,n);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var s,i;const a=t.toLocaleLowerCase(),{close:l,error:c,leave:u,join:f}=Ir;if(n&&[l,c,u,f].indexOf(a)>=0&&n!==this._joinRef())return;let h=this._onMessage(a,r,n);if(r&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(p=>{var g,v,y;return((g=p.filter)===null||g===void 0?void 0:g.event)==="*"||((y=(v=p.filter)===null||v===void 0?void 0:v.event)===null||y===void 0?void 0:y.toLocaleLowerCase())===a}).map(p=>p.callback(h,n)):(i=this.bindings[a])===null||i===void 0||i.filter(p=>{var g,v,y,x,w,b;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in p){const j=p.id,_=(g=p.filter)===null||g===void 0?void 0:g.event;return j&&((v=r.ids)===null||v===void 0?void 0:v.includes(j))&&(_==="*"||(_==null?void 0:_.toLocaleLowerCase())===((y=r.data)===null||y===void 0?void 0:y.type.toLocaleLowerCase()))}else{const j=(w=(x=p==null?void 0:p.filter)===null||x===void 0?void 0:x.event)===null||w===void 0?void 0:w.toLocaleLowerCase();return j==="*"||j===((b=r==null?void 0:r.event)===null||b===void 0?void 0:b.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===a}).map(p=>{if(typeof h=="object"&&"ids"in h){const g=h.data,{schema:v,table:y,commit_timestamp:x,type:w,errors:b}=g;h=Object.assign(Object.assign({},{schema:v,table:y,commit_timestamp:x,eventType:w,new:{},old:{},errors:b}),this._getPayloadRecords(g))}p.callback(h,n)})}_isClosed(){return this.state===_t.closed}_isJoined(){return this.state===_t.joined}_isJoining(){return this.state===_t.joining}_isLeaving(){return this.state===_t.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const s=t.toLocaleLowerCase(),i={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&gp.isEqual(s.filter,r))}),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Ir.close,{},t)}_onError(t){this._on(Ir.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=_t.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=nx(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=nx(t.columns,t.old_record)),r}}const ax=()=>{},ZA=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class eM{constructor(t,r){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=g1,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=ax,this.ref=0,this.logger=ax,this.conn=null,this.sendBuffer=[],this.serializer=new WA,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let a;return i?a=i:typeof fetch>"u"?a=(...l)=>sl(async()=>{const{default:c}=await Promise.resolve().then(()=>Mi);return{default:c}},void 0).then(({default:c})=>c(...l)):a=fetch,(...l)=>a(...l)},this.endPoint=`${t}/${Rh.websocket}`,this.httpEndpoint=y1(t),r!=null&&r.transport?this.transport=r.transport:this.transport=null,r!=null&&r.params&&(this.params=r.params),r!=null&&r.timeout&&(this.timeout=r.timeout),r!=null&&r.logger&&(this.logger=r.logger),(r!=null&&r.logLevel||r!=null&&r.log_level)&&(this.logLevel=r.logLevel||r.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),r!=null&&r.heartbeatIntervalMs&&(this.heartbeatIntervalMs=r.heartbeatIntervalMs);const s=(n=r==null?void 0:r.params)===null||n===void 0?void 0:n.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=r!=null&&r.reconnectAfterMs?r.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=r!=null&&r.encode?r.encode:(i,a)=>a(JSON.stringify(i)),this.decode=r!=null&&r.decode?r.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new v1(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(r==null?void 0:r.fetch),r!=null&&r.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(r==null?void 0:r.worker)||!1,this.workerUrl=r==null?void 0:r.workerUrl}this.accessToken=(r==null?void 0:r.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=zA),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:VA}))}disconnect(t,r){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,r??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(n=>n.teardown()))}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case ga.connecting:return $s.Connecting;case ga.open:return $s.Open;case ga.closing:return $s.Closing;default:return $s.Closed}}isConnected(){return this.connectionState()===$s.Open}channel(t,r={config:{}}){const n=`realtime:${t}`,s=this.getChannels().find(i=>i.topic===n);if(s)return s;{const i=new gp(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:n,payload:s,ref:i}=t,a=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${n} (${i})`,s),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(t=null){let r=t||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const s={access_token:r,version:GA};r&&n.updateJoinPayload(s),n.joinedOnce&&n._isJoined()&&n._push(Ir.access_token,{access_token:r})}))}async sendHeartbeat(){var t;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(t=this.conn)===null||t===void 0||t.close(HA,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_onConnMessage(t){this.decode(t.data,r=>{let{topic:n,event:s,payload:i,ref:a}=r;n==="phoenix"&&s==="phx_reply"&&this.heartbeatCallback(r.payload.status=="ok"?"ok":"error"),a&&a===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${n} ${s} ${a&&"("+a+")"||""}`,i),Array.from(this.channels).filter(l=>l._isMember(n)).forEach(l=>l._trigger(s,i,a)),this.stateChangeCallbacks.message.forEach(l=>l(r))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(t=>t())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(r=>r(t))}_onConnError(t){this.log("transport",`${t}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(r=>r(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(Ir.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${t}${n}${s}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([ZA],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}}class vp extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function lt(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class tM extends vp{constructor(t,r,n){super(t),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Mh extends vp{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var rM=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function l(f){try{u(n.next(f))}catch(d){a(d)}}function c(f){try{u(n.throw(f))}catch(d){a(d)}}function u(f){f.done?i(f.value):s(f.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const w1=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>sl(async()=>{const{default:n}=await Promise.resolve().then(()=>Mi);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},nM=()=>rM(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield sl(()=>Promise.resolve().then(()=>Mi),void 0)).Response:Response}),Dh=e=>{if(Array.isArray(e))return e.map(r=>Dh(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[s]=Dh(n)}),t},sM=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var lo=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function l(f){try{u(n.next(f))}catch(d){a(d)}}function c(f){try{u(n.throw(f))}catch(d){a(d)}}function u(f){f.done?i(f.value):s(f.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const Gd=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),oM=(e,t,r)=>lo(void 0,void 0,void 0,function*(){const n=yield nM();e instanceof n&&!(r!=null&&r.noResolveJson)?e.json().then(s=>{const i=e.status||500,a=(s==null?void 0:s.statusCode)||i+"";t(new tM(Gd(s),i,a))}).catch(s=>{t(new Mh(Gd(s),s))}):t(new Mh(Gd(e),e))}),iM=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!n?s:(sM(n)?(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(n)):s.body=n,Object.assign(Object.assign({},s),r))};function il(e,t,r,n,s,i){return lo(this,void 0,void 0,function*(){return new Promise((a,l)=>{e(r,iM(t,n,s,i)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>a(c)).catch(c=>oM(c,l,n))})})}function Wc(e,t,r,n){return lo(this,void 0,void 0,function*(){return il(e,"GET",t,r,n)})}function jn(e,t,r,n,s){return lo(this,void 0,void 0,function*(){return il(e,"POST",t,n,s,r)})}function Oh(e,t,r,n,s){return lo(this,void 0,void 0,function*(){return il(e,"PUT",t,n,s,r)})}function aM(e,t,r,n){return lo(this,void 0,void 0,function*(){return il(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function b1(e,t,r,n,s){return lo(this,void 0,void 0,function*(){return il(e,"DELETE",t,n,s,r)})}var Bt=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function l(f){try{u(n.next(f))}catch(d){a(d)}}function c(f){try{u(n.throw(f))}catch(d){a(d)}}function u(f){f.done?i(f.value):s(f.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const lM={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},lx={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class cM{constructor(t,r={},n,s){this.url=t,this.headers=r,this.bucketId=n,this.fetch=w1(s)}uploadOrUpdate(t,r,n,s){return Bt(this,void 0,void 0,function*(){try{let i;const a=Object.assign(Object.assign({},lx),s);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(a.upsert)});const c=a.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",a.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.append("cacheControl",a.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=n,l["cache-control"]=`max-age=${a.cacheControl}`,l["content-type"]=a.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),s!=null&&s.headers&&(l=Object.assign(Object.assign({},l),s.headers));const u=this._removeEmptyFolders(r),f=this._getFinalPath(u),d=yield(t=="PUT"?Oh:jn)(this.fetch,`${this.url}/object/${f}`,i,Object.assign({headers:l},a!=null&&a.duplex?{duplex:a.duplex}:{}));return{data:{path:u,id:d.Id,fullPath:d.Key},error:null}}catch(i){if(lt(i))return{data:null,error:i};throw i}})}upload(t,r,n){return Bt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,s){return Bt(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),a=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${a}`);l.searchParams.set("token",r);try{let c;const u=Object.assign({upsert:lx.upsert},s),f=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",u.cacheControl)):(c=n,f["cache-control"]=`max-age=${u.cacheControl}`,f["content-type"]=u.contentType);const d=yield Oh(this.fetch,l.toString(),c,{headers:f});return{data:{path:i,fullPath:d.Key},error:null}}catch(c){if(lt(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,r){return Bt(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const s=Object.assign({},this.headers);r!=null&&r.upsert&&(s["x-upsert"]="true");const i=yield jn(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),a=new URL(this.url+i.url),l=a.searchParams.get("token");if(!l)throw new vp("No token returned by API");return{data:{signedUrl:a.toString(),path:t,token:l},error:null}}catch(n){if(lt(n))return{data:null,error:n};throw n}})}update(t,r,n){return Bt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return Bt(this,void 0,void 0,function*(){try{return{data:yield jn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(lt(s))return{data:null,error:s};throw s}})}copy(t,r,n){return Bt(this,void 0,void 0,function*(){try{return{data:{path:(yield jn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(lt(s))return{data:null,error:s};throw s}})}createSignedUrl(t,r,n){return Bt(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t),i=yield jn(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${a}`)},{data:i,error:null}}catch(s){if(lt(s))return{data:null,error:s};throw s}})}createSignedUrls(t,r,n){return Bt(this,void 0,void 0,function*(){try{const s=yield jn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${i}`):null})),error:null}}catch(s){if(lt(s))return{data:null,error:s};throw s}})}download(t,r){return Bt(this,void 0,void 0,function*(){const s=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),a=i?`?${i}`:"";try{const l=this._getFinalPath(t);return{data:yield(yield Wc(this.fetch,`${this.url}/${s}/${l}${a}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(lt(l))return{data:null,error:l};throw l}})}info(t){return Bt(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield Wc(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:Dh(n),error:null}}catch(n){if(lt(n))return{data:null,error:n};throw n}})}exists(t){return Bt(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield aM(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(lt(n)&&n instanceof Mh){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),s=[],i=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&s.push(i);const l=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&s.push(c);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${u}`)}}}remove(t){return Bt(this,void 0,void 0,function*(){try{return{data:yield b1(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(lt(r))return{data:null,error:r};throw r}})}list(t,r,n){return Bt(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},lM),r),{prefix:t||""});return{data:yield jn(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(lt(s))return{data:null,error:s};throw s}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const uM="2.10.4",dM={"X-Client-Info":`storage-js/${uM}`};var xo=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function l(f){try{u(n.next(f))}catch(d){a(d)}}function c(f){try{u(n.throw(f))}catch(d){a(d)}}function u(f){f.done?i(f.value):s(f.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};class fM{constructor(t,r={},n,s){const i=new URL(t);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href,this.headers=Object.assign(Object.assign({},dM),r),this.fetch=w1(n)}listBuckets(){return xo(this,void 0,void 0,function*(){try{return{data:yield Wc(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(lt(t))return{data:null,error:t};throw t}})}getBucket(t){return xo(this,void 0,void 0,function*(){try{return{data:yield Wc(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(lt(r))return{data:null,error:r};throw r}})}createBucket(t,r={public:!1}){return xo(this,void 0,void 0,function*(){try{return{data:yield jn(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(lt(n))return{data:null,error:n};throw n}})}updateBucket(t,r){return xo(this,void 0,void 0,function*(){try{return{data:yield Oh(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(lt(n))return{data:null,error:n};throw n}})}emptyBucket(t){return xo(this,void 0,void 0,function*(){try{return{data:yield jn(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(lt(r))return{data:null,error:r};throw r}})}deleteBucket(t){return xo(this,void 0,void 0,function*(){try{return{data:yield b1(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(lt(r))return{data:null,error:r};throw r}})}}class hM extends fM{constructor(t,r={},n,s){super(t,r,n,s)}from(t){return new cM(this.url,this.headers,t,this.fetch)}}const mM="2.53.0";let na="";typeof Deno<"u"?na="deno":typeof document<"u"?na="web":typeof navigator<"u"&&navigator.product==="ReactNative"?na="react-native":na="node";const pM={"X-Client-Info":`supabase-js-${na}/${mM}`},gM={headers:pM},vM={schema:"public"},xM={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},yM={};var wM=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function l(f){try{u(n.next(f))}catch(d){a(d)}}function c(f){try{u(n.throw(f))}catch(d){a(d)}}function u(f){f.done?i(f.value):s(f.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const bM=e=>{let t;return e?t=e:typeof fetch>"u"?t=o1:t=fetch,(...r)=>t(...r)},jM=()=>typeof Headers>"u"?i1:Headers,_M=(e,t,r)=>{const n=bM(r),s=jM();return(i,a)=>wM(void 0,void 0,void 0,function*(){var l;const c=(l=yield t())!==null&&l!==void 0?l:e;let u=new s(a==null?void 0:a.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),n(i,Object.assign(Object.assign({},a),{headers:u}))})};var NM=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function l(f){try{u(n.next(f))}catch(d){a(d)}}function c(f){try{u(n.throw(f))}catch(d){a(d)}}function u(f){f.done?i(f.value):s(f.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};function SM(e){return e.endsWith("/")?e:e+"/"}function kM(e,t){var r,n;const{db:s,auth:i,realtime:a,global:l}=e,{db:c,auth:u,realtime:f,global:d}=t,h={db:Object.assign(Object.assign({},c),s),auth:Object.assign(Object.assign({},u),i),realtime:Object.assign(Object.assign({},f),a),storage:{},global:Object.assign(Object.assign(Object.assign({},d),l),{headers:Object.assign(Object.assign({},(r=d==null?void 0:d.headers)!==null&&r!==void 0?r:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>NM(this,void 0,void 0,function*(){return""})};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}const j1="2.71.1",ko=30*1e3,Ih=3,Vd=Ih*ko,CM="http://localhost:9999",EM="supabase.auth.token",PM={"X-Client-Info":`gotrue-js/${j1}`},Lh="X-Supabase-Api-Version",_1={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},TM=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,RM=10*60*1e3;class xp extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function me(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class AM extends xp{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function MM(e){return me(e)&&e.name==="AuthApiError"}class N1 extends xp{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class Es extends xp{constructor(t,r,n,s){super(t,n,s),this.name=r,this.status=n}}class Hn extends Es{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function DM(e){return me(e)&&e.name==="AuthSessionMissingError"}class Il extends Es{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ll extends Es{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class $l extends Es{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function OM(e){return me(e)&&e.name==="AuthImplicitGrantRedirectError"}class cx extends Es{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class $h extends Es{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function Hd(e){return me(e)&&e.name==="AuthRetryableFetchError"}class ux extends Es{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class Uh extends Es{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const qc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),dx=` 	
\r=`.split(""),IM=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<dx.length;t+=1)e[dx[t].charCodeAt(0)]=-2;for(let t=0;t<qc.length;t+=1)e[qc[t].charCodeAt(0)]=t;return e})();function fx(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(qc[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(qc[n]),t.queuedBits-=6}}function S1(e,t,r){const n=IM[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function hx(e){const t=[],r=a=>{t.push(String.fromCodePoint(a))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=a=>{UM(a,n,r)};for(let a=0;a<e.length;a+=1)S1(e.charCodeAt(a),s,i);return t.join("")}function LM(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function $M(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}LM(n,t)}}function UM(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function FM(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)S1(e.charCodeAt(s),r,n);return new Uint8Array(t)}function zM(e){const t=[];return $M(e,r=>t.push(r)),new Uint8Array(t)}function BM(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};return e.forEach(s=>fx(s,r,n)),fx(null,r,n),t.join("")}function GM(e){return Math.round(Date.now()/1e3)+e}function VM(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Pr=()=>typeof window<"u"&&typeof document<"u",As={tested:!1,writable:!1},k1=()=>{if(!Pr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(As.tested)return As.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),As.tested=!0,As.writable=!0}catch{As.tested=!0,As.writable=!1}return As.writable};function HM(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,i)=>{t[i]=s})}catch{}return r.searchParams.forEach((n,s)=>{t[s]=n}),t}const C1=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>sl(async()=>{const{default:n}=await Promise.resolve().then(()=>Mi);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},WM=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Co=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},Ms=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Gn=async(e,t)=>{await e.removeItem(t)};class Ku{constructor(){this.promise=new Ku.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}Ku.promiseConstructor=Promise;function Wd(e){const t=e.split(".");if(t.length!==3)throw new Uh("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!TM.test(t[n]))throw new Uh("JWT not in base64url format");return{header:JSON.parse(hx(t[0])),payload:JSON.parse(hx(t[1])),signature:FM(t[2]),raw:{header:t[0],payload:t[1]}}}async function qM(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function KM(e,t){return new Promise((n,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const a=await e(i);if(!t(i,null,a)){n(a);return}}catch(a){if(!t(i,a)){s(a);return}}})()})}function YM(e){return("0"+e.toString(16)).substr(-2)}function QM(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let i=0;i<56;i++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(t),Array.from(t,YM).join("")}async function XM(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function JM(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await XM(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function yo(e,t,r=!1){const n=QM();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await Co(e,`${t}-code-verifier`,s);const i=await JM(n);return[i,n===i?"plain":"s256"]}const ZM=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function e4(e){const t=e.headers.get(Lh);if(!t||!t.match(ZM))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function t4(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function r4(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const n4=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function wo(e){if(!n4.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function qd(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function mx(e){return JSON.parse(JSON.stringify(e))}var s4=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};const Ls=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),o4=[502,503,504];async function px(e){var t;if(!WM(e))throw new $h(Ls(e),0);if(o4.includes(e.status))throw new $h(Ls(e),e.status);let r;try{r=await e.json()}catch(i){throw new N1(Ls(i),i)}let n;const s=e4(e);if(s&&s.getTime()>=_1["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new ux(Ls(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new Hn}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,a)=>i&&typeof a=="string",!0))throw new ux(Ls(r),e.status,r.weak_password.reasons);throw new AM(Ls(r),e.status||500,n)}const i4=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function we(e,t,r,n){var s;const i=Object.assign({},n==null?void 0:n.headers);i[Lh]||(i[Lh]=_1["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const a=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(a.redirect_to=n.redirectTo);const l=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",c=await a4(e,t,r+l,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function a4(e,t,r,n,s,i){const a=i4(t,n,s,i);let l;try{l=await e(r,Object.assign({},a))}catch(c){throw console.error(c),new $h(Ls(c),0)}if(l.ok||await px(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await px(c)}}function yn(e){var t;let r=null;d4(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=GM(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function gx(e){const t=yn(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Jn(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function l4(e){return{data:e,error:null}}function c4(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i}=e,a=s4(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i},c=Object.assign({},a);return{data:{properties:l,user:c},error:null}}function u4(e){return e}function d4(e){return e.access_token&&e.refresh_token&&e.expires_in}const Kd=["global","local","others"];var f4=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};class h4{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=C1(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,r=Kd[0]){if(Kd.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Kd.join(", ")}`);try{return await we(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(me(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await we(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Jn})}catch(n){if(me(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=f4(t,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await we(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:c4,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(me(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await we(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Jn})}catch(r){if(me(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,s,i,a,l,c;try{const u={nextPage:null,lastPage:0,total:0},f=await we(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:u4});if(f.error)throw f.error;const d=await f.json(),h=(a=f.headers.get("x-total-count"))!==null&&a!==void 0?a:0,p=(c=(l=f.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return p.length>0&&(p.forEach(g=>{const v=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(g.split(";")[1].split("=")[1]);u[`${y}Page`]=v}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},d),u),error:null}}catch(u){if(me(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){wo(t);try{return await we(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Jn})}catch(r){if(me(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){wo(t);try{return await we(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:Jn})}catch(n){if(me(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){wo(t);try{return await we(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:Jn})}catch(n){if(me(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){wo(t.userId);try{const{data:r,error:n}=await we(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(me(r))return{data:null,error:r};throw r}}async _deleteFactor(t){wo(t.userId),wo(t.id);try{return{data:await we(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(me(r))return{data:null,error:r};throw r}}}function vx(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}function m4(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const bo={debug:!!(globalThis&&k1()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class E1 extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class p4 extends E1{}async function g4(e,t,r){bo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),bo.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){bo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await r()}finally{bo.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw bo.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new p4(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(bo.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}m4();const v4={url:CM,storageKey:EM,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:PM,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function xx(e,t,r){return await r()}const jo={};class Ga{constructor(t){var r,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Ga.nextInstanceID,Ga.nextInstanceID+=1,this.instanceID>0&&Pr()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},v4),t);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new h4({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=C1(s.fetch),this.lock=s.lock||xx,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:Pr()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=g4:this.lock=xx,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:k1()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=vx(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=vx(this.memoryStorage)),Pr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var t,r;return(r=(t=jo[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){jo[this.storageKey]=Object.assign(Object.assign({},jo[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=jo[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){jo[this.storageKey]=Object.assign(Object.assign({},jo[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${j1}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=HM(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),Pr()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),OM(i)){const c=(t=i.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:a,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",a,"redirect type",l),await this._saveSession(a),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return me(r)?{error:r}:{error:new N1("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,s;try{const i=await we(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:yn}),{data:a,error:l}=i;if(l||!a)return{data:{user:null,session:null},error:l};const c=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(me(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var r,n,s;try{let i;if("email"in t){const{email:f,password:d,options:h}=t;let p=null,g=null;this.flowType==="pkce"&&([p,g]=await yo(this.storage,this.storageKey)),i=await we(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:f,password:d,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:p,code_challenge_method:g},xform:yn})}else if("phone"in t){const{phone:f,password:d,options:h}=t;i=await we(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:f,password:d,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},channel:(s=h==null?void 0:h.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:yn})}else throw new Ll("You must provide either an email or phone number and a password");const{data:a,error:l}=i;if(l||!a)return{data:{user:null,session:null},error:l};const c=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(me(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:a,options:l}=t;r=await we(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:gx})}else if("phone"in t){const{phone:i,password:a,options:l}=t;r=await we(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:gx})}else throw new Ll("You must provide either an email or phone number and a password");const{data:n,error:s}=r;return s?{data:{user:null,session:null},error:s}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Il}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(me(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,n,s,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;if(r==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(t){var r,n,s,i,a,l,c,u,f,d,h,p;let g,v;if("message"in t)g=t.message,v=t.signature;else{const{chain:y,wallet:x,statement:w,options:b}=t;let j;if(Pr())if(typeof x=="object")j=x;else{const N=window;if("solana"in N&&typeof N.solana=="object"&&("signIn"in N.solana&&typeof N.solana.signIn=="function"||"signMessage"in N.solana&&typeof N.solana.signMessage=="function"))j=N.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(b!=null&&b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");j=x}const _=new URL((r=b==null?void 0:b.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in j&&j.signIn){const N=await j.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},b==null?void 0:b.signInWithSolana),{version:"1",domain:_.host,uri:_.href}),w?{statement:w}:null));let S;if(Array.isArray(N)&&N[0]&&typeof N[0]=="object")S=N[0];else if(N&&typeof N=="object"&&"signedMessage"in N&&"signature"in N)S=N;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in S&&"signature"in S&&(typeof S.signedMessage=="string"||S.signedMessage instanceof Uint8Array)&&S.signature instanceof Uint8Array)g=typeof S.signedMessage=="string"?S.signedMessage:new TextDecoder().decode(S.signedMessage),v=S.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in j)||typeof j.signMessage!="function"||!("publicKey"in j)||typeof j!="object"||!j.publicKey||!("toBase58"in j.publicKey)||typeof j.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");g=[`${_.host} wants you to sign in with your Solana account:`,j.publicKey.toBase58(),...w?["",w,""]:[""],"Version: 1",`URI: ${_.href}`,`Issued At: ${(s=(n=b==null?void 0:b.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=b==null?void 0:b.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${b.signInWithSolana.notBefore}`]:[],...!((a=b==null?void 0:b.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${b.signInWithSolana.expirationTime}`]:[],...!((l=b==null?void 0:b.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${b.signInWithSolana.chainId}`]:[],...!((c=b==null?void 0:b.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${b.signInWithSolana.nonce}`]:[],...!((u=b==null?void 0:b.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${b.signInWithSolana.requestId}`]:[],...!((d=(f=b==null?void 0:b.signInWithSolana)===null||f===void 0?void 0:f.resources)===null||d===void 0)&&d.length?["Resources",...b.signInWithSolana.resources.map(S=>`- ${S}`)]:[]].join(`
`);const N=await j.signMessage(new TextEncoder().encode(g),"utf8");if(!N||!(N instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");v=N}}try{const{data:y,error:x}=await we(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:g,signature:BM(v)},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(p=t.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:yn});if(x)throw x;return!y||!y.session||!y.user?{data:{user:null,session:null},error:new Il}:(y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),{data:Object.assign({},y),error:x})}catch(y){if(me(y))return{data:{user:null,session:null},error:y};throw y}}async _exchangeCodeForSession(t){const r=await Ms(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{const{data:i,error:a}=await we(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:yn});if(await Gn(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Il}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:a})}catch(i){if(me(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:r,provider:n,token:s,access_token:i,nonce:a}=t,l=await we(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:i,nonce:a,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:yn}),{data:c,error:u}=l;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Il}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(r){if(me(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,n,s,i,a;try{if("email"in t){const{email:l,options:c}=t;let u=null,f=null;this.flowType==="pkce"&&([u,f]=await yo(this.storage,this.storageKey));const{error:d}=await we(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:f},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:d}}if("phone"in t){const{phone:l,options:c}=t,{data:u,error:f}=await we(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(a=c==null?void 0:c.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:f}}throw new Ll("You must provide either an email or phone number.")}catch(l){if(me(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var r,n;try{let s,i;"options"in t&&(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:a,error:l}=await we(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:yn});if(l)throw l;if(!a)throw new Error("An error occurred on token verification.");const c=a.session,u=a.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(s){if(me(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(t){var r,n,s;try{let i=null,a=null;return this.flowType==="pkce"&&([i,a]=await yo(this.storage,this.storageKey)),await we(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:a}),headers:this.headers,xform:l4})}catch(i){if(me(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new Hn;const{error:s}=await we(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:s}})}catch(t){if(me(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:s,options:i}=t,{error:a}=await we(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in t){const{phone:n,type:s,options:i}=t,{data:a,error:l}=await we(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:l}}throw new Ll("You must provide either an email or phone number and a type")}catch(r){if(me(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await Ms(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<Vd:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const a=await Ms(this.userStorage,this.storageKey+"-user");a!=null&&a.user?t.user=a.user:t.user=qd()}if(this.storage.isServer&&t.user){let a=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,u,f)=>(!a&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,f))})}return{data:{session:t},error:null}}const{session:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await we(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Jn}):await this._useSession(async r=>{var n,s,i;const{data:a,error:l}=r;if(l)throw l;return!(!((n=a.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Hn}:await we(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=a.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:Jn})})}catch(r){if(me(r))return DM(r)&&(await this._removeSession(),await Gn(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:s,error:i}=n;if(i)throw i;if(!s.session)throw new Hn;const a=s.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await yo(this.storage,this.storageKey));const{data:u,error:f}=await we(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:a.access_token,xform:Jn});if(f)throw f;return a.user=u.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(n){if(me(n))return{data:{user:null},error:n};throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Hn;const r=Date.now()/1e3;let n=r,s=!0,i=null;const{payload:a}=Wd(t.access_token);if(a.exp&&(n=a.exp,s=n<=r),s){const{session:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;i={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(r){if(me(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:a,error:l}=r;if(l)throw l;t=(n=a.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new Hn;const{session:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(me(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!Pr())throw new $l("No browser detected.");if(t.error||t.error_description||t.error_code)throw new $l(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new cx("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new $l("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new cx("No code detected.");const{data:w,error:b}=await this._exchangeCodeForSession(t.code);if(b)throw b;const j=new URL(window.location.href);return j.searchParams.delete("code"),window.history.replaceState(window.history.state,"",j.toString()),{data:{session:w.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:i,refresh_token:a,expires_in:l,expires_at:c,token_type:u}=t;if(!i||!l||!a||!u)throw new $l("No session defined in URL");const f=Math.round(Date.now()/1e3),d=parseInt(l);let h=f+d;c&&(h=parseInt(c));const p=h-f;p*1e3<=ko&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${d}s`);const g=h-d;f-g>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",g,h,f):f-g<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",g,h,f);const{data:v,error:y}=await this._getUser(i);if(y)throw y;const x={provider_token:n,provider_refresh_token:s,access_token:i,expires_in:d,expires_at:h,refresh_token:a,token_type:u,user:v.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:x,redirectType:t.type},error:null}}catch(n){if(me(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await Ms(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{error:i};const a=(n=s.session)===null||n===void 0?void 0:n.access_token;if(a){const{error:l}=await this.admin.signOut(a,t);if(l&&!(MM(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await Gn(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=VM(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,s;try{const{data:{session:i},error:a}=r;if(a)throw a;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await yo(this.storage,this.storageKey,!0));try{return await we(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(me(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(me(r))return{data:null,error:r};throw r}}async linkIdentity(t){var r;try{const{data:n,error:s}=await this._useSession(async i=>{var a,l,c,u,f;const{data:d,error:h}=i;if(h)throw h;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(a=t.options)===null||a===void 0?void 0:a.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await we(this.fetch,"GET",p,{headers:this.headers,jwt:(f=(u=d.session)===null||u===void 0?void 0:u.access_token)!==null&&f!==void 0?f:void 0})});if(s)throw s;return Pr()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:t.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(me(n))return{data:{provider:t.provider,url:null},error:n};throw n}}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:a}=r;if(a)throw a;return await we(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(me(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await KM(async s=>(s>0&&await qM(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await we(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:yn})),(s,i)=>{const a=200*Math.pow(2,s);return i&&Hd(i)&&Date.now()+a-n<ko})}catch(n){if(this._debug(r,"error",n),me(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),Pr()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await Ms(this.storage,this.storageKey);if(s&&this.userStorage){let a=await Ms(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:s.user},await Co(this.userStorage,this.storageKey+"-user",a)),s.user=(t=a==null?void 0:a.user)!==null&&t!==void 0?t:qd()}else if(s&&!s.user&&!s.user){const a=await Ms(this.storage,this.storageKey+"-user");a&&(a!=null&&a.user)?(s.user=a.user,await Gn(this.storage,this.storageKey+"-user"),await Co(this.storage,this.storageKey,s)):s.user=qd()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const i=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Vd;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${Vd}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:a}=await this._callRefreshToken(s.refresh_token);a&&(console.error(a),Hd(a)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:l}=await this._getUser(s.access_token);!l&&(a!=null&&a.user)?(s.user=a.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(n,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new Hn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Ku;const{data:i,error:a}=await this._refreshAccessToken(t);if(a)throw a;if(!i.session)throw new Hn;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(s,"error",i),me(i)){const a={session:null,error:i};return Hd(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(a),a}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,r,n=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],a=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,r)}catch(c){i.push(c)}});if(await Promise.all(a),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await Co(this.userStorage,this.storageKey+"-user",{user:r.user});const s=Object.assign({},r);delete s.user;const i=mx(s);await Co(this.storage,this.storageKey,i)}else{const s=mx(r);await Co(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await Gn(this.storage,this.storageKey),await Gn(this.storage,this.storageKey+"-code-verifier"),await Gn(this.storage,this.storageKey+"-user"),this.userStorage&&await Gn(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Pr()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),ko);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-t)/ko);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${ko}ms, refresh threshold is ${Ih} ticks`),s<=Ih&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof E1)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Pr()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,a]=await yo(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(a)}`});s.push(l.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);s.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?{data:null,error:i}:await we(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(me(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:a}=r;if(a)return{data:null,error:a};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:c,error:u}=await we(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return u?{data:null,error:u}:(t.factorType==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(r){if(me(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{data:null,error:i};const{data:a,error:l}=await we(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:l})})}catch(r){if(me(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?{data:null,error:i}:await we(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(me(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?{data:null,error:n}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const n=(t==null?void 0:t.factors)||[],s=n.filter(a=>a.factor_type==="totp"&&a.status==="verified"),i=n.filter(a=>a.factor_type==="phone"&&a.status==="verified");return{data:{all:n,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,n;const{data:{session:s},error:i}=t;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=Wd(s.access_token);let l=null;a.aal&&(l=a.aal);let c=l;((n=(r=s.user.factors)===null||r===void 0?void 0:r.filter(d=>d.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const f=a.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:f},error:null}}))}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(l=>l.kid===t);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(l=>l.kid===t),n&&this.jwks_cached_at+RM>s)return n;const{data:i,error:a}=await we(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,n=i.keys.find(l=>l.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:p,error:g}=await this.getSession();if(g||!p.session)return{data:null,error:g};n=p.session.access_token}const{header:s,payload:i,signature:a,raw:{header:l,payload:c}}=Wd(n);r!=null&&r.allowExpired||t4(i.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!u){const{error:p}=await this.getUser(n);if(p)throw p;return{data:{claims:i,header:s,signature:a},error:null}}const f=r4(s.alg),d=await crypto.subtle.importKey("jwk",u,f,!0,["verify"]);if(!await crypto.subtle.verify(f,d,a,zM(`${l}.${c}`)))throw new Uh("Invalid JWT signature");return{data:{claims:i,header:s,signature:a},error:null}}catch(n){if(me(n))return{data:null,error:n};throw n}}}Ga.nextInstanceID=0;const x4=Ga;class y4 extends x4{constructor(t){super(t)}}var w4=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function l(f){try{u(n.next(f))}catch(d){a(d)}}function c(f){try{u(n.throw(f))}catch(d){a(d)}}function u(f){f.done?i(f.value):s(f.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};class b4{constructor(t,r,n){var s,i,a;if(this.supabaseUrl=t,this.supabaseKey=r,!t)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const l=SM(t),c=new URL(l);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const u=`sb-${c.hostname.split(".")[0]}-auth-token`,f={db:vM,realtime:yM,auth:Object.assign(Object.assign({},xM),{storageKey:u}),global:gM},d=kM(n??{},f);this.storageKey=(s=d.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=d.global.headers)!==null&&i!==void 0?i:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(h,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=d.auth)!==null&&a!==void 0?a:{},this.headers,d.global.fetch),this.fetch=_M(r,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new UA(new URL("rest/v1",c).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new hM(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new pA(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,r;return w4(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,storageKey:i,flowType:a,lock:l,debug:c},u,f){const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new y4({url:this.authUrl.href,headers:Object.assign(Object.assign({},d),u),storageKey:i,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,flowType:a,lock:l,debug:c,fetch:f,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new eM(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const j4=(e,t,r)=>new b4(e,t,r);function _4(){if(typeof window<"u"||typeof process>"u"||process.version===void 0||process.version===null)return!1;const e=process.version.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}_4()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const N4=void 0,S4=void 0,R=j4(N4,S4,{auth:{storage:sessionStorage,persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0},realtime:{params:{eventsPerSecond:20}}}),P1=m.createContext(null),k4=({children:e})=>{const[t,r]=m.useState(null),[n,s]=m.useState(null),[i,a]=m.useState(!0),[l,c]=m.useState({isNewUser:!1,hasCompletedProfile:!1,shouldShowOnboarding:!1,isLoading:!1});m.useEffect(()=>{const{data:{subscription:y}}=R.auth.onAuthStateChange(async(x,w)=>{x==="SIGNED_IN"&&w?(r(w.user),s(w),a(!1)):x==="SIGNED_OUT"&&(r(null),s(null),a(!1),c({isNewUser:!1,hasCompletedProfile:!1,shouldShowOnboarding:!1,isLoading:!1}))});return()=>y.unsubscribe()},[]),m.useEffect(()=>{(async()=>{try{const{data:{session:x},error:w}=await R.auth.getSession();x&&!w&&(r(x.user),s(x)),a(!1)}catch{a(!1)}})()},[]);const v={user:t,session:n,loading:i,authState:l,setAuthState:c,signUp:async(y,x)=>{const w=`${window.location.origin}/auth/callback`,{error:b}=await R.auth.signUp({email:y,password:x,options:{emailRedirectTo:w}});return{error:b}},signIn:async(y,x)=>{try{const{error:w}=await R.auth.signInWithPassword({email:y,password:x});return w?{error:w.message}:{success:!0}}catch{return{error:"An unexpected error occurred."}}},signOut:async()=>{await R.auth.signOut(),window.dispatchEvent(new CustomEvent("auth:logout"))},resendVerification:async y=>{const x=`${window.location.origin}/auth/callback`,{error:w}=await R.auth.resend({type:"signup",email:y.toLowerCase().trim(),options:{emailRedirectTo:x}});return{error:w}},isEmailVerified:y=>!!y.email_confirmed_at,ensureAuthStability:async()=>{try{const{data:{session:y},error:x}=await R.auth.getSession();return!x&&!!y}catch(y){return console.error("Auth stability check error:",y),!1}}};return o.jsx(P1.Provider,{value:v,children:e})},_e=()=>{const e=m.useContext(P1);if(e===null)throw new Error("useAuth must be used within an AuthProvider");return e};class Kc{static getConnection(t){var r,n;if(!this.connections.has(t)||((r=this.connections.get(t))==null?void 0:r.readyState)!==WebSocket.OPEN){this.connections.has(t)&&((n=this.connections.get(t))==null||n.close());const s=new WebSocket(t);this.connections.set(t,s),s.addEventListener("close",()=>{this.connections.delete(t)}),s.addEventListener("error",()=>{this.connections.delete(t)})}return this.connections.get(t)}static closeConnection(t){var r;this.connections.has(t)&&((r=this.connections.get(t))==null||r.close(),this.connections.delete(t))}static closeAllConnections(){this.connections.forEach((t,r)=>{t.close()}),this.connections.clear()}}xe(Kc,"connections",new Map);typeof window<"u"&&(window.WebSocketPool=Kc);var sn;let yp=(sn=class{constructor(){xe(this,"audioContext",null);xe(this,"refCount",0)}static getInstance(){return sn.instance||(sn.instance=new sn),sn.instance}async getContext(){return(!this.audioContext||this.audioContext.state==="closed")&&(this.audioContext=new AudioContext({sampleRate:24e3})),this.audioContext.state==="suspended"&&await this.audioContext.resume(),this.refCount++,this.audioContext}releaseContext(){this.refCount--,this.refCount<=0&&this.audioContext&&(this.audioContext.close(),this.audioContext=null,this.refCount=0)}forceClose(){this.audioContext&&(this.audioContext.close(),this.audioContext=null),this.refCount=0}},xe(sn,"instance"),sn);class C4{constructor(t){xe(this,"stream",null);xe(this,"audioContext",null);xe(this,"source",null);xe(this,"analyser",null);xe(this,"dataArray",null);xe(this,"animationFrameId",null);xe(this,"audioContextManager");xe(this,"processAudio",()=>{if(!this.analyser||!this.dataArray)return;this.analyser.getByteFrequencyData(this.dataArray);const t=new Float32Array(this.dataArray.length);for(let r=0;r<this.dataArray.length;r++)t[r]=(this.dataArray[r]-128)/128;this.onAudioData(t),this.animationFrameId=requestAnimationFrame(this.processAudio)});this.onAudioData=t,this.audioContextManager=yp.getInstance()}async start(){try{this.stream=await navigator.mediaDevices.getUserMedia({audio:{sampleRate:24e3,channelCount:1,echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0}}),this.audioContext=await this.audioContextManager.getContext(),this.source=this.audioContext.createMediaStreamSource(this.stream),this.analyser=this.audioContext.createAnalyser(),this.analyser.fftSize=2048,this.analyser.smoothingTimeConstant=.8,this.source.connect(this.analyser);const t=this.analyser.frequencyBinCount;this.dataArray=new Uint8Array(t),this.processAudio()}catch{}}stop(){this.animationFrameId&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=null),this.source&&(this.source.disconnect(),this.source=null),this.analyser&&(this.analyser.disconnect(),this.analyser=null),this.stream&&(this.stream.getTracks().forEach(t=>t.stop()),this.stream=null),this.audioContext&&(this.audioContextManager.releaseContext(),this.audioContext=null),this.dataArray=null}}const E4=e=>{const t=new Int16Array(e.length);for(let i=0;i<e.length;i++){const a=Math.max(-1,Math.min(1,e[i]));t[i]=a<0?a*32768:a*32767}const r=new Uint8Array(t.buffer);let n="";const s=32768;for(let i=0;i<r.length;i+=s){const a=r.subarray(i,Math.min(i+s,r.length));n+=String.fromCharCode.apply(null,Array.from(a))}return btoa(n)};class P4{constructor(){xe(this,"queue",[]);xe(this,"isPlaying",!1);xe(this,"audioContext",null);xe(this,"isDestroyed",!1);xe(this,"audioContextManager");this.audioContextManager=yp.getInstance()}async addToQueue(t){this.isDestroyed||(this.queue.push(t),this.isPlaying||await this.playNext())}async playNext(){if(this.queue.length===0||this.isDestroyed){this.isPlaying=!1;return}this.isPlaying=!0;const t=this.queue.shift();try{this.audioContext||(this.audioContext=await this.audioContextManager.getContext());const r=this.createWavFromPCM(t),n=await this.audioContext.decodeAudioData(r.buffer),s=this.audioContext.createBufferSource();s.buffer=n,s.connect(this.audioContext.destination),s.onended=()=>{this.isDestroyed||this.playNext()},s.start(0)}catch{}}createWavFromPCM(t){const r=new Int16Array(t.length/2);for(let h=0;h<t.length;h+=2)r[h/2]=t[h+1]<<8|t[h];const n=new ArrayBuffer(44),s=new DataView(n),i=(h,p,g)=>{for(let v=0;v<g.length;v++)h.setUint8(p+v,g.charCodeAt(v))},a=24e3,l=1,c=16,u=l*c/8,f=a*u;i(s,0,"RIFF"),s.setUint32(4,36+r.byteLength,!0),i(s,8,"WAVE"),i(s,12,"fmt "),s.setUint32(16,16,!0),s.setUint16(20,1,!0),s.setUint16(22,l,!0),s.setUint32(24,a,!0),s.setUint32(28,f,!0),s.setUint16(32,u,!0),s.setUint16(34,c,!0),i(s,36,"data"),s.setUint32(40,r.byteLength,!0);const d=new Uint8Array(n.byteLength+r.byteLength);return d.set(new Uint8Array(n),0),d.set(new Uint8Array(r.buffer),n.byteLength),d}destroy(){this.isDestroyed=!0,this.queue.length=0,this.isPlaying=!1,this.audioContext&&(this.audioContextManager.releaseContext(),this.audioContext=null)}}let Yd=null;const T4=async(e,t)=>{Yd||(Yd=new P4),await Yd.addToQueue(t)};class R4{constructor(t,r){xe(this,"ws",null);xe(this,"audioContext",null);xe(this,"recorder",null);xe(this,"isConnected",!1);xe(this,"reconnectAttempts",0);xe(this,"maxReconnectAttempts",3);xe(this,"reconnectTimeout",null);xe(this,"audioContextManager");xe(this,"wsUrl",null);this.onMessage=t,this.onConnectionChange=r,this.audioContextManager=yp.getInstance()}async connect(){try{this.audioContext=await this.audioContextManager.getContext(),this.wsUrl="wss://your-project.functions.supabase.co/realtime-voice-chat",this.ws=Kc.getConnection(this.wsUrl),this.ws.onopen=()=>{},this.ws.onmessage=async t=>{try{const r=JSON.parse(t.data);if(this.onMessage(r),r.type==="response.audio.delta"){const n=atob(r.delta),s=new Uint8Array(n.length);for(let i=0;i<n.length;i++)s[i]=n.charCodeAt(i);await T4(this.audioContext,s)}}catch(r){console.error("Error processing voice message:",r)}},this.ws.onclose=()=>{},this.ws.onerror=t=>{console.error("WebSocket connection error:",t),this.onConnectionChange(!1)}}catch(t){throw console.error("Failed to connect to voice chat:",t),t}}attemptReconnect(){this.reconnectAttempts>=this.maxReconnectAttempts||(this.reconnectAttempts++,this.reconnectTimeout=setTimeout(()=>{this.connect()},1e3*Math.pow(2,this.reconnectAttempts)))}async startRecording(){if(this.audioContext){this.recorder=new C4(t=>{if(this.ws&&this.ws.readyState===WebSocket.OPEN){const r=E4(t);this.ws.send(JSON.stringify({type:"input_audio_buffer.append",audio:r}))}});try{await this.recorder.start()}catch{}}}stopRecording(){this.recorder&&(this.recorder.stop(),this.recorder=null)}disconnect(){this.stopRecording(),this.wsUrl&&(Kc.closeConnection(this.wsUrl),this.ws=null,this.wsUrl=null),this.audioContext&&(this.audioContextManager.releaseContext(),this.audioContext=null),this.isConnected=!1,this.onConnectionChange(!1),this.reconnectTimeout&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=null)}isConnectedToVoiceChat(){return this.isConnected}}const dn=()=>{const{user:e}=_e(),[t,r]=m.useState(null),[n,s]=m.useState([]),[i,a]=m.useState(!0);m.useEffect(()=>{e&&(l(),c())},[e]);const l=async()=>{if(e)try{const{data:h,error:p}=await R.from("user_engagement").select("*").eq("user_id",e.id).maybeSingle();if(p&&p.code!=="PGRST116"){console.error("Error fetching engagement:",p);return}if(h){const g=h;r({daily_streak:g.daily_streak,messages_sent_today:g.messages_sent_today,reactions_given_today:g.reactions_given_today,tools_used_today:g.tools_used_today,group_switches_used_today:g.group_switches_used_today||0,reconnects_used_today:g.reconnects_used_today||0,achievement_points:g.achievement_points||g.total_karma_points||0,last_active:new Date(g.last_active),is_premium:g.is_premium||!1,karma_level:g.karma_level||"Newcomer",total_karma_points:g.total_karma_points||0,monthly_karma_points:g.monthly_karma_points||0})}else r({daily_streak:0,messages_sent_today:0,reactions_given_today:0,tools_used_today:0,group_switches_used_today:0,reconnects_used_today:0,achievement_points:0,last_active:new Date,is_premium:!1,karma_level:"Newcomer",total_karma_points:0,monthly_karma_points:0})}catch(h){console.error("Error fetching engagement data:",h)}finally{a(!1)}},c=async()=>{if(e)try{const{data:h,error:p}=await R.from("user_achievements").select("*").eq("user_id",e.id).order("unlocked_at",{ascending:!1});if(p){console.error("Error fetching achievements:",p);return}s((h==null?void 0:h.map(g=>({id:g.id,achievement_type:g.achievement_type,achievement_title:g.achievement_title,achievement_description:g.achievement_description,badge_icon:g.badge_icon,points:g.points,unlocked_at:new Date(g.unlocked_at)})))||[])}catch(h){console.error("Error fetching achievements:",h)}};return{engagement:t,achievements:n,loading:i,trackActivity:async h=>{if(e)try{const{error:p}=await R.rpc("update_user_engagement",{p_user_id:e.id,p_activity_type:h});if(p){console.error("Error tracking activity:",p);return}await l(),await c()}catch(p){console.error("Error tracking activity:",p)}},trackKarmaActivity:async(h,p,g=1,v="",y=1)=>{if(e)try{const{error:x}=await R.rpc("track_karma_activity",{p_user_id:e.id,p_group_id:h,p_activity_type:p,p_points:g,p_description:v,p_multiplier:y});if(x){console.error("Error tracking karma activity:",x);return}await l(),await c()}catch(x){console.error("Error tracking karma activity:",x)}},getGroupKarmaLeaderboard:async(h,p=20,g=0)=>{if(!e)return[];try{const{data:v,error:y}=await R.rpc("get_group_user_karma_leaderboard",{p_group_id:h,p_limit:p,p_offset:g});return y?(console.error("Error fetching group leaderboard:",y),[]):v||[]}catch(v){return console.error("Error fetching group leaderboard:",v),[]}},refresh:()=>{l(),c()}}},T1=m.createContext(void 0),R1=()=>{const e=m.useContext(T1);if(!e)throw new Error("useVoiceRoom must be used within a VoiceRoomProvider");return e},Us=class Us{constructor(){xe(this,"audioContext",null);xe(this,"refCount",0)}static getInstance(){return Us.instance||(Us.instance=new Us),Us.instance}async getContext(){return(!this.audioContext||this.audioContext.state==="closed")&&(this.audioContext=new AudioContext({sampleRate:24e3})),this.audioContext.state==="suspended"&&await this.audioContext.resume(),this.refCount++,this.audioContext}releaseContext(){this.refCount--,this.refCount<=0&&this.audioContext&&(this.audioContext.close(),this.audioContext=null,this.refCount=0)}forceClose(){this.audioContext&&(this.audioContext.close(),this.audioContext=null),this.refCount=0}};xe(Us,"instance");let Fh=Us;const A4=(e,t)=>{const r=m.useRef(),n=m.useCallback((...s)=>{r.current&&clearTimeout(r.current),r.current=setTimeout(()=>e(...s),t)},[e,t]);return m.useEffect(()=>()=>{r.current&&clearTimeout(r.current)},[]),n},M4=({children:e})=>{const{user:t}=_e(),{toast:r}=Le(),{trackActivity:n,trackKarmaActivity:s}=dn(),[i,a]=m.useState({isConnected:!1,isConnecting:!1,participants:[],participantCount:0,isMuted:!1,isDeafened:!1,isSpeaking:!1,handRaised:!1,messages:[],currentTranscript:"",isCollapsed:!0,isMinimized:!1}),l=m.useRef(null),c=m.useRef(null),u=m.useRef(null),f=m.useRef(!1),d=m.useRef(null),h=m.useRef("idle"),p=m.useRef([]),g=m.useRef([]),v=m.useRef(!1),y=Fh.getInstance(),x=m.useCallback(O=>{g.current.push(O)},[]),w=A4(async()=>{if(!(!c.current||f.current||!d.current)){f.current=!0;try{await c.current.track(d.current),d.current=null}catch{}finally{setTimeout(()=>{f.current=!1},100)}}},500),b=m.useCallback(async O=>{if(p.current.push(O),h.current==="idle"){for(h.current="syncing";p.current.length>0;){const L=p.current.shift();if(L)try{await L()}catch{}}h.current="idle"}},[]),j=m.useCallback(O=>{O.type==="response.audio_transcript.delta"?a(L=>({...L,currentTranscript:L.currentTranscript+O.delta,isSpeaking:!0})):O.type==="response.audio_transcript.done"?a(L=>{const z=L.currentTranscript.trim()?[...L.messages.slice(-50),{id:crypto.randomUUID(),type:"ai_response",content:L.currentTranscript.trim(),timestamp:new Date}]:L.messages;return{...L,messages:z,currentTranscript:"",isSpeaking:!1}}):O.type==="conversation.item.input_audio_transcription.completed"?a(L=>({...L,messages:[...L.messages.slice(-50),{id:crypto.randomUUID(),type:"user_speech",content:O.transcript,timestamp:new Date}]})):O.type==="error"&&r({title:"Voice Room Error",description:O.message||"An error occurred in the voice room",variant:"destructive"})},[r]),_=m.useCallback(()=>{b(async()=>{if(!c.current)return;const O=c.current.presenceState()||{},L=[];Object.keys(O).forEach(z=>{const C=O[z];if(C&&C.length>0){const P=C[0];P.userId!==(t==null?void 0:t.id)&&L.push({userId:P.userId,name:P.name,isMuted:P.isMuted||!1,isDeafened:P.isDeafened||!1,isSpeaking:P.isSpeaking||!1,handRaised:P.handRaised||!1,joinedAt:P.joinedAt})}}),a(z=>({...z,participants:L,participantCount:L.length+(z.isConnected?1:0)}))})},[t==null?void 0:t.id,b]),N=m.useCallback(async(O,L,z=!1)=>{if(!t){r({title:"Authentication Required",description:"Please log in to join the voice room",variant:"destructive"});return}if(i.isConnecting||i.isConnected){r({title:"Already Connected",description:"You are already in a voice room"});return}a(C=>({...C,isConnecting:!0}));try{if(z){const P=H=>{H||r({title:"Voice Connection Lost",description:"Lost connection to voice room. Trying to reconnect...",variant:"destructive"})};l.current=new R4(j,P),await l.current.connect()}const C=R.channel(`voice-${O}`,{config:{presence:{key:t.id}}});c.current=C,u.current=O,C.on("presence",{event:"sync"},_).on("presence",{event:"join"},({newPresences:P})=>{console.log("User joined voice room:",P)}).on("presence",{event:"leave"},({leftPresences:P})=>{console.log("User left voice room:",P)}),await C.subscribe(async P=>{var H;if(P==="SUBSCRIBED"){const $={userId:t.id,name:((H=t.email)==null?void 0:H.split("@")[0])||"User",isMuted:!z,isDeafened:!1,isSpeaking:!1,handRaised:!1,joinedAt:new Date().toISOString(),hasMicrophone:z};d.current=$,w(),a(W=>({...W,isConnected:!0,isConnecting:!1,isCollapsed:!1})),s(O,"voice_participation",3,"Joined voice room",1),r({title:"Voice Room Connected",description:`Connected to ${L} voice room${z?"":" (listening only)"}`})}})}catch(C){console.error("Voice room connection error:",C),a(P=>({...P,isConnecting:!1})),z&&C instanceof Error&&C.name==="NotAllowedError"?r({title:"Microphone Permission Required",description:"Please allow microphone access to join the voice room, or try joining without microphone.",variant:"destructive"}):r({title:"Connection Failed",description:"Failed to join voice room. Please check your internet connection and try again.",variant:"destructive"})}},[t,i.isConnecting,i.isConnected,j,_,w,r]),S=m.useCallback(async()=>{try{l.current&&(l.current.disconnect(),l.current=null),c.current&&(await R.removeChannel(c.current),c.current=null),u.current=null,a(O=>({...O,isConnected:!1,isConnecting:!1,participants:[],participantCount:0,messages:[],currentTranscript:"",isSpeaking:!1,isCollapsed:!0})),r({title:"Voice Room Disconnected",description:"Left the voice room"})}catch{}},[r]),k=m.useCallback(()=>{var L;if(!t||!c.current)return;const O=!i.isMuted;a(z=>({...z,isMuted:O})),d.current={userId:t.id,name:((L=t.email)==null?void 0:L.split("@")[0])||"User",isMuted:O,isDeafened:i.isDeafened,isSpeaking:i.isSpeaking,handRaised:i.handRaised,joinedAt:new Date().toISOString()},w()},[t,i.isMuted,i.isDeafened,w]),E=m.useCallback(()=>{var L;if(!t||!c.current)return;const O=!i.isDeafened;a(z=>({...z,isDeafened:O})),d.current={userId:t.id,name:((L=t.email)==null?void 0:L.split("@")[0])||"User",isMuted:i.isMuted,isDeafened:O,isSpeaking:i.isSpeaking,handRaised:i.handRaised,joinedAt:new Date().toISOString()},w()},[t,i.isMuted,i.isDeafened,i.isSpeaking,i.handRaised,w]),M=m.useCallback(()=>{var L;if(!t||!c.current)return;const O=!i.handRaised;a(z=>({...z,handRaised:O})),d.current={userId:t.id,name:((L=t.email)==null?void 0:L.split("@")[0])||"User",isMuted:i.isMuted,isDeafened:i.isDeafened,isSpeaking:i.isSpeaking,handRaised:O,joinedAt:new Date().toISOString()},w()},[t,i.isMuted,i.isDeafened,i.isSpeaking,i.handRaised,w]),T=m.useCallback(()=>{a(O=>({...O,isCollapsed:!O.isCollapsed}))},[]),I=m.useCallback(()=>{a(O=>({...O,isMinimized:!O.isMinimized}))},[]),G=m.useCallback(()=>({isConnected:i.isConnected,participantCount:i.participantCount}),[i.isConnected,i.participantCount]);m.useEffect(()=>(x(()=>{l.current&&(l.current.disconnect(),l.current=null)}),x(async()=>{c.current&&(await R.removeChannel(c.current),c.current=null)}),x(()=>{u.current=null,f.current=!1,d.current=null}),x(()=>{a({isConnected:!1,isConnecting:!1,participants:[],participantCount:0,isMuted:!1,isDeafened:!1,isSpeaking:!1,messages:[],currentTranscript:"",isCollapsed:!0,isMinimized:!1})}),x(()=>{if(typeof window<"u"&&window.WebSocketPool)try{window.WebSocketPool.closeAllConnections()}catch{}try{y.forceClose()}catch{}}),()=>{v.current||(v.current=!0,g.current.forEach(O=>{try{O()}catch{}}),g.current=[],v.current=!1)}),[]);const F=m.useMemo(()=>({...i,joinVoiceRoom:N,leaveVoiceRoom:S,toggleMute:k,toggleDeafen:E,toggleHandRaise:M,toggleCollapse:T,toggleMinimize:I,getConnectionStatus:G}),[i,N,S,k,E,M,T,I,G]);return o.jsx(T1.Provider,{value:F,children:e})},A1=m.createContext(void 0),M1=()=>{const e=m.useContext(A1);if(!e)throw new Error("useTheme must be used within a ThemeProvider");return e},D4=({children:e})=>{const[t,r]=m.useState(()=>{if(typeof window<"u"){const a=localStorage.getItem("theme");if(a==="light"||a==="dark")return a}return"light"}),n=a=>{r(a),localStorage.setItem("theme",a),typeof window<"u"&&(a==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"))},s=()=>{n(t==="light"?"dark":"light")};m.useEffect(()=>{typeof window<"u"&&(document.documentElement.classList.remove("dark"),t==="dark"&&document.documentElement.classList.add("dark"))},[t]),m.useEffect(()=>{if(typeof window<"u"){const a=localStorage.getItem("theme");n(a||"light")}},[]);const i={theme:t,setTheme:n,toggleTheme:s};return o.jsx(A1.Provider,{value:i,children:e})},q=m.forwardRef(({className:e,...t},r)=>o.jsx("div",{ref:r,className:re("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));q.displayName="Card";const ue=m.forwardRef(({className:e,...t},r)=>o.jsx("div",{ref:r,className:re("flex flex-col space-y-1.5 p-6",e),...t}));ue.displayName="CardHeader";const de=m.forwardRef(({className:e,...t},r)=>o.jsx("h3",{ref:r,className:re("text-2xl font-semibold leading-none tracking-tight",e),...t}));de.displayName="CardTitle";const St=m.forwardRef(({className:e,...t},r)=>o.jsx("p",{ref:r,className:re("text-sm text-muted-foreground",e),...t}));St.displayName="CardDescription";const Z=m.forwardRef(({className:e,...t},r)=>o.jsx("div",{ref:r,className:re("p-6 pt-0",e),...t}));Z.displayName="CardContent";const O4=m.forwardRef(({className:e,...t},r)=>o.jsx("div",{ref:r,className:re("flex items-center p-6 pt-0",e),...t}));O4.displayName="CardFooter";const I4=_u("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-lg text-sm font-medium ring-offset-background transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary-glow hover:shadow-lg hover:shadow-primary/20 active:scale-95",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-card-hover hover:text-accent-foreground border-border/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary-hover",ghost:"hover:bg-muted hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",tag:"bg-muted text-muted-foreground hover:bg-accent hover:text-accent-foreground border border-border/30 hover:border-accent/50 hover:shadow-sm transition-all duration-200","tag-selected":"bg-primary text-primary-foreground border border-primary hover:bg-primary-glow shadow-md shadow-primary/20"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),D=m.forwardRef(({className:e,variant:t,size:r,asChild:n=!1,...s},i)=>{const a=n?ws:"button";return o.jsx(a,{className:re(I4({variant:t,size:r,className:e})),ref:i,...s})});D.displayName="Button";class yx extends m.Component{constructor(r){super(r);xe(this,"logError",(r,n)=>{const s={message:r.message,stack:r.stack,componentStack:n.componentStack,timestamp:new Date().toISOString(),userAgent:navigator.userAgent,url:window.location.href};console.error("Error Boundary Log:",s)});xe(this,"handleRetry",()=>{this.setState({hasError:!1,error:void 0})});xe(this,"handleReload",()=>{window.location.reload()});this.state={hasError:!1}}static getDerivedStateFromError(r){return{hasError:!0,error:r}}componentDidCatch(r,n){console.error("Error caught by boundary:",r,n),this.logError(r,n),Or.error("Something went wrong. We've logged the error and are working to fix it.")}render(){return this.state.hasError?this.props.fallback?this.props.fallback:o.jsx("div",{className:"min-h-[400px] flex items-center justify-center p-4",children:o.jsxs(q,{className:"w-full max-w-md",children:[o.jsxs(ue,{className:"text-center",children:[o.jsx("div",{className:"mx-auto mb-4 w-12 h-12 rounded-full bg-destructive/10 flex items-center justify-center",children:o.jsx(On,{className:"w-6 h-6 text-destructive"})}),o.jsx(de,{className:"text-xl",children:"Something went wrong"})]}),o.jsxs(Z,{className:"space-y-4",children:[o.jsx("p",{className:"text-sm text-muted-foreground text-center",children:"We encountered an unexpected error. You can try to continue or reload the page."}),!1,o.jsxs("div",{className:"flex gap-2",children:[o.jsxs(D,{variant:"outline",className:"flex-1",onClick:this.handleRetry,children:[o.jsx(Su,{className:"w-4 h-4 mr-2"}),"Try Again"]}),o.jsx(D,{variant:"default",className:"flex-1",onClick:this.handleReload,children:"Reload Page"})]})]})]})}):this.props.children}}const L4=()=>{const[e,t]=m.useState(null),[r,n]=m.useState(!1),[s,i]=m.useState(!1);return m.useEffect(()=>{const l=window.matchMedia("(display-mode: standalone)").matches,c=window.navigator.standalone===!0;i(l||c),"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(d=>{console.log("SW registered: ",d),d.active&&console.log("Service worker is active, monitoring for issues...")}).catch(d=>{console.log("SW registration failed: ",d)})});const u=d=>{d.preventDefault(),t(d),n(!0)},f=()=>{i(!0),n(!1),t(null)};return window.addEventListener("beforeinstallprompt",u),window.addEventListener("appinstalled",f),()=>{window.removeEventListener("beforeinstallprompt",u),window.removeEventListener("appinstalled",f)}},[]),{isInstallable:r,isInstalled:s,installApp:async()=>{if(!e)return;e.prompt();const{outcome:l}=await e.userChoice;l==="accepted"&&(t(null),n(!1))}}},$4=()=>{const{isInstallable:e,installApp:t}=L4(),[r,n]=m.useState(!1);return!e||r?null:o.jsx(q,{className:"fixed bottom-4 left-4 right-4 z-50 border-primary/20 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/80",children:o.jsxs(Z,{className:"flex items-center gap-3 p-4",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"font-semibold text-sm",children:"Install Group Harmony"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Add to your home screen for quick access"})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs(D,{size:"sm",onClick:t,className:"gap-2",children:[o.jsx(YE,{className:"h-4 w-4"}),"Install"]}),o.jsx(D,{size:"sm",variant:"ghost",onClick:()=>n(!0),children:o.jsx(ao,{className:"h-4 w-4"})})]})]})})},U4=()=>{const{pathname:e}=Ri();return m.useEffect(()=>{window.scrollTo({top:0,left:0,behavior:"auto"})},[e]),null},F4=()=>{const{user:e,loading:t}=_e(),{toast:r}=Le(),[n,s]=m.useState({isNewUser:!1,hasCompletedProfile:!1,shouldShowOnboarding:!1,isLoading:!0});m.useEffect(()=>{if(!t){if(!e){s({isNewUser:!1,hasCompletedProfile:!1,shouldShowOnboarding:!1,isLoading:!1});return}e.email_confirmed_at?i():s({isNewUser:!1,hasCompletedProfile:!1,shouldShowOnboarding:!1,isLoading:!1})}},[e,t]);const i=async()=>{var c,u,f;if(e!=null&&e.id)try{console.log("User email confirmed at:",e.email_confirmed_at);const{data:d,error:h}=await R.from("profiles").select("*").eq("user_id",e.id).maybeSingle();if(h&&h.code!=="PGRST116"){console.error("Error checking profile:",h),s({isNewUser:!1,hasCompletedProfile:!1,shouldShowOnboarding:!1,isLoading:!1});return}const p=d&&d.username&&(((c=d.genres)==null?void 0:c.length)>0||((u=d.personality)==null?void 0:u.length)>0||((f=d.habits)==null?void 0:f.length)>0),g=new Date(e.created_at),x=new Date().getTime()-g.getTime()<6e4;s(p?{isNewUser:!1,hasCompletedProfile:!0,shouldShowOnboarding:!1,isLoading:!1}:x?{isNewUser:!0,hasCompletedProfile:!1,shouldShowOnboarding:!0,isLoading:!1}:{isNewUser:!1,hasCompletedProfile:!1,shouldShowOnboarding:!0,isLoading:!1})}catch(d){console.error("Error in checkUserStatus:",d),s({isNewUser:!1,hasCompletedProfile:!1,shouldShowOnboarding:!1,isLoading:!1})}};return{authState:n,checkEmailExists:async c=>{var u;try{const{error:f}=await R.auth.signInWithPassword({email:c,password:"dummy-password-to-check-email"});return((u=f==null?void 0:f.message)==null?void 0:u.includes("Invalid"))&&!f.message.includes("user not found")}catch{return!1}},handleAuthError:c=>{r({title:"Authentication Error",description:c,variant:"destructive"})},refreshUserStatus:i}},Yc=768,wx=1024;function wp(){const[e,t]=m.useState(void 0);return m.useEffect(()=>{const r=()=>{const a=window.innerWidth<Yc;t(a)};r();const n=window.matchMedia(`(max-width: ${Yc-1}px)`),s=()=>{r()};return n.addEventListener("change",s),window.addEventListener("resize",r),()=>{n.removeEventListener("change",s),window.removeEventListener("resize",r)}},[]),!!e}function z4(){const[e,t]=m.useState(void 0);return m.useEffect(()=>{const r=()=>{const i=window.innerWidth,a=i>=Yc&&i<wx;t(a)};r();const n=window.matchMedia(`(min-width: ${Yc}px) and (max-width: ${wx-1}px)`),s=()=>{r()};return n.addEventListener("change",s),window.addEventListener("resize",r),()=>{n.removeEventListener("change",s),window.removeEventListener("resize",r)}},[]),!!e}function B4(){const e=wp(),t=z4();return e?"mobile":t?"tablet":"desktop"}const D1=()=>{const{user:e}=_e(),[t,r]=m.useState(null),[n,s]=m.useState(null),[i,a]=m.useState(!1),[l,c]=m.useState(null),u=m.useCallback(async()=>{if(!(e!=null&&e.id))return null;try{a(!0),c(null);const{data:g,error:v}=await R.from("profiles").select("*").eq("user_id",e.id).maybeSingle();if(v)throw v;return r(g),g}catch(g){return console.error("Error fetching user profile:",g),c("Failed to load profile"),null}finally{a(!1)}},[e==null?void 0:e.id]),f=m.useCallback(async()=>{if(!(e!=null&&e.id))return null;try{a(!0),c(null);const{data:g,error:v}=await R.from("group_members").select(`
          group_id,
          groups (
            id,
            name,
            vibe_label,
            current_members,
            max_members,
            lifecycle_stage,
            created_at
          )
        `).eq("user_id",e.id).order("joined_at",{ascending:!1}).limit(1).maybeSingle();if(v)throw v;const y=g==null?void 0:g.groups;return s(y),y}catch(g){return console.error("Error fetching current group:",g),c("Failed to load group data"),null}finally{a(!1)}},[e==null?void 0:e.id]),d=m.useCallback(async g=>{if(!(e!=null&&e.id)||!t)return!1;try{a(!0),c(null);const{error:v}=await R.from("profiles").update(g).eq("user_id",e.id);if(v)throw v;return r(y=>y?{...y,...g}:null),!0}catch(v){return console.error("Error updating user profile:",v),c("Failed to update profile"),!1}finally{a(!1)}},[e==null?void 0:e.id,t]),h=m.useCallback(()=>{r(null),s(null),c(null)},[]),p=m.useCallback(async()=>{if(e!=null&&e.id)try{a(!0),c(null),await Promise.all([u(),f()])}catch(g){console.error("Error refreshing data:",g),c("Failed to load data")}finally{a(!1)}},[e==null?void 0:e.id,u,f]);return m.useEffect(()=>{e!=null&&e.id?p():h()},[e==null?void 0:e.id,p,h]),m.useEffect(()=>{const g=()=>{setTimeout(()=>{p()},2e3)};return window.addEventListener("onboarding:complete",g),()=>window.removeEventListener("onboarding:complete",g)},[p]),{userProfile:t,currentGroup:n,isLoading:i,error:l,fetchUserProfile:u,fetchCurrentGroup:f,updateUserProfile:d,setCurrentGroup:s,clearData:h,refreshData:p}},G4=_u("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function le({className:e,variant:t,...r}){return o.jsx("div",{className:re(G4({variant:t}),e),...r})}const V4=({className:e="",isMobile:t=!1})=>{var s;const{user:r}=_e(),{achievements:n}=dn();return Le(),t?null:o.jsx("nav",{className:`
      fixed top-0 left-0 right-0 z-50
      glass-card border-b border-border smooth-transition
      ${e}
    `,children:o.jsx("div",{className:"max-w-6xl mx-auto px-4 py-3",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("div",{className:"flex items-center gap-4",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-8 h-8 bg-primary rounded-lg flex items-center justify-center",children:o.jsx(Dn,{className:"h-5 w-5 text-primary-foreground"})}),o.jsx("span",{className:"text-lg font-bold text-foreground",children:"SyncChat"})]})}),o.jsx("div",{className:"flex items-center gap-3",children:r&&o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"text-sm text-muted-foreground",children:(s=r.email)==null?void 0:s.split("@")[0]}),n&&n.length>0&&o.jsxs(le,{variant:"secondary",className:"text-xs",children:[n.length," achievements"]})]})})]})})})},ut=m.forwardRef(({className:e,type:t,...r},n)=>o.jsx("input",{type:t,className:re("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:n,...r}));ut.displayName="Input";var Qd="focusScope.autoFocusOnMount",Xd="focusScope.autoFocusOnUnmount",bx={bubbles:!1,cancelable:!0},H4="FocusScope",Yu=m.forwardRef((e,t)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...a}=e,[l,c]=m.useState(null),u=Ge(s),f=Ge(i),d=m.useRef(null),h=je(t,v=>c(v)),p=m.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;m.useEffect(()=>{if(n){let v=function(b){if(p.paused||!l)return;const j=b.target;l.contains(j)?d.current=j:Wn(d.current,{select:!0})},y=function(b){if(p.paused||!l)return;const j=b.relatedTarget;j!==null&&(l.contains(j)||Wn(d.current,{select:!0}))},x=function(b){if(document.activeElement===document.body)for(const _ of b)_.removedNodes.length>0&&Wn(l)};document.addEventListener("focusin",v),document.addEventListener("focusout",y);const w=new MutationObserver(x);return l&&w.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",v),document.removeEventListener("focusout",y),w.disconnect()}}},[n,l,p.paused]),m.useEffect(()=>{if(l){_x.add(p);const v=document.activeElement;if(!l.contains(v)){const x=new CustomEvent(Qd,bx);l.addEventListener(Qd,u),l.dispatchEvent(x),x.defaultPrevented||(W4(X4(O1(l)),{select:!0}),document.activeElement===v&&Wn(l))}return()=>{l.removeEventListener(Qd,u),setTimeout(()=>{const x=new CustomEvent(Xd,bx);l.addEventListener(Xd,f),l.dispatchEvent(x),x.defaultPrevented||Wn(v??document.body,{select:!0}),l.removeEventListener(Xd,f),_x.remove(p)},0)}}},[l,u,f,p]);const g=m.useCallback(v=>{if(!r&&!n||p.paused)return;const y=v.key==="Tab"&&!v.altKey&&!v.ctrlKey&&!v.metaKey,x=document.activeElement;if(y&&x){const w=v.currentTarget,[b,j]=q4(w);b&&j?!v.shiftKey&&x===j?(v.preventDefault(),r&&Wn(b,{select:!0})):v.shiftKey&&x===b&&(v.preventDefault(),r&&Wn(j,{select:!0})):x===w&&v.preventDefault()}},[r,n,p.paused]);return o.jsx(ie.div,{tabIndex:-1,...a,ref:h,onKeyDown:g})});Yu.displayName=H4;function W4(e,{select:t=!1}={}){const r=document.activeElement;for(const n of e)if(Wn(n,{select:t}),document.activeElement!==r)return}function q4(e){const t=O1(e),r=jx(t,e),n=jx(t.reverse(),e);return[r,n]}function O1(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const s=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||s?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function jx(e,t){for(const r of e)if(!K4(r,{upTo:t}))return r}function K4(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function Y4(e){return e instanceof HTMLInputElement&&"select"in e}function Wn(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&Y4(e)&&t&&e.select()}}var _x=Q4();function Q4(){let e=[];return{add(t){const r=e[0];t!==r&&(r==null||r.pause()),e=Nx(e,t),e.unshift(t)},remove(t){var r;e=Nx(e,t),(r=e[0])==null||r.resume()}}}function Nx(e,t){const r=[...e],n=r.indexOf(t);return n!==-1&&r.splice(n,1),r}function X4(e){return e.filter(t=>t.tagName!=="A")}var Jd=0;function bp(){m.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??Sx()),document.body.insertAdjacentElement("beforeend",e[1]??Sx()),Jd++,()=>{Jd===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),Jd--}},[])}function Sx(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var nn=function(){return nn=Object.assign||function(t){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},nn.apply(this,arguments)};function I1(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r}function J4(e,t,r){if(r||arguments.length===2)for(var n=0,s=t.length,i;n<s;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}var cc="right-scroll-bar-position",uc="width-before-scroll-bar",Z4="with-scroll-bars-hidden",eD="--removed-body-scroll-bar-size";function Zd(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function tD(e,t){var r=m.useState(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(n){var s=r.value;s!==n&&(r.value=n,r.callback(n,s))}}}})[0];return r.callback=t,r.facade}var rD=typeof window<"u"?m.useLayoutEffect:m.useEffect,kx=new WeakMap;function nD(e,t){var r=tD(null,function(n){return e.forEach(function(s){return Zd(s,n)})});return rD(function(){var n=kx.get(r);if(n){var s=new Set(n),i=new Set(e),a=r.current;s.forEach(function(l){i.has(l)||Zd(l,null)}),i.forEach(function(l){s.has(l)||Zd(l,a)})}kx.set(r,e)},[e]),r}function sD(e){return e}function oD(e,t){t===void 0&&(t=sD);var r=[],n=!1,s={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(i){var a=t(i,n);return r.push(a),function(){r=r.filter(function(l){return l!==a})}},assignSyncMedium:function(i){for(n=!0;r.length;){var a=r;r=[],a.forEach(i)}r={push:function(l){return i(l)},filter:function(){return r}}},assignMedium:function(i){n=!0;var a=[];if(r.length){var l=r;r=[],l.forEach(i),a=r}var c=function(){var f=a;a=[],f.forEach(i)},u=function(){return Promise.resolve().then(c)};u(),r={push:function(f){a.push(f),u()},filter:function(f){return a=a.filter(f),r}}}};return s}function iD(e){e===void 0&&(e={});var t=oD(null);return t.options=nn({async:!0,ssr:!1},e),t}var L1=function(e){var t=e.sideCar,r=I1(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw new Error("Sidecar medium not found");return m.createElement(n,nn({},r))};L1.isSideCarExport=!0;function aD(e,t){return e.useMedium(t),L1}var $1=iD(),ef=function(){},Qu=m.forwardRef(function(e,t){var r=m.useRef(null),n=m.useState({onScrollCapture:ef,onWheelCapture:ef,onTouchMoveCapture:ef}),s=n[0],i=n[1],a=e.forwardProps,l=e.children,c=e.className,u=e.removeScrollBar,f=e.enabled,d=e.shards,h=e.sideCar,p=e.noIsolation,g=e.inert,v=e.allowPinchZoom,y=e.as,x=y===void 0?"div":y,w=e.gapMode,b=I1(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),j=h,_=nD([r,t]),N=nn(nn({},b),s);return m.createElement(m.Fragment,null,f&&m.createElement(j,{sideCar:$1,removeScrollBar:u,shards:d,noIsolation:p,inert:g,setCallbacks:i,allowPinchZoom:!!v,lockRef:r,gapMode:w}),a?m.cloneElement(m.Children.only(l),nn(nn({},N),{ref:_})):m.createElement(x,nn({},N,{className:c,ref:_}),l))});Qu.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Qu.classNames={fullWidth:uc,zeroRight:cc};var lD=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function cD(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=lD();return t&&e.setAttribute("nonce",t),e}function uD(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function dD(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var fD=function(){var e=0,t=null;return{add:function(r){e==0&&(t=cD())&&(uD(t,r),dD(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},hD=function(){var e=fD();return function(t,r){m.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},U1=function(){var e=hD(),t=function(r){var n=r.styles,s=r.dynamic;return e(n,s),null};return t},mD={left:0,top:0,right:0,gap:0},tf=function(e){return parseInt(e||"",10)||0},pD=function(e){var t=window.getComputedStyle(document.body),r=t[e==="padding"?"paddingLeft":"marginLeft"],n=t[e==="padding"?"paddingTop":"marginTop"],s=t[e==="padding"?"paddingRight":"marginRight"];return[tf(r),tf(n),tf(s)]},gD=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return mD;var t=pD(e),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-r+t[2]-t[0])}},vD=U1(),Ko="data-scroll-locked",xD=function(e,t,r,n){var s=e.left,i=e.top,a=e.right,l=e.gap;return r===void 0&&(r="margin"),`
  .`.concat(Z4,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(l,"px ").concat(n,`;
  }
  body[`).concat(Ko,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(l,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(cc,` {
    right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(uc,` {
    margin-right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(cc," .").concat(cc,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(uc," .").concat(uc,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(Ko,`] {
    `).concat(eD,": ").concat(l,`px;
  }
`)},Cx=function(){var e=parseInt(document.body.getAttribute(Ko)||"0",10);return isFinite(e)?e:0},yD=function(){m.useEffect(function(){return document.body.setAttribute(Ko,(Cx()+1).toString()),function(){var e=Cx()-1;e<=0?document.body.removeAttribute(Ko):document.body.setAttribute(Ko,e.toString())}},[])},wD=function(e){var t=e.noRelative,r=e.noImportant,n=e.gapMode,s=n===void 0?"margin":n;yD();var i=m.useMemo(function(){return gD(s)},[s]);return m.createElement(vD,{styles:xD(i,!t,s,r?"":"!important")})},zh=!1;if(typeof window<"u")try{var Ul=Object.defineProperty({},"passive",{get:function(){return zh=!0,!0}});window.addEventListener("test",Ul,Ul),window.removeEventListener("test",Ul,Ul)}catch{zh=!1}var _o=zh?{passive:!1}:!1,bD=function(e){return e.tagName==="TEXTAREA"},F1=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!bD(e)&&r[t]==="visible")},jD=function(e){return F1(e,"overflowY")},_D=function(e){return F1(e,"overflowX")},Ex=function(e,t){var r=t.ownerDocument,n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var s=z1(e,n);if(s){var i=B1(e,n),a=i[1],l=i[2];if(a>l)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},ND=function(e){var t=e.scrollTop,r=e.scrollHeight,n=e.clientHeight;return[t,r,n]},SD=function(e){var t=e.scrollLeft,r=e.scrollWidth,n=e.clientWidth;return[t,r,n]},z1=function(e,t){return e==="v"?jD(t):_D(t)},B1=function(e,t){return e==="v"?ND(t):SD(t)},kD=function(e,t){return e==="h"&&t==="rtl"?-1:1},CD=function(e,t,r,n,s){var i=kD(e,window.getComputedStyle(t).direction),a=i*n,l=r.target,c=t.contains(l),u=!1,f=a>0,d=0,h=0;do{var p=B1(e,l),g=p[0],v=p[1],y=p[2],x=v-y-i*g;(g||x)&&z1(e,l)&&(d+=x,h+=g),l instanceof ShadowRoot?l=l.host:l=l.parentNode}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(f&&(Math.abs(d)<1||!s)||!f&&(Math.abs(h)<1||!s))&&(u=!0),u},Fl=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},Px=function(e){return[e.deltaX,e.deltaY]},Tx=function(e){return e&&"current"in e?e.current:e},ED=function(e,t){return e[0]===t[0]&&e[1]===t[1]},PD=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},TD=0,No=[];function RD(e){var t=m.useRef([]),r=m.useRef([0,0]),n=m.useRef(),s=m.useState(TD++)[0],i=m.useState(U1)[0],a=m.useRef(e);m.useEffect(function(){a.current=e},[e]),m.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var v=J4([e.lockRef.current],(e.shards||[]).map(Tx),!0).filter(Boolean);return v.forEach(function(y){return y.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),v.forEach(function(y){return y.classList.remove("allow-interactivity-".concat(s))})}}},[e.inert,e.lockRef.current,e.shards]);var l=m.useCallback(function(v,y){if("touches"in v&&v.touches.length===2||v.type==="wheel"&&v.ctrlKey)return!a.current.allowPinchZoom;var x=Fl(v),w=r.current,b="deltaX"in v?v.deltaX:w[0]-x[0],j="deltaY"in v?v.deltaY:w[1]-x[1],_,N=v.target,S=Math.abs(b)>Math.abs(j)?"h":"v";if("touches"in v&&S==="h"&&N.type==="range")return!1;var k=Ex(S,N);if(!k)return!0;if(k?_=S:(_=S==="v"?"h":"v",k=Ex(S,N)),!k)return!1;if(!n.current&&"changedTouches"in v&&(b||j)&&(n.current=_),!_)return!0;var E=n.current||_;return CD(E,y,v,E==="h"?b:j,!0)},[]),c=m.useCallback(function(v){var y=v;if(!(!No.length||No[No.length-1]!==i)){var x="deltaY"in y?Px(y):Fl(y),w=t.current.filter(function(_){return _.name===y.type&&(_.target===y.target||y.target===_.shadowParent)&&ED(_.delta,x)})[0];if(w&&w.should){y.cancelable&&y.preventDefault();return}if(!w){var b=(a.current.shards||[]).map(Tx).filter(Boolean).filter(function(_){return _.contains(y.target)}),j=b.length>0?l(y,b[0]):!a.current.noIsolation;j&&y.cancelable&&y.preventDefault()}}},[]),u=m.useCallback(function(v,y,x,w){var b={name:v,delta:y,target:x,should:w,shadowParent:AD(x)};t.current.push(b),setTimeout(function(){t.current=t.current.filter(function(j){return j!==b})},1)},[]),f=m.useCallback(function(v){r.current=Fl(v),n.current=void 0},[]),d=m.useCallback(function(v){u(v.type,Px(v),v.target,l(v,e.lockRef.current))},[]),h=m.useCallback(function(v){u(v.type,Fl(v),v.target,l(v,e.lockRef.current))},[]);m.useEffect(function(){return No.push(i),e.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:h}),document.addEventListener("wheel",c,_o),document.addEventListener("touchmove",c,_o),document.addEventListener("touchstart",f,_o),function(){No=No.filter(function(v){return v!==i}),document.removeEventListener("wheel",c,_o),document.removeEventListener("touchmove",c,_o),document.removeEventListener("touchstart",f,_o)}},[]);var p=e.removeScrollBar,g=e.inert;return m.createElement(m.Fragment,null,g?m.createElement(i,{styles:PD(s)}):null,p?m.createElement(wD,{gapMode:e.gapMode}):null)}function AD(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const MD=aD($1,RD);var Xu=m.forwardRef(function(e,t){return m.createElement(Qu,nn({},e,{ref:t,sideCar:MD}))});Xu.classNames=Qu.classNames;var DD=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},So=new WeakMap,zl=new WeakMap,Bl={},rf=0,G1=function(e){return e&&(e.host||G1(e.parentNode))},OD=function(e,t){return t.map(function(r){if(e.contains(r))return r;var n=G1(r);return n&&e.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",e,". Doing nothing"),null)}).filter(function(r){return!!r})},ID=function(e,t,r,n){var s=OD(t,Array.isArray(e)?e:[e]);Bl[r]||(Bl[r]=new WeakMap);var i=Bl[r],a=[],l=new Set,c=new Set(s),u=function(d){!d||l.has(d)||(l.add(d),u(d.parentNode))};s.forEach(u);var f=function(d){!d||c.has(d)||Array.prototype.forEach.call(d.children,function(h){if(l.has(h))f(h);else try{var p=h.getAttribute(n),g=p!==null&&p!=="false",v=(So.get(h)||0)+1,y=(i.get(h)||0)+1;So.set(h,v),i.set(h,y),a.push(h),v===1&&g&&zl.set(h,!0),y===1&&h.setAttribute(r,"true"),g||h.setAttribute(n,"true")}catch(x){console.error("aria-hidden: cannot operate on ",h,x)}})};return f(t),l.clear(),rf++,function(){a.forEach(function(d){var h=So.get(d)-1,p=i.get(d)-1;So.set(d,h),i.set(d,p),h||(zl.has(d)||d.removeAttribute(n),zl.delete(d)),p||d.removeAttribute(r)}),rf--,rf||(So=new WeakMap,So=new WeakMap,zl=new WeakMap,Bl={})}},jp=function(e,t,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(e)?e:[e]),s=DD(e);return s?(n.push.apply(n,Array.from(s.querySelectorAll("[aria-live]"))),ID(n,s,r,"aria-hidden")):function(){return null}},_p="Dialog",[V1,t$]=Nr(_p),[LD,Hr]=V1(_p),H1=e=>{const{__scopeDialog:t,children:r,open:n,defaultOpen:s,onOpenChange:i,modal:a=!0}=e,l=m.useRef(null),c=m.useRef(null),[u=!1,f]=cn({prop:n,defaultProp:s,onChange:i});return o.jsx(LD,{scope:t,triggerRef:l,contentRef:c,contentId:En(),titleId:En(),descriptionId:En(),open:u,onOpenChange:f,onOpenToggle:m.useCallback(()=>f(d=>!d),[f]),modal:a,children:r})};H1.displayName=_p;var W1="DialogTrigger",q1=m.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=Hr(W1,r),i=je(t,s.triggerRef);return o.jsx(ie.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":kp(s.open),...n,ref:i,onClick:Y(e.onClick,s.onOpenToggle)})});q1.displayName=W1;var Np="DialogPortal",[$D,K1]=V1(Np,{forceMount:void 0}),Y1=e=>{const{__scopeDialog:t,forceMount:r,children:n,container:s}=e,i=Hr(Np,t);return o.jsx($D,{scope:t,forceMount:r,children:m.Children.map(n,a=>o.jsx(ht,{present:r||i.open,children:o.jsx(el,{asChild:!0,container:s,children:a})}))})};Y1.displayName=Np;var Qc="DialogOverlay",Q1=m.forwardRef((e,t)=>{const r=K1(Qc,e.__scopeDialog),{forceMount:n=r.forceMount,...s}=e,i=Hr(Qc,e.__scopeDialog);return i.modal?o.jsx(ht,{present:n||i.open,children:o.jsx(UD,{...s,ref:t})}):null});Q1.displayName=Qc;var UD=m.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=Hr(Qc,r);return o.jsx(Xu,{as:ws,allowPinchZoom:!0,shards:[s.contentRef],children:o.jsx(ie.div,{"data-state":kp(s.open),...n,ref:t,style:{pointerEvents:"auto",...n.style}})})}),so="DialogContent",X1=m.forwardRef((e,t)=>{const r=K1(so,e.__scopeDialog),{forceMount:n=r.forceMount,...s}=e,i=Hr(so,e.__scopeDialog);return o.jsx(ht,{present:n||i.open,children:i.modal?o.jsx(FD,{...s,ref:t}):o.jsx(zD,{...s,ref:t})})});X1.displayName=so;var FD=m.forwardRef((e,t)=>{const r=Hr(so,e.__scopeDialog),n=m.useRef(null),s=je(t,r.contentRef,n);return m.useEffect(()=>{const i=n.current;if(i)return jp(i)},[]),o.jsx(J1,{...e,ref:s,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Y(e.onCloseAutoFocus,i=>{var a;i.preventDefault(),(a=r.triggerRef.current)==null||a.focus()}),onPointerDownOutside:Y(e.onPointerDownOutside,i=>{const a=i.detail.originalEvent,l=a.button===0&&a.ctrlKey===!0;(a.button===2||l)&&i.preventDefault()}),onFocusOutside:Y(e.onFocusOutside,i=>i.preventDefault())})}),zD=m.forwardRef((e,t)=>{const r=Hr(so,e.__scopeDialog),n=m.useRef(!1),s=m.useRef(!1);return o.jsx(J1,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var a,l;(a=e.onCloseAutoFocus)==null||a.call(e,i),i.defaultPrevented||(n.current||(l=r.triggerRef.current)==null||l.focus(),i.preventDefault()),n.current=!1,s.current=!1},onInteractOutside:i=>{var c,u;(c=e.onInteractOutside)==null||c.call(e,i),i.defaultPrevented||(n.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const a=i.target;((u=r.triggerRef.current)==null?void 0:u.contains(a))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),J1=m.forwardRef((e,t)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:s,onCloseAutoFocus:i,...a}=e,l=Hr(so,r),c=m.useRef(null),u=je(t,c);return bp(),o.jsxs(o.Fragment,{children:[o.jsx(Yu,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:s,onUnmountAutoFocus:i,children:o.jsx(Ni,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":kp(l.open),...a,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),o.jsxs(o.Fragment,{children:[o.jsx(BD,{titleId:l.titleId}),o.jsx(VD,{contentRef:c,descriptionId:l.descriptionId})]})]})}),Sp="DialogTitle",Z1=m.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=Hr(Sp,r);return o.jsx(ie.h2,{id:s.titleId,...n,ref:t})});Z1.displayName=Sp;var ej="DialogDescription",tj=m.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=Hr(ej,r);return o.jsx(ie.p,{id:s.descriptionId,...n,ref:t})});tj.displayName=ej;var rj="DialogClose",nj=m.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=Hr(rj,r);return o.jsx(ie.button,{type:"button",...n,ref:t,onClick:Y(e.onClick,()=>s.onOpenChange(!1))})});nj.displayName=rj;function kp(e){return e?"open":"closed"}var sj="DialogTitleWarning",[r$,oj]=ZC(sj,{contentName:so,titleName:Sp,docsSlug:"dialog"}),BD=({titleId:e})=>{const t=oj(sj),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return m.useEffect(()=>{e&&(document.getElementById(e)||console.error(r))},[r,e]),null},GD="DialogDescriptionWarning",VD=({contentRef:e,descriptionId:t})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${oj(GD).contentName}}.`;return m.useEffect(()=>{var i;const s=(i=e.current)==null?void 0:i.getAttribute("aria-describedby");t&&s&&(document.getElementById(t)||console.warn(n))},[n,e,t]),null},ij=H1,aj=q1,lj=Y1,Cp=Q1,Ep=X1,Pp=Z1,Tp=tj,cj=nj;const Ht=ij,xa=aj,HD=lj,uj=m.forwardRef(({className:e,...t},r)=>o.jsx(Cp,{ref:r,className:re("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));uj.displayName=Cp.displayName;const Dt=m.forwardRef(({className:e,children:t,...r},n)=>o.jsxs(HD,{children:[o.jsx(uj,{}),o.jsxs(Ep,{ref:n,className:re("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...r,children:[t,o.jsxs(cj,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[o.jsx(ao,{className:"h-4 w-4"}),o.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Dt.displayName=Ep.displayName;const nr=({className:e,...t})=>o.jsx("div",{className:re("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});nr.displayName="DialogHeader";const dj=({className:e,...t})=>o.jsx("div",{className:re("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});dj.displayName="DialogFooter";const qt=m.forwardRef(({className:e,...t},r)=>o.jsx(Pp,{ref:r,className:re("text-lg font-semibold leading-none tracking-tight",e),...t}));qt.displayName=Pp.displayName;const as=m.forwardRef(({className:e,...t},r)=>o.jsx(Tp,{ref:r,className:re("text-sm text-muted-foreground",e),...t}));as.displayName=Tp.displayName;var WD="Separator",Rx="horizontal",qD=["horizontal","vertical"],fj=m.forwardRef((e,t)=>{const{decorative:r,orientation:n=Rx,...s}=e,i=KD(n)?n:Rx,l=r?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return o.jsx(ie.div,{"data-orientation":i,...l,...s,ref:t})});fj.displayName=WD;function KD(e){return qD.includes(e)}var hj=fj;const mr=m.forwardRef(({className:e,orientation:t="horizontal",decorative:r=!0,...n},s)=>o.jsx(hj,{ref:s,decorative:r,orientation:t,className:re("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...n}));mr.displayName=hj.displayName;function Rp(e,[t,r]){return Math.min(r,Math.max(t,e))}var YD=m.createContext(void 0);function al(e){const t=m.useContext(YD);return e||t||"ltr"}function Ap(e){const t=m.useRef({value:e,previous:e});return m.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var mj=["PageUp","PageDown"],pj=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],gj={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Oi="Slider",[Bh,QD,XD]=wu(Oi),[vj,n$]=Nr(Oi,[XD]),[JD,Ju]=vj(Oi),xj=m.forwardRef((e,t)=>{const{name:r,min:n=0,max:s=100,step:i=1,orientation:a="horizontal",disabled:l=!1,minStepsBetweenThumbs:c=0,defaultValue:u=[n],value:f,onValueChange:d=()=>{},onValueCommit:h=()=>{},inverted:p=!1,form:g,...v}=e,y=m.useRef(new Set),x=m.useRef(0),b=a==="horizontal"?ZD:eO,[j=[],_]=cn({prop:f,defaultProp:u,onChange:T=>{var G;(G=[...y.current][x.current])==null||G.focus(),d(T)}}),N=m.useRef(j);function S(T){const I=oO(j,T);M(T,I)}function k(T){M(T,x.current)}function E(){const T=N.current[x.current];j[x.current]!==T&&h(j)}function M(T,I,{commit:G}={commit:!1}){const F=cO(i),O=uO(Math.round((T-n)/i)*i+n,F),L=Rp(O,[n,s]);_((z=[])=>{const C=nO(z,L,I);if(lO(C,c*i)){x.current=C.indexOf(L);const P=String(C)!==String(z);return P&&G&&h(C),P?C:z}else return z})}return o.jsx(JD,{scope:e.__scopeSlider,name:r,disabled:l,min:n,max:s,valueIndexToChangeRef:x,thumbs:y.current,values:j,orientation:a,form:g,children:o.jsx(Bh.Provider,{scope:e.__scopeSlider,children:o.jsx(Bh.Slot,{scope:e.__scopeSlider,children:o.jsx(b,{"aria-disabled":l,"data-disabled":l?"":void 0,...v,ref:t,onPointerDown:Y(v.onPointerDown,()=>{l||(N.current=j)}),min:n,max:s,inverted:p,onSlideStart:l?void 0:S,onSlideMove:l?void 0:k,onSlideEnd:l?void 0:E,onHomeKeyDown:()=>!l&&M(n,0,{commit:!0}),onEndKeyDown:()=>!l&&M(s,j.length-1,{commit:!0}),onStepKeyDown:({event:T,direction:I})=>{if(!l){const O=mj.includes(T.key)||T.shiftKey&&pj.includes(T.key)?10:1,L=x.current,z=j[L],C=i*O*I;M(z+C,L,{commit:!0})}}})})})})});xj.displayName=Oi;var[yj,wj]=vj(Oi,{startEdge:"left",endEdge:"right",size:"width",direction:1}),ZD=m.forwardRef((e,t)=>{const{min:r,max:n,dir:s,inverted:i,onSlideStart:a,onSlideMove:l,onSlideEnd:c,onStepKeyDown:u,...f}=e,[d,h]=m.useState(null),p=je(t,b=>h(b)),g=m.useRef(),v=al(s),y=v==="ltr",x=y&&!i||!y&&i;function w(b){const j=g.current||d.getBoundingClientRect(),_=[0,j.width],S=Mp(_,x?[r,n]:[n,r]);return g.current=j,S(b-j.left)}return o.jsx(yj,{scope:e.__scopeSlider,startEdge:x?"left":"right",endEdge:x?"right":"left",direction:x?1:-1,size:"width",children:o.jsx(bj,{dir:v,"data-orientation":"horizontal",...f,ref:p,style:{...f.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:b=>{const j=w(b.clientX);a==null||a(j)},onSlideMove:b=>{const j=w(b.clientX);l==null||l(j)},onSlideEnd:()=>{g.current=void 0,c==null||c()},onStepKeyDown:b=>{const _=gj[x?"from-left":"from-right"].includes(b.key);u==null||u({event:b,direction:_?-1:1})}})})}),eO=m.forwardRef((e,t)=>{const{min:r,max:n,inverted:s,onSlideStart:i,onSlideMove:a,onSlideEnd:l,onStepKeyDown:c,...u}=e,f=m.useRef(null),d=je(t,f),h=m.useRef(),p=!s;function g(v){const y=h.current||f.current.getBoundingClientRect(),x=[0,y.height],b=Mp(x,p?[n,r]:[r,n]);return h.current=y,b(v-y.top)}return o.jsx(yj,{scope:e.__scopeSlider,startEdge:p?"bottom":"top",endEdge:p?"top":"bottom",size:"height",direction:p?1:-1,children:o.jsx(bj,{"data-orientation":"vertical",...u,ref:d,style:{...u.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:v=>{const y=g(v.clientY);i==null||i(y)},onSlideMove:v=>{const y=g(v.clientY);a==null||a(y)},onSlideEnd:()=>{h.current=void 0,l==null||l()},onStepKeyDown:v=>{const x=gj[p?"from-bottom":"from-top"].includes(v.key);c==null||c({event:v,direction:x?-1:1})}})})}),bj=m.forwardRef((e,t)=>{const{__scopeSlider:r,onSlideStart:n,onSlideMove:s,onSlideEnd:i,onHomeKeyDown:a,onEndKeyDown:l,onStepKeyDown:c,...u}=e,f=Ju(Oi,r);return o.jsx(ie.span,{...u,ref:t,onKeyDown:Y(e.onKeyDown,d=>{d.key==="Home"?(a(d),d.preventDefault()):d.key==="End"?(l(d),d.preventDefault()):mj.concat(pj).includes(d.key)&&(c(d),d.preventDefault())}),onPointerDown:Y(e.onPointerDown,d=>{const h=d.target;h.setPointerCapture(d.pointerId),d.preventDefault(),f.thumbs.has(h)?h.focus():n(d)}),onPointerMove:Y(e.onPointerMove,d=>{d.target.hasPointerCapture(d.pointerId)&&s(d)}),onPointerUp:Y(e.onPointerUp,d=>{const h=d.target;h.hasPointerCapture(d.pointerId)&&(h.releasePointerCapture(d.pointerId),i(d))})})}),jj="SliderTrack",_j=m.forwardRef((e,t)=>{const{__scopeSlider:r,...n}=e,s=Ju(jj,r);return o.jsx(ie.span,{"data-disabled":s.disabled?"":void 0,"data-orientation":s.orientation,...n,ref:t})});_j.displayName=jj;var Gh="SliderRange",Nj=m.forwardRef((e,t)=>{const{__scopeSlider:r,...n}=e,s=Ju(Gh,r),i=wj(Gh,r),a=m.useRef(null),l=je(t,a),c=s.values.length,u=s.values.map(h=>kj(h,s.min,s.max)),f=c>1?Math.min(...u):0,d=100-Math.max(...u);return o.jsx(ie.span,{"data-orientation":s.orientation,"data-disabled":s.disabled?"":void 0,...n,ref:l,style:{...e.style,[i.startEdge]:f+"%",[i.endEdge]:d+"%"}})});Nj.displayName=Gh;var Vh="SliderThumb",Sj=m.forwardRef((e,t)=>{const r=QD(e.__scopeSlider),[n,s]=m.useState(null),i=je(t,l=>s(l)),a=m.useMemo(()=>n?r().findIndex(l=>l.ref.current===n):-1,[r,n]);return o.jsx(tO,{...e,ref:i,index:a})}),tO=m.forwardRef((e,t)=>{const{__scopeSlider:r,index:n,name:s,...i}=e,a=Ju(Vh,r),l=wj(Vh,r),[c,u]=m.useState(null),f=je(t,w=>u(w)),d=c?a.form||!!c.closest("form"):!0,h=Ru(c),p=a.values[n],g=p===void 0?0:kj(p,a.min,a.max),v=sO(n,a.values.length),y=h==null?void 0:h[l.size],x=y?iO(y,g,l.direction):0;return m.useEffect(()=>{if(c)return a.thumbs.add(c),()=>{a.thumbs.delete(c)}},[c,a.thumbs]),o.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[l.startEdge]:`calc(${g}% + ${x}px)`},children:[o.jsx(Bh.ItemSlot,{scope:e.__scopeSlider,children:o.jsx(ie.span,{role:"slider","aria-label":e["aria-label"]||v,"aria-valuemin":a.min,"aria-valuenow":p,"aria-valuemax":a.max,"aria-orientation":a.orientation,"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,tabIndex:a.disabled?void 0:0,...i,ref:f,style:p===void 0?{display:"none"}:e.style,onFocus:Y(e.onFocus,()=>{a.valueIndexToChangeRef.current=n})})}),d&&o.jsx(rO,{name:s??(a.name?a.name+(a.values.length>1?"[]":""):void 0),form:a.form,value:p},n)]})});Sj.displayName=Vh;var rO=e=>{const{value:t,...r}=e,n=m.useRef(null),s=Ap(t);return m.useEffect(()=>{const i=n.current,a=window.HTMLInputElement.prototype,c=Object.getOwnPropertyDescriptor(a,"value").set;if(s!==t&&c){const u=new Event("input",{bubbles:!0});c.call(i,t),i.dispatchEvent(u)}},[s,t]),o.jsx("input",{style:{display:"none"},...r,ref:n,defaultValue:t})};function nO(e=[],t,r){const n=[...e];return n[r]=t,n.sort((s,i)=>s-i)}function kj(e,t,r){const i=100/(r-t)*(e-t);return Rp(i,[0,100])}function sO(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function oO(e,t){if(e.length===1)return 0;const r=e.map(s=>Math.abs(s-t)),n=Math.min(...r);return r.indexOf(n)}function iO(e,t,r){const n=e/2,i=Mp([0,50],[0,n]);return(n-i(t)*r)*r}function aO(e){return e.slice(0,-1).map((t,r)=>e[r+1]-t)}function lO(e,t){if(t>0){const r=aO(e);return Math.min(...r)>=t}return!0}function Mp(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const n=(t[1]-t[0])/(e[1]-e[0]);return t[0]+n*(r-e[0])}}function cO(e){return(String(e).split(".")[1]||"").length}function uO(e,t){const r=Math.pow(10,t);return Math.round(e*r)/r}var Cj=xj,dO=_j,fO=Nj,hO=Sj;const Ej=m.forwardRef(({className:e,...t},r)=>o.jsxs(Cj,{ref:r,className:re("relative flex w-full touch-none select-none items-center",e),...t,children:[o.jsx(dO,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:o.jsx(fO,{className:"absolute h-full bg-primary"})}),o.jsx(hO,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));Ej.displayName=Cj.displayName;var Dp="Switch",[mO,s$]=Nr(Dp),[pO,gO]=mO(Dp),Pj=m.forwardRef((e,t)=>{const{__scopeSwitch:r,name:n,checked:s,defaultChecked:i,required:a,disabled:l,value:c="on",onCheckedChange:u,form:f,...d}=e,[h,p]=m.useState(null),g=je(t,b=>p(b)),v=m.useRef(!1),y=h?f||!!h.closest("form"):!0,[x=!1,w]=cn({prop:s,defaultProp:i,onChange:u});return o.jsxs(pO,{scope:r,checked:x,disabled:l,children:[o.jsx(ie.button,{type:"button",role:"switch","aria-checked":x,"aria-required":a,"data-state":Aj(x),"data-disabled":l?"":void 0,disabled:l,value:c,...d,ref:g,onClick:Y(e.onClick,b=>{w(j=>!j),y&&(v.current=b.isPropagationStopped(),v.current||b.stopPropagation())})}),y&&o.jsx(vO,{control:h,bubbles:!v.current,name:n,value:c,checked:x,required:a,disabled:l,form:f,style:{transform:"translateX(-100%)"}})]})});Pj.displayName=Dp;var Tj="SwitchThumb",Rj=m.forwardRef((e,t)=>{const{__scopeSwitch:r,...n}=e,s=gO(Tj,r);return o.jsx(ie.span,{"data-state":Aj(s.checked),"data-disabled":s.disabled?"":void 0,...n,ref:t})});Rj.displayName=Tj;var vO=e=>{const{control:t,checked:r,bubbles:n=!0,...s}=e,i=m.useRef(null),a=Ap(r),l=Ru(t);return m.useEffect(()=>{const c=i.current,u=window.HTMLInputElement.prototype,d=Object.getOwnPropertyDescriptor(u,"checked").set;if(a!==r&&d){const h=new Event("click",{bubbles:n});d.call(c,r),c.dispatchEvent(h)}},[a,r,n]),o.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...s,tabIndex:-1,ref:i,style:{...e.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function Aj(e){return e?"checked":"unchecked"}var Mj=Pj,xO=Rj;const kn=m.forwardRef(({className:e,...t},r)=>o.jsx(Mj,{className:re("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:r,children:o.jsx(xO,{className:re("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));kn.displayName=Mj.displayName;const co=()=>{const{user:e}=_e(),[t,r]=m.useState(null),[n,s]=m.useState(!0);m.useEffect(()=>{e&&i()},[e]);const i=async()=>{var f;if(e)try{const{data:d,error:h}=await R.functions.invoke("check-subscription",{headers:{Authorization:`Bearer ${(f=(await R.auth.getSession()).data.session)==null?void 0:f.access_token}`}});if(h){console.error("Error checking subscription:",h);return}r(d)}catch(d){console.error("Error checking subscription:",d)}finally{s(!1)}},a=async(f,d=!1)=>{var h;if(e)try{console.log("🚀 Creating checkout for plan:",f,"trial:",d);const{data:p,error:g}=await R.functions.invoke("create-checkout",{body:{planType:f,trial:d},headers:{Authorization:`Bearer ${(h=(await R.auth.getSession()).data.session)==null?void 0:h.access_token}`}});if(g){console.error("❌ Error creating checkout:",g);return}console.log("✅ Checkout created, opening Stripe..."),window.open(p.url,"_blank")&&l()}catch(p){console.error("💥 Error creating checkout:",p)}},l=m.useCallback(()=>{if(!e)return;console.log("⏰ Starting subscription status polling...");const f=setInterval(async()=>{try{console.log("🔍 Polling subscription status..."),await i(),t!=null&&t.subscribed&&(console.log("✅ User is now premium, stopping polling"),clearInterval(f))}catch(d){console.error("❌ Polling error:",d)}},3e3);return setTimeout(()=>{console.log("⏰ Stopping subscription polling (timeout)"),clearInterval(f)},3e5),()=>clearInterval(f)},[e,t]),c=async()=>{var f;if(e)try{const{data:d,error:h}=await R.functions.invoke("customer-portal",{headers:{Authorization:`Bearer ${(f=(await R.auth.getSession()).data.session)==null?void 0:f.access_token}`}});if(h){console.error("Error opening customer portal:",h);return}window.open(d.url,"_blank")}catch(d){console.error("Error opening customer portal:",d)}},u=()=>t?!!t.subscribed:!1;return{premium:t,loading:n,isPremium:(t==null?void 0:t.subscribed)||!1,isTrialing:t!=null&&t.trial_end?new Date(t.trial_end)>new Date:!1,checkSubscription:i,createCheckout:a,openCustomerPortal:c,canUseFeature:u}},vn=[{level:"Newcomer",icon:"🌱",color:"bg-gradient-to-r from-gray-400 to-gray-600",minPoints:0,maxPoints:49,benefits:["Basic chat features"],description:"Welcome to SyncChat! Start your journey here."},{level:"Explorer",icon:"🗺️",color:"bg-gradient-to-r from-blue-400 to-blue-600",minPoints:50,maxPoints:99,benefits:["Basic chat features","Custom reactions"],description:"You're exploring SyncChat and making connections!"},{level:"Rising",icon:"🔥",color:"bg-gradient-to-r from-green-400 to-blue-500",minPoints:100,maxPoints:249,benefits:["Custom reactions","Voice room priority","Special badges"],description:"You're becoming an active community member!"},{level:"Champion",icon:"⚡",color:"bg-gradient-to-r from-purple-400 to-pink-500",minPoints:250,maxPoints:499,benefits:["Voice priority","Game hosting","Profile themes"],description:"A true champion of community engagement!"},{level:"Expert",icon:"⭐",color:"bg-gradient-to-r from-blue-400 to-purple-500",minPoints:500,maxPoints:999,benefits:["Game hosting","Profile themes","Exclusive features"],description:"An expert with deep community involvement!"},{level:"Legend",icon:"👑",color:"bg-gradient-to-r from-yellow-400 to-orange-500",minPoints:1e3,maxPoints:2499,benefits:["All features","Legend status","Group influence"],description:"A legendary figure in the SyncChat community!"},{level:"Mythical",icon:"🌟",color:"bg-gradient-to-r from-pink-500 to-violet-600",minPoints:2500,maxPoints:Number.MAX_SAFE_INTEGER,benefits:["Ultimate features","Mythical status","Community leadership"],description:"The pinnacle of SyncChat achievement!"}],Op=()=>{const{user:e}=_e(),{engagement:t,achievements:r,trackActivity:n}=dn(),[s,i]=m.useState(null),[a,l]=m.useState([]),[c,u]=m.useState(!0),f=m.useCallback(b=>{for(let j=vn.length-1;j>=0;j--)if(b>=vn[j].minPoints)return vn[j];return vn[0]},[]),d=m.useCallback(b=>{const j=f(b),_=vn.findIndex(E=>E.level===j.level),N=_<vn.length-1?vn[_+1]:null,S=N?(b-j.minPoints)/(N.minPoints-j.minPoints)*100:100,k=N?N.minPoints-b:0;return{currentLevel:j,nextLevel:N,progress:Math.min(100,Math.max(0,S)),pointsToNext:Math.max(0,k),totalPoints:b}},[f]),h=m.useCallback(b=>b.map(j=>{let _="engagement",N="common";return j.achievement_type.includes("social")||j.achievement_type.includes("reaction")?_="social":j.achievement_type.includes("streak")||j.achievement_type.includes("message")?_="engagement":j.achievement_type.includes("loyalty")||j.achievement_type.includes("group")?_="loyalty":(j.achievement_type.includes("game")||j.achievement_type.includes("voice"))&&(_="gaming"),j.points>=200?N="legendary":j.points>=100?N="epic":j.points>=50&&(N="rare"),{...j,category:_,rarity:N}}),[]),p=m.useCallback(async(b,j,_,N)=>{const S={type:b,points:j,description:_,timestamp:new Date,multiplier:N};l(k=>[S,...k.slice(0,9)]),(b==="message"||b==="reaction")&&await n(b)},[n]),g=m.useCallback(async b=>{if(!e||!t)return;let j=0,_="",N=b;switch(b){case"message":j=2,_="Sent a message";break;case"reaction":j=1,_="Gave a reaction";break;case"voice":j=5,_="Joined voice room",N="voice";break;case"game":j=3,_="Participated in game",N="game";break;case"tool":j=1,_="Used chat tool";break}const S=t.is_premium?2:1,k=j*S;await p(N,k,_,S>1?S:void 0),await n(b)},[e,t,p,n]);m.useEffect(()=>{if(t){const b=d(t.achievement_points||0);i(b),u(!1)}},[t,d]);const v=r?h(r):[],y=m.useCallback(()=>s?s.currentLevel.benefits:[],[s]),x=m.useCallback(b=>{if(!s)return!1;const j=vn.find(_=>_.level===b);return j?s.totalPoints>=j.minPoints:!1},[s]),w=m.useCallback(()=>{if(!s||!s.nextLevel||s.pointsToNext===0)return"Max level reached!";const j=a.filter(N=>N.timestamp>new Date(Date.now()-7*24*60*60*1e3)).reduce((N,S)=>N+S.points,0)/7;if(j<=0)return"Keep being active to level up!";const _=Math.ceil(s.pointsToNext/j);return _<=1?"Less than a day":_<=7?`${_} days`:_<=30?`${Math.ceil(_/7)} weeks`:`${Math.ceil(_/30)} months`},[s,a]);return{karmaProgress:s,enhancedAchievements:v,recentActivity:a,loading:c,getKarmaLevel:f,calculateKarmaProgress:d,getCurrentBenefits:y,hasKarmaLevel:x,getEstimatedTimeToNextLevel:w,trackEnhancedActivity:g,trackKarmaActivity:p,KARMA_LEVELS:vn}},yO=()=>{const{user:e}=_e(),{isPremium:t,loading:r}=co(),[n,s]=m.useState([]),[i,a]=m.useState([]),[l,c]=m.useState(!1),u=()=>e&&t,f=async()=>{if(!u())return;const{data:y,error:x}=await R.from("reconnection_requests").select("*").or(`requester_id.eq.${e.id},target_user_id.eq.${e.id}`);if(x){console.error("Error fetching reconnection requests:",x);return}s((y==null?void 0:y.map(w=>({...w,created_at:new Date(w.created_at)})))||[])},d=async()=>{if(!u())return;const{data:y,error:x}=await R.from("private_chats").select("*").or(`user1_id.eq.${e.id},user2_id.eq.${e.id}`).order("updated_at",{ascending:!1});if(x){console.error("Error fetching private chats:",x);return}a((y==null?void 0:y.map(w=>({...w,created_at:new Date(w.created_at),updated_at:new Date(w.updated_at)})))||[])},h=async(y,x)=>{if(!u())throw new Error("Premium subscription required to send DM requests");c(!0);try{const{error:w}=await R.from("reconnection_requests").insert({requester_id:e.id,target_user_id:y,group_id:x});if(w)throw console.error("Error sending reconnection request:",w),w;return await R.rpc("update_user_engagement",{p_user_id:e.id,p_activity_type:"reconnect"}),await f(),await d(),!0}catch(w){throw console.error("Error sending reconnection request:",w),w}finally{c(!1)}},p=async(y,x)=>{if(!u())return!1;const{data:w}=await R.from("private_chats").select("*").eq("id",y).single();if(!w)return!1;const j=w.user1_id===e.id?"is_user1_favorited":"is_user2_favorited",{error:_}=await R.from("private_chats").update({[j]:x}).eq("id",y);return _?(console.error("Error toggling favorite:",_),!1):(await d(),!0)},g=async y=>{if(!u())return!1;const{data:x}=await R.from("private_chats").select("*").eq("id",y).single();if(!x)return!1;const b=x.user1_id===e.id?"is_user1_blocked":"is_user2_blocked",{error:j}=await R.from("private_chats").update({[b]:!0}).eq("id",y);return j?(console.error("Error blocking user:",j),!1):(await d(),!0)},v=async(y,x)=>{if(!u())return!1;const{data:w}=await R.from("private_chats").select("*").eq("id",y).single();if(!w)return!1;const j=w.user1_id===e.id?"is_user1_muted":"is_user2_muted",{error:_}=await R.from("private_chats").update({[j]:x}).eq("id",y);return _?(console.error("Error muting user:",_),!1):(await d(),!0)};return m.useEffect(()=>{u()&&(f(),d())},[e,t]),{requests:n,privateChats:i,loading:l||r,canAccessDM:u(),isPremium:t,sendReconnectionRequest:h,toggleFavorite:p,blockUser:g,muteUser:v,refetch:()=>{u()&&(f(),d())}}},wO=({onClose:e})=>{const{createCheckout:t,isPremium:r,isTrialing:n,openCustomerPortal:s}=co(),[i,a]=m.useState(null),l=async(u,f=!1)=>{a(u),await t(u,f),a(null)},c=[{icon:o.jsx(vt,{className:"h-5 w-5"}),title:"Private Groups",description:"Create and name your own private groups",free:!1,premium:!0},{icon:o.jsx(yr,{className:"h-5 w-5"}),title:"Unlimited Switching",description:"Switch groups as many times as you want",free:"1 per day",premium:"Unlimited"},{icon:o.jsx(ku,{className:"h-5 w-5"}),title:"Direct Messaging",description:"Unlimited 1-on-1 private conversations",free:"Not available",premium:"Unlimited"},{icon:o.jsx(dt,{className:"h-5 w-5"}),title:"Custom Themes",description:"Personalize your group with custom themes",free:!1,premium:!0},{icon:o.jsx(mi,{className:"h-5 w-5"}),title:"2x Karma Bonus",description:"Earn double points for all achievements",free:"1x rate",premium:"2x rate"},{icon:o.jsx(yr,{className:"h-5 w-5"}),title:"Exclusive Events",description:"Join monthly premium-only vibe events",free:!1,premium:!0}];return r||n?o.jsxs(q,{className:"max-w-2xl mx-auto",children:[o.jsxs(ue,{className:"text-center",children:[o.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-4",children:[o.jsx(dt,{className:"h-8 w-8 text-primary"}),o.jsx(de,{className:"text-2xl",children:"Premium Active"})]}),o.jsx(St,{children:n?"You're currently on a free trial":"You have access to all premium features"})]}),o.jsxs(Z,{className:"space-y-4",children:[o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:c.map((u,f)=>o.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-muted/50 rounded-lg",children:[o.jsx("div",{className:"text-primary",children:u.icon}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium",children:u.title}),o.jsx("p",{className:"text-sm text-muted-foreground",children:u.description})]})]},f))}),o.jsxs("div",{className:"flex justify-center space-x-4 pt-4",children:[o.jsx(D,{onClick:s,variant:"outline",children:"Manage Subscription"}),e&&o.jsx(D,{onClick:e,children:"Continue Chatting"})]})]})]}):o.jsxs(q,{className:"max-w-4xl mx-auto",children:[o.jsxs(ue,{className:"text-center",children:[o.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-4",children:[o.jsx(dt,{className:"h-8 w-8 text-primary"}),o.jsx(de,{className:"text-3xl",children:"Upgrade to Premium"})]}),o.jsx(St,{className:"text-lg",children:"Unlock exclusive features and enhance your chat experience"})]}),o.jsxs(Z,{className:"space-y-8",children:[o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full border-collapse",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"border-b",children:[o.jsx("th",{className:"text-left p-4",children:"Features"}),o.jsx("th",{className:"text-center p-4",children:"Free"}),o.jsx("th",{className:"text-center p-4",children:o.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[o.jsx(dt,{className:"h-5 w-5 text-primary"}),o.jsx("span",{children:"Premium"})]})})]})}),o.jsx("tbody",{children:c.map((u,f)=>o.jsxs("tr",{className:"border-b",children:[o.jsx("td",{className:"p-4",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"text-muted-foreground",children:u.icon}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium",children:u.title}),o.jsx("div",{className:"text-sm text-muted-foreground",children:u.description})]})]})}),o.jsx("td",{className:"text-center p-4",children:u.free?typeof u.free=="string"?o.jsx(le,{variant:"secondary",children:u.free}):o.jsx(Dr,{className:"h-5 w-5 text-green-500 mx-auto"}):o.jsx("span",{className:"text-muted-foreground",children:"—"})}),o.jsx("td",{className:"text-center p-4",children:u.premium?typeof u.premium=="string"?o.jsx(le,{className:"bg-primary text-primary-foreground",children:u.premium}):o.jsx(Dr,{className:"h-5 w-5 text-green-500 mx-auto"}):o.jsx("span",{className:"text-muted-foreground",children:"—"})})]},f))})]})}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs(q,{className:"relative border-2",children:[o.jsxs(ue,{children:[o.jsx("div",{className:"flex justify-between items-start",children:o.jsxs("div",{children:[o.jsx(de,{className:"text-xl",children:"Monthly"}),o.jsx(St,{children:"Perfect for trying premium features"})]})}),o.jsxs("div",{className:"mt-4",children:[o.jsx("span",{className:"text-3xl font-bold",children:"$9.99"}),o.jsx("span",{className:"text-muted-foreground",children:"/month"})]})]}),o.jsxs(Z,{className:"space-y-4",children:[o.jsx(D,{className:"w-full",onClick:()=>l("monthly"),disabled:i==="monthly",children:i==="monthly"?"Processing...":"Get Monthly Premium"}),o.jsx(D,{variant:"outline",className:"w-full",onClick:()=>l("monthly",!0),disabled:i==="monthly",children:"Start 3-Day Free Trial"})]})]}),o.jsxs(q,{className:"relative border-2 border-primary",children:[o.jsx(le,{className:"absolute -top-3 left-1/2 transform -translate-x-1/2 bg-primary text-primary-foreground",children:"Best Value"}),o.jsxs(ue,{children:[o.jsx("div",{className:"flex justify-between items-start",children:o.jsxs("div",{children:[o.jsx(de,{className:"text-xl",children:"Yearly"}),o.jsx(St,{children:"Save 33% with annual billing"})]})}),o.jsxs("div",{className:"mt-4",children:[o.jsx("span",{className:"text-3xl font-bold",children:"$79.99"}),o.jsx("span",{className:"text-muted-foreground",children:"/year"}),o.jsxs("div",{className:"text-sm text-muted-foreground",children:[o.jsx("span",{className:"line-through",children:"$119.88"})," Save $39.89"]})]})]}),o.jsxs(Z,{className:"space-y-4",children:[o.jsx(D,{className:"w-full",onClick:()=>l("yearly"),disabled:i==="yearly",children:i==="yearly"?"Processing...":"Get Yearly Premium"}),o.jsx(D,{variant:"outline",className:"w-full",onClick:()=>l("yearly",!0),disabled:i==="yearly",children:"Start 3-Day Free Trial"})]})]})]}),e&&o.jsx("div",{className:"text-center",children:o.jsx(D,{variant:"ghost",onClick:e,children:"Maybe Later"})})]})]})},bO=()=>{const{user:e}=_e(),{toast:t}=Le(),[r,n]=m.useState({canChange:!1,isFirstTime:!0,isPremium:!1,loading:!0});m.useEffect(()=>{e&&s()},[e]);const s=async()=>{if(e)try{n(d=>({...d,loading:!0}));const{data:a,error:l}=await R.from("profiles").select("username_changed").eq("user_id",e.id).single();if(l)throw l;const{data:c,error:u}=await R.from("subscribers").select("subscribed, subscription_end").eq("user_id",e.id).eq("subscribed",!0).maybeSingle();if(u)throw u;const f=c&&(c.subscription_end===null||new Date(c.subscription_end)>new Date);n({canChange:!a.username_changed,isFirstTime:!a.username_changed,isPremium:!!f,loading:!1})}catch(a){console.error("Error fetching username change data:",a),n(l=>({...l,loading:!1}))}};return{...r,changeUsername:async a=>{if(!e)return!1;try{const{data:l,error:c}=await R.from("profiles").select("username_changed").eq("user_id",e.id).single();if(c)throw c;if(l.username_changed)return t({title:"Cannot Change Username",description:"You've already used your one-time username change.",variant:"destructive"}),!1;if(!a.trim()||a.length<3)return t({title:"Invalid Username",description:"Username must be at least 3 characters long.",variant:"destructive"}),!1;if(a.length>20)return t({title:"Username Too Long",description:"Username must be 20 characters or less.",variant:"destructive"}),!1;const{data:u,error:f}=await R.from("profiles").select("user_id").eq("username",a.trim()).neq("user_id",e.id).maybeSingle();if(f)throw f;if(u)return t({title:"Username Taken",description:"This username is already taken. Please choose another.",variant:"destructive"}),!1;const{error:d}=await R.from("profiles").update({username:a.trim(),username_changed:!0}).eq("user_id",e.id);if(d)throw d;return await s(),t({title:"Username Changed!",description:`Your username has been updated to "${a}". This was your one-time change.`}),!0}catch(l){return console.error("Error changing username:",l),t({title:"Error",description:"Failed to change username. Please try again.",variant:"destructive"}),!1}},refreshChangeData:s}},jO=()=>{const{user:e,signOut:t}=_e(),{toast:r}=Le(),[n,s]=m.useState(!1),i=m.useCallback(async u=>{try{const{data:f,error:d}=await R.from("profiles").select("user_id").eq("user_id",u.toLowerCase().trim()).single();return d&&d.code==="PGRST116"?!0:d?(console.error("Error checking email availability:",d),!0):!1}catch(f){return console.error("Error in checkEmailAvailability:",f),!0}},[]),a=m.useCallback(async u=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(u)?{success:!0}:{success:!1,error:"Please enter a valid email address."},[]),l=m.useCallback(async()=>{if(!(e!=null&&e.id))return{success:!1,error:"No user logged in"};s(!0);try{const{data:u,error:f}=await R.rpc("delete_user_account",{p_user_id:e.id});if(f)return console.error("Error deleting account:",f),r({title:"Deletion Failed",description:`Failed to delete account: ${f.message}`,variant:"destructive"}),{success:!1,error:f.message};const d=u;if(!(d!=null&&d.success))return r({title:"Deletion Failed",description:(d==null?void 0:d.error)||"Failed to delete account",variant:"destructive"}),{success:!1,error:(d==null?void 0:d.error)||"Failed to delete account"};localStorage.removeItem("clearedMessages"),localStorage.clear(),r({title:"Account Deleted",description:"Your account and all associated data have been permanently deleted.",variant:"default"});try{await R.auth.signOut(),setTimeout(()=>{window.location.href="/"},1e3)}catch(h){console.error("Error signing out after deletion:",h),window.location.href="/"}return{success:!0,message:"Account successfully deleted"}}catch(u){return console.error("Error in deleteAccount:",u),{success:!1,error:u.message}}finally{s(!1)}},[e,t,r]),c=m.useCallback(async(u,f)=>{var h,p,g;const d=await a(u);if(!d.success)return d;s(!0);try{await R.auth.signOut(),console.log("📧 Starting fresh signup for:",u.toLowerCase().trim());const{data:v,error:y}=await R.auth.signUp({email:u.toLowerCase().trim(),password:f,options:{emailRedirectTo:`${window.location.origin}/`,data:{email_confirm:!0,signup_timestamp:Date.now()}}});if(y){if(console.error("Signup error:",y),(h=y.message)!=null&&h.includes("already registered")||(p=y.message)!=null&&p.includes("already exists")||(g=y.message)!=null&&g.includes("already in use")){console.log("📧 RESIGNUP DETECTED: Email exists, checking status...");try{const{data:x}=await R.rpc("handle_resignup_verification",{p_email:u.toLowerCase().trim()});x!=null&&x.is_resignup&&console.log("📧 Confirmed re-signup scenario, sending verification...")}catch{console.log("📧 RPC check failed, proceeding with resend...")}console.log("📧 Attempting verification email resend...");try{if(!(await R.auth.resend({type:"signup",email:u.toLowerCase().trim(),options:{emailRedirectTo:`${window.location.origin}/`}})).error)return console.log("✅ Verification email sent via resend"),{success:!0,message:"Verification email sent! Please check your inbox and click the link to verify your account. (This may be a re-signup - check spam folder if needed)"};console.log("📧 Resend failed, attempting fresh signup..."),await new Promise(j=>setTimeout(j,1e3));const{data:w,error:b}=await R.auth.signUp({email:u.toLowerCase().trim(),password:f,options:{emailRedirectTo:`${window.location.origin}/`,data:{retry_signup:!0,signup_timestamp:Date.now()}}});if(!b&&w.user)return console.log("✅ Fresh signup successful"),{success:!0,message:"Account created! Please check your email for verification link."}}catch(x){console.error("All resend methods failed:",x)}return{success:!0,message:"If you previously deleted your account, please check your email for a new verification link. If you have an active account, please use the login page instead."}}return{success:!1,error:y.message}}return v.user?(console.log("📧 User created, email confirmation required:",{id:v.user.id,email:v.user.email,confirmed:!!v.user.email_confirmed_at,session:!!v.session}),{success:!0,message:"Please check your email to confirm your account before continuing. A verification link has been sent to your inbox."}):{success:!0,message:"Account created successfully"}}catch(v){return console.error("Error in signUpWithEmailValidation:",v),{success:!1,error:v.message}}finally{s(!1)}},[a]);return{checkEmailAvailability:i,validateEmailForSignup:a,deleteAccount:l,signUpWithEmailValidation:c,isLoading:n}};function _O(e,t=[]){let r=[];function n(i,a){const l=m.createContext(a),c=r.length;r=[...r,a];function u(d){const{scope:h,children:p,...g}=d,v=(h==null?void 0:h[e][c])||l,y=m.useMemo(()=>g,Object.values(g));return o.jsx(v.Provider,{value:y,children:p})}function f(d,h){const p=(h==null?void 0:h[e][c])||l,g=m.useContext(p);if(g)return g;if(a!==void 0)return a;throw new Error(`\`${d}\` must be used within \`${i}\``)}return u.displayName=i+"Provider",[u,f]}const s=()=>{const i=r.map(a=>m.createContext(a));return function(l){const c=(l==null?void 0:l[e])||i;return m.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return s.scopeName=e,[n,NO(s,...t)]}function NO(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const a=n.reduce((l,{useScope:c,scopeName:u})=>{const d=c(i)[`__scope${u}`];return{...l,...d}},{});return m.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return r.scopeName=t.scopeName,r}var Ip="Progress",Lp=100,[SO,o$]=_O(Ip),[kO,CO]=SO(Ip),Dj=m.forwardRef((e,t)=>{const{__scopeProgress:r,value:n=null,max:s,getValueLabel:i=EO,...a}=e;(s||s===0)&&!Ax(s)&&console.error(PO(`${s}`,"Progress"));const l=Ax(s)?s:Lp;n!==null&&!Mx(n,l)&&console.error(TO(`${n}`,"Progress"));const c=Mx(n,l)?n:null,u=Xc(c)?i(c,l):void 0;return o.jsx(kO,{scope:r,value:c,max:l,children:o.jsx(ie.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":Xc(c)?c:void 0,"aria-valuetext":u,role:"progressbar","data-state":Lj(c,l),"data-value":c??void 0,"data-max":l,...a,ref:t})})});Dj.displayName=Ip;var Oj="ProgressIndicator",Ij=m.forwardRef((e,t)=>{const{__scopeProgress:r,...n}=e,s=CO(Oj,r);return o.jsx(ie.div,{"data-state":Lj(s.value,s.max),"data-value":s.value??void 0,"data-max":s.max,...n,ref:t})});Ij.displayName=Oj;function EO(e,t){return`${Math.round(e/t*100)}%`}function Lj(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function Xc(e){return typeof e=="number"}function Ax(e){return Xc(e)&&!isNaN(e)&&e>0}function Mx(e,t){return Xc(e)&&!isNaN(e)&&e<=t&&e>=0}function PO(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${Lp}\`.`}function TO(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${Lp} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var $j=Dj,RO=Ij;const Yo=m.forwardRef(({className:e,value:t,...r},n)=>o.jsx($j,{ref:n,className:re("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...r,children:o.jsx(RO,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));Yo.displayName=$j.displayName;function AO(e,t=[]){let r=[];function n(i,a){const l=m.createContext(a),c=r.length;r=[...r,a];function u(d){const{scope:h,children:p,...g}=d,v=(h==null?void 0:h[e][c])||l,y=m.useMemo(()=>g,Object.values(g));return o.jsx(v.Provider,{value:y,children:p})}function f(d,h){const p=(h==null?void 0:h[e][c])||l,g=m.useContext(p);if(g)return g;if(a!==void 0)return a;throw new Error(`\`${d}\` must be used within \`${i}\``)}return u.displayName=i+"Provider",[u,f]}const s=()=>{const i=r.map(a=>m.createContext(a));return function(l){const c=(l==null?void 0:l[e])||i;return m.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return s.scopeName=e,[n,MO(s,...t)]}function MO(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const a=n.reduce((l,{useScope:c,scopeName:u})=>{const d=c(i)[`__scope${u}`];return{...l,...d}},{});return m.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return r.scopeName=t.scopeName,r}var nf="rovingFocusGroup.onEntryFocus",DO={bubbles:!1,cancelable:!0},Zu="RovingFocusGroup",[Hh,Uj,OO]=wu(Zu),[IO,ed]=AO(Zu,[OO]),[LO,$O]=IO(Zu),Fj=m.forwardRef((e,t)=>o.jsx(Hh.Provider,{scope:e.__scopeRovingFocusGroup,children:o.jsx(Hh.Slot,{scope:e.__scopeRovingFocusGroup,children:o.jsx(UO,{...e,ref:t})})}));Fj.displayName=Zu;var UO=m.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:s=!1,dir:i,currentTabStopId:a,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:f=!1,...d}=e,h=m.useRef(null),p=je(t,h),g=al(i),[v=null,y]=cn({prop:a,defaultProp:l,onChange:c}),[x,w]=m.useState(!1),b=Ge(u),j=Uj(r),_=m.useRef(!1),[N,S]=m.useState(0);return m.useEffect(()=>{const k=h.current;if(k)return k.addEventListener(nf,b),()=>k.removeEventListener(nf,b)},[b]),o.jsx(LO,{scope:r,orientation:n,dir:g,loop:s,currentTabStopId:v,onItemFocus:m.useCallback(k=>y(k),[y]),onItemShiftTab:m.useCallback(()=>w(!0),[]),onFocusableItemAdd:m.useCallback(()=>S(k=>k+1),[]),onFocusableItemRemove:m.useCallback(()=>S(k=>k-1),[]),children:o.jsx(ie.div,{tabIndex:x||N===0?-1:0,"data-orientation":n,...d,ref:p,style:{outline:"none",...e.style},onMouseDown:Y(e.onMouseDown,()=>{_.current=!0}),onFocus:Y(e.onFocus,k=>{const E=!_.current;if(k.target===k.currentTarget&&E&&!x){const M=new CustomEvent(nf,DO);if(k.currentTarget.dispatchEvent(M),!M.defaultPrevented){const T=j().filter(L=>L.focusable),I=T.find(L=>L.active),G=T.find(L=>L.id===v),O=[I,G,...T].filter(Boolean).map(L=>L.ref.current);Gj(O,f)}}_.current=!1}),onBlur:Y(e.onBlur,()=>w(!1))})})}),zj="RovingFocusGroupItem",Bj=m.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:s=!1,tabStopId:i,...a}=e,l=En(),c=i||l,u=$O(zj,r),f=u.currentTabStopId===c,d=Uj(r),{onFocusableItemAdd:h,onFocusableItemRemove:p}=u;return m.useEffect(()=>{if(n)return h(),()=>p()},[n,h,p]),o.jsx(Hh.ItemSlot,{scope:r,id:c,focusable:n,active:s,children:o.jsx(ie.span,{tabIndex:f?0:-1,"data-orientation":u.orientation,...a,ref:t,onMouseDown:Y(e.onMouseDown,g=>{n?u.onItemFocus(c):g.preventDefault()}),onFocus:Y(e.onFocus,()=>u.onItemFocus(c)),onKeyDown:Y(e.onKeyDown,g=>{if(g.key==="Tab"&&g.shiftKey){u.onItemShiftTab();return}if(g.target!==g.currentTarget)return;const v=BO(g,u.orientation,u.dir);if(v!==void 0){if(g.metaKey||g.ctrlKey||g.altKey||g.shiftKey)return;g.preventDefault();let x=d().filter(w=>w.focusable).map(w=>w.ref.current);if(v==="last")x.reverse();else if(v==="prev"||v==="next"){v==="prev"&&x.reverse();const w=x.indexOf(g.currentTarget);x=u.loop?GO(x,w+1):x.slice(w+1)}setTimeout(()=>Gj(x))}})})})});Bj.displayName=zj;var FO={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function zO(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function BO(e,t,r){const n=zO(e.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return FO[n]}function Gj(e,t=!1){const r=document.activeElement;for(const n of e)if(n===r||(n.focus({preventScroll:t}),document.activeElement!==r))return}function GO(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var Vj=Fj,Hj=Bj,$p="Tabs",[VO,i$]=Nr($p,[ed]),Wj=ed(),[HO,Up]=VO($p),qj=m.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,onValueChange:s,defaultValue:i,orientation:a="horizontal",dir:l,activationMode:c="automatic",...u}=e,f=al(l),[d,h]=cn({prop:n,onChange:s,defaultProp:i});return o.jsx(HO,{scope:r,baseId:En(),value:d,onValueChange:h,orientation:a,dir:f,activationMode:c,children:o.jsx(ie.div,{dir:f,"data-orientation":a,...u,ref:t})})});qj.displayName=$p;var Kj="TabsList",Yj=m.forwardRef((e,t)=>{const{__scopeTabs:r,loop:n=!0,...s}=e,i=Up(Kj,r),a=Wj(r);return o.jsx(Vj,{asChild:!0,...a,orientation:i.orientation,dir:i.dir,loop:n,children:o.jsx(ie.div,{role:"tablist","aria-orientation":i.orientation,...s,ref:t})})});Yj.displayName=Kj;var Qj="TabsTrigger",Xj=m.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,disabled:s=!1,...i}=e,a=Up(Qj,r),l=Wj(r),c=e_(a.baseId,n),u=t_(a.baseId,n),f=n===a.value;return o.jsx(Hj,{asChild:!0,...l,focusable:!s,active:f,children:o.jsx(ie.button,{type:"button",role:"tab","aria-selected":f,"aria-controls":u,"data-state":f?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:c,...i,ref:t,onMouseDown:Y(e.onMouseDown,d=>{!s&&d.button===0&&d.ctrlKey===!1?a.onValueChange(n):d.preventDefault()}),onKeyDown:Y(e.onKeyDown,d=>{[" ","Enter"].includes(d.key)&&a.onValueChange(n)}),onFocus:Y(e.onFocus,()=>{const d=a.activationMode!=="manual";!f&&!s&&d&&a.onValueChange(n)})})})});Xj.displayName=Qj;var Jj="TabsContent",Zj=m.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,forceMount:s,children:i,...a}=e,l=Up(Jj,r),c=e_(l.baseId,n),u=t_(l.baseId,n),f=n===l.value,d=m.useRef(f);return m.useEffect(()=>{const h=requestAnimationFrame(()=>d.current=!1);return()=>cancelAnimationFrame(h)},[]),o.jsx(ht,{present:s||f,children:({present:h})=>o.jsx(ie.div,{"data-state":f?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!h,id:u,tabIndex:0,...a,ref:t,style:{...e.style,animationDuration:d.current?"0s":void 0},children:h&&i})})});Zj.displayName=Jj;function e_(e,t){return`${e}-trigger-${t}`}function t_(e,t){return`${e}-content-${t}`}var WO=qj,r_=Yj,n_=Xj,s_=Zj;const td=WO,ll=m.forwardRef(({className:e,...t},r)=>o.jsx(r_,{ref:r,className:re("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));ll.displayName=r_.displayName;const sr=m.forwardRef(({className:e,...t},r)=>o.jsx(n_,{ref:r,className:re("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));sr.displayName=n_.displayName;const or=m.forwardRef(({className:e,...t},r)=>o.jsx(s_,{ref:r,className:re("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));or.displayName=s_.displayName;function qO(e,t){return m.useReducer((r,n)=>t[r][n]??r,e)}var Fp="ScrollArea",[o_,a$]=Nr(Fp),[KO,Sr]=o_(Fp),i_=m.forwardRef((e,t)=>{const{__scopeScrollArea:r,type:n="hover",dir:s,scrollHideDelay:i=600,...a}=e,[l,c]=m.useState(null),[u,f]=m.useState(null),[d,h]=m.useState(null),[p,g]=m.useState(null),[v,y]=m.useState(null),[x,w]=m.useState(0),[b,j]=m.useState(0),[_,N]=m.useState(!1),[S,k]=m.useState(!1),E=je(t,T=>c(T)),M=al(s);return o.jsx(KO,{scope:r,type:n,dir:M,scrollHideDelay:i,scrollArea:l,viewport:u,onViewportChange:f,content:d,onContentChange:h,scrollbarX:p,onScrollbarXChange:g,scrollbarXEnabled:_,onScrollbarXEnabledChange:N,scrollbarY:v,onScrollbarYChange:y,scrollbarYEnabled:S,onScrollbarYEnabledChange:k,onCornerWidthChange:w,onCornerHeightChange:j,children:o.jsx(ie.div,{dir:M,...a,ref:E,style:{position:"relative","--radix-scroll-area-corner-width":x+"px","--radix-scroll-area-corner-height":b+"px",...e.style}})})});i_.displayName=Fp;var a_="ScrollAreaViewport",l_=m.forwardRef((e,t)=>{const{__scopeScrollArea:r,children:n,asChild:s,nonce:i,...a}=e,l=Sr(a_,r),c=m.useRef(null),u=je(t,c,l.onViewportChange);return o.jsxs(o.Fragment,{children:[o.jsx("style",{dangerouslySetInnerHTML:{__html:`
[data-radix-scroll-area-viewport] {
  scrollbar-width: none;
  -ms-overflow-style: none;
  -webkit-overflow-scrolling: touch;
}
[data-radix-scroll-area-viewport]::-webkit-scrollbar {
  display: none;
}
:where([data-radix-scroll-area-viewport]) {
  display: flex;
  flex-direction: column;
  align-items: stretch;
}
:where([data-radix-scroll-area-content]) {
  flex-grow: 1;
}
`},nonce:i}),o.jsx(ie.div,{"data-radix-scroll-area-viewport":"",...a,asChild:s,ref:u,style:{overflowX:l.scrollbarXEnabled?"scroll":"hidden",overflowY:l.scrollbarYEnabled?"scroll":"hidden",...e.style},children:s3({asChild:s,children:n},f=>o.jsx("div",{"data-radix-scroll-area-content":"",ref:l.onContentChange,style:{minWidth:l.scrollbarXEnabled?"fit-content":void 0},children:f}))})]})});l_.displayName=a_;var fn="ScrollAreaScrollbar",zp=m.forwardRef((e,t)=>{const{forceMount:r,...n}=e,s=Sr(fn,e.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:a}=s,l=e.orientation==="horizontal";return m.useEffect(()=>(l?i(!0):a(!0),()=>{l?i(!1):a(!1)}),[l,i,a]),s.type==="hover"?o.jsx(YO,{...n,ref:t,forceMount:r}):s.type==="scroll"?o.jsx(QO,{...n,ref:t,forceMount:r}):s.type==="auto"?o.jsx(c_,{...n,ref:t,forceMount:r}):s.type==="always"?o.jsx(Bp,{...n,ref:t}):null});zp.displayName=fn;var YO=m.forwardRef((e,t)=>{const{forceMount:r,...n}=e,s=Sr(fn,e.__scopeScrollArea),[i,a]=m.useState(!1);return m.useEffect(()=>{const l=s.scrollArea;let c=0;if(l){const u=()=>{window.clearTimeout(c),a(!0)},f=()=>{c=window.setTimeout(()=>a(!1),s.scrollHideDelay)};return l.addEventListener("pointerenter",u),l.addEventListener("pointerleave",f),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",u),l.removeEventListener("pointerleave",f)}}},[s.scrollArea,s.scrollHideDelay]),o.jsx(ht,{present:r||i,children:o.jsx(c_,{"data-state":i?"visible":"hidden",...n,ref:t})})}),QO=m.forwardRef((e,t)=>{const{forceMount:r,...n}=e,s=Sr(fn,e.__scopeScrollArea),i=e.orientation==="horizontal",a=nd(()=>c("SCROLL_END"),100),[l,c]=qO("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return m.useEffect(()=>{if(l==="idle"){const u=window.setTimeout(()=>c("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(u)}},[l,s.scrollHideDelay,c]),m.useEffect(()=>{const u=s.viewport,f=i?"scrollLeft":"scrollTop";if(u){let d=u[f];const h=()=>{const p=u[f];d!==p&&(c("SCROLL"),a()),d=p};return u.addEventListener("scroll",h),()=>u.removeEventListener("scroll",h)}},[s.viewport,i,c,a]),o.jsx(ht,{present:r||l!=="hidden",children:o.jsx(Bp,{"data-state":l==="hidden"?"hidden":"visible",...n,ref:t,onPointerEnter:Y(e.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:Y(e.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),c_=m.forwardRef((e,t)=>{const r=Sr(fn,e.__scopeScrollArea),{forceMount:n,...s}=e,[i,a]=m.useState(!1),l=e.orientation==="horizontal",c=nd(()=>{if(r.viewport){const u=r.viewport.offsetWidth<r.viewport.scrollWidth,f=r.viewport.offsetHeight<r.viewport.scrollHeight;a(l?u:f)}},10);return xi(r.viewport,c),xi(r.content,c),o.jsx(ht,{present:n||i,children:o.jsx(Bp,{"data-state":i?"visible":"hidden",...s,ref:t})})}),Bp=m.forwardRef((e,t)=>{const{orientation:r="vertical",...n}=e,s=Sr(fn,e.__scopeScrollArea),i=m.useRef(null),a=m.useRef(0),[l,c]=m.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=m_(l.viewport,l.content),f={...n,sizes:l,onSizesChange:c,hasThumb:u>0&&u<1,onThumbChange:h=>i.current=h,onThumbPointerUp:()=>a.current=0,onThumbPointerDown:h=>a.current=h};function d(h,p){return r3(h,a.current,l,p)}return r==="horizontal"?o.jsx(XO,{...f,ref:t,onThumbPositionChange:()=>{if(s.viewport&&i.current){const h=s.viewport.scrollLeft,p=Dx(h,l,s.dir);i.current.style.transform=`translate3d(${p}px, 0, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollLeft=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollLeft=d(h,s.dir))}}):r==="vertical"?o.jsx(JO,{...f,ref:t,onThumbPositionChange:()=>{if(s.viewport&&i.current){const h=s.viewport.scrollTop,p=Dx(h,l);i.current.style.transform=`translate3d(0, ${p}px, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollTop=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollTop=d(h))}}):null}),XO=m.forwardRef((e,t)=>{const{sizes:r,onSizesChange:n,...s}=e,i=Sr(fn,e.__scopeScrollArea),[a,l]=m.useState(),c=m.useRef(null),u=je(t,c,i.onScrollbarXChange);return m.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),o.jsx(d_,{"data-orientation":"horizontal",...s,ref:u,sizes:r,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":rd(r)+"px",...e.style},onThumbPointerDown:f=>e.onThumbPointerDown(f.x),onDragScroll:f=>e.onDragScroll(f.x),onWheelScroll:(f,d)=>{if(i.viewport){const h=i.viewport.scrollLeft+f.deltaX;e.onWheelScroll(h),g_(h,d)&&f.preventDefault()}},onResize:()=>{c.current&&i.viewport&&a&&n({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:Zc(a.paddingLeft),paddingEnd:Zc(a.paddingRight)}})}})}),JO=m.forwardRef((e,t)=>{const{sizes:r,onSizesChange:n,...s}=e,i=Sr(fn,e.__scopeScrollArea),[a,l]=m.useState(),c=m.useRef(null),u=je(t,c,i.onScrollbarYChange);return m.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),o.jsx(d_,{"data-orientation":"vertical",...s,ref:u,sizes:r,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":rd(r)+"px",...e.style},onThumbPointerDown:f=>e.onThumbPointerDown(f.y),onDragScroll:f=>e.onDragScroll(f.y),onWheelScroll:(f,d)=>{if(i.viewport){const h=i.viewport.scrollTop+f.deltaY;e.onWheelScroll(h),g_(h,d)&&f.preventDefault()}},onResize:()=>{c.current&&i.viewport&&a&&n({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:Zc(a.paddingTop),paddingEnd:Zc(a.paddingBottom)}})}})}),[ZO,u_]=o_(fn),d_=m.forwardRef((e,t)=>{const{__scopeScrollArea:r,sizes:n,hasThumb:s,onThumbChange:i,onThumbPointerUp:a,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:u,onWheelScroll:f,onResize:d,...h}=e,p=Sr(fn,r),[g,v]=m.useState(null),y=je(t,E=>v(E)),x=m.useRef(null),w=m.useRef(""),b=p.viewport,j=n.content-n.viewport,_=Ge(f),N=Ge(c),S=nd(d,10);function k(E){if(x.current){const M=E.clientX-x.current.left,T=E.clientY-x.current.top;u({x:M,y:T})}}return m.useEffect(()=>{const E=M=>{const T=M.target;(g==null?void 0:g.contains(T))&&_(M,j)};return document.addEventListener("wheel",E,{passive:!1}),()=>document.removeEventListener("wheel",E,{passive:!1})},[b,g,j,_]),m.useEffect(N,[n,N]),xi(g,S),xi(p.content,S),o.jsx(ZO,{scope:r,scrollbar:g,hasThumb:s,onThumbChange:Ge(i),onThumbPointerUp:Ge(a),onThumbPositionChange:N,onThumbPointerDown:Ge(l),children:o.jsx(ie.div,{...h,ref:y,style:{position:"absolute",...h.style},onPointerDown:Y(e.onPointerDown,E=>{E.button===0&&(E.target.setPointerCapture(E.pointerId),x.current=g.getBoundingClientRect(),w.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",p.viewport&&(p.viewport.style.scrollBehavior="auto"),k(E))}),onPointerMove:Y(e.onPointerMove,k),onPointerUp:Y(e.onPointerUp,E=>{const M=E.target;M.hasPointerCapture(E.pointerId)&&M.releasePointerCapture(E.pointerId),document.body.style.webkitUserSelect=w.current,p.viewport&&(p.viewport.style.scrollBehavior=""),x.current=null})})})}),Jc="ScrollAreaThumb",f_=m.forwardRef((e,t)=>{const{forceMount:r,...n}=e,s=u_(Jc,e.__scopeScrollArea);return o.jsx(ht,{present:r||s.hasThumb,children:o.jsx(e3,{ref:t,...n})})}),e3=m.forwardRef((e,t)=>{const{__scopeScrollArea:r,style:n,...s}=e,i=Sr(Jc,r),a=u_(Jc,r),{onThumbPositionChange:l}=a,c=je(t,d=>a.onThumbChange(d)),u=m.useRef(),f=nd(()=>{u.current&&(u.current(),u.current=void 0)},100);return m.useEffect(()=>{const d=i.viewport;if(d){const h=()=>{if(f(),!u.current){const p=n3(d,l);u.current=p,l()}};return l(),d.addEventListener("scroll",h),()=>d.removeEventListener("scroll",h)}},[i.viewport,f,l]),o.jsx(ie.div,{"data-state":a.hasThumb?"visible":"hidden",...s,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...n},onPointerDownCapture:Y(e.onPointerDownCapture,d=>{const p=d.target.getBoundingClientRect(),g=d.clientX-p.left,v=d.clientY-p.top;a.onThumbPointerDown({x:g,y:v})}),onPointerUp:Y(e.onPointerUp,a.onThumbPointerUp)})});f_.displayName=Jc;var Gp="ScrollAreaCorner",h_=m.forwardRef((e,t)=>{const r=Sr(Gp,e.__scopeScrollArea),n=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&n?o.jsx(t3,{...e,ref:t}):null});h_.displayName=Gp;var t3=m.forwardRef((e,t)=>{const{__scopeScrollArea:r,...n}=e,s=Sr(Gp,r),[i,a]=m.useState(0),[l,c]=m.useState(0),u=!!(i&&l);return xi(s.scrollbarX,()=>{var d;const f=((d=s.scrollbarX)==null?void 0:d.offsetHeight)||0;s.onCornerHeightChange(f),c(f)}),xi(s.scrollbarY,()=>{var d;const f=((d=s.scrollbarY)==null?void 0:d.offsetWidth)||0;s.onCornerWidthChange(f),a(f)}),u?o.jsx(ie.div,{...n,ref:t,style:{width:i,height:l,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function Zc(e){return e?parseInt(e,10):0}function m_(e,t){const r=e/t;return isNaN(r)?0:r}function rd(e){const t=m_(e.viewport,e.content),r=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,n=(e.scrollbar.size-r)*t;return Math.max(n,18)}function r3(e,t,r,n="ltr"){const s=rd(r),i=s/2,a=t||i,l=s-a,c=r.scrollbar.paddingStart+a,u=r.scrollbar.size-r.scrollbar.paddingEnd-l,f=r.content-r.viewport,d=n==="ltr"?[0,f]:[f*-1,0];return p_([c,u],d)(e)}function Dx(e,t,r="ltr"){const n=rd(t),s=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,i=t.scrollbar.size-s,a=t.content-t.viewport,l=i-n,c=r==="ltr"?[0,a]:[a*-1,0],u=Rp(e,c);return p_([0,a],[0,l])(u)}function p_(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const n=(t[1]-t[0])/(e[1]-e[0]);return t[0]+n*(r-e[0])}}function g_(e,t){return e>0&&e<t}var n3=(e,t=()=>{})=>{let r={left:e.scrollLeft,top:e.scrollTop},n=0;return function s(){const i={left:e.scrollLeft,top:e.scrollTop},a=r.left!==i.left,l=r.top!==i.top;(a||l)&&t(),r=i,n=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(n)};function nd(e,t){const r=Ge(e),n=m.useRef(0);return m.useEffect(()=>()=>window.clearTimeout(n.current),[]),m.useCallback(()=>{window.clearTimeout(n.current),n.current=window.setTimeout(r,t)},[r,t])}function xi(e,t){const r=Ge(t);Br(()=>{let n=0;if(e){const s=new ResizeObserver(()=>{cancelAnimationFrame(n),n=window.requestAnimationFrame(r)});return s.observe(e),()=>{window.cancelAnimationFrame(n),s.unobserve(e)}}},[e,r])}function s3(e,t){const{asChild:r,children:n}=e;if(!r)return typeof t=="function"?t(n):t;const s=m.Children.only(n);return m.cloneElement(s,{children:typeof t=="function"?t(s.props.children):t})}var v_=i_,o3=l_,i3=h_;const $r=m.forwardRef(({className:e,children:t,...r},n)=>o.jsxs(v_,{ref:n,className:re("relative overflow-hidden",e),...r,children:[o.jsx(o3,{className:"h-full w-full rounded-[inherit]",children:t}),o.jsx(x_,{}),o.jsx(i3,{})]}));$r.displayName=v_.displayName;const x_=m.forwardRef(({className:e,orientation:t="vertical",...r},n)=>o.jsx(zp,{ref:n,orientation:t,className:re("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...r,children:o.jsx(f_,{className:"relative flex-1 rounded-full bg-border"})}));x_.displayName=zp.displayName;const a3=()=>{const{user:e}=_e(),{karmaProgress:t,enhancedAchievements:r,recentActivity:n,getCurrentBenefits:s,getEstimatedTimeToNextLevel:i,KARMA_LEVELS:a,loading:l}=Op(),[c,u]=m.useState([]),[f,d]=m.useState([]),[h,p]=m.useState(null),[g,v]=m.useState(!0);m.useEffect(()=>{e&&y()},[e]);const y=async()=>{if(e)try{const{data:b}=await R.from("group_members").select(`
          group_id,
          groups!inner(
            id,
            name,
            vibe_label
          )
        `).eq("user_id",e.id).order("joined_at",{ascending:!1}).limit(1).maybeSingle();if(b){p(b.groups);const{data:j}=await R.rpc("get_group_karma_leaderboard");j&&u(j);const{data:_}=await R.rpc("get_group_user_karma_leaderboard",{p_group_id:b.groups.id});_&&d(_)}}catch(b){console.error("Error loading leaderboard data:",b)}finally{v(!1)}};if(l)return o.jsx("div",{className:"space-y-6",children:Array.from({length:3}).map((b,j)=>o.jsx(q,{children:o.jsx(Z,{className:"p-6",children:o.jsxs("div",{className:"animate-pulse space-y-4",children:[o.jsx("div",{className:"h-4 bg-muted rounded w-1/3"}),o.jsx("div",{className:"h-8 bg-muted rounded"}),o.jsx("div",{className:"h-2 bg-muted rounded"})]})})},j))});if(!t)return o.jsx(q,{children:o.jsx(Z,{className:"p-6 text-center",children:o.jsx("p",{className:"text-muted-foreground",children:"No karma data available"})})});const x=f.find(b=>b.user_id===(e==null?void 0:e.id)),w=h?c.find(b=>b.group_id===h.id):null;return o.jsxs("div",{className:"space-y-6",children:[o.jsxs(q,{children:[o.jsxs(ue,{children:[o.jsxs(de,{className:"flex items-center space-x-2",children:[o.jsx(ku,{className:"h-5 w-5"}),o.jsx("span",{children:"Karma Progress"})]}),o.jsx(St,{children:"Your journey through the SyncChat community"})]}),o.jsxs(Z,{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:re("w-12 h-12 rounded-full flex items-center justify-center text-xl font-bold text-white",t.currentLevel.color),children:t.currentLevel.icon}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold",children:t.currentLevel.level}),o.jsxs("p",{className:"text-sm text-muted-foreground",children:[t.totalPoints," karma points"]})]})]}),t.nextLevel&&o.jsxs("div",{className:"text-right",children:[o.jsxs("p",{className:"text-sm font-medium",children:[t.pointsToNext," points to go"]}),o.jsx("p",{className:"text-xs text-muted-foreground",children:i()})]})]}),t.nextLevel&&o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsx("span",{children:t.currentLevel.level}),o.jsx("span",{children:t.nextLevel.level})]}),o.jsx(Yo,{value:t.progress,className:"h-3"}),o.jsxs("p",{className:"text-xs text-center text-muted-foreground",children:[Math.round(t.progress),"% complete"]})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-semibold mb-2",children:"Current Benefits"}),o.jsx("div",{className:"flex flex-wrap gap-2",children:s().map((b,j)=>o.jsx(le,{variant:"secondary",className:"text-xs",children:b},j))})]}),o.jsx("p",{className:"text-sm text-muted-foreground italic",children:t.currentLevel.description})]})]}),o.jsxs(td,{defaultValue:"achievements",className:"w-full",children:[o.jsxs(ll,{className:"grid w-full grid-cols-4",children:[o.jsx(sr,{value:"achievements",children:"Achievements"}),o.jsx(sr,{value:"activity",children:"Activity"}),o.jsx(sr,{value:"group",children:"Group Ranking"}),o.jsx(sr,{value:"global",children:"Global"})]}),o.jsx(or,{value:"achievements",className:"space-y-4",children:o.jsxs(q,{children:[o.jsxs(ue,{children:[o.jsxs(de,{className:"flex items-center space-x-2",children:[o.jsx(UE,{className:"h-5 w-5"}),o.jsx("span",{children:"Your Achievements"})]}),o.jsxs(St,{children:[r.length," achievements unlocked"]})]}),o.jsx(Z,{children:r.length>0?o.jsx($r,{className:"h-64",children:o.jsx("div",{className:"space-y-3",children:r.map(b=>o.jsxs("div",{className:"flex items-center space-x-3 p-3 rounded-lg border",children:[o.jsx("div",{className:"text-2xl",children:b.badge_icon}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h4",{className:"font-semibold",children:b.achievement_title}),o.jsx("p",{className:"text-sm text-muted-foreground",children:b.achievement_description}),o.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[o.jsxs(le,{variant:"outline",className:"text-xs",children:[b.points," points"]}),o.jsx(le,{variant:"secondary",className:re("text-xs",b.rarity==="legendary"&&"bg-yellow-100 text-yellow-800",b.rarity==="epic"&&"bg-purple-100 text-purple-800",b.rarity==="rare"&&"bg-blue-100 text-blue-800",b.rarity==="common"&&"bg-gray-100 text-gray-800"),children:b.rarity}),o.jsx(le,{variant:"outline",className:"text-xs",children:b.category})]})]}),o.jsx("div",{className:"text-xs text-muted-foreground",children:new Date(b.unlocked_at).toLocaleDateString()})]},b.id))})}):o.jsx("p",{className:"text-center text-muted-foreground py-8",children:"Start participating to unlock achievements!"})})]})}),o.jsx(or,{value:"activity",className:"space-y-4",children:o.jsxs(q,{children:[o.jsxs(ue,{children:[o.jsxs(de,{className:"flex items-center space-x-2",children:[o.jsx(rb,{className:"h-5 w-5"}),o.jsx("span",{children:"Recent Activity"})]}),o.jsx(St,{children:"Your latest karma-earning activities"})]}),o.jsx(Z,{children:n.length>0?o.jsx($r,{className:"h-64",children:o.jsx("div",{className:"space-y-3",children:n.map((b,j)=>o.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsxs("div",{className:"text-lg",children:[b.type==="message"&&"💬",b.type==="reaction"&&"👍",b.type==="voice"&&"🎤",b.type==="game"&&"🎮",b.type==="achievement"&&"🏆"]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium",children:b.description}),o.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(b.timestamp).toLocaleString()})]})]}),o.jsxs("div",{className:"text-right",children:[o.jsxs("p",{className:"text-sm font-semibold text-green-600",children:["+",b.points," karma"]}),b.multiplier&&b.multiplier>1&&o.jsxs("p",{className:"text-xs text-yellow-600",children:["×",b.multiplier," multiplier"]})]})]},j))})}):o.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No recent activity. Start chatting to earn karma!"})})]})}),o.jsxs(or,{value:"group",className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[h&&x&&o.jsxs(q,{children:[o.jsxs(ue,{children:[o.jsxs(de,{className:"flex items-center space-x-2",children:[o.jsx(eb,{className:"h-5 w-5"}),o.jsx("span",{children:"Your Group Rank"})]}),o.jsxs(St,{children:["In ",h.name]})]}),o.jsx(Z,{children:o.jsxs("div",{className:"text-center space-y-2",children:[o.jsxs("div",{className:"text-3xl font-bold text-primary",children:["#",x.rank]}),o.jsxs("p",{className:"text-sm text-muted-foreground",children:[x.karma_contributed," karma contributed"]})]})})]}),h&&w&&o.jsxs(q,{children:[o.jsxs(ue,{children:[o.jsxs(de,{className:"flex items-center space-x-2",children:[o.jsx(gs,{className:"h-5 w-5"}),o.jsx("span",{children:"Group Global Rank"})]}),o.jsx(St,{children:h.name})]}),o.jsx(Z,{children:o.jsxs("div",{className:"text-center space-y-2",children:[o.jsxs("div",{className:"text-3xl font-bold text-primary",children:["#",w.rank]}),o.jsxs("p",{className:"text-sm text-muted-foreground",children:[w.monthly_karma_points," karma this month"]})]})})]})]}),f.length>0&&o.jsxs(q,{children:[o.jsxs(ue,{children:[o.jsx(de,{children:"Group Leaderboard"}),o.jsx(St,{children:"Top contributors this month"})]}),o.jsx(Z,{children:o.jsx($r,{className:"h-48",children:o.jsx("div",{className:"space-y-2",children:f.slice(0,10).map(b=>o.jsxs("div",{className:re("flex items-center justify-between p-2 rounded",b.user_id===(e==null?void 0:e.id)&&"bg-primary/10"),children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:re("w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold",b.rank<=3?"bg-yellow-100 text-yellow-800":"bg-muted"),children:b.rank}),o.jsx("span",{className:"font-medium",children:b.username})]}),o.jsxs("span",{className:"text-sm text-muted-foreground",children:[b.karma_contributed," karma"]})]},b.user_id))})})})]})]}),o.jsx(or,{value:"global",className:"space-y-4",children:o.jsxs(q,{children:[o.jsxs(ue,{children:[o.jsxs(de,{className:"flex items-center space-x-2",children:[o.jsx(vt,{className:"h-5 w-5"}),o.jsx("span",{children:"Global Group Rankings"})]}),o.jsx(St,{children:"Top performing groups this month"})]}),o.jsx(Z,{children:!g&&c.length>0?o.jsx($r,{className:"h-64",children:o.jsx("div",{className:"space-y-2",children:c.slice(0,20).map(b=>o.jsxs("div",{className:re("flex items-center justify-between p-3 rounded-lg border",h&&b.group_id===h.id&&"bg-primary/10 border-primary/20"),children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:re("w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold",b.rank<=3?"bg-yellow-100 text-yellow-800":"bg-muted"),children:b.rank}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium",children:b.group_name}),o.jsxs("p",{className:"text-xs text-muted-foreground",children:[b.member_count," members"]})]})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("p",{className:"font-semibold",children:b.monthly_karma_points}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"karma this month"})]})]},b.group_id))})}):g?o.jsxs("div",{className:"text-center py-8",children:[o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto"}),o.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Loading leaderboard..."})]}):o.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No groups competing yet this month!"})})]})})]})]})},l3=({className:e,onGoHome:t})=>{var Ft,Wr,hn;const{user:r}=_e(),{isPremium:n,premium:s}=co(),{engagement:i}=dn(),{karmaProgress:a,enhancedAchievements:l}=Op(),{privateChats:c}=yO(),{canChange:u,isFirstTime:f,isPremium:d,changeUsername:h}=bO(),{deleteAccount:p,isLoading:g}=jO(),[v,y]=m.useState(!1),[x,w]=m.useState(null),[b,j]=m.useState(null),[_,N]=m.useState(!1),[S,k]=m.useState([]),[E,M]=m.useState(""),[T,I]=m.useState(!1),[G,F]=m.useState(!0),[O,L]=m.useState(!1),[z,C]=m.useState(""),[P,H]=m.useState(!0),[$,W]=m.useState(!1),[X,fe]=m.useState(5),[ye,se]=m.useState("😊"),[ce,$e]=m.useState(!1),[Ce,Fe]=m.useState(null);m.useEffect(()=>{r&&Ke()},[r]);const Ke=async()=>{if(r)try{const{data:ee}=await R.from("profiles").select("*").eq("user_id",r.id).single();ee&&(w(ee),k([...ee.genres]),fe(ee.daily_mood||5),se(ee.mood_emoji||"😊"),$e(ee.show_mood_emoji||!1),Fe(ee.last_mood_update||null),H(ee.show_online_status!==!1));const{data:Re}=await R.from("group_members").select(`
          group_id,
          groups!inner(
            id,
            name,
            vibe_label,
            created_at,
            lifecycle_stage
          )
        `).eq("user_id",r.id).eq("groups.lifecycle_stage","active").order("joined_at",{ascending:!1}).limit(1).maybeSingle();Re&&j(Re.groups)}catch(ee){console.error("Error loading user data:",ee)}finally{F(!1)}},Ut=async()=>{if(!(!r||!x))try{const{error:ee}=await R.from("profiles").update({genres:S}).eq("user_id",r.id);if(ee)throw ee;w({...x,genres:S}),N(!1),Rt({title:"Vibe Tags Updated",description:"Your preferences have been saved successfully."})}catch(ee){console.error("Error updating tags:",ee),Rt({title:"Error",description:"Failed to update your vibe tags. Please try again.",variant:"destructive"})}},ne=()=>{E.trim()&&!S.includes(E.trim())&&S.length<5&&(k([...S,E.trim()]),M(""))},Et=ee=>{k(S.filter(Re=>Re!==ee))},Te=async()=>{if(!z.trim()){Rt({title:"Invalid Username",description:"Please enter a valid username.",variant:"destructive"});return}await h(z)&&(await Ke(),L(!1),C(""))},Ne=ee=>ee<=2?"😢":ee<=4?"😐":ee<=6?"😊":ee<=8?"😄":"🤩",xt=async ee=>{if(!(!r||!x))try{const Re=Ne(ee),at=new Date().toISOString().split("T")[0],{error:mn}=await R.from("profiles").update({daily_mood:ee,mood_emoji:Re,last_mood_update:at}).eq("user_id",r.id);if(mn)throw mn;fe(ee),se(Re),Fe(at),w({...x,daily_mood:ee,mood_emoji:Re,last_mood_update:at}),W(!1),Rt({title:"Daily Mood Updated",description:`Your mood has been set to ${Re}`})}catch(Re){console.error("Error updating mood:",Re),Rt({title:"Error",description:"Failed to update your mood. Please try again.",variant:"destructive"})}},it=async()=>{if(!(!r||!x))try{const ee=!ce,{error:Re}=await R.from("profiles").update({show_mood_emoji:ee}).eq("user_id",r.id);if(Re)throw Re;$e(ee),w({...x,show_mood_emoji:ee}),Rt({title:ce?"Mood Hidden":"Mood Visible",description:ce?"Your mood emoji is now hidden from others.":"Your mood emoji will now be visible next to your name."})}catch(ee){console.error("Error updating mood display:",ee),Rt({title:"Error",description:"Failed to update mood display settings.",variant:"destructive"})}},Se=async()=>{if(r)try{const{error:ee}=await R.from("profiles").update({show_online_status:!P,last_seen_at:new Date().toISOString()}).eq("user_id",r.id);if(ee)throw ee;H(!P),Rt({title:"Online Status Updated",description:P?"You're now invisible to others":"You're now visible to others"})}catch(ee){console.error("Error updating online status:",ee),Rt({title:"Error",description:"Failed to update online status",variant:"destructive"})}},Je=ee=>ee>=1e3?{level:"Legend",icon:"👑",color:"bg-gradient-to-r from-yellow-400 to-orange-500"}:ee>=500?{level:"Expert",icon:"⭐",color:"bg-gradient-to-r from-blue-400 to-purple-500"}:ee>=100?{level:"Rising",icon:"🔥",color:"bg-gradient-to-r from-green-400 to-blue-500"}:{level:"Newcomer",icon:"🌱",color:"bg-gradient-to-r from-gray-400 to-gray-600"};if(G)return o.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:o.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary"})});if(!x)return o.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:o.jsx(q,{className:"w-96",children:o.jsx(Z,{className:"p-6 text-center",children:o.jsx("p",{className:"text-muted-foreground",children:"No profile found. Please complete onboarding first."})})})});const kr=a?a.currentLevel:Je((i==null?void 0:i.achievement_points)||0);return c!=null&&c.length,o.jsxs("div",{className:`min-h-screen bg-background p-4 ${e}`,children:[o.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[o.jsx("div",{className:"flex justify-start",children:o.jsxs(D,{variant:"outline",onClick:t||(()=>console.log("Go home clicked")),className:"flex items-center gap-2 hover-scale",children:[o.jsx(Ia,{className:"w-4 h-4"}),"Home"]})}),o.jsxs(q,{className:"overflow-hidden",children:[o.jsx("div",{className:`h-24 ${kr.color}`}),o.jsx(Z,{className:"p-6 -mt-12",children:o.jsxs("div",{className:"flex flex-col items-center text-center",children:[o.jsx("div",{className:"w-20 h-20 bg-card rounded-full border-4 border-background flex items-center justify-center text-3xl mb-4",children:((Wr=(Ft=x.username)==null?void 0:Ft.charAt(0))==null?void 0:Wr.toUpperCase())||"?"}),o.jsxs("h1",{className:"text-2xl font-bold text-card-foreground mb-2 flex items-center gap-2",children:[x.username,o.jsxs(Ht,{open:O,onOpenChange:L,children:[o.jsx(xa,{asChild:!0,children:o.jsx(D,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",disabled:!u,onClick:()=>C(x.username),children:o.jsx($c,{className:"w-3 h-3"})})}),o.jsxs(Dt,{children:[o.jsxs(nr,{children:[o.jsx(qt,{children:"Change Username"}),o.jsx(as,{children:f?"This is your one-time username change opportunity.":d?"Premium users can change their username once per month.":"You've already used your username change."})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx(ut,{placeholder:"Enter new username",value:z,onChange:ee=>C(ee.target.value),maxLength:20}),o.jsxs("div",{className:"flex justify-end gap-2",children:[o.jsx(D,{variant:"outline",onClick:()=>L(!1),children:"Cancel"}),o.jsx(D,{onClick:Te,children:"Change Username"})]})]})]})]})]}),o.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[o.jsxs(le,{variant:"secondary",className:"flex items-center gap-1",children:[o.jsx("span",{className:"text-lg",children:kr.icon}),kr.level]}),n&&o.jsxs(le,{className:"bg-gradient-to-r from-yellow-400 to-orange-500 text-white flex items-center gap-1",children:[o.jsx(dt,{className:"w-3 h-3"}),"Premium"]})]}),b&&o.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[o.jsx(vt,{className:"w-4 h-4"}),o.jsxs("span",{children:["Active in: ",o.jsx("strong",{children:b.name})," ",b.vibe_label]})]})]})})]}),o.jsxs(q,{children:[o.jsx(ue,{children:o.jsxs(de,{className:"flex items-center gap-2",children:[o.jsx(ku,{className:"w-5 h-5"}),"Your Stats"]})}),o.jsxs(Z,{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-primary",children:(a==null?void 0:a.totalPoints)||(i==null?void 0:i.achievement_points)||0}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Karma"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-primary",children:(i==null?void 0:i.daily_streak)||0}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"Day Streak"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-primary",children:(l==null?void 0:l.length)||0}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"Achievements"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-primary",children:(i==null?void 0:i.messages_sent_today)||0}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"Messages Today"})]})]})]}),a&&o.jsxs(q,{children:[o.jsx(ue,{children:o.jsxs(de,{className:"flex items-center gap-2",children:[o.jsx(mi,{className:"w-5 h-5"}),"Karma Progress"]})}),o.jsxs(Z,{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center text-lg font-bold text-white ${a.currentLevel.color}`,children:a.currentLevel.icon}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold",children:a.currentLevel.level}),o.jsxs("p",{className:"text-sm text-muted-foreground",children:[a.totalPoints," points"]})]})]}),a.nextLevel&&o.jsxs("div",{className:"text-right",children:[o.jsxs("p",{className:"text-sm font-medium",children:[a.pointsToNext," to go"]}),o.jsxs("p",{className:"text-xs text-muted-foreground",children:["Next: ",a.nextLevel.level]})]})]}),a.nextLevel&&o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsx("span",{children:a.currentLevel.level}),o.jsx("span",{children:a.nextLevel.level})]}),o.jsx("div",{className:"w-full bg-secondary rounded-full h-2",children:o.jsx("div",{className:"bg-primary h-2 rounded-full transition-all duration-300",style:{width:`${a.progress}%`}})}),o.jsxs("p",{className:"text-xs text-center text-muted-foreground",children:[Math.round(a.progress),"% complete"]})]})]})]}),o.jsxs(td,{defaultValue:"overview",className:"w-full",children:[o.jsxs(ll,{className:"grid w-full grid-cols-3",children:[o.jsx(sr,{value:"overview",children:"Overview"}),o.jsxs(sr,{value:"karma",children:[o.jsx(gs,{className:"w-4 h-4 mr-2"}),"Karma"]}),o.jsx(sr,{value:"settings",children:"Settings"})]}),o.jsxs(or,{value:"overview",className:"space-y-6 mt-6",children:[o.jsxs(q,{children:[o.jsx(ue,{children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs(de,{className:"flex items-center gap-2",children:[o.jsx(Zw,{className:"w-5 h-5"}),"Daily Mood"]}),o.jsxs(Ht,{open:$,onOpenChange:W,children:[o.jsx(xa,{asChild:!0,children:o.jsxs(D,{variant:"outline",size:"sm",children:[o.jsx(kv,{className:"w-4 h-4 mr-1"}),"Update"]})}),o.jsxs(Dt,{children:[o.jsxs(nr,{children:[o.jsx(qt,{children:"Update Your Daily Mood"}),o.jsx(as,{children:"How are you feeling right now? You can update this anytime."})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-6xl mb-4",children:Ne(X)}),o.jsx("div",{className:"text-xl font-semibold mb-2",children:X<=2?"Low Energy":X<=4?"Mellow":X<=6?"Good":X<=8?"Great":"Amazing!"})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx(Ej,{value:[X],onValueChange:ee=>fe(ee[0]),max:10,min:1,step:1,className:"w-full"}),o.jsxs("div",{className:"flex justify-between text-sm text-muted-foreground",children:[o.jsx("span",{children:"😢 Low"}),o.jsxs("span",{className:"font-medium text-foreground",children:[X,"/10"]}),o.jsx("span",{children:"🤩 Amazing"})]})]}),o.jsxs("div",{className:"flex justify-end gap-2",children:[o.jsx(D,{variant:"outline",onClick:()=>W(!1),children:"Cancel"}),o.jsx(D,{onClick:()=>xt(X),children:"Update Mood"})]})]})]})]})]})}),o.jsx(Z,{children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:"text-4xl",children:ye}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium",children:X<=2?"Low Energy":X<=4?"Mellow":X<=6?"Good":X<=8?"Great":"Amazing!"}),o.jsx("div",{className:"text-sm text-muted-foreground",children:Ce?`Last updated: ${new Date(Ce).toLocaleDateString()}`:"Not set yet"})]})]}),o.jsxs(le,{variant:"secondary",children:[X,"/10"]})]}),o.jsx(mr,{}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx("div",{className:"text-sm font-medium",children:"Show mood emoji next to name"}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"Others will see your mood emoji when you send messages"})]}),o.jsx(kn,{checked:ce,onCheckedChange:it})]}),ce&&o.jsxs("div",{className:"bg-muted/30 p-3 rounded-lg",children:[o.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Preview:"}),o.jsxs("div",{className:"font-medium",children:[x.username," ",ye]})]})]})})]}),o.jsxs(q,{children:[o.jsx(ue,{children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs(de,{className:"flex items-center gap-2",children:[o.jsx(mi,{className:"w-5 h-5"}),"Your Vibe Tags"]}),o.jsxs(Ht,{open:_,onOpenChange:N,children:[o.jsx(xa,{asChild:!0,children:o.jsxs(D,{variant:"outline",size:"sm",children:[o.jsx(kv,{className:"w-4 h-4 mr-1"}),"Edit"]})}),o.jsxs(Dt,{children:[o.jsxs(nr,{children:[o.jsx(qt,{children:"Edit Your Vibe Tags"}),o.jsx(as,{children:"Add up to 5 tags that represent your interests and vibes."})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("div",{className:"flex flex-wrap gap-2",children:S.map((ee,Re)=>o.jsxs(le,{variant:"secondary",className:"flex items-center gap-1",children:[ee,o.jsx(D,{variant:"ghost",size:"sm",className:"h-auto p-0 w-4 h-4 ml-1",onClick:()=>Et(ee),children:o.jsx(ao,{className:"w-3 h-3"})})]},Re))}),S.length<5&&o.jsxs("div",{className:"flex gap-2",children:[o.jsx(ut,{placeholder:"Add a vibe tag...",value:E,onChange:ee=>M(ee.target.value),onKeyPress:ee=>ee.key==="Enter"&&ne()}),o.jsx(D,{onClick:ne,children:o.jsx(Nu,{className:"w-4 h-4"})})]}),o.jsxs("div",{className:"flex justify-end gap-2",children:[o.jsx(D,{variant:"outline",onClick:()=>N(!1),children:"Cancel"}),o.jsx(D,{onClick:Ut,children:"Save Changes"})]})]})]})]})]})}),o.jsx(Z,{children:o.jsx("div",{className:"flex flex-wrap gap-2",children:((hn=x.genres)==null?void 0:hn.length)>0?x.genres.map((ee,Re)=>o.jsx(le,{variant:"secondary",children:ee},Re)):o.jsx("p",{className:"text-muted-foreground text-sm",children:"No vibe tags set. Click Edit to add some!"})})})]}),o.jsxs(q,{children:[o.jsx(ue,{children:o.jsx(de,{children:"Quick Actions"})}),o.jsxs(Z,{className:"space-y-3",children:[o.jsxs(D,{variant:"outline",className:"w-full justify-start",onClick:()=>{Rt({title:"Direct Messaging",description:"Use the DM button in your group chat to send direct messages to group members."})},children:[o.jsx(vt,{className:"w-4 h-4 mr-2"}),"Direct Messaging Info"]}),!n&&o.jsxs(o.Fragment,{children:[o.jsx(mr,{}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("h4",{className:"font-medium text-sm",children:"Upgrade to Premium"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Unlock unlimited group switches, direct messaging, and more!"}),o.jsxs(D,{className:"w-full",onClick:()=>I(!0),children:[o.jsx(dt,{className:"w-4 h-4 mr-2"}),"Upgrade Now"]})]})]}),n&&s&&o.jsxs(o.Fragment,{children:[o.jsx(mr,{}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("h4",{className:"font-medium text-sm flex items-center gap-2",children:[o.jsx(dt,{className:"w-4 h-4 text-yellow-500"}),"Premium Active"]}),o.jsx("p",{className:"text-xs text-muted-foreground",children:s.subscription_end?`Renews on ${new Date(s.subscription_end).toLocaleDateString()}`:"Active subscription"})]})]})]})]}),b&&o.jsxs(q,{children:[o.jsx(ue,{children:o.jsxs(de,{className:"flex items-center gap-2",children:[o.jsx(Vw,{className:"w-5 h-5"}),"Recent Activity"]})}),o.jsx(Z,{children:o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsx("span",{className:"text-muted-foreground",children:"Current Group:"}),o.jsx("span",{className:"font-medium",children:b.name})]}),o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsx("span",{className:"text-muted-foreground",children:"Joined:"}),o.jsx("span",{className:"font-medium",children:new Date(b.created_at).toLocaleDateString()})]}),o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsx("span",{className:"text-muted-foreground",children:"Vibe:"}),o.jsx("span",{className:"font-medium",children:b.vibe_label})]})]})})]})]}),o.jsx(or,{value:"karma",className:"mt-6",children:o.jsx(a3,{})}),o.jsxs(or,{value:"settings",className:"space-y-6 mt-6",children:[o.jsxs(q,{children:[o.jsxs(ue,{children:[o.jsxs(de,{className:"flex items-center gap-2",children:[o.jsx($c,{className:"w-5 h-5"}),"Profile Settings"]}),o.jsx(St,{children:"Manage your account preferences and privacy settings"})]}),o.jsxs(Z,{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium",children:"Email Notifications"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Receive notifications via email"})]}),o.jsx(kn,{defaultChecked:!0})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium",children:"Show Online Status"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Let others see when you're online"})]}),o.jsx(kn,{checked:P,onCheckedChange:Se})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium",children:"Public Profile"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Make your profile visible to other users"})]}),o.jsx(kn,{defaultChecked:!0})]})]})]}),o.jsxs(q,{className:"border-destructive/20",children:[o.jsxs(ue,{children:[o.jsxs(de,{className:"flex items-center gap-2 text-destructive",children:[o.jsx(On,{className:"w-5 h-5"}),"Danger Zone"]}),o.jsx(St,{children:"Irreversible and destructive actions"})]}),o.jsx(Z,{children:o.jsx("div",{className:"space-y-4",children:o.jsx("div",{className:"p-4 border border-destructive/20 rounded-lg",children:o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx("h4",{className:"font-medium text-destructive",children:"Delete Account"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Permanently delete your account and all associated data. This action cannot be undone."})]}),o.jsxs(D,{variant:"destructive",size:"sm",onClick:()=>y(!0),disabled:g,className:"ml-4",children:[o.jsx(tb,{className:"w-4 h-4 mr-2"}),"Delete Account"]})]})})})})]}),o.jsx(Ht,{open:v,onOpenChange:y,children:o.jsxs(Dt,{children:[o.jsxs(nr,{children:[o.jsxs(qt,{className:"flex items-center gap-2 text-destructive",children:[o.jsx(On,{className:"w-5 h-5"}),"Delete Account"]}),o.jsx(as,{children:"This action cannot be undone. This will permanently delete your account and remove all your data from our servers."})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"p-4 bg-destructive/10 rounded-lg",children:[o.jsx("h4",{className:"font-medium text-destructive mb-2",children:"What will be deleted:"}),o.jsxs("ul",{className:"text-sm space-y-1 text-muted-foreground",children:[o.jsx("li",{children:"• Your profile and account information"}),o.jsx("li",{children:"• All your messages and chat history"}),o.jsx("li",{children:"• Your karma points and achievements"}),o.jsx("li",{children:"• Any premium features and subscriptions"}),o.jsx("li",{children:"• All associated data and preferences"})]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(D,{variant:"outline",onClick:()=>y(!1),className:"flex-1",children:"Cancel"}),o.jsx(D,{variant:"destructive",onClick:async()=>{(await p()).success&&(y(!1),setTimeout(()=>{t&&t()},500))},disabled:g,className:"flex-1",children:g?"Deleting...":"Delete Account"})]})]})]})})]})]})]}),o.jsx(Ht,{open:T,onOpenChange:I,children:o.jsx(Dt,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:o.jsx(wO,{onClose:()=>I(!1)})})})]})},c3=()=>{const{user:e}=_e(),{toast:t}=Le(),[r,n]=m.useState(null),[s,i]=m.useState(!1),a=async()=>{if(e!=null&&e.id){i(!0);try{const{data:u,error:f}=await R.from("profiles").select("username, created_at").eq("user_id",e.id).single(),d=localStorage.getItem("incomplete_signup_time"),h=e.created_at||d||new Date().toISOString(),p=Math.floor((new Date().getTime()-new Date(h).getTime())/(1e3*60*60*24)),g=!u||!u.username||u.username.trim()==="",v=Math.max(0,3-p),y=g&&p>=3,x=g&&p>=2;n({daysLeft:v,willBeDeleted:y,isAtRisk:x}),y&&g?t({title:"Account will be deleted!",description:"Your account is scheduled for deletion due to incomplete setup. Complete your profile now to keep your account.",variant:"destructive"}):x&&g&&t({title:"Account deletion warning",description:`You have ${v} day${v!==1?"s":""} left to complete your profile setup before your account is automatically deleted.`,variant:"destructive"})}catch(u){console.error("Error checking account status:",u)}finally{i(!1)}}},l=async u=>{if(!(e!=null&&e.id))return{success:!1,error:"No user found"};try{const{data:f,error:d}=await R.rpc("extend_account_by_completing_onboarding",{p_user_id:e.id,p_username:u.username,p_genres:u.genres,p_personality:u.personality,p_habits:u.habits});if(d)throw d;return f!=null&&f.success?(localStorage.removeItem("incomplete_signup_time"),localStorage.removeItem("onboarding_skipped"),await a(),t({title:"Account secured!",description:"Your account is now complete and will not be automatically deleted."}),{success:!0}):{success:!1,error:(f==null?void 0:f.error)||"Failed to extend account"}}catch(f){return console.error("Error extending account:",f),{success:!1,error:f.message}}},c=()=>{localStorage.setItem("cleanup_warning_shown",new Date().toISOString()),n(null)};return m.useEffect(()=>{if(e){const u=localStorage.getItem("cleanup_warning_shown");(u?(new Date().getTime()-new Date(u).getTime())/(1e3*60*60):25)>=24&&a()}},[e==null?void 0:e.id]),{cleanupWarning:r,isLoading:s,checkAccountStatus:a,extendAccountByCompleting:l,dismissWarning:c}},u3={terms:{title:"Terms of Service",emoji:"📜",content:`
**Terms of Service**

Last updated: ${new Date().toLocaleDateString()}

**1. Acceptance of Terms**
By using SyncChat, you confirm that you are at least 13 years old and agree to these Terms of Service.

**2. Service Description**
SyncChat is a social platform that connects users in group chats based on shared interests and preferences.

**3. User Conduct**
- Be respectful to all community members
- No harassment, bullying, or inappropriate content
- No spam or promotional content
- Follow all applicable laws

**4. Account Responsibility**
- You are responsible for your account security
- One account per person
- Accurate information required

**5. Privacy**
- We collect minimal data necessary for the service
- Your conversations are private within your matched groups
- We may moderate content for safety

**6. Intellectual Property**
- You retain rights to your content
- You grant us license to operate the service
- Respect others' intellectual property

**7. Termination**
We may terminate accounts that violate these terms.

**8. Changes to Terms**
We may update these terms with notice to users.

**9. Contact**
For questions about these terms, contact us through the app.
    `},privacy:{title:"Privacy Policy",emoji:"🔐",content:`
**Privacy Policy**

Last updated: ${new Date().toLocaleDateString()}

**1. Information We Collect**
- Account information (email, username)
- Profile preferences (genres, personality traits, habits)
- Chat messages within groups
- Usage analytics (anonymous)

**2. How We Use Information**
- To match you with compatible groups
- To improve our matching algorithm
- To ensure platform safety and security
- To provide customer support

**3. Information Sharing**
- We do not sell your personal data
- Your profile is only visible to matched group members
- We may share anonymized data for research
- Legal compliance when required

**4. Data Storage**
- Your data is stored securely on our servers
- Messages are encrypted in transit
- Regular security audits and updates

**5. Your Rights**
- Access your data
- Correct inaccurate information
- Delete your account and data
- Data portability upon request

**6. Children's Privacy**
- Users must be 13 or older
- No collection of data from children under 13
- Parental consent may be required for users under 18

**7. Cookies and Tracking**
- We use essential cookies for functionality
- No third-party advertising cookies
- You can control cookie preferences

**8. International Users**
- Data may be processed in different countries
- Same privacy protections apply globally

**9. Changes to Policy**
We will notify users of any material changes to this policy.

**10. Contact Us**
For privacy questions, contact us through the app settings.
    `},community:{title:"Community Guidelines",emoji:"🧭",content:`
**Community Guidelines**

Welcome to SyncChat! These guidelines help maintain a positive environment for everyone.

**Our Values**
- Respect and kindness
- Authentic connections
- Safe and inclusive space
- Meaningful conversations

**Expected Behavior**
- Treat all members with respect
- Be authentic in your interactions
- Listen actively and engage thoughtfully
- Help create a welcoming environment

**Prohibited Behavior**
- Harassment, bullying, or threats
- Hate speech or discrimination
- Sharing inappropriate content
- Spam or excessive self-promotion
- Impersonation or fake accounts
- Sharing personal information of others

**Content Guidelines**
- Keep conversations relevant to your group
- No explicit or inappropriate content
- Respect intellectual property
- No commercial solicitations

**Reporting and Enforcement**
- Report violations using the report feature
- We investigate all reports promptly
- Violations may result in warnings or account suspension
- Serious violations may result in permanent bans

**Group Dynamics**
- Participate actively in your groups
- Be open to different perspectives
- Resolve conflicts respectfully
- Support group decisions

**Privacy and Safety**
- Don't share personal information publicly
- Use the block feature if needed
- Report suspicious or harmful behavior
- Keep conversations within the platform

**Consequences**
- First violation: Warning
- Repeated violations: Temporary suspension
- Serious violations: Permanent ban
- Appeals process available

**Getting Help**
- Use in-app reporting tools
- Contact support through settings
- Community moderators are available

Together, we create a space where authentic connections flourish!
    `}},Qo=({policyType:e,trigger:t,asExternal:r=!1})=>{const n=u3[e];return r?o.jsxs(D,{variant:"link",className:"h-auto p-0 text-primary hover:text-primary/80",onClick:()=>window.open(`#${e}`,"_blank"),children:[t,o.jsx(Ym,{className:"w-3 h-3 ml-1"})]}):o.jsxs(Ht,{children:[o.jsx(xa,{asChild:!0,children:t}),o.jsxs(Dt,{className:"max-w-2xl max-h-[80vh]",children:[o.jsx(nr,{children:o.jsxs(qt,{className:"flex items-center gap-2",children:[o.jsx("span",{children:n.emoji}),n.title]})}),o.jsx($r,{className:"h-[60vh] pr-4",children:o.jsx("div",{className:"space-y-4",children:n.content.split(`

`).map((s,i)=>o.jsx("div",{className:"text-sm",children:s.startsWith("**")?o.jsx("h3",{className:"font-semibold text-foreground mb-2",children:s.replace(/\*\*/g,"")}):o.jsx("p",{className:"text-muted-foreground leading-relaxed",children:s})},i))})})]})]})},d3=({className:e="",onGoHome:t})=>{const{user:r,signOut:n}=_e(),{toast:s}=Le(),{theme:i,setTheme:a}=M1(),{cleanupWarning:l,checkAccountStatus:c}=c3(),[u,f]=m.useState({notifications:!0,soundEnabled:!0,emailDigest:!1});m.useEffect(()=>{const y=localStorage.getItem("app-settings");if(y){const x=JSON.parse(y),{darkMode:w,...b}=x;f({notifications:!0,soundEnabled:!0,emailDigest:!1,...b})}},[]);const d=(y,x)=>{const w={...u,[y]:x};f(w),localStorage.setItem("app-settings",JSON.stringify(w)),s({title:"Settings Updated",description:"Your preferences have been saved."})},h=y=>{a(y?"dark":"light"),s({title:"Theme Updated",description:`Switched to ${y?"dark":"light"} mode.`})},p=async()=>{try{await n(),s({title:"Signed Out",description:"You have been successfully signed out."})}catch{s({title:"Sign Out Failed",description:"There was an error signing out. Please try again.",variant:"destructive"})}},g=()=>{s({title:"Feature Unavailable",description:"Legal consent management is being updated.",variant:"destructive"})},v=({icon:y,title:x,description:w,action:b,badge:j})=>o.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg hover:bg-muted/30 transition-colors",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 rounded-full bg-muted/50 flex items-center justify-center",children:o.jsx(y,{className:"h-5 w-5 text-muted-foreground"})}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("h3",{className:"font-medium text-sm",children:x}),j&&o.jsx(le,{variant:"secondary",className:"text-xs",children:j})]}),o.jsx("p",{className:"text-xs text-muted-foreground",children:w})]})]}),b]});return o.jsxs("div",{className:`max-w-2xl mx-auto p-4 space-y-6 ${e}`,children:[o.jsx("div",{className:"flex justify-start",children:o.jsxs(D,{variant:"outline",onClick:t||(()=>{}),className:"flex items-center gap-2 hover-scale",children:[o.jsx(Ia,{className:"w-4 h-4"}),"Home"]})}),o.jsxs("div",{className:"text-center space-y-2",children:[o.jsx("h1",{className:"text-2xl font-bold",children:"Settings"}),o.jsx("p",{className:"text-muted-foreground",children:"Manage your app preferences and account"})]}),(l==null?void 0:l.isAtRisk)&&o.jsxs(q,{className:"border-destructive bg-destructive/5",children:[o.jsx(ue,{children:o.jsxs(de,{className:"text-lg text-destructive flex items-center gap-2",children:[o.jsx(On,{className:"w-5 h-5"}),"Account Deletion Warning"]})}),o.jsx(Z,{children:o.jsxs("div",{className:"space-y-3",children:[o.jsx("p",{className:"text-sm",children:l.willBeDeleted?"Your account is scheduled for deletion due to incomplete setup!":`Your account will be automatically deleted in ${l.daysLeft} day${l.daysLeft!==1?"s":""} if you don't complete your profile.`}),o.jsx(D,{onClick:()=>window.location.href="/",className:"w-full",variant:l.willBeDeleted?"destructive":"default",children:"Complete Profile Setup Now"})]})})]}),o.jsxs(q,{children:[o.jsx(ue,{children:o.jsx(de,{className:"text-lg",children:"Account"})}),o.jsxs(Z,{className:"space-y-1",children:[o.jsx(v,{icon:dt,title:"Upgrade to Premium",description:"Unlock exclusive features and 2x karma points",badge:"Popular",action:o.jsxs(D,{size:"sm",className:"hover-scale",children:[o.jsx(dt,{className:"h-4 w-4 mr-2"}),"Upgrade"]})}),o.jsx(mr,{}),o.jsx(v,{icon:fh,title:"Sign Out",description:"Sign out of your account",action:o.jsx(D,{variant:"outline",size:"sm",onClick:p,className:"hover-scale",children:"Sign Out"})})]})]}),o.jsxs(q,{children:[o.jsx(ue,{children:o.jsx(de,{className:"text-lg",children:"Preferences"})}),o.jsxs(Z,{className:"space-y-1",children:[o.jsx(v,{icon:i==="dark"?hh:vh,title:"Dark Mode",description:"Switch between light and dark theme",action:o.jsx(kn,{checked:i==="dark",onCheckedChange:h})}),o.jsx(mr,{}),o.jsx(v,{icon:jv,title:"Push Notifications",description:"Receive notifications for new messages",action:o.jsx(kn,{checked:u.notifications,onCheckedChange:y=>d("notifications",y)})}),o.jsx(mr,{}),o.jsx(v,{icon:u.soundEnabled?Cu:Uc,title:"Sound Effects",description:"Play sounds for messages and notifications",action:o.jsx(kn,{checked:u.soundEnabled,onCheckedChange:y=>d("soundEnabled",y)})}),o.jsx(mr,{}),o.jsx(v,{icon:jv,title:"Email Digest",description:"Receive daily email summary of activity",action:o.jsx(kn,{checked:u.emailDigest,onCheckedChange:y=>d("emailDigest",y)})})]})]}),o.jsxs(q,{children:[o.jsx(ue,{children:o.jsx(de,{className:"text-lg",children:"Legal & Policies"})}),o.jsxs(Z,{className:"space-y-1",children:[o.jsx(v,{icon:dh,title:"Terms of Service",description:"Review our Terms of Service",action:o.jsx(Qo,{policyType:"terms",trigger:o.jsx(D,{variant:"ghost",size:"sm",className:"hover-scale",children:o.jsx(dh,{className:"w-4 h-4"})})})}),o.jsx(mr,{}),o.jsx(v,{icon:ac,title:"Privacy Policy",description:"Learn how we protect your data",action:o.jsx(Qo,{policyType:"privacy",trigger:o.jsx(D,{variant:"ghost",size:"sm",className:"hover-scale",children:o.jsx(ac,{className:"w-4 h-4"})})})}),o.jsx(mr,{}),o.jsx(v,{icon:ac,title:"Community Guidelines",description:"Read our community standards",action:o.jsx(Qo,{policyType:"community",trigger:o.jsx(D,{variant:"ghost",size:"sm",className:"hover-scale",children:o.jsx(nb,{className:"w-4 h-4"})})})}),o.jsx(mr,{}),o.jsx("div",{className:"p-4 rounded-lg bg-muted/30",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 rounded-full bg-muted/50 flex items-center justify-center",children:o.jsx(On,{className:"h-5 w-5 text-orange-500"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-medium text-sm",children:"Legal Consent Status"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Legal consent system is being updated"})]})]}),o.jsx(D,{variant:"outline",size:"sm",onClick:g,className:"text-xs",disabled:!0,children:"Update Legal Settings"})]})})]})]}),o.jsxs(q,{children:[o.jsx(ue,{children:o.jsx(de,{className:"text-lg",children:"Support & Info"})}),o.jsx(Z,{className:"space-y-1",children:o.jsx(v,{icon:HE,title:"Help & Support",description:"Get help with using the app",action:o.jsx(D,{variant:"ghost",size:"sm",className:"hover-scale",children:o.jsx(Ym,{className:"h-4 w-4"})})})})]}),o.jsx("div",{className:"text-center text-xs text-muted-foreground",children:"SyncChat v1.0.0 • Connect • Chat • Discover"})]})},f3=["Comedy","Thriller","Anime","Drama","Sci-Fi","Horror","Romance","Action","Documentary","Fantasy","Mystery","Adventure"],h3=["Funny","Chill","Deep Thinker","Adventurous","Creative","Analytical","Empathetic","Optimistic","Curious","Spontaneous","Loyal","Ambitious"],m3=["Night Owl","Early Bird","Busy Texter","Voice Message Fan","Emoji Lover","Binge Watcher","Quick Replier","Thoughtful Responder","Always Online","Weekend Warrior","Coffee Addict","Tea Enthusiast"],p3=({profile:e,updateProfile:t})=>{const r=(s,i)=>{const a=e[s],l=a.includes(i)?a.filter(c=>c!==i):[...a,i];t({[s]:l})},n=({value:s,isSelected:i,onClick:a})=>o.jsx(D,{variant:i?"tag-selected":"tag",onClick:a,className:"h-auto py-3 px-4 text-left",children:s});return o.jsxs("div",{className:"space-y-8",children:[o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-8 h-8 bg-primary/10 rounded-lg flex items-center justify-center",children:o.jsx(rl,{className:"w-4 h-4 text-primary"})}),o.jsx("h3",{className:"text-xl font-semibold",children:"Favorite Genres"})]}),o.jsx("p",{className:"text-muted-foreground",children:"What do you love watching or discussing?"}),o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:f3.map(s=>o.jsx(n,{value:s,isSelected:e.genres.includes(s),onClick:()=>r("genres",s)},s))})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-8 h-8 bg-accent/10 rounded-lg flex items-center justify-center",children:o.jsx(Gw,{className:"w-4 h-4 text-accent"})}),o.jsx("h3",{className:"text-xl font-semibold",children:"Personality Traits"})]}),o.jsx("p",{className:"text-muted-foreground",children:"How would your friends describe you?"}),o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:h3.map(s=>o.jsx(n,{value:s,isSelected:e.personality.includes(s),onClick:()=>r("personality",s)},s))})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-8 h-8 bg-primary-glow/10 rounded-lg flex items-center justify-center",children:o.jsx(tl,{className:"w-4 h-4 text-primary-glow"})}),o.jsx("h3",{className:"text-xl font-semibold",children:"Your Habits"})]}),o.jsx("p",{className:"text-muted-foreground",children:"What describes your communication style?"}),o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:m3.map(s=>o.jsx(n,{value:s,isSelected:e.habits.includes(s),onClick:()=>r("habits",s)},s))})]}),(e.genres.length>0||e.personality.length>0||e.habits.length>0)&&o.jsx(q,{className:"p-4 bg-primary/5 border-primary/20",children:o.jsxs("div",{className:"text-sm text-muted-foreground",children:[o.jsx("strong",{children:"Selected:"})," "," ",[...e.genres,...e.personality,...e.habits].length," preferences"]})})]})},Ox=["Cool","Mystic","Bright","Swift","Noble","Cosmic","Golden","Silent","Bold","Gentle","Radiant","Ancient","Fierce","Serene","Clever","Wild"],Ix=["Giraffe","Penguin","Butterfly","Falcon","Dragon","Wolf","Phoenix","Dolphin","Tiger","Owl","Rabbit","Fox","Eagle","Panda","Lion","Whale"],eu=()=>{const e=Ox[Math.floor(Math.random()*Ox.length)],t=Ix[Math.floor(Math.random()*Ix.length)],r=Math.floor(Math.random()*9999)+1;return`${e}${t}${r}`},Lx=async()=>{let e=0;const t=50;for(;e<t;){const n=eu(),{data:s,error:i}=await R.from("profiles").select("user_id").eq("username",n).maybeSingle();if(i){console.error("Error checking username uniqueness:",i),e++;continue}if(!s)return n;e++}return`${eu()}${Date.now().toString().slice(-4)}`},g3=({profile:e,updateProfile:t})=>{const[r,n]=m.useState(!1),[s,i]=m.useState(""),[a,l]=m.useState(!1),[c,u]=m.useState(!1);m.useEffect(()=>{(async()=>{if(!e.username){u(!0);try{const y=await Lx();t({username:y})}catch(y){console.error("Error generating initial username:",y);const x=eu();t({username:x})}finally{u(!1)}}})()},[e.username,t]);const f=async()=>{u(!0);try{const v=await Lx();t({username:v})}catch(v){console.error("Error generating new username:",v);const y=eu();t({username:y})}finally{u(!1)}},d=()=>{i(e.username),n(!0)},h=()=>{s.trim()&&s.trim()!==e.username&&(t({username:s.trim()}),l(!0)),n(!1),i("")},p=()=>{n(!1),i("")},g=()=>{const v=e.personality;if(v.length===0)return"Ready to meet your perfect group!";const y=v[0];return{Funny:"Your humor will be the glue that brings groups together! 😄",Chill:"Your laid-back vibe creates the perfect atmosphere for deep conversations. 🌊","Deep Thinker":"Groups love meaningful discussions with thoughtful people like you. 🧠",Adventurous:"Your energy will inspire groups to try new things together! 🚀",Creative:"Your imagination will spark amazing group activities! 🎨",Empathetic:"Your understanding nature makes everyone feel welcome. 💙"}[y]||"You'll bring something special to every group! ✨"};return o.jsxs("div",{className:"space-y-8",children:[o.jsxs("div",{className:"text-center space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-center gap-3",children:[o.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-xl flex items-center justify-center",children:o.jsx($c,{className:"w-6 h-6 text-primary"})}),o.jsx("h3",{className:"text-2xl font-semibold",children:"Meet Your Identity"})]}),o.jsx(q,{className:"p-8 bg-gradient-to-br from-primary/5 to-accent/5 border-primary/20",children:r?o.jsxs("div",{className:"space-y-4",children:[o.jsx(ut,{value:s,onChange:v=>i(v.target.value),placeholder:"Enter your username",className:"text-center text-xl font-semibold bg-background",maxLength:20}),o.jsxs("div",{className:"flex items-center justify-center gap-3",children:[o.jsx(D,{onClick:h,size:"sm",children:"Save"}),o.jsx(D,{variant:"ghost",onClick:p,size:"sm",children:"Cancel"})]}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"This is your one free edit. Choose wisely!"})]}):o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-center gap-3",children:[o.jsx(yr,{className:"w-5 h-5 text-primary"}),o.jsx("span",{className:"text-3xl font-bold bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent",children:e.username}),o.jsx(yr,{className:"w-5 h-5 text-accent"})]}),o.jsxs("div",{className:"flex items-center justify-center gap-3",children:[o.jsxs(D,{variant:"outline",onClick:f,disabled:c,className:"gap-2",children:[o.jsx(Su,{className:`w-4 h-4 ${c?"animate-spin":""}`}),c?"Generating...":"Generate New"]}),!a&&o.jsxs(D,{variant:"ghost",onClick:d,className:"gap-2 text-muted-foreground",children:[o.jsx(Qw,{className:"w-4 h-4"}),"Edit Once (Free)"]})]}),a&&o.jsx(le,{variant:"secondary",className:"mx-auto",children:"Free edit used"})]})})]}),o.jsx(q,{className:"p-6 bg-muted/30 border-border/50",children:o.jsxs("div",{className:"text-center space-y-3",children:[o.jsxs("h4",{className:"text-lg font-semibold flex items-center justify-center gap-2",children:[o.jsx(Gw,{className:"w-5 h-5 text-accent"}),"Your Group Personality"]}),o.jsx("p",{className:"text-muted-foreground",children:g()})]})}),o.jsx(q,{className:"p-6 bg-gradient-to-r from-primary/5 to-accent/5 border-primary/20",children:o.jsxs("div",{className:"space-y-4",children:[o.jsx("h4",{className:"text-lg font-semibold text-center",children:"Profile Summary"}),o.jsxs("div",{className:"grid md:grid-cols-3 gap-4 text-center",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-2xl font-bold text-primary",children:e.genres.length}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"Favorite Genres"})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-2xl font-bold text-accent",children:e.personality.length}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"Personality Traits"})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-2xl font-bold text-primary-glow",children:e.habits.length}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"Communication Habits"})]})]})]})}),o.jsx("div",{className:"text-center text-sm text-muted-foreground bg-muted/20 rounded-lg p-4",children:o.jsxs("p",{children:["🔒 ",o.jsx("strong",{children:"100% Anonymous"})," - We never ask for personal information like email, phone, or photos. Your privacy is our priority."]})})]})};var Vp="Checkbox",[v3,l$]=Nr(Vp),[x3,y3]=v3(Vp),y_=m.forwardRef((e,t)=>{const{__scopeCheckbox:r,name:n,checked:s,defaultChecked:i,required:a,disabled:l,value:c="on",onCheckedChange:u,form:f,...d}=e,[h,p]=m.useState(null),g=je(t,j=>p(j)),v=m.useRef(!1),y=h?f||!!h.closest("form"):!0,[x=!1,w]=cn({prop:s,defaultProp:i,onChange:u}),b=m.useRef(x);return m.useEffect(()=>{const j=h==null?void 0:h.form;if(j){const _=()=>w(b.current);return j.addEventListener("reset",_),()=>j.removeEventListener("reset",_)}},[h,w]),o.jsxs(x3,{scope:r,state:x,disabled:l,children:[o.jsx(ie.button,{type:"button",role:"checkbox","aria-checked":vs(x)?"mixed":x,"aria-required":a,"data-state":j_(x),"data-disabled":l?"":void 0,disabled:l,value:c,...d,ref:g,onKeyDown:Y(e.onKeyDown,j=>{j.key==="Enter"&&j.preventDefault()}),onClick:Y(e.onClick,j=>{w(_=>vs(_)?!0:!_),y&&(v.current=j.isPropagationStopped(),v.current||j.stopPropagation())})}),y&&o.jsx(w3,{control:h,bubbles:!v.current,name:n,value:c,checked:x,required:a,disabled:l,form:f,style:{transform:"translateX(-100%)"},defaultChecked:vs(i)?!1:i})]})});y_.displayName=Vp;var w_="CheckboxIndicator",b_=m.forwardRef((e,t)=>{const{__scopeCheckbox:r,forceMount:n,...s}=e,i=y3(w_,r);return o.jsx(ht,{present:n||vs(i.state)||i.state===!0,children:o.jsx(ie.span,{"data-state":j_(i.state),"data-disabled":i.disabled?"":void 0,...s,ref:t,style:{pointerEvents:"none",...e.style}})})});b_.displayName=w_;var w3=e=>{const{control:t,checked:r,bubbles:n=!0,defaultChecked:s,...i}=e,a=m.useRef(null),l=Ap(r),c=Ru(t);m.useEffect(()=>{const f=a.current,d=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(d,"checked").set;if(l!==r&&p){const g=new Event("click",{bubbles:n});f.indeterminate=vs(r),p.call(f,vs(r)?!1:r),f.dispatchEvent(g)}},[l,r,n]);const u=m.useRef(vs(r)?!1:r);return o.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:s??u.current,...i,tabIndex:-1,ref:a,style:{...e.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function vs(e){return e==="indeterminate"}function j_(e){return vs(e)?"indeterminate":e?"checked":"unchecked"}var __=y_,b3=b_;const Wh=m.forwardRef(({className:e,...t},r)=>o.jsx(__,{ref:r,className:re("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:o.jsx(b3,{className:re("flex items-center justify-center text-current"),children:o.jsx(Dr,{className:"h-4 w-4"})})}));Wh.displayName=__.displayName;const j3=({onConsentChange:e,isConsentGiven:t})=>{const[r,n]=m.useState(!1),[s,i]=m.useState(!1);m.useEffect(()=>{t&&(n(!0),i(!0))},[t]);const a=c=>{n(c),e(c&&s)},l=c=>{i(c),e(r&&c)};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx(s2,{className:"w-8 h-8 text-primary"})}),o.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Welcome to SyncChat"}),o.jsx("p",{className:"text-muted-foreground",children:"Before we get started, we need to ensure compliance with safety regulations and user privacy laws"})]}),o.jsx(q,{className:"p-6 border-border/50",children:o.jsxs("div",{className:"flex items-start gap-4",children:[o.jsx(Wh,{id:"age-confirmation",checked:r,onCheckedChange:a,className:"mt-1"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("label",{htmlFor:"age-confirmation",className:"text-sm font-medium cursor-pointer block mb-1",children:"Age Verification"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"I confirm that I am at least 13 years of age. Users under 18 may require parental consent in some jurisdictions."})]}),r&&o.jsx(Qs,{className:"w-5 h-5 text-green-500 mt-1"})]})}),o.jsx(q,{className:"p-6 border-border/50",children:o.jsxs("div",{className:"flex items-start gap-4",children:[o.jsx(Wh,{id:"terms-acceptance",checked:s,onCheckedChange:l,className:"mt-1"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("label",{htmlFor:"terms-acceptance",className:"text-sm font-medium cursor-pointer block mb-2",children:"Legal Agreement"}),o.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"I acknowledge that I have read, understood, and agree to be bound by the Terms of Service and Privacy Policy."}),o.jsxs("div",{className:"flex flex-wrap gap-4 text-sm",children:[o.jsx(Qo,{policyType:"terms",trigger:o.jsxs(D,{variant:"link",className:"h-auto p-0 text-primary hover:text-primary/80 flex items-center gap-1",children:[o.jsx(dh,{className:"w-3 h-3"}),"View Terms of Service"]})}),o.jsx(Qo,{policyType:"privacy",trigger:o.jsxs(D,{variant:"link",className:"h-auto p-0 text-primary hover:text-primary/80 flex items-center gap-1",children:[o.jsx(ac,{className:"w-3 h-3"}),"View Privacy Policy"]})}),o.jsx(Qo,{policyType:"community",trigger:o.jsxs(D,{variant:"link",className:"h-auto p-0 text-primary hover:text-primary/80 flex items-center gap-1",children:[o.jsx(nb,{className:"w-3 h-3"}),"View Community Guidelines"]})})]})]}),s&&o.jsx(Qs,{className:"w-5 h-5 text-green-500 mt-1"})]})}),o.jsx(q,{className:"p-4 bg-muted/50 border-amber-200 dark:border-amber-800",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx(On,{className:"w-5 h-5 text-amber-500 mt-0.5 flex-shrink-0"}),o.jsxs("div",{className:"text-sm",children:[o.jsx("p",{className:"font-medium text-amber-900 dark:text-amber-100 mb-1",children:"Legal Compliance Notice"}),o.jsx("p",{className:"text-amber-800 dark:text-amber-200 leading-relaxed",children:"This service complies with applicable laws including COPPA and GDPR. By proceeding, you confirm your eligibility and consent to our data practices as outlined in our Privacy Policy."})]})]})}),t&&o.jsx(q,{className:"p-4 bg-green-50 border-green-200 dark:bg-green-950 dark:border-green-800",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(Qs,{className:"w-5 h-5 text-green-600 dark:text-green-400"}),o.jsx("p",{className:"text-sm font-medium text-green-800 dark:text-green-200",children:"Requirements completed. You may now continue setting up your profile."})]})})]})};var qh=["Enter"," "],_3=["ArrowDown","PageUp","Home"],N_=["ArrowUp","PageDown","End"],N3=[..._3,...N_],S3={ltr:[...qh,"ArrowRight"],rtl:[...qh,"ArrowLeft"]},k3={ltr:["ArrowLeft"],rtl:["ArrowRight"]},cl="Menu",[Va,C3,E3]=wu(cl),[uo,S_]=Nr(cl,[E3,Ei,ed]),sd=Ei(),k_=ed(),[P3,fo]=uo(cl),[T3,ul]=uo(cl),C_=e=>{const{__scopeMenu:t,open:r=!1,children:n,dir:s,onOpenChange:i,modal:a=!0}=e,l=sd(t),[c,u]=m.useState(null),f=m.useRef(!1),d=Ge(i),h=al(s);return m.useEffect(()=>{const p=()=>{f.current=!0,document.addEventListener("pointerdown",g,{capture:!0,once:!0}),document.addEventListener("pointermove",g,{capture:!0,once:!0})},g=()=>f.current=!1;return document.addEventListener("keydown",p,{capture:!0}),()=>{document.removeEventListener("keydown",p,{capture:!0}),document.removeEventListener("pointerdown",g,{capture:!0}),document.removeEventListener("pointermove",g,{capture:!0})}},[]),o.jsx(ap,{...l,children:o.jsx(P3,{scope:t,open:r,onOpenChange:d,content:c,onContentChange:u,children:o.jsx(T3,{scope:t,onClose:m.useCallback(()=>d(!1),[d]),isUsingKeyboardRef:f,dir:h,modal:a,children:n})})})};C_.displayName=cl;var R3="MenuAnchor",Hp=m.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e,s=sd(r);return o.jsx(Au,{...s,...n,ref:t})});Hp.displayName=R3;var Wp="MenuPortal",[A3,E_]=uo(Wp,{forceMount:void 0}),P_=e=>{const{__scopeMenu:t,forceMount:r,children:n,container:s}=e,i=fo(Wp,t);return o.jsx(A3,{scope:t,forceMount:r,children:o.jsx(ht,{present:r||i.open,children:o.jsx(el,{asChild:!0,container:s,children:n})})})};P_.displayName=Wp;var wr="MenuContent",[M3,qp]=uo(wr),T_=m.forwardRef((e,t)=>{const r=E_(wr,e.__scopeMenu),{forceMount:n=r.forceMount,...s}=e,i=fo(wr,e.__scopeMenu),a=ul(wr,e.__scopeMenu);return o.jsx(Va.Provider,{scope:e.__scopeMenu,children:o.jsx(ht,{present:n||i.open,children:o.jsx(Va.Slot,{scope:e.__scopeMenu,children:a.modal?o.jsx(D3,{...s,ref:t}):o.jsx(O3,{...s,ref:t})})})})}),D3=m.forwardRef((e,t)=>{const r=fo(wr,e.__scopeMenu),n=m.useRef(null),s=je(t,n);return m.useEffect(()=>{const i=n.current;if(i)return jp(i)},[]),o.jsx(Kp,{...e,ref:s,trapFocus:r.open,disableOutsidePointerEvents:r.open,disableOutsideScroll:!0,onFocusOutside:Y(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>r.onOpenChange(!1)})}),O3=m.forwardRef((e,t)=>{const r=fo(wr,e.__scopeMenu);return o.jsx(Kp,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>r.onOpenChange(!1)})}),Kp=m.forwardRef((e,t)=>{const{__scopeMenu:r,loop:n=!1,trapFocus:s,onOpenAutoFocus:i,onCloseAutoFocus:a,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:u,onPointerDownOutside:f,onFocusOutside:d,onInteractOutside:h,onDismiss:p,disableOutsideScroll:g,...v}=e,y=fo(wr,r),x=ul(wr,r),w=sd(r),b=k_(r),j=C3(r),[_,N]=m.useState(null),S=m.useRef(null),k=je(t,S,y.onContentChange),E=m.useRef(0),M=m.useRef(""),T=m.useRef(0),I=m.useRef(null),G=m.useRef("right"),F=m.useRef(0),O=g?Xu:m.Fragment,L=g?{as:ws,allowPinchZoom:!0}:void 0,z=P=>{var ce,$e;const H=M.current+P,$=j().filter(Ce=>!Ce.disabled),W=document.activeElement,X=(ce=$.find(Ce=>Ce.ref.current===W))==null?void 0:ce.textValue,fe=$.map(Ce=>Ce.textValue),ye=q3(fe,H,X),se=($e=$.find(Ce=>Ce.textValue===ye))==null?void 0:$e.ref.current;(function Ce(Fe){M.current=Fe,window.clearTimeout(E.current),Fe!==""&&(E.current=window.setTimeout(()=>Ce(""),1e3))})(H),se&&setTimeout(()=>se.focus())};m.useEffect(()=>()=>window.clearTimeout(E.current),[]),bp();const C=m.useCallback(P=>{var $,W;return G.current===(($=I.current)==null?void 0:$.side)&&Y3(P,(W=I.current)==null?void 0:W.area)},[]);return o.jsx(M3,{scope:r,searchRef:M,onItemEnter:m.useCallback(P=>{C(P)&&P.preventDefault()},[C]),onItemLeave:m.useCallback(P=>{var H;C(P)||((H=S.current)==null||H.focus(),N(null))},[C]),onTriggerLeave:m.useCallback(P=>{C(P)&&P.preventDefault()},[C]),pointerGraceTimerRef:T,onPointerGraceIntentChange:m.useCallback(P=>{I.current=P},[]),children:o.jsx(O,{...L,children:o.jsx(Yu,{asChild:!0,trapped:s,onMountAutoFocus:Y(i,P=>{var H;P.preventDefault(),(H=S.current)==null||H.focus({preventScroll:!0})}),onUnmountAutoFocus:a,children:o.jsx(Ni,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:u,onPointerDownOutside:f,onFocusOutside:d,onInteractOutside:h,onDismiss:p,children:o.jsx(Vj,{asChild:!0,...b,dir:x.dir,orientation:"vertical",loop:n,currentTabStopId:_,onCurrentTabStopIdChange:N,onEntryFocus:Y(c,P=>{x.isUsingKeyboardRef.current||P.preventDefault()}),preventScrollOnEntryFocus:!0,children:o.jsx(lp,{role:"menu","aria-orientation":"vertical","data-state":W_(y.open),"data-radix-menu-content":"",dir:x.dir,...w,...v,ref:k,style:{outline:"none",...v.style},onKeyDown:Y(v.onKeyDown,P=>{const $=P.target.closest("[data-radix-menu-content]")===P.currentTarget,W=P.ctrlKey||P.altKey||P.metaKey,X=P.key.length===1;$&&(P.key==="Tab"&&P.preventDefault(),!W&&X&&z(P.key));const fe=S.current;if(P.target!==fe||!N3.includes(P.key))return;P.preventDefault();const se=j().filter(ce=>!ce.disabled).map(ce=>ce.ref.current);N_.includes(P.key)&&se.reverse(),H3(se)}),onBlur:Y(e.onBlur,P=>{P.currentTarget.contains(P.target)||(window.clearTimeout(E.current),M.current="")}),onPointerMove:Y(e.onPointerMove,Ha(P=>{const H=P.target,$=F.current!==P.clientX;if(P.currentTarget.contains(H)&&$){const W=P.clientX>F.current?"right":"left";G.current=W,F.current=P.clientX}}))})})})})})})});T_.displayName=wr;var I3="MenuGroup",Yp=m.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return o.jsx(ie.div,{role:"group",...n,ref:t})});Yp.displayName=I3;var L3="MenuLabel",R_=m.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return o.jsx(ie.div,{...n,ref:t})});R_.displayName=L3;var tu="MenuItem",$x="menu.itemSelect",od=m.forwardRef((e,t)=>{const{disabled:r=!1,onSelect:n,...s}=e,i=m.useRef(null),a=ul(tu,e.__scopeMenu),l=qp(tu,e.__scopeMenu),c=je(t,i),u=m.useRef(!1),f=()=>{const d=i.current;if(!r&&d){const h=new CustomEvent($x,{bubbles:!0,cancelable:!0});d.addEventListener($x,p=>n==null?void 0:n(p),{once:!0}),Hm(d,h),h.defaultPrevented?u.current=!1:a.onClose()}};return o.jsx(A_,{...s,ref:c,disabled:r,onClick:Y(e.onClick,f),onPointerDown:d=>{var h;(h=e.onPointerDown)==null||h.call(e,d),u.current=!0},onPointerUp:Y(e.onPointerUp,d=>{var h;u.current||(h=d.currentTarget)==null||h.click()}),onKeyDown:Y(e.onKeyDown,d=>{const h=l.searchRef.current!=="";r||h&&d.key===" "||qh.includes(d.key)&&(d.currentTarget.click(),d.preventDefault())})})});od.displayName=tu;var A_=m.forwardRef((e,t)=>{const{__scopeMenu:r,disabled:n=!1,textValue:s,...i}=e,a=qp(tu,r),l=k_(r),c=m.useRef(null),u=je(t,c),[f,d]=m.useState(!1),[h,p]=m.useState("");return m.useEffect(()=>{const g=c.current;g&&p((g.textContent??"").trim())},[i.children]),o.jsx(Va.ItemSlot,{scope:r,disabled:n,textValue:s??h,children:o.jsx(Hj,{asChild:!0,...l,focusable:!n,children:o.jsx(ie.div,{role:"menuitem","data-highlighted":f?"":void 0,"aria-disabled":n||void 0,"data-disabled":n?"":void 0,...i,ref:u,onPointerMove:Y(e.onPointerMove,Ha(g=>{n?a.onItemLeave(g):(a.onItemEnter(g),g.defaultPrevented||g.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Y(e.onPointerLeave,Ha(g=>a.onItemLeave(g))),onFocus:Y(e.onFocus,()=>d(!0)),onBlur:Y(e.onBlur,()=>d(!1))})})})}),$3="MenuCheckboxItem",M_=m.forwardRef((e,t)=>{const{checked:r=!1,onCheckedChange:n,...s}=e;return o.jsx($_,{scope:e.__scopeMenu,checked:r,children:o.jsx(od,{role:"menuitemcheckbox","aria-checked":ru(r)?"mixed":r,...s,ref:t,"data-state":Xp(r),onSelect:Y(s.onSelect,()=>n==null?void 0:n(ru(r)?!0:!r),{checkForDefaultPrevented:!1})})})});M_.displayName=$3;var D_="MenuRadioGroup",[U3,F3]=uo(D_,{value:void 0,onValueChange:()=>{}}),O_=m.forwardRef((e,t)=>{const{value:r,onValueChange:n,...s}=e,i=Ge(n);return o.jsx(U3,{scope:e.__scopeMenu,value:r,onValueChange:i,children:o.jsx(Yp,{...s,ref:t})})});O_.displayName=D_;var I_="MenuRadioItem",L_=m.forwardRef((e,t)=>{const{value:r,...n}=e,s=F3(I_,e.__scopeMenu),i=r===s.value;return o.jsx($_,{scope:e.__scopeMenu,checked:i,children:o.jsx(od,{role:"menuitemradio","aria-checked":i,...n,ref:t,"data-state":Xp(i),onSelect:Y(n.onSelect,()=>{var a;return(a=s.onValueChange)==null?void 0:a.call(s,r)},{checkForDefaultPrevented:!1})})})});L_.displayName=I_;var Qp="MenuItemIndicator",[$_,z3]=uo(Qp,{checked:!1}),U_=m.forwardRef((e,t)=>{const{__scopeMenu:r,forceMount:n,...s}=e,i=z3(Qp,r);return o.jsx(ht,{present:n||ru(i.checked)||i.checked===!0,children:o.jsx(ie.span,{...s,ref:t,"data-state":Xp(i.checked)})})});U_.displayName=Qp;var B3="MenuSeparator",F_=m.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return o.jsx(ie.div,{role:"separator","aria-orientation":"horizontal",...n,ref:t})});F_.displayName=B3;var G3="MenuArrow",z_=m.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e,s=sd(r);return o.jsx(cp,{...s,...n,ref:t})});z_.displayName=G3;var V3="MenuSub",[c$,B_]=uo(V3),sa="MenuSubTrigger",G_=m.forwardRef((e,t)=>{const r=fo(sa,e.__scopeMenu),n=ul(sa,e.__scopeMenu),s=B_(sa,e.__scopeMenu),i=qp(sa,e.__scopeMenu),a=m.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=i,u={__scopeMenu:e.__scopeMenu},f=m.useCallback(()=>{a.current&&window.clearTimeout(a.current),a.current=null},[]);return m.useEffect(()=>f,[f]),m.useEffect(()=>{const d=l.current;return()=>{window.clearTimeout(d),c(null)}},[l,c]),o.jsx(Hp,{asChild:!0,...u,children:o.jsx(A_,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":s.contentId,"data-state":W_(r.open),...e,ref:yu(t,s.onTriggerChange),onClick:d=>{var h;(h=e.onClick)==null||h.call(e,d),!(e.disabled||d.defaultPrevented)&&(d.currentTarget.focus(),r.open||r.onOpenChange(!0))},onPointerMove:Y(e.onPointerMove,Ha(d=>{i.onItemEnter(d),!d.defaultPrevented&&!e.disabled&&!r.open&&!a.current&&(i.onPointerGraceIntentChange(null),a.current=window.setTimeout(()=>{r.onOpenChange(!0),f()},100))})),onPointerLeave:Y(e.onPointerLeave,Ha(d=>{var p,g;f();const h=(p=r.content)==null?void 0:p.getBoundingClientRect();if(h){const v=(g=r.content)==null?void 0:g.dataset.side,y=v==="right",x=y?-5:5,w=h[y?"left":"right"],b=h[y?"right":"left"];i.onPointerGraceIntentChange({area:[{x:d.clientX+x,y:d.clientY},{x:w,y:h.top},{x:b,y:h.top},{x:b,y:h.bottom},{x:w,y:h.bottom}],side:v}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(d),d.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:Y(e.onKeyDown,d=>{var p;const h=i.searchRef.current!=="";e.disabled||h&&d.key===" "||S3[n.dir].includes(d.key)&&(r.onOpenChange(!0),(p=r.content)==null||p.focus(),d.preventDefault())})})})});G_.displayName=sa;var V_="MenuSubContent",H_=m.forwardRef((e,t)=>{const r=E_(wr,e.__scopeMenu),{forceMount:n=r.forceMount,...s}=e,i=fo(wr,e.__scopeMenu),a=ul(wr,e.__scopeMenu),l=B_(V_,e.__scopeMenu),c=m.useRef(null),u=je(t,c);return o.jsx(Va.Provider,{scope:e.__scopeMenu,children:o.jsx(ht,{present:n||i.open,children:o.jsx(Va.Slot,{scope:e.__scopeMenu,children:o.jsx(Kp,{id:l.contentId,"aria-labelledby":l.triggerId,...s,ref:u,align:"start",side:a.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:f=>{var d;a.isUsingKeyboardRef.current&&((d=c.current)==null||d.focus()),f.preventDefault()},onCloseAutoFocus:f=>f.preventDefault(),onFocusOutside:Y(e.onFocusOutside,f=>{f.target!==l.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:Y(e.onEscapeKeyDown,f=>{a.onClose(),f.preventDefault()}),onKeyDown:Y(e.onKeyDown,f=>{var p;const d=f.currentTarget.contains(f.target),h=k3[a.dir].includes(f.key);d&&h&&(i.onOpenChange(!1),(p=l.trigger)==null||p.focus(),f.preventDefault())})})})})})});H_.displayName=V_;function W_(e){return e?"open":"closed"}function ru(e){return e==="indeterminate"}function Xp(e){return ru(e)?"indeterminate":e?"checked":"unchecked"}function H3(e){const t=document.activeElement;for(const r of e)if(r===t||(r.focus(),document.activeElement!==t))return}function W3(e,t){return e.map((r,n)=>e[(t+n)%e.length])}function q3(e,t,r){const s=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,i=r?e.indexOf(r):-1;let a=W3(e,Math.max(i,0));s.length===1&&(a=a.filter(u=>u!==r));const c=a.find(u=>u.toLowerCase().startsWith(s.toLowerCase()));return c!==r?c:void 0}function K3(e,t){const{x:r,y:n}=e;let s=!1;for(let i=0,a=t.length-1;i<t.length;a=i++){const l=t[i].x,c=t[i].y,u=t[a].x,f=t[a].y;c>n!=f>n&&r<(u-l)*(n-c)/(f-c)+l&&(s=!s)}return s}function Y3(e,t){if(!t)return!1;const r={x:e.clientX,y:e.clientY};return K3(r,t)}function Ha(e){return t=>t.pointerType==="mouse"?e(t):void 0}var Q3=C_,X3=Hp,J3=P_,Z3=T_,eI=Yp,tI=R_,rI=od,nI=M_,sI=O_,oI=L_,iI=U_,aI=F_,lI=z_,cI=G_,uI=H_,Jp="DropdownMenu",[dI,u$]=Nr(Jp,[S_]),$t=S_(),[fI,q_]=dI(Jp),K_=e=>{const{__scopeDropdownMenu:t,children:r,dir:n,open:s,defaultOpen:i,onOpenChange:a,modal:l=!0}=e,c=$t(t),u=m.useRef(null),[f=!1,d]=cn({prop:s,defaultProp:i,onChange:a});return o.jsx(fI,{scope:t,triggerId:En(),triggerRef:u,contentId:En(),open:f,onOpenChange:d,onOpenToggle:m.useCallback(()=>d(h=>!h),[d]),modal:l,children:o.jsx(Q3,{...c,open:f,onOpenChange:d,dir:n,modal:l,children:r})})};K_.displayName=Jp;var Y_="DropdownMenuTrigger",Q_=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,disabled:n=!1,...s}=e,i=q_(Y_,r),a=$t(r);return o.jsx(X3,{asChild:!0,...a,children:o.jsx(ie.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":n?"":void 0,disabled:n,...s,ref:yu(t,i.triggerRef),onPointerDown:Y(e.onPointerDown,l=>{!n&&l.button===0&&l.ctrlKey===!1&&(i.onOpenToggle(),i.open||l.preventDefault())}),onKeyDown:Y(e.onKeyDown,l=>{n||(["Enter"," "].includes(l.key)&&i.onOpenToggle(),l.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});Q_.displayName=Y_;var hI="DropdownMenuPortal",X_=e=>{const{__scopeDropdownMenu:t,...r}=e,n=$t(t);return o.jsx(J3,{...n,...r})};X_.displayName=hI;var J_="DropdownMenuContent",Z_=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=q_(J_,r),i=$t(r),a=m.useRef(!1);return o.jsx(Z3,{id:s.contentId,"aria-labelledby":s.triggerId,...i,...n,ref:t,onCloseAutoFocus:Y(e.onCloseAutoFocus,l=>{var c;a.current||(c=s.triggerRef.current)==null||c.focus(),a.current=!1,l.preventDefault()}),onInteractOutside:Y(e.onInteractOutside,l=>{const c=l.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0,f=c.button===2||u;(!s.modal||f)&&(a.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Z_.displayName=J_;var mI="DropdownMenuGroup",pI=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=$t(r);return o.jsx(eI,{...s,...n,ref:t})});pI.displayName=mI;var gI="DropdownMenuLabel",eN=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=$t(r);return o.jsx(tI,{...s,...n,ref:t})});eN.displayName=gI;var vI="DropdownMenuItem",tN=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=$t(r);return o.jsx(rI,{...s,...n,ref:t})});tN.displayName=vI;var xI="DropdownMenuCheckboxItem",rN=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=$t(r);return o.jsx(nI,{...s,...n,ref:t})});rN.displayName=xI;var yI="DropdownMenuRadioGroup",wI=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=$t(r);return o.jsx(sI,{...s,...n,ref:t})});wI.displayName=yI;var bI="DropdownMenuRadioItem",nN=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=$t(r);return o.jsx(oI,{...s,...n,ref:t})});nN.displayName=bI;var jI="DropdownMenuItemIndicator",sN=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=$t(r);return o.jsx(iI,{...s,...n,ref:t})});sN.displayName=jI;var _I="DropdownMenuSeparator",oN=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=$t(r);return o.jsx(aI,{...s,...n,ref:t})});oN.displayName=_I;var NI="DropdownMenuArrow",SI=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=$t(r);return o.jsx(lI,{...s,...n,ref:t})});SI.displayName=NI;var kI="DropdownMenuSubTrigger",iN=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=$t(r);return o.jsx(cI,{...s,...n,ref:t})});iN.displayName=kI;var CI="DropdownMenuSubContent",aN=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=$t(r);return o.jsx(uI,{...s,...n,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});aN.displayName=CI;var EI=K_,PI=Q_,TI=X_,lN=Z_,cN=eN,uN=tN,dN=rN,fN=nN,hN=sN,mN=oN,pN=iN,gN=aN;const Zp=EI,eg=PI,RI=m.forwardRef(({className:e,inset:t,children:r,...n},s)=>o.jsxs(pN,{ref:s,className:re("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",e),...n,children:[r,o.jsx(Hw,{className:"ml-auto h-4 w-4"})]}));RI.displayName=pN.displayName;const AI=m.forwardRef(({className:e,...t},r)=>o.jsx(gN,{ref:r,className:re("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));AI.displayName=gN.displayName;const id=m.forwardRef(({className:e,sideOffset:t=4,...r},n)=>o.jsx(TI,{children:o.jsx(lN,{ref:n,sideOffset:t,className:re("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));id.displayName=lN.displayName;const Pn=m.forwardRef(({className:e,inset:t,...r},n)=>o.jsx(uN,{ref:n,className:re("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...r}));Pn.displayName=uN.displayName;const MI=m.forwardRef(({className:e,children:t,checked:r,...n},s)=>o.jsxs(dN,{ref:s,className:re("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:r,...n,children:[o.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:o.jsx(hN,{children:o.jsx(Dr,{className:"h-4 w-4"})})}),t]}));MI.displayName=dN.displayName;const DI=m.forwardRef(({className:e,children:t,...r},n)=>o.jsxs(fN,{ref:n,className:re("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[o.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:o.jsx(hN,{children:o.jsx(qE,{className:"h-2 w-2 fill-current"})})}),t]}));DI.displayName=fN.displayName;const OI=m.forwardRef(({className:e,inset:t,...r},n)=>o.jsx(cN,{ref:n,className:re("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...r}));OI.displayName=cN.displayName;const vN=m.forwardRef(({className:e,...t},r)=>o.jsx(mN,{ref:r,className:re("-mx-1 my-1 h-px bg-muted",e),...t}));vN.displayName=mN.displayName;const II=({groupId:e,memberCount:t})=>{const{user:r}=_e(),[n,s]=m.useState([]),[i,a]=m.useState(!1),[l,c]=m.useState(!1),u=async()=>{if(l){a(!0);try{const{data:d,error:h}=await R.from("group_members").select(`
          user_id,
          joined_at,
          profiles!inner(username)
        `).eq("group_id",e).order("joined_at",{ascending:!0});if(h)throw h;const p=(d==null?void 0:d.map(g=>{var v;return{user_id:g.user_id,username:((v=g.profiles)==null?void 0:v.username)||"Unknown User",joined_at:g.joined_at}}))||[];s(p)}catch(d){console.error("Error fetching group members:",d)}finally{a(!1)}}};m.useEffect(()=>{u()},[l,e]);const f=d=>{const h=new Date(d),g=(new Date().getTime()-h.getTime())/(1e3*60*60);return g<24?"Today":g<48?"Yesterday":`${Math.floor(g/24)} days ago`};return o.jsxs(Ht,{open:l,onOpenChange:c,children:[o.jsx(xa,{asChild:!0,children:o.jsxs(D,{variant:"ghost",size:"sm",className:"flex items-center gap-1 text-muted-foreground hover:text-foreground",children:[o.jsx(vt,{className:"w-4 h-4"}),o.jsxs("span",{className:"text-sm",children:[t," member",t!==1?"s":""]})]})}),o.jsxs(Dt,{className:"max-w-md",children:[o.jsx(nr,{children:o.jsxs(qt,{className:"flex items-center gap-2",children:[o.jsx(vt,{className:"w-5 h-5"}),"Group Members (",t,")"]})}),o.jsx($r,{className:"max-h-96",children:i?o.jsx("div",{className:"flex items-center justify-center py-8",children:o.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary"})}):o.jsx("div",{className:"space-y-3",children:n.map((d,h)=>o.jsx("div",{className:"flex items-center justify-between p-3 rounded-lg bg-muted/30",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-8 h-8 rounded-full bg-primary/20 flex items-center justify-center text-sm font-medium",children:d.username.charAt(0).toUpperCase()}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"font-medium text-sm",children:d.username}),d.user_id===(r==null?void 0:r.id)&&o.jsx(le,{variant:"outline",className:"text-xs",children:"You"}),h===0&&o.jsx("div",{title:"First to join",children:o.jsx(dt,{className:"w-3 h-3 text-yellow-500"})})]}),o.jsxs("span",{className:"text-xs text-muted-foreground",children:["Joined ",f(d.joined_at)]})]})]})},d.user_id))})}),o.jsx("div",{className:"text-center text-xs text-muted-foreground mt-4",children:"Members are ordered by join date"})]})]})},LI=e=>typeof e!="string"?"":e.toString().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;"),$I=e=>{if(typeof e!="string")return{isValid:!1,sanitizedMessage:"",error:"Message must be a string"};const t=e.trim();if(t.length===0)return{isValid:!1,sanitizedMessage:"",error:"Message cannot be empty"};if(t.length>1e3)return{isValid:!1,sanitizedMessage:"",error:"Message too long (max 1000 characters)"};const r=[/<script\b/i,/javascript:/i,/data:text\/html/i,/vbscript:/i,/on\w+\s*=/i,/expression\s*\(/i];for(const s of r)if(s.test(t))return{isValid:!1,sanitizedMessage:"",error:"Message contains potentially dangerous content"};return{isValid:!0,sanitizedMessage:LI(t)}},UI=({onRecordingComplete:e,disabled:t})=>{const[r,n]=m.useState(!1),[s,i]=m.useState(0),[a,l]=m.useState(null),[c,u]=m.useState(!1),[f,d]=m.useState(!1),h=m.useRef(null),p=m.useRef(null),g=m.useRef(null),v=m.useRef([]),y=m.useRef(null),{toast:x}=Le(),{trackActivity:w}=dn(),b=m.useCallback(async()=>{try{const T=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0}});p.current=T,v.current=[];const I=new MediaRecorder(T,{mimeType:"audio/webm;codecs=opus"});h.current=I,I.ondataavailable=G=>{G.data.size>0&&v.current.push(G.data)},I.onstop=()=>{const G=new Blob(v.current,{type:"audio/webm"});l(G),d(!0);const F=URL.createObjectURL(G);y.current=new Audio(F),y.current.onended=()=>u(!1),_()},I.start(1e3),n(!0),i(0),g.current=setInterval(()=>{i(G=>G+1)},1e3)}catch(T){console.error("Error starting recording:",T),T instanceof Error?T.name==="NotAllowedError"?x({title:"Microphone Permission Denied",description:"Please allow microphone access in your browser settings to record voice messages.",variant:"destructive"}):T.name==="NotFoundError"?x({title:"No Microphone Found",description:"No microphone detected. Please connect a microphone and try again.",variant:"destructive"}):T.name==="NotReadableError"?x({title:"Microphone In Use",description:"Microphone is being used by another application. Please close other apps and try again.",variant:"destructive"}):x({title:"Recording Error",description:"Failed to access microphone. Please check your browser settings and try again.",variant:"destructive"}):x({title:"Recording Error",description:"Failed to access microphone. Please check permissions.",variant:"destructive"})}},[e,x]),j=m.useCallback(()=>{h.current&&r&&h.current.stop()},[r]),_=m.useCallback(()=>{g.current&&(clearInterval(g.current),g.current=null),p.current&&(p.current.getTracks().forEach(T=>T.stop()),p.current=null),n(!1),i(0),h.current=null},[]),N=m.useCallback(()=>{y.current&&(c?(y.current.pause(),u(!1)):(y.current.play(),u(!0)))},[c]),S=m.useCallback(()=>{a&&(e(a),E(),x({title:"Voice message sent!",description:"Your recording has been shared with the group."}))},[a,e,x,w]),k=m.useCallback(()=>{E(),b()},[b]),E=m.useCallback(()=>{y.current&&(y.current.pause(),URL.revokeObjectURL(y.current.src),y.current=null),l(null),d(!1),u(!1),i(0)},[]),M=T=>{const I=Math.floor(T/60),G=T%60;return`${I}:${G.toString().padStart(2,"0")}`};return r?o.jsxs("div",{className:"flex items-center gap-2 p-2 rounded-lg bg-destructive/10 border border-destructive/20",children:[o.jsxs("div",{className:"flex items-center gap-2 text-destructive",children:[o.jsx("div",{className:"w-2 h-2 bg-destructive rounded-full animate-pulse"}),o.jsx("span",{className:"text-sm font-medium",children:M(s)})]}),o.jsx(D,{onClick:j,size:"sm",variant:"destructive",className:"h-8 w-8 p-0",children:o.jsx(o2,{className:"h-4 w-4"})})]}):f&&a?o.jsxs("div",{className:"flex items-center gap-2 p-3 rounded-lg bg-primary/10 border border-primary/20",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(D,{onClick:N,size:"sm",variant:"ghost",className:"h-8 w-8 p-0",children:c?o.jsx(Yw,{className:"h-4 w-4"}):o.jsx(Jw,{className:"h-4 w-4"})}),o.jsxs("span",{className:"text-sm text-muted-foreground",children:[M(s)," recording"]})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsxs(D,{onClick:S,size:"sm",className:"h-8 px-3 bg-primary hover:bg-primary/90",children:[o.jsx(n2,{className:"h-3 w-3 mr-1"}),"Send"]}),o.jsx(D,{onClick:k,size:"sm",variant:"outline",className:"h-8 w-8 p-0",children:o.jsx(Qm,{className:"h-3 w-3"})}),o.jsx(D,{onClick:E,size:"sm",variant:"outline",className:"h-8 w-8 p-0 text-destructive hover:text-destructive",children:o.jsx(tb,{className:"h-3 w-3"})})]})]}):o.jsx(D,{onClick:b,disabled:t,size:"sm",variant:"outline",className:"h-10 w-10 p-0 rounded-full hover:bg-primary/10",children:o.jsx(ic,{className:"h-4 w-4"})})};var tg="Popover",[xN,d$]=Nr(tg,[Ei]),dl=Ei(),[FI,Ps]=xN(tg),yN=e=>{const{__scopePopover:t,children:r,open:n,defaultOpen:s,onOpenChange:i,modal:a=!1}=e,l=dl(t),c=m.useRef(null),[u,f]=m.useState(!1),[d=!1,h]=cn({prop:n,defaultProp:s,onChange:i});return o.jsx(ap,{...l,children:o.jsx(FI,{scope:t,contentId:En(),triggerRef:c,open:d,onOpenChange:h,onOpenToggle:m.useCallback(()=>h(p=>!p),[h]),hasCustomAnchor:u,onCustomAnchorAdd:m.useCallback(()=>f(!0),[]),onCustomAnchorRemove:m.useCallback(()=>f(!1),[]),modal:a,children:r})})};yN.displayName=tg;var wN="PopoverAnchor",zI=m.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,s=Ps(wN,r),i=dl(r),{onCustomAnchorAdd:a,onCustomAnchorRemove:l}=s;return m.useEffect(()=>(a(),()=>l()),[a,l]),o.jsx(Au,{...i,...n,ref:t})});zI.displayName=wN;var bN="PopoverTrigger",jN=m.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,s=Ps(bN,r),i=dl(r),a=je(t,s.triggerRef),l=o.jsx(ie.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":CN(s.open),...n,ref:a,onClick:Y(e.onClick,s.onOpenToggle)});return s.hasCustomAnchor?l:o.jsx(Au,{asChild:!0,...i,children:l})});jN.displayName=bN;var rg="PopoverPortal",[BI,GI]=xN(rg,{forceMount:void 0}),_N=e=>{const{__scopePopover:t,forceMount:r,children:n,container:s}=e,i=Ps(rg,t);return o.jsx(BI,{scope:t,forceMount:r,children:o.jsx(ht,{present:r||i.open,children:o.jsx(el,{asChild:!0,container:s,children:n})})})};_N.displayName=rg;var yi="PopoverContent",NN=m.forwardRef((e,t)=>{const r=GI(yi,e.__scopePopover),{forceMount:n=r.forceMount,...s}=e,i=Ps(yi,e.__scopePopover);return o.jsx(ht,{present:n||i.open,children:i.modal?o.jsx(VI,{...s,ref:t}):o.jsx(HI,{...s,ref:t})})});NN.displayName=yi;var VI=m.forwardRef((e,t)=>{const r=Ps(yi,e.__scopePopover),n=m.useRef(null),s=je(t,n),i=m.useRef(!1);return m.useEffect(()=>{const a=n.current;if(a)return jp(a)},[]),o.jsx(Xu,{as:ws,allowPinchZoom:!0,children:o.jsx(SN,{...e,ref:s,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Y(e.onCloseAutoFocus,a=>{var l;a.preventDefault(),i.current||(l=r.triggerRef.current)==null||l.focus()}),onPointerDownOutside:Y(e.onPointerDownOutside,a=>{const l=a.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;i.current=u},{checkForDefaultPrevented:!1}),onFocusOutside:Y(e.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1})})})}),HI=m.forwardRef((e,t)=>{const r=Ps(yi,e.__scopePopover),n=m.useRef(!1),s=m.useRef(!1);return o.jsx(SN,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var a,l;(a=e.onCloseAutoFocus)==null||a.call(e,i),i.defaultPrevented||(n.current||(l=r.triggerRef.current)==null||l.focus(),i.preventDefault()),n.current=!1,s.current=!1},onInteractOutside:i=>{var c,u;(c=e.onInteractOutside)==null||c.call(e,i),i.defaultPrevented||(n.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const a=i.target;((u=r.triggerRef.current)==null?void 0:u.contains(a))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),SN=m.forwardRef((e,t)=>{const{__scopePopover:r,trapFocus:n,onOpenAutoFocus:s,onCloseAutoFocus:i,disableOutsidePointerEvents:a,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onInteractOutside:f,...d}=e,h=Ps(yi,r),p=dl(r);return bp(),o.jsx(Yu,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:s,onUnmountAutoFocus:i,children:o.jsx(Ni,{asChild:!0,disableOutsidePointerEvents:a,onInteractOutside:f,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onDismiss:()=>h.onOpenChange(!1),children:o.jsx(lp,{"data-state":CN(h.open),role:"dialog",id:h.contentId,...p,...d,ref:t,style:{...d.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),kN="PopoverClose",WI=m.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,s=Ps(kN,r);return o.jsx(ie.button,{type:"button",...n,ref:t,onClick:Y(e.onClick,()=>s.onOpenChange(!1))})});WI.displayName=kN;var qI="PopoverArrow",KI=m.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,s=dl(r);return o.jsx(cp,{...s,...n,ref:t})});KI.displayName=qI;function CN(e){return e?"open":"closed"}var YI=yN,QI=jN,XI=_N,EN=NN;const JI=YI,ZI=QI,PN=m.forwardRef(({className:e,align:t="center",sideOffset:r=4,...n},s)=>o.jsx(XI,{children:o.jsx(EN,{ref:s,align:t,sideOffset:r,className:re("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})}));PN.displayName=EN.displayName;const wi=({size:e="md",className:t,text:r})=>{const n={sm:"w-4 h-4",md:"w-6 h-6",lg:"w-8 h-8"};return o.jsxs("div",{className:re("flex items-center justify-center gap-2",t),children:[o.jsx("div",{className:re("animate-spin rounded-full border-2 border-muted border-t-primary",n[e])}),r&&o.jsx("span",{className:"text-sm text-muted-foreground animate-pulse",children:r})]})},e5=({onGifSelect:e,disabled:t=!1,compact:r=!1})=>{const[n,s]=m.useState(!1),[i,a]=m.useState(""),[l,c]=m.useState([]),[u,f]=m.useState(!1),[d,h]=m.useState(null);Le(),m.useEffect(()=>{n&&l.length===0&&!i&&p()},[n]);const p=async()=>{{h("GIPHY API key not configured");return}},g=async()=>{{h("GIPHY API key not configured");return}},v=y=>{e(y.images.fixed_height.url),s(!1),a("")};return r?o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex gap-2",children:[o.jsx(ut,{placeholder:"Search GIFs...",value:i,onChange:y=>a(y.target.value),onKeyPress:y=>y.key==="Enter"&&g(),className:"flex-1"}),o.jsx(D,{onClick:g,size:"sm",disabled:u,children:o.jsx(ph,{className:"w-4 h-4"})})]}),o.jsx("div",{className:"grid grid-cols-2 gap-2 max-h-60 overflow-y-auto",children:u?o.jsx("div",{className:"col-span-2 flex items-center justify-center py-8",children:o.jsx(wi,{text:"Loading GIFs..."})}):d?o.jsx("div",{className:"col-span-2 text-center py-8 text-destructive",children:d}):l.length>0?l.map(y=>{var x,w;return o.jsx("div",{className:"relative aspect-square rounded-lg overflow-hidden cursor-pointer hover:scale-105 transition-transform",onClick:()=>v(y),children:o.jsx("img",{src:((x=y.images.fixed_height)==null?void 0:x.url)||((w=y.images.preview_gif)==null?void 0:w.url),alt:y.title,className:"w-full h-full object-cover"})},y.id)}):o.jsx("div",{className:"col-span-2 text-center py-8 text-muted-foreground",children:"No GIFs found"})})]}):o.jsxs(JI,{open:n,onOpenChange:s,children:[o.jsx(ZI,{asChild:!0,children:o.jsx(D,{variant:"ghost",size:"sm",disabled:t,className:"h-10 w-10 p-0 rounded-full hover-scale",children:o.jsx(ZE,{className:"h-4 w-4"})})}),o.jsxs(PN,{className:"w-80 p-0",side:"top",children:[o.jsx("div",{className:"p-4 border-b",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("div",{className:"relative flex-1",children:[o.jsx(ph,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),o.jsx(ut,{placeholder:"Search GIFs...",value:i,onChange:y=>a(y.target.value),onKeyPress:y=>y.key==="Enter"&&g(),className:"pl-10"})]}),o.jsx(D,{onClick:g,size:"sm",disabled:u,children:"Search"})]})}),o.jsx($r,{className:"h-64",children:o.jsx("div",{className:"grid grid-cols-2 gap-2 p-4",children:u?o.jsx("div",{className:"col-span-2 flex items-center justify-center py-8",children:o.jsx(wi,{text:"Loading GIFs..."})}):d?o.jsx("div",{className:"col-span-2 text-center py-8 text-destructive",children:d}):l.length>0?l.map(y=>o.jsx("button",{onClick:()=>v(y),className:"aspect-square rounded-md overflow-hidden hover:opacity-80 transition-opacity",children:o.jsx("img",{src:y.images.fixed_height.url,alt:y.title,className:"w-full h-full object-cover"})},y.id)):o.jsx("div",{className:"col-span-2 text-center py-8 text-muted-foreground",children:"No GIFs found. Try a different search term."})})})]})]})},t5=e=>o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.8,...e,children:[o.jsx("circle",{cx:"12",cy:"12",r:"9"}),o.jsx("path",{d:"M12 8v8M8 12h8"})]}),r5=e=>o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.8,...e,children:[o.jsx("rect",{x:"3",y:"9",width:"18",height:"8",rx:"4"}),o.jsx("path",{d:"M8 13h-3M6.5 11.5v3"}),o.jsx("circle",{cx:"16.5",cy:"12.5",r:"1"}),o.jsx("circle",{cx:"18.5",cy:"14.5",r:"1"})]}),sf=e=>o.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.8,...e,children:o.jsx("path",{d:"M4 13a8 8 0 1 1 16 0v5a2 2 0 0 1-2 2h-1v-7h3M4 20h1a2 2 0 0 0 2-2v-5H4"})}),n5=({onSendMessage:e,onSendGif:t,onSendVoice:r,onToolSelect:n,disabled:s,loading:i,groupId:a,groupName:l})=>{const[c,u]=m.useState(""),[f,d]=m.useState(!1),[h,p]=m.useState(!1),[g,v]=m.useState(!1),{toast:y}=Le(),{joinVoiceRoom:x,leaveVoiceRoom:w,isConnected:b}=R1(),j=m.useRef(null),_=m.useRef(null);m.useEffect(()=>{j.current&&(j.current.style.height="0px",j.current.style.height=Math.min(j.current.scrollHeight,160)+"px")},[c]),m.useEffect(()=>{const E=M=>{_.current&&!_.current.contains(M.target)&&v(!1)};return g&&document.addEventListener("mousedown",E),()=>{document.removeEventListener("mousedown",E)}},[g]);const N=async()=>{if(c.trim()&&!f){const E=$I(c);if(!E.isValid){y({title:"Invalid Message",description:E.error||"Message contains invalid content",variant:"destructive"});return}d(!0),await e(E.sanitizedMessage,"text")&&u(""),d(!1)}},S=E=>{E.key==="Enter"&&!E.shiftKey&&(E.preventDefault(),N())},k=()=>{a&&l&&(b?w():v(!0))};return o.jsxs("div",{className:"w-full px-3 py-2",children:[o.jsxs("div",{className:"flex items-end gap-2 rounded-full bg-zinc-800/70 backdrop-blur px-3 py-2 ring-1 ring-zinc-700 shadow-lg",children:[o.jsx("textarea",{ref:j,value:c,disabled:s||f,onChange:E=>u(E.target.value),onKeyDown:S,placeholder:"Message...",className:"flex-1 resize-none bg-transparent text-zinc-100 placeholder:text-zinc-400 outline-none leading-6 max-h-40 min-h-[40px] py-2","aria-label":"Message input"}),o.jsx("div",{className:"relative",children:o.jsx(UI,{onRecordingComplete:r,disabled:s||f})}),o.jsx("div",{className:"relative",children:o.jsx(e5,{onGifSelect:t,disabled:s||f})}),o.jsxs("div",{className:"relative",children:[o.jsx("button",{type:"button",onClick:()=>p(E=>!E),className:"p-2 rounded-full hover:bg-zinc-700 focus:outline-none focus:ring-2 focus:ring-indigo-500","aria-expanded":h,"aria-haspopup":"menu","aria-label":"Open actions",children:o.jsx(t5,{className:"h-7 w-7"})}),h&&o.jsxs("div",{className:"absolute right-0 bottom-12 min-w-[220px] rounded-xl bg-zinc-900/95 backdrop-blur border border-zinc-700 shadow-xl p-1 z-50",children:[o.jsx(Ux,{icon:o.jsx(r5,{className:"h-5 w-5"}),label:"Start a Game",onClick:()=>{p(!1),n("game")}}),a&&l&&o.jsx(Ux,{icon:o.jsx(sf,{className:"h-5 w-5"}),label:b?"Leave Voice Room":"Start Voice Room",onClick:()=>{p(!1),k()}})]})]})]}),g&&o.jsx("div",{ref:_,className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:o.jsx("div",{className:"bg-zinc-900/95 backdrop-blur border border-zinc-700 rounded-xl shadow-xl p-6 min-w-[300px]",children:o.jsxs("div",{className:"space-y-4",children:[o.jsx("div",{className:"text-lg font-medium text-zinc-100 text-center",children:"Join Voice Room"}),o.jsx("div",{className:"text-sm text-zinc-400 text-center mb-4",children:"Choose your microphone preference"}),o.jsxs("button",{onClick:async()=>{v(!1),await x(a,l,!0)},className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-zinc-800 text-zinc-100 focus:outline-none border border-zinc-700",children:[o.jsx(sf,{className:"h-5 w-5"}),o.jsxs("div",{className:"text-left",children:[o.jsx("div",{className:"font-medium",children:"With Microphone"}),o.jsx("div",{className:"text-xs text-zinc-400",children:"Speak and listen"})]})]}),o.jsxs("button",{onClick:async()=>{v(!1),await x(a,l,!1)},className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-zinc-800 text-zinc-100 focus:outline-none border border-zinc-700",children:[o.jsx(sf,{className:"h-5 w-5"}),o.jsxs("div",{className:"text-left",children:[o.jsx("div",{className:"font-medium",children:"Listen Only"}),o.jsx("div",{className:"text-xs text-zinc-400",children:"Hear others but can't speak"})]})]}),o.jsx("button",{onClick:()=>v(!1),className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-zinc-800 text-zinc-500 focus:outline-none",children:o.jsx("span",{className:"text-sm",children:"Cancel"})})]})})}),o.jsxs("div",{className:"px-2 pt-1 text-[11px] text-zinc-400 select-none",children:["Press ",o.jsx("kbd",{className:"px-1 py-0.5 rounded bg-zinc-700/60",children:"Enter"})," to send · ",o.jsx("kbd",{className:"px-1 py-0.5 rounded bg-zinc-700/60",children:"Shift"}),"+",o.jsx("kbd",{className:"px-1 py-0.5 rounded bg-zinc-700/60",children:"Enter"})," for a new line"]})]})};function Ux({icon:e,label:t,onClick:r}){return o.jsxs("button",{onClick:r,className:"w-full flex items-center gap-3 px-3 py-2.5 rounded-lg hover:bg-zinc-800 text-zinc-100 focus:outline-none",children:[o.jsx("span",{className:"shrink-0 text-zinc-200",children:e}),o.jsx("span",{className:"text-sm",children:t})]})}const s5=()=>{const{user:e}=_e(),{toast:t}=Le(),[r,n]=m.useState({canSwitch:!1,remainingSwitches:0,switchLimit:1,loading:!0});m.useEffect(()=>{e&&s()},[e]);const s=async()=>{if(e)try{n(g=>({...g,loading:!0}));const{data:c,error:u}=await R.rpc("get_remaining_switches",{p_user_id:e.id});if(u)throw u;const{data:f,error:d}=await R.rpc("get_user_switch_limit",{p_user_id:e.id});if(d)throw d;const{data:h,error:p}=await R.rpc("can_user_switch_groups",{p_user_id:e.id});if(p)throw p;n({canSwitch:h,remainingSwitches:c,switchLimit:f,loading:!1})}catch(c){console.error("Error fetching switch data:",c),n(u=>({...u,loading:!1}))}},i=async c=>{if(!e)return null;try{const{data:u,error:f}=await R.from("profiles").select("genres, personality").eq("user_id",e.id).single();if(f)throw f;const{data:d,error:h}=await R.from("groups").select(`
          id,
          name,
          vibe_label,
          current_members,
          max_members,
          group_personalities!inner(
            dominant_traits,
            favorite_activities
          )
        `).eq("lifecycle_stage","active").neq("id",c).lt("current_members","max_members");if(h)throw h;if(!d||d.length===0){const{data:g,error:v}=await R.from("groups").select("id, name, vibe_label").eq("lifecycle_stage","active").neq("id",c).lt("current_members","max_members").limit(1);if(v)throw v;return(g==null?void 0:g[0])||null}const p=d.map(g=>{let v=0;const y=g.group_personalities;if(u.genres&&(y!=null&&y.favorite_activities)){const x=u.genres.filter(w=>y.favorite_activities.includes(w)).length;v+=x*2}if(u.personality&&(y!=null&&y.dominant_traits)){const x=u.personality.filter(w=>y.dominant_traits.includes(w)).length;v+=x}return{...g,score:v}});return p.sort((g,v)=>v.score-g.score),p[0]||null}catch(u){return console.error("Error finding similar group:",u),null}},a=async(c,u)=>{if(!e)return!1;try{const{data:f,error:d}=await R.rpc("use_group_switch",{p_user_id:e.id});if(d)throw d;if(!f)return t({title:"Switch Limit Reached",description:"You've used all your group switches for this month.",variant:"destructive"}),!1;const{error:h}=await R.from("group_members").delete().eq("group_id",u).eq("user_id",e.id);if(h)throw h;const{error:p}=await R.from("group_members").insert({group_id:c,user_id:e.id});if(p)throw p;return await s(),t({title:"Successfully Switched Groups!",description:"Welcome to your new group chat!"}),!0}catch(f){return console.error("Error switching groups:",f),t({title:"Switch Failed",description:"Failed to switch groups. Please try again.",variant:"destructive"}),!1}};return{...r,performGroupSwitch:async c=>{if(!r.canSwitch)return t({title:"No Switches Available",description:"You've used all your group switches for this month.",variant:"destructive"}),{success:!1,newGroupId:null};const u=await i(c);if(!u)return t({title:"No Available Groups",description:"No suitable groups are currently available. Please try again later.",variant:"destructive"}),{success:!1,newGroupId:null};const f=await a(u.id,c);return{success:f,newGroupId:f?u.id:null,newGroupData:u}},refreshSwitchData:s}},o5=({isOpen:e,onClose:t,groupId:r,groupName:n,onSwitchSuccess:s})=>{const[i,a]=m.useState(!1),{canSwitch:l,remainingSwitches:c,switchLimit:u,performGroupSwitch:f}=s5(),d=async()=>{a(!0);try{const p=await f(r);p.success&&p.newGroupId&&(s(p.newGroupId,p.newGroupData),t())}catch(p){console.error("Error during group switch:",p)}finally{a(!1)}},h=u>1;return o.jsx(Ht,{open:e,onOpenChange:t,children:o.jsxs(Dt,{className:"max-w-md",children:[o.jsxs(nr,{children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(On,{className:"w-5 h-5 text-amber-500"}),o.jsx(qt,{children:"Leave Group Chat?"})]}),o.jsxs(as,{className:"space-y-3 pt-2",children:[o.jsxs("p",{children:["Are you sure you want to leave ",o.jsxs("strong",{children:['"',n,'"']}),"? You'll be randomly matched to another group with similar preferences."]}),o.jsxs("div",{className:"p-3 rounded-lg bg-muted/50 space-y-2",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm font-medium",children:"Group switches available:"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs(le,{variant:c>0?"default":"destructive",children:[c," of ",u]}),h&&o.jsx(dt,{className:"w-4 h-4 text-yellow-500"})]})]}),o.jsx("p",{className:"text-xs text-muted-foreground",children:h?"Premium members get 5 group switches per month":"Regular members get 1 group switch per month"}),!l&&o.jsxs("div",{className:"flex items-center gap-2 text-xs text-amber-600",children:[o.jsx(On,{className:"w-3 h-3"}),o.jsx("span",{children:"No switches remaining this month"})]})]})]})]}),o.jsxs(dj,{className:"flex gap-2",children:[o.jsx(D,{variant:"outline",onClick:t,disabled:i,children:"Stay in Group"}),o.jsx(D,{variant:"destructive",onClick:d,disabled:!l||i,children:i?o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-4 h-4 animate-spin rounded-full border-2 border-background border-t-transparent"}),"Finding New Group..."]}):o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(vt,{className:"w-4 h-4"}),"Switch Groups"]})})]})]})})},i5=({typingUsers:e})=>{const[t,r]=m.useState("");if(m.useEffect(()=>{if(e.length===0)return;const s=setInterval(()=>{r(i=>i==="..."?"":`${i}.`)},500);return()=>clearInterval(s)},[e.length]),e.length===0)return null;const n=()=>e.length===1?`${e[0].username} is typing${t}`:e.length===2?`${e[0].username} and ${e[1].username} are typing${t}`:`${e.length} people are typing${t}`;return o.jsxs("div",{className:"px-4 py-2 text-sm text-muted-foreground italic flex items-center gap-2",children:[o.jsxs("div",{className:"flex gap-1",children:[o.jsx("div",{className:"w-2 h-2 bg-primary rounded-full animate-bounce",style:{animationDelay:"0ms"}}),o.jsx("div",{className:"w-2 h-2 bg-primary rounded-full animate-bounce",style:{animationDelay:"150ms"}}),o.jsx("div",{className:"w-2 h-2 bg-primary rounded-full animate-bounce",style:{animationDelay:"300ms"}})]}),o.jsx("span",{children:n()})]})},a5=({pinnedMessages:e,onUnpin:t,className:r=""})=>{const n=i=>i.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),s=i=>{switch(i.messageType){case"text":return o.jsx("p",{className:"text-sm text-foreground line-clamp-2",children:i.content});case"gif":return o.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[o.jsx(le,{variant:"secondary",children:"GIF"}),o.jsx("span",{children:"Shared a GIF"})]});case"voice":return o.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[o.jsx(Cu,{className:"h-4 w-4"}),o.jsx("span",{children:"Voice message"})]});default:return null}};return e.length===0?null:o.jsxs(q,{className:`border-b rounded-none ${r}`,children:[o.jsx("div",{className:"p-3 border-b bg-muted/30",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Xw,{className:"h-4 w-4 text-primary"}),o.jsx("span",{className:"font-medium text-sm",children:"Pinned Messages"}),o.jsx(le,{variant:"secondary",className:"text-xs",children:e.length})]})}),o.jsx($r,{className:"max-h-32",children:o.jsx("div",{className:"p-2 space-y-2",children:e.map(i=>o.jsxs("div",{className:"flex items-start gap-2 p-2 rounded-lg bg-background hover:bg-muted/50 transition-colors",children:[o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:i.username}),o.jsx("span",{className:"text-xs text-muted-foreground",children:n(i.pinnedAt)})]}),s(i)]}),o.jsx(D,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 shrink-0",onClick:()=>t(i.id),children:o.jsx(ao,{className:"h-3 w-3"})})]},i.id))})})]})},l5=()=>{const[e,t]=m.useState(new Map),r=async i=>{if(e.has(i))return e.get(i);try{const{data:a,error:l}=await R.from("profiles").select("mood_emoji, show_mood_emoji").eq("user_id",i).single();if(l)throw l;const c={userId:i,moodEmoji:a.mood_emoji||null,showMoodEmoji:a.show_mood_emoji||!1};return t(u=>new Map(u).set(i,c)),c}catch(a){console.error("Error fetching user mood info:",a);const l={userId:i,moodEmoji:null,showMoodEmoji:!1};return t(c=>new Map(c).set(i,l)),l}};return{getUserMoodInfo:r,getUserDisplayName:async(i,a)=>{const l=await r(a);return l.showMoodEmoji&&l.moodEmoji?`${i} ${l.moodEmoji}`:i},clearCache:()=>{t(new Map)}}},ng=m.forwardRef(({className:e,...t},r)=>o.jsx("textarea",{className:re("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...t}));ng.displayName="Textarea";const c5=()=>{const{user:e}=_e(),[t,r]=m.useState(!1);return{loading:t,moderateContent:async(f,d,h)=>{if(!e)return{flagged:!1};try{const{data:p,error:g}=await R.functions.invoke("content-moderation",{body:{content:f,messageId:d,userId:e.id,chatType:h}});return g?(console.error("Moderation error:",g),{flagged:!1}):p}catch(p){return console.error("Moderation request failed:",p),{flagged:!1}}},blockUser:async f=>{if(!e)return!1;r(!0);try{const{error:d}=await R.from("user_moderation_actions").insert({user_id:e.id,target_user_id:f,action_type:"block"});return d?(console.error("Error blocking user:",d),!1):!0}finally{r(!1)}},muteUser:async f=>{if(!e)return!1;r(!0);try{const{error:d}=await R.from("user_moderation_actions").insert({user_id:e.id,target_user_id:f,action_type:"mute"});return d?(console.error("Error muting user:",d),!1):!0}finally{r(!1)}},unblockUser:async f=>{if(!e)return!1;r(!0);try{const{error:d}=await R.from("user_moderation_actions").delete().eq("user_id",e.id).eq("target_user_id",f).eq("action_type","block");return d?(console.error("Error unblocking user:",d),!1):!0}finally{r(!1)}},unmuteUser:async f=>{if(!e)return!1;r(!0);try{const{error:d}=await R.from("user_moderation_actions").delete().eq("user_id",e.id).eq("target_user_id",f).eq("action_type","mute");return d?(console.error("Error unmuting user:",d),!1):!0}finally{r(!1)}},reportMessage:async f=>{if(!e)return!1;r(!0);try{const{error:d}=await R.from("user_reports").insert({reporter_id:e.id,reported_message_id:f.messageId,chat_type:f.chatType,report_reason:f.reason,additional_context:f.additionalContext});return d?(console.error("Error reporting message:",d),!1):!0}finally{r(!1)}},checkUserStatus:async f=>{try{const{data:d}=await R.rpc("is_user_shadow_muted",{user_id_param:f}),{data:h}=await R.rpc("is_user_locked_out",{user_id_param:f});return{isShadowMuted:d,isLockedOut:h}}catch(d){return console.error("Error checking user status:",d),{isShadowMuted:!1,isLockedOut:!1}}}}},u5=["Hate speech or harassment","Bullying or intimidation","Threats of violence","Spam or unwanted content","Inappropriate content","Other"],d5=({messageId:e,authorId:t,chatType:r})=>{const{user:n}=_e(),{blockUser:s,muteUser:i,reportMessage:a,loading:l}=c5(),[c,u]=m.useState(!1),[f,d]=m.useState(""),[h,p]=m.useState("");if((n==null?void 0:n.id)===t)return null;const g=async()=>{await s(t)?Or.success("User blocked successfully"):Or.error("Failed to block user")},v=async()=>{await i(t)?Or.success("User muted successfully"):Or.error("Failed to mute user")},y=()=>{u(!0)},x=async()=>{if(!f){Or.error("Please select a reason for reporting");return}await a({messageId:e,chatType:r,reason:f,additionalContext:h||void 0})?(Or.success("Message reported successfully"),u(!1),d(""),p("")):Or.error("Failed to report message")};return o.jsxs(o.Fragment,{children:[o.jsxs(Zp,{children:[o.jsx(eg,{asChild:!0,children:o.jsx(D,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 text-muted-foreground hover:text-foreground",children:o.jsx(Ww,{size:14})})}),o.jsxs(id,{align:"end",className:"w-48",children:[o.jsxs(Pn,{onClick:y,className:"text-yellow-600",children:[o.jsx(qw,{size:16,className:"mr-2"}),"Report Message"]}),o.jsx(vN,{}),o.jsxs(Pn,{onClick:v,className:"text-orange-600",children:[o.jsx(Uc,{size:16,className:"mr-2"}),"Mute User"]}),o.jsxs(Pn,{onClick:g,className:"text-red-600",children:[o.jsx(FE,{size:16,className:"mr-2"}),"Block User"]})]})]}),o.jsx(Ht,{open:c,onOpenChange:u,children:o.jsxs(Dt,{className:"sm:max-w-md",children:[o.jsxs(nr,{children:[o.jsxs(qt,{className:"flex items-center gap-2",children:[o.jsx(On,{className:"text-yellow-500",size:20}),"Report Message"]}),o.jsx(as,{children:"Help us understand what's wrong with this message."})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Why are you reporting this message?"}),o.jsx("div",{className:"space-y-2",children:u5.map(w=>o.jsxs("label",{className:"flex items-center space-x-2",children:[o.jsx("input",{type:"radio",name:"report-reason",value:w,checked:f===w,onChange:b=>d(b.target.value),className:"text-primary"}),o.jsx("span",{className:"text-sm",children:w})]},w))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Additional context (optional)"}),o.jsx(ng,{value:h,onChange:w=>p(w.target.value),placeholder:"Provide any additional details...",className:"min-h-20"})]}),o.jsxs("div",{className:"flex gap-2 justify-end",children:[o.jsx(D,{variant:"outline",onClick:()=>u(!1),children:"Cancel"}),o.jsx(D,{onClick:x,disabled:l||!f,className:"bg-red-600 hover:bg-red-700",children:l?"Reporting...":"Submit Report"})]})]})]})})]})},f5=({reason:e="Flagged for review",confidence:t})=>o.jsxs(HT,{children:[o.jsx(WT,{asChild:!0,children:o.jsx("div",{className:"flex items-center",children:o.jsx(qw,{size:14,className:"text-gray-400 hover:text-gray-600 transition-colors"})})}),o.jsx(Fb,{side:"top",className:"max-w-xs",children:o.jsxs("div",{className:"text-sm",children:[o.jsx("p",{className:"font-medium",children:"Content flagged"}),o.jsx("p",{className:"text-muted-foreground",children:e}),t&&o.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Confidence: ",Math.round(t*100),"%"]})]})})]}),h5=["👍","❤️","😂","😮","😢","😡"],m5=({message:e,chatType:t="group",onReaction:r,onReact:n,onPin:s,onHideMessage:i,currentUserId:a})=>{const l=r||n,{user:c}=_e(),{getUserDisplayName:u}=l5(),[f,d]=m.useState(!1),[h,p]=m.useState(!1),[g,v]=m.useState(null),[y,x]=m.useState(e.username),[w,b]=m.useState(0),[j,_]=m.useState(!1),N=(c==null?void 0:c.id)===e.userId;m.useEffect(()=>{const O=async()=>{try{const{data:C,error:P}=await R.from("flagged_messages").select("id, flag_reason, confidence_score").eq("message_id",e.id).eq("chat_type",t).maybeSingle();if(P){console.error("Error checking flag status:",P);return}C&&v({id:C.id,flag_reason:C.flag_reason,confidence_score:C.confidence_score})}catch(C){console.error("Error checking flag status:",C)}},L=async()=>{if(e.userId){const C=await u(e.username,e.userId);x(C)}},z=async()=>{try{const{data:C,error:P}=await R.from("user_engagement").select("achievement_points").eq("user_id",e.userId).maybeSingle();C&&!P&&b(C.achievement_points||0)}catch{b(0)}};O(),L(),z()},[e.id,e.username,e.userId,t,u]);const S=O=>O.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),[k,E]=m.useState(null),M=()=>{if(e.voiceAudioUrl)if(f&&k)k.pause(),d(!1);else{let O=k;O||(O=new Audio(e.voiceAudioUrl),E(O),O.onended=()=>{d(!1),E(null)},O.onerror=()=>{d(!1),E(null)}),O.play().then(()=>{d(!0)}).catch(()=>{d(!1),E(null)})}},T=()=>{s&&s(e.id,e.content||"",e.username,e.messageType,e.gifUrl,e.voiceAudioUrl)},I=()=>{_(!0),i&&i(e.id)},G=O=>{if(!a||!O)return o.jsx("span",{children:O});const L=/@(\w+)/g,z=[];let C=0,P;for(;(P=L.exec(O))!==null;)P.index>C&&z.push(O.substring(C,P.index)),z.push(o.jsx("span",{className:"bg-primary/20 text-primary font-medium px-1 rounded",children:P[0]},P.index)),C=P.index+P[0].length;return C<O.length&&z.push(O.substring(C)),o.jsx(o.Fragment,{children:z})},F=()=>{switch(e.messageType){case"text":return o.jsx("div",{className:"text-sm leading-relaxed break-words",children:G(e.content||"")});case"gif":return o.jsx("div",{className:"rounded-lg overflow-hidden max-w-xs",children:o.jsx("img",{src:e.gifUrl,alt:"GIF",className:"w-full h-auto",loading:"lazy"})});case"voice":return o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center gap-2 p-2 rounded-lg bg-primary/10",children:[o.jsx(D,{onClick:M,size:"sm",variant:"ghost",className:"h-8 w-8 p-0 rounded-full",children:f?o.jsx(Yw,{className:"h-4 w-4"}):o.jsx(Jw,{className:"h-4 w-4"})}),o.jsx(Cu,{className:"h-4 w-4 text-muted-foreground"}),o.jsx("span",{className:"text-xs text-muted-foreground",children:"Voice message"})]}),e.voiceTranscription&&o.jsxs("p",{className:"text-sm text-muted-foreground italic",children:['"',e.voiceTranscription,'"']})]});default:return null}};return j?null:o.jsx("div",{className:`flex ${N?"justify-end":"justify-start"} mb-4 group`,children:o.jsxs("div",{className:`max-w-[70%] ${N?"ml-auto":"mr-auto"} relative`,children:[o.jsxs("div",{className:`flex items-center gap-2 mb-1 ${N?"justify-end":"justify-start"}`,children:[o.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:y}),w>0&&o.jsxs(le,{variant:"secondary",className:"text-xs px-1 py-0 h-4",children:[w," ⭐"]}),g&&o.jsx(f5,{reason:g.flag_reason,confidence:g.confidence_score}),o.jsx("span",{className:"text-xs text-muted-foreground",children:S(e.timestamp)}),!N&&o.jsx(d5,{messageId:e.id,authorId:e.userId,chatType:t}),o.jsxs(Zp,{children:[o.jsx(eg,{asChild:!0,children:o.jsx(D,{variant:"ghost",size:"sm",className:"h-4 w-4 p-0",children:o.jsx(Ww,{className:"h-3 w-3"})})}),o.jsxs(id,{children:[s&&o.jsxs(Pn,{onClick:T,children:[o.jsx(Xw,{className:"h-4 w-4 mr-2"}),"Pin Message"]}),o.jsxs(Pn,{onClick:I,children:[o.jsx(Oc,{className:"h-4 w-4 mr-2"}),"Hide Message"]})]})]})]}),o.jsx(q,{className:`p-3 ${N?"bg-primary text-primary-foreground ml-2":"bg-card mr-2"} rounded-2xl ${N?"rounded-br-md":"rounded-bl-md"} shadow-sm cursor-pointer transition-all hover:shadow-md`,onClick:()=>p(!h),children:F()}),e.reactions&&e.reactions.length>0&&o.jsx("div",{className:`flex gap-1 mt-1 ${N?"justify-end mr-2":"justify-start ml-2"}`,children:e.reactions.map(O=>o.jsxs(D,{variant:"ghost",size:"sm",className:"h-6 px-2 text-xs rounded-full bg-secondary/50 hover:bg-secondary",onClick:()=>l&&l(e.id,O.emoji),children:[O.emoji," ",O.count]},O.emoji))}),h&&o.jsx("div",{className:`flex gap-1 mt-2 p-2 bg-popover border rounded-lg shadow-md ${N?"mr-2":"ml-2"}`,children:h5.map(O=>o.jsx(D,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 text-lg hover:bg-secondary",onClick:()=>{l&&l(e.id,O),p(!1)},children:O},O))})]})})};var sg="Avatar",[p5,f$]=Nr(sg),[g5,TN]=p5(sg),RN=m.forwardRef((e,t)=>{const{__scopeAvatar:r,...n}=e,[s,i]=m.useState("idle");return o.jsx(g5,{scope:r,imageLoadingStatus:s,onImageLoadingStatusChange:i,children:o.jsx(ie.span,{...n,ref:t})})});RN.displayName=sg;var AN="AvatarImage",MN=m.forwardRef((e,t)=>{const{__scopeAvatar:r,src:n,onLoadingStatusChange:s=()=>{},...i}=e,a=TN(AN,r),l=v5(n,i.referrerPolicy),c=Ge(u=>{s(u),a.onImageLoadingStatusChange(u)});return Br(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?o.jsx(ie.img,{...i,ref:t,src:n}):null});MN.displayName=AN;var DN="AvatarFallback",ON=m.forwardRef((e,t)=>{const{__scopeAvatar:r,delayMs:n,...s}=e,i=TN(DN,r),[a,l]=m.useState(n===void 0);return m.useEffect(()=>{if(n!==void 0){const c=window.setTimeout(()=>l(!0),n);return()=>window.clearTimeout(c)}},[n]),a&&i.imageLoadingStatus!=="loaded"?o.jsx(ie.span,{...s,ref:t}):null});ON.displayName=DN;function v5(e,t){const[r,n]=m.useState("idle");return Br(()=>{if(!e){n("error");return}let s=!0;const i=new window.Image,a=l=>()=>{s&&n(l)};return n("loading"),i.onload=a("loaded"),i.onerror=a("error"),i.src=e,t&&(i.referrerPolicy=t),()=>{s=!1}},[e,t]),r}var IN=RN,LN=MN,$N=ON;const UN=m.forwardRef(({className:e,...t},r)=>o.jsx(IN,{ref:r,className:re("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));UN.displayName=IN.displayName;const x5=m.forwardRef(({className:e,...t},r)=>o.jsx(LN,{ref:r,className:re("aspect-square h-full w-full",e),...t}));x5.displayName=LN.displayName;const FN=m.forwardRef(({className:e,...t},r)=>o.jsx($N,{ref:r,className:re("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));FN.displayName=$N.displayName;const y5=({groupName:e})=>{const{isConnected:t,participants:r,participantCount:n,isMuted:s,isDeafened:i,isSpeaking:a,handRaised:l,messages:c,currentTranscript:u,isCollapsed:f,leaveVoiceRoom:d,toggleMute:h,toggleDeafen:p,toggleHandRaise:g,toggleCollapse:v}=R1(),[y,x]=m.useState(!1);if(!t)return null;const w=N=>N.split(" ").map(S=>S.charAt(0)).join("").toUpperCase().slice(0,2),b=N=>N.isMuted?o.jsx(Nv,{className:"h-3 w-3 text-red-500"}):N.isDeafened?o.jsx(Uc,{className:"h-3 w-3 text-orange-500"}):N.isSpeaking?o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(ic,{className:"h-3 w-3 text-green-500"}),o.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"})]}):o.jsx(ic,{className:"h-3 w-3 text-gray-400"}),j=N=>N.handRaised?o.jsx(_v,{className:"h-3 w-3 text-yellow-500"}):b(N),_=N=>{const S=N.hasMicrophone!==!1;return o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("span",{className:"text-sm font-medium",children:N.name}),!S&&o.jsx("span",{className:"text-xs text-gray-500 bg-gray-100 dark:bg-gray-700 px-1 rounded",children:"(listening)"})]})};return o.jsxs(q,{className:re("fixed z-40 transition-all duration-300 shadow-xl border-2","bottom-20 right-6","lg:top-20 lg:right-6 lg:bottom-auto",f?"w-80 h-16":"w-96 h-[500px] lg:w-[400px] lg:h-[600px]",t?"border-green-500":"border-gray-300"),children:[o.jsx(ue,{className:"pb-2 cursor-pointer",onClick:v,children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs(de,{className:"text-sm flex items-center gap-2",children:[o.jsx(Cu,{className:"h-4 w-4 text-green-500"}),"Voice Room",o.jsx(le,{variant:"secondary",className:"text-xs",children:e})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs(le,{variant:"outline",className:"text-xs",children:[o.jsx(vt,{className:"h-3 w-3 mr-1"}),n]}),f?o.jsx(VE,{className:"h-4 w-4"}):o.jsx(BE,{className:"h-4 w-4"})]})]})}),!f&&o.jsxs(Z,{className:"space-y-4",children:[o.jsxs("div",{className:"flex gap-2 mb-3",children:[o.jsxs(D,{variant:s?"destructive":"default",size:"sm",onClick:h,className:"flex-1",children:[s?o.jsx(Nv,{className:"h-4 w-4 mr-2"}):o.jsx(ic,{className:"h-4 w-4 mr-2"}),s?"Unmute":"Mute"]}),o.jsxs(D,{variant:i?"destructive":"outline",size:"sm",onClick:p,className:"flex-1",children:[i?o.jsx(Uc,{className:"h-4 w-4 mr-2"}):o.jsx(JE,{className:"h-4 w-4 mr-2"}),i?"Undeafen":"Deafen"]})]}),o.jsxs("div",{className:"flex gap-2 mb-4",children:[o.jsxs(D,{variant:l?"default":"outline",size:"sm",onClick:g,className:re("flex-1",l&&"bg-yellow-500 hover:bg-yellow-600 text-white"),children:[o.jsx(_v,{className:"h-4 w-4 mr-2"}),l?"Lower Hand":"Raise Hand"]}),o.jsxs(D,{variant:"outline",size:"sm",onClick:()=>x(!y),className:"flex-1",children:[o.jsx(Xm,{className:"h-4 w-4 mr-2"}),"Settings"]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("h4",{className:"text-sm font-medium flex items-center gap-2",children:[o.jsx(vt,{className:"h-4 w-4"}),"Participants (",n,")"]}),o.jsxs("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:[r.map(N=>o.jsxs("div",{className:re("flex items-center gap-2 p-2 rounded-lg transition-all duration-200",N.isSpeaking?"bg-green-50 border border-green-200":"bg-gray-50",N.handRaised&&"bg-yellow-50 border border-yellow-200"),children:[o.jsxs("div",{className:"relative",children:[o.jsx(UN,{className:"h-8 w-8",children:o.jsx(FN,{className:"text-xs",children:w(N.name)})}),N.isSpeaking&&o.jsx("div",{className:"absolute -bottom-1 -right-1 w-3 h-3 bg-green-500 rounded-full animate-pulse"})]}),o.jsx("div",{className:"flex-1 truncate",children:_(N)}),j(N)]},N.userId)),r.length===0&&o.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"No other participants yet"})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("h4",{className:"text-sm font-medium flex items-center gap-2",children:[o.jsx(Lc,{className:"h-4 w-4"}),"Voice Messages"]}),o.jsx("div",{className:"max-h-24 overflow-y-auto space-y-1",children:c.length>0?c.slice(-5).map(N=>o.jsxs("div",{className:"text-xs p-2 bg-gray-50 rounded",children:[o.jsx("div",{className:"font-medium text-gray-700",children:N.type==="user_speech"?"You":"AI"}),o.jsx("div",{className:"text-gray-600 truncate",children:N.content})]},N.id)):o.jsx("p",{className:"text-xs text-gray-500 text-center py-2",children:"No messages yet"})})]}),u&&o.jsxs("div",{className:"space-y-2",children:[o.jsx("h4",{className:"text-sm font-medium",children:"Live Transcript"}),o.jsxs("div",{className:"p-2 bg-blue-50 rounded text-sm text-blue-800",children:[u,a&&o.jsx("span",{className:"inline-block w-2 h-2 bg-blue-500 rounded-full ml-2 animate-pulse"})]})]}),y&&o.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg space-y-2",children:[o.jsx("h5",{className:"text-sm font-medium",children:"Voice Settings"}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-xs",children:"Input Volume"}),o.jsx("div",{className:"w-20 h-1 bg-gray-200 rounded-full",children:o.jsx("div",{className:"w-3/4 h-full bg-blue-500 rounded-full"})})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-xs",children:"Output Volume"}),o.jsx("div",{className:"w-20 h-1 bg-gray-200 rounded-full",children:o.jsx("div",{className:"w-4/5 h-full bg-green-500 rounded-full"})})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-xs",children:"Echo Cancellation"}),o.jsx("div",{className:"w-4 h-4 bg-green-500 rounded"})]})]})]}),o.jsxs(D,{variant:"destructive",size:"sm",onClick:d,className:"w-full",children:[o.jsx(r2,{className:"h-4 w-4 mr-2"}),"Leave Voice Room"]})]})]})};function w5(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}const zN=A.createContext({drawerRef:{current:null},overlayRef:{current:null},onPress:()=>{},onRelease:()=>{},onDrag:()=>{},onNestedDrag:()=>{},onNestedOpenChange:()=>{},onNestedRelease:()=>{},openProp:void 0,dismissible:!1,isOpen:!1,isDragging:!1,keyboardIsOpen:{current:!1},snapPointsOffset:null,snapPoints:null,handleOnly:!1,modal:!1,shouldFade:!1,activeSnapPoint:null,onOpenChange:()=>{},setActiveSnapPoint:()=>{},closeDrawer:()=>{},direction:"bottom",shouldScaleBackground:!1,setBackgroundColorOnScale:!0,noBodyStyles:!1,container:null,autoFocus:!1}),Ii=()=>{const e=A.useContext(zN);if(!e)throw new Error("useDrawerContext must be used within a Drawer.Root");return e};w5(`[data-vaul-drawer]{touch-action:none;will-change:transform;transition:transform .5s cubic-bezier(.32, .72, 0, 1);animation-duration:.5s;animation-timing-function:cubic-bezier(0.32,0.72,0,1)}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=bottom][data-state=open]{animation-name:slideFromBottom}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=bottom][data-state=closed]{animation-name:slideToBottom}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=top][data-state=open]{animation-name:slideFromTop}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=top][data-state=closed]{animation-name:slideToTop}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=left][data-state=open]{animation-name:slideFromLeft}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=left][data-state=closed]{animation-name:slideToLeft}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=right][data-state=open]{animation-name:slideFromRight}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=right][data-state=closed]{animation-name:slideToRight}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=bottom]{transform:translate3d(0,100%,0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=top]{transform:translate3d(0,-100%,0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=left]{transform:translate3d(-100%,0,0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=right]{transform:translate3d(100%,0,0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=top]{transform:translate3d(0,var(--snap-point-height,0),0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=bottom]{transform:translate3d(0,var(--snap-point-height,0),0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=left]{transform:translate3d(var(--snap-point-height,0),0,0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=right]{transform:translate3d(var(--snap-point-height,0),0,0)}[data-vaul-overlay][data-vaul-snap-points=false]{animation-duration:.5s;animation-timing-function:cubic-bezier(0.32,0.72,0,1)}[data-vaul-overlay][data-vaul-snap-points=false][data-state=open]{animation-name:fadeIn}[data-vaul-overlay][data-state=closed]{animation-name:fadeOut}[data-vaul-overlay][data-vaul-snap-points=true]{opacity:0;transition:opacity .5s cubic-bezier(.32, .72, 0, 1)}[data-vaul-overlay][data-vaul-snap-points=true]{opacity:1}[data-vaul-drawer]:not([data-vaul-custom-container=true])::after{content:'';position:absolute;background:inherit;background-color:inherit}[data-vaul-drawer][data-vaul-drawer-direction=top]::after{top:initial;bottom:100%;left:0;right:0;height:200%}[data-vaul-drawer][data-vaul-drawer-direction=bottom]::after{top:100%;bottom:initial;left:0;right:0;height:200%}[data-vaul-drawer][data-vaul-drawer-direction=left]::after{left:initial;right:100%;top:0;bottom:0;width:200%}[data-vaul-drawer][data-vaul-drawer-direction=right]::after{left:100%;right:initial;top:0;bottom:0;width:200%}[data-vaul-overlay][data-vaul-snap-points=true]:not([data-vaul-snap-points-overlay=true]):not(
[data-state=closed]
){opacity:0}[data-vaul-overlay][data-vaul-snap-points-overlay=true]{opacity:1}[data-vaul-handle]{display:block;position:relative;opacity:.7;background:#e2e2e4;margin-left:auto;margin-right:auto;height:5px;width:32px;border-radius:1rem;touch-action:pan-y}[data-vaul-handle]:active,[data-vaul-handle]:hover{opacity:1}[data-vaul-handle-hitarea]{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);width:max(100%,2.75rem);height:max(100%,2.75rem);touch-action:inherit}@media (hover:hover) and (pointer:fine){[data-vaul-drawer]{user-select:none}}@media (pointer:fine){[data-vaul-handle-hitarea]:{width:100%;height:100%}}@keyframes fadeIn{from{opacity:0}to{opacity:1}}@keyframes fadeOut{to{opacity:0}}@keyframes slideFromBottom{from{transform:translate3d(0,100%,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToBottom{to{transform:translate3d(0,100%,0)}}@keyframes slideFromTop{from{transform:translate3d(0,-100%,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToTop{to{transform:translate3d(0,-100%,0)}}@keyframes slideFromLeft{from{transform:translate3d(-100%,0,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToLeft{to{transform:translate3d(-100%,0,0)}}@keyframes slideFromRight{from{transform:translate3d(100%,0,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToRight{to{transform:translate3d(100%,0,0)}}`);const b5=24,j5=typeof window<"u"?m.useLayoutEffect:m.useEffect;function Fx(...e){return(...t)=>{for(let r of e)typeof r=="function"&&r(...t)}}function _5(){return og(/^Mac/)}function N5(){return og(/^iPhone/)}function zx(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}function S5(){return og(/^iPad/)||_5()&&navigator.maxTouchPoints>1}function BN(){return N5()||S5()}function og(e){return typeof window<"u"&&window.navigator!=null?e.test(window.navigator.platform):void 0}const of=typeof document<"u"&&window.visualViewport;function Bx(e){let t=window.getComputedStyle(e);return/(auto|scroll)/.test(t.overflow+t.overflowX+t.overflowY)}function GN(e){for(Bx(e)&&(e=e.parentElement);e&&!Bx(e);)e=e.parentElement;return e||document.scrollingElement||document.documentElement}const k5=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);let Gl=0,af;function C5(e={}){let{isDisabled:t}=e;j5(()=>{if(!t)return Gl++,Gl===1&&BN()&&(af=E5()),()=>{Gl--,Gl===0&&(af==null||af())}},[t])}function E5(){let e,t=0,r=d=>{e=GN(d.target),!(e===document.documentElement&&e===document.body)&&(t=d.changedTouches[0].pageY)},n=d=>{if(!e||e===document.documentElement||e===document.body){d.preventDefault();return}let h=d.changedTouches[0].pageY,p=e.scrollTop,g=e.scrollHeight-e.clientHeight;g!==0&&((p<=0&&h>t||p>=g&&h<t)&&d.preventDefault(),t=h)},s=d=>{let h=d.target;Kh(h)&&h!==document.activeElement&&(d.preventDefault(),h.style.transform="translateY(-2000px)",h.focus(),requestAnimationFrame(()=>{h.style.transform=""}))},i=d=>{let h=d.target;Kh(h)&&(h.style.transform="translateY(-2000px)",requestAnimationFrame(()=>{h.style.transform="",of&&(of.height<window.innerHeight?requestAnimationFrame(()=>{Gx(h)}):of.addEventListener("resize",()=>Gx(h),{once:!0}))}))},a=()=>{window.scrollTo(0,0)},l=window.pageXOffset,c=window.pageYOffset,u=Fx(P5(document.documentElement,"paddingRight",`${window.innerWidth-document.documentElement.clientWidth}px`));window.scrollTo(0,0);let f=Fx(Yi(document,"touchstart",r,{passive:!1,capture:!0}),Yi(document,"touchmove",n,{passive:!1,capture:!0}),Yi(document,"touchend",s,{passive:!1,capture:!0}),Yi(document,"focus",i,!0),Yi(window,"scroll",a));return()=>{u(),f(),window.scrollTo(l,c)}}function P5(e,t,r){let n=e.style[t];return e.style[t]=r,()=>{e.style[t]=n}}function Yi(e,t,r,n){return e.addEventListener(t,r,n),()=>{e.removeEventListener(t,r,n)}}function Gx(e){let t=document.scrollingElement||document.documentElement;for(;e&&e!==t;){let r=GN(e);if(r!==document.documentElement&&r!==document.body&&r!==e){let n=r.getBoundingClientRect().top,s=e.getBoundingClientRect().top,i=e.getBoundingClientRect().bottom;const a=r.getBoundingClientRect().bottom+b5;i>a&&(r.scrollTop+=s-n)}e=r.parentElement}}function Kh(e){return e instanceof HTMLInputElement&&!k5.has(e.type)||e instanceof HTMLTextAreaElement||e instanceof HTMLElement&&e.isContentEditable}function T5(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function R5(...e){return t=>e.forEach(r=>T5(r,t))}function VN(...e){return m.useCallback(R5(...e),e)}const HN=new WeakMap;function tt(e,t,r=!1){if(!e||!(e instanceof HTMLElement))return;let n={};Object.entries(t).forEach(([s,i])=>{if(s.startsWith("--")){e.style.setProperty(s,i);return}n[s]=e.style[s],e.style[s]=i}),!r&&HN.set(e,n)}function A5(e,t){if(!e||!(e instanceof HTMLElement))return;let r=HN.get(e);r&&(e.style[t]=r[t])}const rt=e=>{switch(e){case"top":case"bottom":return!0;case"left":case"right":return!1;default:return e}};function Vl(e,t){if(!e)return null;const r=window.getComputedStyle(e),n=r.transform||r.webkitTransform||r.mozTransform;let s=n.match(/^matrix3d\((.+)\)$/);return s?parseFloat(s[1].split(", ")[rt(t)?13:12]):(s=n.match(/^matrix\((.+)\)$/),s?parseFloat(s[1].split(", ")[rt(t)?5:4]):null)}function M5(e){return 8*(Math.log(e+1)-2)}function lf(e,t){if(!e)return()=>{};const r=e.style.cssText;return Object.assign(e.style,t),()=>{e.style.cssText=r}}function D5(...e){return(...t)=>{for(const r of e)typeof r=="function"&&r(...t)}}const ze={DURATION:.5,EASE:[.32,.72,0,1]},WN=.4,O5=.25,I5=100,qN=8,Ds=16,Yh=26,cf="vaul-dragging";function KN(e){const t=A.useRef(e);return A.useEffect(()=>{t.current=e}),A.useMemo(()=>(...r)=>t.current==null?void 0:t.current.call(t,...r),[])}function L5({defaultProp:e,onChange:t}){const r=A.useState(e),[n]=r,s=A.useRef(n),i=KN(t);return A.useEffect(()=>{s.current!==n&&(i(n),s.current=n)},[n,s,i]),r}function YN({prop:e,defaultProp:t,onChange:r=()=>{}}){const[n,s]=L5({defaultProp:t,onChange:r}),i=e!==void 0,a=i?e:n,l=KN(r),c=A.useCallback(u=>{if(i){const d=typeof u=="function"?u(e):u;d!==e&&l(d)}else s(u)},[i,e,s,l]);return[a,c]}function $5({activeSnapPointProp:e,setActiveSnapPointProp:t,snapPoints:r,drawerRef:n,overlayRef:s,fadeFromIndex:i,onSnapPointChange:a,direction:l="bottom",container:c,snapToSequentialPoint:u}){const[f,d]=YN({prop:e,defaultProp:r==null?void 0:r[0],onChange:t}),[h,p]=A.useState(typeof window<"u"?{innerWidth:window.innerWidth,innerHeight:window.innerHeight}:void 0);A.useEffect(()=>{function S(){p({innerWidth:window.innerWidth,innerHeight:window.innerHeight})}return window.addEventListener("resize",S),()=>window.removeEventListener("resize",S)},[]);const g=A.useMemo(()=>f===(r==null?void 0:r[r.length-1])||null,[r,f]),v=A.useMemo(()=>r==null?void 0:r.findIndex(S=>S===f),[r,f]),y=r&&r.length>0&&(i||i===0)&&!Number.isNaN(i)&&r[i]===f||!r,x=A.useMemo(()=>{const S=c?{width:c.getBoundingClientRect().width,height:c.getBoundingClientRect().height}:typeof window<"u"?{width:window.innerWidth,height:window.innerHeight}:{width:0,height:0};var k;return(k=r==null?void 0:r.map(E=>{const M=typeof E=="string";let T=0;if(M&&(T=parseInt(E,10)),rt(l)){const G=M?T:h?E*S.height:0;return h?l==="bottom"?S.height-G:-S.height+G:G}const I=M?T:h?E*S.width:0;return h?l==="right"?S.width-I:-S.width+I:I}))!=null?k:[]},[r,h,c]),w=A.useMemo(()=>v!==null?x==null?void 0:x[v]:null,[x,v]),b=A.useCallback(S=>{var k;const E=(k=x==null?void 0:x.findIndex(M=>M===S))!=null?k:null;a(E),tt(n.current,{transition:`transform ${ze.DURATION}s cubic-bezier(${ze.EASE.join(",")})`,transform:rt(l)?`translate3d(0, ${S}px, 0)`:`translate3d(${S}px, 0, 0)`}),x&&E!==x.length-1&&E!==i&&E<i?tt(s.current,{transition:`opacity ${ze.DURATION}s cubic-bezier(${ze.EASE.join(",")})`,opacity:"0"}):tt(s.current,{transition:`opacity ${ze.DURATION}s cubic-bezier(${ze.EASE.join(",")})`,opacity:"1"}),d(r==null?void 0:r[Math.max(E,0)])},[n.current,r,x,i,s,d]);A.useEffect(()=>{if(f||e){var S;const k=(S=r==null?void 0:r.findIndex(E=>E===e||E===f))!=null?S:-1;x&&k!==-1&&typeof x[k]=="number"&&b(x[k])}},[f,e,r,x,b]);function j({draggedDistance:S,closeDrawer:k,velocity:E,dismissible:M}){if(i===void 0)return;const T=l==="bottom"||l==="right"?(w??0)-S:(w??0)+S,I=v===i-1,G=v===0,F=S>0;if(I&&tt(s.current,{transition:`opacity ${ze.DURATION}s cubic-bezier(${ze.EASE.join(",")})`}),!u&&E>2&&!F){M?k():b(x[0]);return}if(!u&&E>2&&F&&x&&r){b(x[r.length-1]);return}const O=x==null?void 0:x.reduce((z,C)=>typeof z!="number"||typeof C!="number"?z:Math.abs(C-T)<Math.abs(z-T)?C:z),L=rt(l)?window.innerHeight:window.innerWidth;if(E>WN&&Math.abs(S)<L*.4){const z=F?1:-1;if(z>0&&g){b(x[r.length-1]);return}if(G&&z<0&&M&&k(),v===null)return;b(x[v+z]);return}b(O)}function _({draggedDistance:S}){if(w===null)return;const k=l==="bottom"||l==="right"?w-S:w+S;(l==="bottom"||l==="right")&&k<x[x.length-1]||(l==="top"||l==="left")&&k>x[x.length-1]||tt(n.current,{transform:rt(l)?`translate3d(0, ${k}px, 0)`:`translate3d(${k}px, 0, 0)`})}function N(S,k){if(!r||typeof v!="number"||!x||i===void 0)return null;const E=v===i-1;if(v>=i&&k)return 0;if(E&&!k)return 1;if(!y&&!E)return null;const T=E?v+1:v-1,I=E?x[T]-x[T-1]:x[T+1]-x[T],G=S/Math.abs(I);return E?1-G:G}return{isLastSnapPoint:g,activeSnapPoint:f,shouldFade:y,getPercentageDragged:N,setActiveSnapPoint:d,activeSnapPointIndex:v,onRelease:j,onDrag:_,snapPointsOffset:x}}const U5=()=>()=>{};function F5(){const{direction:e,isOpen:t,shouldScaleBackground:r,setBackgroundColorOnScale:n,noBodyStyles:s}=Ii(),i=A.useRef(null),a=m.useMemo(()=>document.body.style.backgroundColor,[]);function l(){return(window.innerWidth-Yh)/window.innerWidth}A.useEffect(()=>{if(t&&r){i.current&&clearTimeout(i.current);const c=document.querySelector("[data-vaul-drawer-wrapper]")||document.querySelector("[vaul-drawer-wrapper]");if(!c)return;D5(n&&!s?lf(document.body,{background:"black"}):U5,lf(c,{transformOrigin:rt(e)?"top":"left",transitionProperty:"transform, border-radius",transitionDuration:`${ze.DURATION}s`,transitionTimingFunction:`cubic-bezier(${ze.EASE.join(",")})`}));const u=lf(c,{borderRadius:`${qN}px`,overflow:"hidden",...rt(e)?{transform:`scale(${l()}) translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)`}:{transform:`scale(${l()}) translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)`}});return()=>{u(),i.current=window.setTimeout(()=>{a?document.body.style.background=a:document.body.style.removeProperty("background")},ze.DURATION*1e3)}}},[t,r,a])}let Qi=null;function z5({isOpen:e,modal:t,nested:r,hasBeenOpened:n,preventScrollRestoration:s,noBodyStyles:i}){const[a,l]=A.useState(()=>typeof window<"u"?window.location.href:""),c=A.useRef(0),u=A.useCallback(()=>{if(zx()&&Qi===null&&e&&!i){Qi={position:document.body.style.position,top:document.body.style.top,left:document.body.style.left,height:document.body.style.height,right:"unset"};const{scrollX:d,innerHeight:h}=window;document.body.style.setProperty("position","fixed","important"),Object.assign(document.body.style,{top:`${-c.current}px`,left:`${-d}px`,right:"0px",height:"auto"}),window.setTimeout(()=>window.requestAnimationFrame(()=>{const p=h-window.innerHeight;p&&c.current>=h&&(document.body.style.top=`${-(c.current+p)}px`)}),300)}},[e]),f=A.useCallback(()=>{if(zx()&&Qi!==null&&!i){const d=-parseInt(document.body.style.top,10),h=-parseInt(document.body.style.left,10);Object.assign(document.body.style,Qi),window.requestAnimationFrame(()=>{if(s&&a!==window.location.href){l(window.location.href);return}window.scrollTo(h,d)}),Qi=null}},[a]);return A.useEffect(()=>{function d(){c.current=window.scrollY}return d(),window.addEventListener("scroll",d),()=>{window.removeEventListener("scroll",d)}},[]),A.useEffect(()=>{r||!n||(e?(!window.matchMedia("(display-mode: standalone)").matches&&u(),t||window.setTimeout(()=>{f()},500)):f())},[e,n,a,t,r,u,f]),{restorePositionSetting:f}}function QN({open:e,onOpenChange:t,children:r,onDrag:n,onRelease:s,snapPoints:i,shouldScaleBackground:a=!1,setBackgroundColorOnScale:l=!0,closeThreshold:c=O5,scrollLockTimeout:u=I5,dismissible:f=!0,handleOnly:d=!1,fadeFromIndex:h=i&&i.length-1,activeSnapPoint:p,setActiveSnapPoint:g,fixed:v,modal:y=!0,onClose:x,nested:w,noBodyStyles:b,direction:j="bottom",defaultOpen:_=!1,disablePreventScroll:N=!0,snapToSequentialPoint:S=!1,preventScrollRestoration:k=!1,repositionInputs:E=!0,onAnimationEnd:M,container:T,autoFocus:I=!1}){var G,F;const[O=!1,L]=YN({defaultProp:_,prop:e,onChange:V=>{t==null||t(V),!V&&!w&&Re(),setTimeout(()=>{M==null||M(V)},ze.DURATION*1e3),V&&!y&&typeof window<"u"&&window.requestAnimationFrame(()=>{document.body.style.pointerEvents="auto"}),V||(document.body.style.pointerEvents="auto")}}),[z,C]=A.useState(!1),[P,H]=A.useState(!1),[$,W]=A.useState(!1),X=A.useRef(null),fe=A.useRef(null),ye=A.useRef(null),se=A.useRef(null),ce=A.useRef(null),$e=A.useRef(!1),Ce=A.useRef(null),Fe=A.useRef(0),Ke=A.useRef(!1),Ut=A.useRef(0),ne=A.useRef(null),Et=A.useRef(((G=ne.current)==null?void 0:G.getBoundingClientRect().height)||0),Te=A.useRef(((F=ne.current)==null?void 0:F.getBoundingClientRect().width)||0),Ne=A.useRef(0),xt=A.useCallback(V=>{i&&V===Ft.length-1&&(fe.current=new Date)},[]),{activeSnapPoint:it,activeSnapPointIndex:Se,setActiveSnapPoint:Je,onRelease:kr,snapPointsOffset:Ft,onDrag:Wr,shouldFade:hn,getPercentageDragged:ee}=$5({snapPoints:i,activeSnapPointProp:p,setActiveSnapPointProp:g,drawerRef:ne,fadeFromIndex:h,overlayRef:X,onSnapPointChange:xt,direction:j,container:T,snapToSequentialPoint:S});C5({isDisabled:!O||P||!y||$||!z||!E||!N});const{restorePositionSetting:Re}=z5({isOpen:O,modal:y,nested:w,hasBeenOpened:z,preventScrollRestoration:k,noBodyStyles:b});function at(){return(window.innerWidth-Yh)/window.innerWidth}function mn(V){var te,oe;!f&&!i||ne.current&&!ne.current.contains(V.target)||(Et.current=((te=ne.current)==null?void 0:te.getBoundingClientRect().height)||0,Te.current=((oe=ne.current)==null?void 0:oe.getBoundingClientRect().width)||0,H(!0),ye.current=new Date,BN()&&window.addEventListener("touchend",()=>$e.current=!1,{once:!0}),V.target.setPointerCapture(V.pointerId),Fe.current=rt(j)?V.pageY:V.pageX)}function dr(V,te){var oe,ge;let he=V;const Ye=(oe=window.getSelection())==null?void 0:oe.toString(),Ze=ne.current?Vl(ne.current,j):null,yt=new Date;if(he.hasAttribute("data-vaul-no-drag")||he.closest("[data-vaul-no-drag]"))return!1;if(j==="right"||j==="left")return!0;if(fe.current&&yt.getTime()-fe.current.getTime()<500)return!1;if(Ze!==null&&(j==="bottom"?Ze>0:Ze<0))return!0;if(Ye&&Ye.length>0)return!1;if(yt.getTime()-((ge=ce.current)==null?void 0:ge.getTime())<u&&Ze===0||te)return ce.current=yt,!1;for(;he;){if(he.scrollHeight>he.clientHeight){if(he.scrollTop!==0)return ce.current=new Date,!1;if(he.getAttribute("role")==="dialog")return!0}he=he.parentNode}return!0}function ho(V){if(ne.current&&P){const te=j==="bottom"||j==="right"?1:-1,oe=(Fe.current-(rt(j)?V.pageY:V.pageX))*te,ge=oe>0,he=i&&!f&&!ge;if(he&&Se===0)return;const Ye=Math.abs(oe),Ze=document.querySelector("[data-vaul-drawer-wrapper]"),yt=j==="bottom"||j==="top"?Et.current:Te.current;let Pt=Ye/yt;const Xt=ee(Ye,ge);if(Xt!==null&&(Pt=Xt),he&&Pt>=1||!$e.current&&!dr(V.target,ge))return;if(ne.current.classList.add(cf),$e.current=!0,tt(ne.current,{transition:"none"}),tt(X.current,{transition:"none"}),i&&Wr({draggedDistance:oe}),ge&&!i){const fr=M5(oe),go=Math.min(fr*-1,0)*te;tt(ne.current,{transform:rt(j)?`translate3d(0, ${go}px, 0)`:`translate3d(${go}px, 0, 0)`});return}const qr=1-Pt;if((hn||h&&Se===h-1)&&(n==null||n(V,Pt),tt(X.current,{opacity:`${qr}`,transition:"none"},!0)),Ze&&X.current&&a){const fr=Math.min(at()+Pt*(1-at()),1),go=8-Pt*8,fl=Math.max(0,14-Pt*14);tt(Ze,{borderRadius:`${go}px`,transform:rt(j)?`scale(${fr}) translate3d(0, ${fl}px, 0)`:`scale(${fr}) translate3d(${fl}px, 0, 0)`,transition:"none"},!0)}if(!i){const fr=Ye*te;tt(ne.current,{transform:rt(j)?`translate3d(0, ${fr}px, 0)`:`translate3d(${fr}px, 0, 0)`})}}}A.useEffect(()=>{var V;function te(){if(!ne.current||!E)return;const oe=document.activeElement;if(Kh(oe)||Ke.current){var ge;const he=((ge=window.visualViewport)==null?void 0:ge.height)||0,Ye=window.innerHeight;let Ze=Ye-he;const yt=ne.current.getBoundingClientRect().height||0,Pt=yt>Ye*.8;Ne.current||(Ne.current=yt);const Xt=ne.current.getBoundingClientRect().top;if(Math.abs(Ut.current-Ze)>60&&(Ke.current=!Ke.current),i&&i.length>0&&Ft&&Se){const qr=Ft[Se]||0;Ze+=qr}if(Ut.current=Ze,yt>he||Ke.current){const qr=ne.current.getBoundingClientRect().height;let fr=qr;qr>he&&(fr=he-(Pt?Xt:Yh)),v?ne.current.style.height=`${qr-Math.max(Ze,0)}px`:ne.current.style.height=`${Math.max(fr,he-Xt)}px`}else ne.current.style.height=`${Ne.current}px`;i&&i.length>0&&!Ke.current?ne.current.style.bottom="0px":ne.current.style.bottom=`${Math.max(Ze,0)}px`}}return(V=window.visualViewport)==null||V.addEventListener("resize",te),()=>{var oe;return(oe=window.visualViewport)==null?void 0:oe.removeEventListener("resize",te)}},[Se,i,Ft]);function pn(V){Ts(),x==null||x(),V||L(!1),setTimeout(()=>{i&&Je(i[0])},ze.DURATION*1e3)}function mo(){if(!ne.current)return;const V=document.querySelector("[data-vaul-drawer-wrapper]"),te=Vl(ne.current,j);tt(ne.current,{transform:"translate3d(0, 0, 0)",transition:`transform ${ze.DURATION}s cubic-bezier(${ze.EASE.join(",")})`}),tt(X.current,{transition:`opacity ${ze.DURATION}s cubic-bezier(${ze.EASE.join(",")})`,opacity:"1"}),a&&te&&te>0&&O&&tt(V,{borderRadius:`${qN}px`,overflow:"hidden",...rt(j)?{transform:`scale(${at()}) translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)`,transformOrigin:"top"}:{transform:`scale(${at()}) translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)`,transformOrigin:"left"},transitionProperty:"transform, border-radius",transitionDuration:`${ze.DURATION}s`,transitionTimingFunction:`cubic-bezier(${ze.EASE.join(",")})`},!0)}function Ts(){!P||!ne.current||(ne.current.classList.remove(cf),$e.current=!1,H(!1),se.current=new Date)}function Li(V){if(!P||!ne.current)return;ne.current.classList.remove(cf),$e.current=!1,H(!1),se.current=new Date;const te=Vl(ne.current,j);if(!dr(V.target,!1)||!te||Number.isNaN(te)||ye.current===null)return;const oe=se.current.getTime()-ye.current.getTime(),ge=Fe.current-(rt(j)?V.pageY:V.pageX),he=Math.abs(ge)/oe;if(he>.05&&(W(!0),setTimeout(()=>{W(!1)},200)),i){kr({draggedDistance:ge*(j==="bottom"||j==="right"?1:-1),closeDrawer:pn,velocity:he,dismissible:f}),s==null||s(V,!0);return}if(j==="bottom"||j==="right"?ge>0:ge<0){mo(),s==null||s(V,!0);return}if(he>WN){pn(),s==null||s(V,!1);return}var Ye;const Ze=Math.min((Ye=ne.current.getBoundingClientRect().height)!=null?Ye:0,window.innerHeight);var yt;const Pt=Math.min((yt=ne.current.getBoundingClientRect().width)!=null?yt:0,window.innerWidth),Xt=j==="left"||j==="right";if(Math.abs(te)>=(Xt?Pt:Ze)*c){pn(),s==null||s(V,!1);return}s==null||s(V,!0),mo()}A.useEffect(()=>(O&&(tt(document.documentElement,{scrollBehavior:"auto"}),fe.current=new Date),()=>{A5(document.documentElement,"scrollBehavior")}),[O]);function Rs(V){const te=V?(window.innerWidth-Ds)/window.innerWidth:1,oe=V?-Ds:0;Ce.current&&window.clearTimeout(Ce.current),tt(ne.current,{transition:`transform ${ze.DURATION}s cubic-bezier(${ze.EASE.join(",")})`,transform:`scale(${te}) translate3d(0, ${oe}px, 0)`}),!V&&ne.current&&(Ce.current=setTimeout(()=>{const ge=Vl(ne.current,j);tt(ne.current,{transition:"none",transform:rt(j)?`translate3d(0, ${ge}px, 0)`:`translate3d(${ge}px, 0, 0)`})},500))}function Cr(V,te){if(te<0)return;const oe=(window.innerWidth-Ds)/window.innerWidth,ge=oe+te*(1-oe),he=-Ds+te*Ds;tt(ne.current,{transform:rt(j)?`scale(${ge}) translate3d(0, ${he}px, 0)`:`scale(${ge}) translate3d(${he}px, 0, 0)`,transition:"none"})}function po(V,te){const oe=rt(j)?window.innerHeight:window.innerWidth,ge=te?(oe-Ds)/oe:1,he=te?-Ds:0;te&&tt(ne.current,{transition:`transform ${ze.DURATION}s cubic-bezier(${ze.EASE.join(",")})`,transform:rt(j)?`scale(${ge}) translate3d(0, ${he}px, 0)`:`scale(${ge}) translate3d(${he}px, 0, 0)`})}return A.createElement(ij,{defaultOpen:_,onOpenChange:V=>{!f&&!V||(V?C(!0):pn(!0),L(V))},open:O},A.createElement(zN.Provider,{value:{activeSnapPoint:it,snapPoints:i,setActiveSnapPoint:Je,drawerRef:ne,overlayRef:X,onOpenChange:t,onPress:mn,onRelease:Li,onDrag:ho,dismissible:f,handleOnly:d,isOpen:O,isDragging:P,shouldFade:hn,closeDrawer:pn,onNestedDrag:Cr,onNestedOpenChange:Rs,onNestedRelease:po,keyboardIsOpen:Ke,modal:y,snapPointsOffset:Ft,direction:j,shouldScaleBackground:a,setBackgroundColorOnScale:l,noBodyStyles:b,container:T,autoFocus:I}},r))}const XN=A.forwardRef(function({...e},t){const{overlayRef:r,snapPoints:n,onRelease:s,shouldFade:i,isOpen:a,modal:l}=Ii(),c=VN(t,r),u=n&&n.length>0;return l?A.createElement(Cp,{onMouseUp:s,ref:c,"data-vaul-overlay":"","data-vaul-snap-points":a&&u?"true":"false","data-vaul-snap-points-overlay":a&&i?"true":"false",...e}):(typeof window<"u"&&window.requestAnimationFrame(()=>{document.body.style.pointerEvents="auto"}),null)});XN.displayName="Drawer.Overlay";const JN=A.forwardRef(function({onPointerDownOutside:e,style:t,onOpenAutoFocus:r,...n},s){const{drawerRef:i,onPress:a,onRelease:l,onDrag:c,keyboardIsOpen:u,snapPointsOffset:f,modal:d,isOpen:h,direction:p,snapPoints:g,container:v,handleOnly:y,autoFocus:x}=Ii(),[w,b]=A.useState(!1),j=VN(s,i),_=A.useRef(null),N=A.useRef(null),S=A.useRef(!1),k=g&&g.length>0;F5();const E=(T,I,G=0)=>{if(S.current)return!0;const F=Math.abs(T.y),O=Math.abs(T.x),L=O>F,z=["bottom","right"].includes(I)?1:-1;if(I==="left"||I==="right"){if(!(T.x*z<0)&&O>=0&&O<=G)return L}else if(!(T.y*z<0)&&F>=0&&F<=G)return!L;return S.current=!0,!0};A.useEffect(()=>{k&&window.requestAnimationFrame(()=>{b(!0)})},[]);function M(T){_.current=null,S.current=!1,l(T)}return A.createElement(Ep,{"data-vaul-drawer-direction":p,"data-vaul-drawer":"","data-vaul-delayed-snap-points":w?"true":"false","data-vaul-snap-points":h&&k?"true":"false","data-vaul-custom-container":v?"true":"false",...n,ref:j,style:f&&f.length>0?{"--snap-point-height":`${f[0]}px`,...t}:t,onPointerDown:T=>{y||(n.onPointerDown==null||n.onPointerDown.call(n,T),_.current={x:T.pageX,y:T.pageY},a(T))},onOpenAutoFocus:T=>{r==null||r(T),x||T.preventDefault()},onPointerDownOutside:T=>{if(e==null||e(T),!d||T.defaultPrevented){T.preventDefault();return}u.current&&(u.current=!1)},onFocusOutside:T=>{if(!d){T.preventDefault();return}},onPointerMove:T=>{if(N.current=T,y||(n.onPointerMove==null||n.onPointerMove.call(n,T),!_.current))return;const I=T.pageY-_.current.y,G=T.pageX-_.current.x,F=T.pointerType==="touch"?10:2;E({x:G,y:I},p,F)?c(T):(Math.abs(G)>F||Math.abs(I)>F)&&(_.current=null)},onPointerUp:T=>{n.onPointerUp==null||n.onPointerUp.call(n,T),_.current=null,S.current=!1,l(T)},onPointerOut:T=>{n.onPointerOut==null||n.onPointerOut.call(n,T),M(N.current)},onContextMenu:T=>{n.onContextMenu==null||n.onContextMenu.call(n,T),M(N.current)}})});JN.displayName="Drawer.Content";const B5=250,G5=120,ZN=A.forwardRef(function({preventCycle:e=!1,children:t,...r},n){const{closeDrawer:s,isDragging:i,snapPoints:a,activeSnapPoint:l,setActiveSnapPoint:c,dismissible:u,handleOnly:f,isOpen:d,onPress:h,onDrag:p}=Ii(),g=A.useRef(null),v=A.useRef(!1);function y(){if(v.current){b();return}window.setTimeout(()=>{x()},G5)}function x(){if(i||e||v.current){b();return}if(b(),(!a||a.length===0)&&u){s();return}if(l===a[a.length-1]&&u){s();return}const _=a.findIndex(S=>S===l);if(_===-1)return;const N=a[_+1];c(N)}function w(){g.current=window.setTimeout(()=>{v.current=!0},B5)}function b(){window.clearTimeout(g.current),v.current=!1}return A.createElement("div",{onClick:y,onPointerCancel:b,onPointerDown:j=>{f&&h(j),w()},onPointerMove:j=>{f&&p(j)},ref:n,"data-vaul-drawer-visible":d?"true":"false","data-vaul-handle":"","aria-hidden":"true",...r},A.createElement("span",{"data-vaul-handle-hitarea":"","aria-hidden":"true"},t))});ZN.displayName="Drawer.Handle";function V5({onDrag:e,onOpenChange:t,...r}){const{onNestedDrag:n,onNestedOpenChange:s,onNestedRelease:i}=Ii();if(!n)throw new Error("Drawer.NestedRoot must be placed in another drawer");return A.createElement(QN,{nested:!0,onClose:()=>{s(!1)},onDrag:(a,l)=>{n(a,l),e==null||e(a,l)},onOpenChange:a=>{a&&s(a)},onRelease:i,...r})}function H5(e){const t=Ii(),{container:r=t.container,...n}=e;return A.createElement(lj,{container:r,...n})}const Un={Root:QN,NestedRoot:V5,Content:JN,Overlay:XN,Trigger:aj,Portal:H5,Handle:ZN,Close:cj,Title:Pp,Description:Tp},eS=({shouldScaleBackground:e=!0,...t})=>o.jsx(Un.Root,{shouldScaleBackground:e,...t});eS.displayName="Drawer";const W5=Un.Portal,tS=m.forwardRef(({className:e,...t},r)=>o.jsx(Un.Overlay,{ref:r,className:re("fixed inset-0 z-50 bg-black/80",e),...t}));tS.displayName=Un.Overlay.displayName;const rS=m.forwardRef(({className:e,children:t,...r},n)=>o.jsxs(W5,{children:[o.jsx(tS,{}),o.jsxs(Un.Content,{ref:n,className:re("fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background",e),...r,children:[o.jsx("div",{className:"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted"}),t]})]}));rS.displayName="DrawerContent";const nS=m.forwardRef(({className:e,...t},r)=>o.jsx(Un.Title,{ref:r,className:re("text-lg font-semibold leading-none tracking-tight",e),...t}));nS.displayName=Un.Title.displayName;const q5=m.forwardRef(({className:e,...t},r)=>o.jsx(Un.Description,{ref:r,className:re("text-sm text-muted-foreground",e),...t}));q5.displayName=Un.Description.displayName;const sS=({children:e,open:t,onOpenChange:r,title:n="Modal",className:s})=>wp()?o.jsx(eS,{open:t,onOpenChange:r,children:o.jsxs(rS,{className:s,children:[o.jsx(hi,{children:o.jsx(nS,{children:n})}),o.jsx("div",{className:"max-h-[85vh] overflow-y-auto p-4",children:e})]})}):o.jsx(Ht,{open:t,onOpenChange:r,children:o.jsxs(Dt,{className:`max-w-2xl max-h-[90vh] overflow-y-auto ${s}`,children:[o.jsx(hi,{children:o.jsx(qt,{children:n})}),o.jsx("div",{className:"p-1",children:e})]})}),K5=[{type:"two-truths",title:"Two Truths & a Lie",content:"Share two true facts and one lie about yourself. Let others guess which is which!",action:"Start Game"},{type:"this-or-that",title:"This or That",content:"Quick choices: Pizza or Burgers? Summer or Winter? Books or Movies?",action:"Ask Question"},{type:"emoji-riddle",title:"Emoji Riddle",content:"Guess what movie, song, or phrase these emojis represent! 🎬🍿",action:"Create Riddle"}],Y5=({onGameSelect:e,disabled:t})=>{const[r,n]=m.useState(!1),[s,i]=m.useState(null),a=c=>{i(c),e({"two-truths":"truthslie","this-or-that":"thisorthat","emoji-riddle":"emojiriddle"}[c.type]),n(!1),i(null)},l=()=>{s&&a(s)};return o.jsxs(o.Fragment,{children:[o.jsx(D,{variant:"outline",size:"sm",onClick:()=>n(!0),disabled:t,className:"hover-scale",children:o.jsx(Kw,{className:"w-4 h-4"})}),o.jsx(sS,{open:r,onOpenChange:n,title:"Quick Games",className:"max-w-md",children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"text-center mb-6",children:[o.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Choose a Game"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Fast, fun activities to energize your chat"})]}),o.jsx("div",{className:"grid gap-3",children:K5.map(c=>o.jsxs(q,{className:"cursor-pointer hover:shadow-md transition-all duration-200 hover:scale-[1.02] border-2 hover:border-primary/50",onClick:()=>a(c),children:[o.jsx(ue,{className:"pb-2",children:o.jsxs(de,{className:"text-lg flex items-center justify-between",children:[c.title,o.jsx(Ys,{className:"w-4 h-4 text-muted-foreground"})]})}),o.jsxs(Z,{children:[o.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:c.content}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-xs text-primary font-medium",children:c.action}),o.jsx(D,{size:"sm",variant:"ghost",className:"h-6 px-2",children:"Try →"})]})]})]},c.type))}),s&&o.jsx("div",{className:"pt-4 border-t",children:o.jsxs(D,{variant:"outline",size:"sm",onClick:l,className:"w-full",children:[o.jsx(Qm,{className:"w-4 h-4 mr-2"}),"Try Another ",s.title]})}),o.jsx("div",{className:"text-center pt-2",children:o.jsx("p",{className:"text-xs text-muted-foreground",children:"Games start instantly and need no external setup"})})]})})]})},Q5=({onCreatePoll:e,onCancel:t})=>{const[r,n]=m.useState(""),[s,i]=m.useState(["",""]),a=()=>{s.length<6&&i([...s,""])},l=(f,d)=>{const h=[...s];h[f]=d,i(h)},c=f=>{s.length>2&&i(s.filter((d,h)=>h!==f))},u=()=>{const f=s.filter(d=>d.trim());r.trim()&&f.length>=2&&e(r.trim(),f)};return o.jsxs(q,{className:"w-full max-w-md mx-auto",children:[o.jsx(ue,{children:o.jsxs(de,{className:"text-sm flex items-center gap-2",children:[o.jsx(zE,{className:"h-4 w-4"}),"Create Poll"]})}),o.jsxs(Z,{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-xs font-medium mb-1 block",children:"Question"}),o.jsx(ut,{placeholder:"What's your question?",value:r,onChange:f=>n(f.target.value),className:"text-sm"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs font-medium mb-2 block",children:"Options"}),o.jsx("div",{className:"space-y-2",children:s.map((f,d)=>o.jsxs("div",{className:"flex gap-2",children:[o.jsx(ut,{placeholder:`Option ${d+1}`,value:f,onChange:h=>l(d,h.target.value),className:"text-sm"}),s.length>2&&o.jsx(D,{variant:"ghost",size:"sm",onClick:()=>c(d),className:"h-9 w-9 p-0",children:o.jsx(ao,{className:"h-3 w-3"})})]},d))}),s.length<6&&o.jsxs(D,{variant:"ghost",size:"sm",onClick:a,className:"mt-2 h-8 text-xs",children:[o.jsx(Nu,{className:"h-3 w-3 mr-1"}),"Add Option"]})]}),o.jsxs("div",{className:"flex gap-2 pt-2",children:[o.jsx(D,{variant:"outline",size:"sm",onClick:t,className:"flex-1",children:"Cancel"}),o.jsx(D,{size:"sm",onClick:u,disabled:!r.trim()||s.filter(f=>f.trim()).length<2,className:"flex-1",children:"Create Poll"})]})]})]})},X5=({playlist:e,currentUserId:t,onAddSong:r})=>{const[n,s]=m.useState(""),[i,a]=m.useState(!1),l=()=>{n.trim()&&(r(n.trim()),s(""),a(!1))},c=u=>{const d=Math.floor((new Date().getTime()-u.getTime())/(1e3*60));return d<1?"just now":d<60?`${d}m ago`:d<1440?`${Math.floor(d/60)}h ago`:`${Math.floor(d/1440)}d ago`};return o.jsxs(q,{className:"w-full max-w-lg mx-auto bg-card/50 backdrop-blur-sm",children:[o.jsx(ue,{className:"pb-3",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(mh,{className:"h-4 w-4 text-primary"}),o.jsx(de,{className:"text-sm",children:e.name})]}),o.jsxs(le,{variant:"secondary",className:"text-xs",children:[e.songs.length," songs"]})]})}),o.jsxs(Z,{className:"space-y-3",children:[o.jsx("div",{className:"space-y-2",children:i?o.jsxs("div",{className:"flex gap-2",children:[o.jsx(ut,{placeholder:"Song name, artist, or Spotify link...",value:n,onChange:u=>s(u.target.value),onKeyPress:u=>u.key==="Enter"&&l(),className:"text-sm",autoFocus:!0}),o.jsx(D,{size:"sm",onClick:l,disabled:!n.trim(),children:"Add"}),o.jsx(D,{variant:"ghost",size:"sm",onClick:()=>a(!1),children:"Cancel"})]}):o.jsxs(D,{variant:"outline",size:"sm",onClick:()=>a(!0),className:"w-full justify-start",children:[o.jsx(Nu,{className:"h-3 w-3 mr-2"}),"Add a song"]})}),e.songs.length>0?o.jsx($r,{className:"h-48",children:o.jsx("div",{className:"space-y-2",children:e.songs.map((u,f)=>o.jsxs("div",{className:"flex items-center gap-3 p-2 rounded-lg bg-muted/50",children:[o.jsx("div",{className:"flex items-center justify-center w-6 h-6 rounded bg-primary/10 text-xs font-medium text-primary",children:f+1}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("p",{className:"text-sm font-medium truncate",children:u.title}),u.spotifyUrl&&o.jsx(D,{variant:"ghost",size:"sm",className:"h-5 w-5 p-0",onClick:()=>window.open(u.spotifyUrl,"_blank"),children:o.jsx(Ym,{className:"h-3 w-3"})})]}),o.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[o.jsx("span",{children:u.artist}),o.jsx("span",{children:"•"}),o.jsxs("span",{children:["by ",u.addedBy]}),o.jsx("span",{children:"•"}),o.jsx("span",{children:c(u.addedAt)})]})]})]},u.id))})}):o.jsxs("div",{className:"text-center py-6 text-muted-foreground",children:[o.jsx(mh,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),o.jsx("p",{className:"text-sm",children:"No songs yet"}),o.jsx("p",{className:"text-xs",children:"Add the first song to get started!"})]}),o.jsxs("div",{className:"text-xs text-muted-foreground bg-muted/30 rounded-lg p-3",children:[o.jsx("p",{className:"font-medium mb-1",children:"💡 How to add songs:"}),o.jsx("p",{children:'• Type song name and artist: "Bohemian Rhapsody Queen"'}),o.jsx("p",{children:"• Paste Spotify link"}),o.jsx("p",{children:"• Use /addsong command in chat"})]})]})]})},J5=({onCreatePlaylist:e,onCancel:t})=>{const[r,n]=m.useState(""),s=()=>{r.trim()&&e(r.trim())};return o.jsxs(q,{className:"w-full max-w-md mx-auto",children:[o.jsx(ue,{children:o.jsxs(de,{className:"text-sm flex items-center gap-2",children:[o.jsx(mh,{className:"h-4 w-4"}),"Create Playlist"]})}),o.jsxs(Z,{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-xs font-medium mb-1 block",children:"Playlist Name"}),o.jsx(ut,{placeholder:"e.g., Group Favorites, Study Vibes...",value:r,onChange:i=>n(i.target.value),onKeyPress:i=>i.key==="Enter"&&s(),className:"text-sm",autoFocus:!0})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(D,{variant:"outline",size:"sm",onClick:t,className:"flex-1",children:"Cancel"}),o.jsx(D,{size:"sm",onClick:s,disabled:!r.trim(),className:"flex-1",children:"Create"})]})]})]})},Vx=[{question:"Would you rather...",options:["Have the ability to time travel to the past","Have the ability to time travel to the future"]},{question:"Would you rather...",options:["Always be 10 minutes late","Always be 20 minutes early"]},{question:"Would you rather...",options:["Be able to speak every language fluently","Be able to play every musical instrument perfectly"]},{question:"Would you rather...",options:["Live in a world without music","Live in a world without movies"]},{question:"Would you rather...",options:["Have unlimited money but only 5 years to live","Live forever but be poor"]},{question:"Would you rather...",options:["Always know when someone is lying to you","Always get away with lying"]},{question:"Would you rather...",options:["Be the smartest person in the room","Be the funniest person in the room"]},{question:"Would you rather...",options:["Have the power of invisibility","Have the power to read minds"]}],Z5=({game:e,currentUserId:t,currentUsername:r,onGuess:n})=>{const[s,i]=m.useState("");dn();const a=e.guesses.some(h=>h.userId===t),l=e.guesses.find(h=>h.userId===t),c=e.createdBy===t,u=!!e.revealedAt,f=e.statements.find(h=>h.isLie);m.useEffect(()=>{const h=()=>{const g=new Date,v=e.expiresAt.getTime()-g.getTime();if(v<=0){i("Expired");return}const y=Math.floor(v/(1e3*60)),x=Math.floor(v%(1e3*60)/1e3);i(`${y}:${x.toString().padStart(2,"0")}`)};h();const p=setInterval(h,1e3);return()=>clearInterval(p)},[e.expiresAt]);const d=h=>e.guesses.filter(p=>p.guessedStatementId===h);return o.jsxs(q,{className:"w-full max-w-lg mx-auto bg-gradient-to-br from-orange-50 to-red-50 dark:from-orange-950/20 dark:to-red-950/20 border-orange-200 dark:border-orange-800",children:[o.jsxs(ue,{className:"pb-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Lc,{className:"h-4 w-4 text-orange-600"}),o.jsx(de,{className:"text-sm text-orange-600",children:"Two Truths and a Lie"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs(le,{variant:"outline",className:"text-xs",children:[o.jsx(tl,{className:"h-3 w-3 mr-1"}),s]}),o.jsxs(le,{variant:"secondary",className:"text-xs",children:[e.guesses.length," guesses"]})]})]}),o.jsxs("div",{className:"text-xs text-muted-foreground",children:["by ",e.createdByUsername]})]}),o.jsxs(Z,{className:"space-y-4",children:[o.jsx("div",{className:"space-y-3",children:e.statements.map((h,p)=>{const g=d(h.id),v=(l==null?void 0:l.guessedStatementId)===h.id,y=u&&h.isLie,x=u&&v&&!h.isLie;return o.jsx(D,{variant:v?"default":"outline",className:`w-full justify-start text-left h-auto p-4 ${y?"bg-red-100 border-red-300 dark:bg-red-950/50 dark:border-red-800":x?"bg-gray-100 border-gray-300 dark:bg-gray-800 dark:border-gray-600":""}`,onClick:()=>{!a&&!u&&n(e.id,h.id)},disabled:a||u||c,children:o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("span",{className:"text-sm font-medium",children:[p+1,". ",h.text]}),u&&h.isLie&&o.jsx(le,{variant:"destructive",className:"text-xs",children:"LIE"})]}),u&&g.length>0&&o.jsxs("div",{className:"text-xs text-muted-foreground",children:["Guessed by: ",g.map(w=>w.username).join(", ")]})]})},h.id)})}),a&&!u&&o.jsx("div",{className:"text-center",children:o.jsxs(le,{variant:"secondary",className:"text-xs",children:[o.jsx(uh,{className:"h-3 w-3 mr-1"}),"You guessed: Statement ",e.statements.findIndex(h=>h.id===(l==null?void 0:l.guessedStatementId))+1]})}),u&&o.jsxs("div",{className:"text-center space-y-2",children:[o.jsxs(le,{variant:"destructive",className:"text-sm",children:['The lie was: "',f==null?void 0:f.text,'"']}),l&&o.jsx(le,{variant:(f==null?void 0:f.id)===l.guessedStatementId?"default":"secondary",className:"text-xs",children:(f==null?void 0:f.id)===l.guessedStatementId?"🎉 You got it right!":"😅 Better luck next time!"})]}),c&&!u&&o.jsxs("div",{className:"text-xs text-muted-foreground bg-muted/30 rounded-lg p-3 text-center",children:[o.jsx(Oc,{className:"h-4 w-4 mx-auto mb-1"}),o.jsx("p",{children:"Wait for others to guess. Results will be revealed automatically."})]}),!c&&!a&&!u&&o.jsxs("div",{className:"text-xs text-muted-foreground bg-muted/30 rounded-lg p-3 text-center",children:[o.jsx(Lc,{className:"h-4 w-4 mx-auto mb-1"}),o.jsx("p",{children:"Which statement do you think is the lie?"})]})]})]})},eL=({onCreateGame:e,onCancel:t})=>{const[r,n]=m.useState(["","",""]),[s,i]=m.useState(null),a=(c,u)=>{const f=[...r];f[c]=u,n(f)},l=()=>{if(r.filter(u=>u.trim()).length===3&&s!==null){const u=r.map((f,d)=>({text:f.trim(),isLie:d===s}));e(u.map(f=>f.text))}};return o.jsxs(q,{className:"w-full max-w-md mx-auto",children:[o.jsxs(ue,{children:[o.jsxs(de,{className:"text-sm flex items-center gap-2",children:[o.jsx(Lc,{className:"h-4 w-4"}),"Create Two Truths and a Lie"]}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Write 3 statements about yourself - 2 truths and 1 lie"})]}),o.jsxs(Z,{className:"space-y-4",children:[o.jsx("div",{className:"space-y-3",children:r.map((c,u)=>o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("label",{className:"text-xs font-medium",children:["Statement ",u+1]}),o.jsx(D,{variant:s===u?"destructive":"outline",size:"sm",onClick:()=>i(s===u?null:u),className:"h-6 text-xs",children:s===u?"LIE":"Mark as lie"})]}),o.jsx(ng,{placeholder:"Tell us something about yourself...",value:c,onChange:f=>a(u,f.target.value),className:"text-sm min-h-[60px]",rows:2})]},u))}),o.jsxs("div",{className:"text-xs text-muted-foreground bg-muted/30 rounded-lg p-3",children:[o.jsx("p",{className:"font-medium mb-1",children:"💡 Tips:"}),o.jsx("p",{children:"• Make the lie believable"}),o.jsx("p",{children:"• Keep all statements interesting"}),o.jsx("p",{children:"• Mark which one is the lie"})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(D,{variant:"outline",size:"sm",onClick:t,className:"flex-1",children:"Cancel"}),o.jsx(D,{size:"sm",onClick:l,disabled:r.some(c=>!c.trim())||s===null,className:"flex-1",children:"Start Game"})]})]})]})},tL=({prompt:e,currentUserId:t,onVote:r})=>{const[n,s]=m.useState(""),i=e.options.reduce((u,f)=>u+f.votes,0),a=e.options.some(u=>u.voters.includes(t)),l=e.options.find(u=>u.voters.includes(t));m.useEffect(()=>{const u=()=>{const d=new Date,h=e.expiresAt.getTime()-d.getTime();if(h<=0){s("Expired");return}const p=Math.floor(h/(1e3*60*60)),g=Math.floor(h%(1e3*60*60)/(1e3*60));p>0?s(`${p}h ${g}m`):s(`${g}m`)};u();const f=setInterval(u,6e4);return()=>clearInterval(f)},[e.expiresAt]);const c=u=>i>0?u/i*100:50;return o.jsxs(q,{className:"w-full max-w-lg mx-auto bg-gradient-to-br from-blue-50 to-purple-50 dark:from-blue-950/20 dark:to-purple-950/20 border-blue-200 dark:border-blue-800",children:[o.jsx(ue,{className:"pb-3",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Zw,{className:"h-4 w-4 text-blue-600"}),o.jsx(de,{className:"text-sm text-blue-600",children:"This or That"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs(le,{variant:"outline",className:"text-xs",children:[o.jsx(tl,{className:"h-3 w-3 mr-1"}),n]}),o.jsxs(le,{variant:"secondary",className:"text-xs",children:[i," votes"]})]})]})}),o.jsxs(Z,{className:"space-y-4",children:[o.jsx("div",{className:"text-center",children:o.jsx("h3",{className:"text-lg font-semibold mb-4",children:e.question})}),o.jsx("div",{className:"grid grid-cols-2 gap-4",children:e.options.map((u,f)=>{const d=c(u.votes),h=u.voters.includes(t),p=a&&u.votes>=Math.max(...e.options.map(g=>g.votes));return o.jsxs("div",{className:"space-y-2",children:[o.jsxs(D,{variant:h?"default":"outline",className:`w-full h-24 flex flex-col items-center justify-center text-center ${p&&a?"ring-2 ring-primary/50":""}`,onClick:()=>!a&&r(e.id,u.id),disabled:a||n==="Expired",children:[o.jsx("div",{className:"text-2xl mb-1",children:u.emoji}),o.jsx("div",{className:"text-sm font-medium",children:u.text}),a&&o.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:[u.votes," (",Math.round(d),"%)"]})]}),a&&o.jsx(Yo,{value:d,className:"h-2"})]},u.id)})}),o.jsx("div",{className:"text-center text-lg font-bold text-muted-foreground",children:"VS"}),a&&o.jsx("div",{className:"text-center",children:o.jsxs(le,{variant:"secondary",className:"text-xs",children:["You chose: ",l==null?void 0:l.emoji," ",l==null?void 0:l.text]})}),!a&&n!=="Expired"&&o.jsxs("div",{className:"text-center text-xs text-muted-foreground bg-muted/30 rounded-lg p-3",children:[o.jsx(rl,{className:"h-4 w-4 mx-auto mb-1"}),o.jsx("p",{children:"Make your choice and see what the group thinks!"})]})]})]})},Hx=[{question:"Which would you choose?",options:[{text:"Coffee",emoji:"☕"},{text:"Tea",emoji:"🍵"}]},{question:"What's your preference?",options:[{text:"Beach",emoji:"🏖️"},{text:"Mountains",emoji:"🏔️"}]},{question:"Pick your superpower:",options:[{text:"Flying",emoji:"🦅"},{text:"Invisibility",emoji:"👻"}]},{question:"Ideal weather:",options:[{text:"Sunny",emoji:"☀️"},{text:"Rainy",emoji:"🌧️"}]},{question:"Entertainment choice:",options:[{text:"Movies",emoji:"🎬"},{text:"Books",emoji:"📚"}]},{question:"Social setting:",options:[{text:"Party",emoji:"🎉"},{text:"Quiet Night",emoji:"🕯️"}]},{question:"Travel style:",options:[{text:"Adventure",emoji:"🎒"},{text:"Luxury",emoji:"🏖️"}]},{question:"Food preference:",options:[{text:"Pizza",emoji:"🍕"},{text:"Burger",emoji:"🍔"}]}],rL=({riddle:e,currentUserId:t,currentUsername:r,onGuess:n})=>{const[s,i]=m.useState(""),[a,l]=m.useState("");e.guesses.some(h=>h.userId===t);const c=!!e.solvedBy,u=e.guesses.filter(h=>h.userId===t);m.useEffect(()=>{const h=()=>{const g=new Date,v=e.expiresAt.getTime()-g.getTime();if(v<=0){l("Expired");return}const y=Math.floor(v/(1e3*60)),x=Math.floor(v%(1e3*60)/1e3);l(`${y}:${x.toString().padStart(2,"0")}`)};h();const p=setInterval(h,1e3);return()=>clearInterval(p)},[e.expiresAt]);const f=()=>{s.trim()&&!c&&(n(e.id,s.trim()),i(""))},d=h=>{h.key==="Enter"&&f()};return o.jsxs(q,{className:"w-full max-w-lg mx-auto bg-gradient-to-br from-yellow-50 to-orange-50 dark:from-yellow-950/20 dark:to-orange-950/20 border-yellow-200 dark:border-yellow-800",children:[o.jsx(ue,{className:"pb-3",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(yr,{className:"h-4 w-4 text-yellow-600"}),o.jsx(de,{className:"text-sm text-yellow-600",children:"Emoji Riddle"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs(le,{variant:"outline",className:"text-xs",children:[o.jsx(tl,{className:"h-3 w-3 mr-1"}),a]}),o.jsxs(le,{variant:"secondary",className:"text-xs",children:[e.guesses.length," guesses"]})]})]})}),o.jsxs(Z,{className:"space-y-4",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-4xl mb-4 p-6 bg-white/50 dark:bg-gray-800/50 rounded-lg",children:e.emojis}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"What do these emojis represent?"})]}),c&&o.jsxs("div",{className:"text-center space-y-2",children:[o.jsxs(le,{variant:"default",className:"text-sm",children:[o.jsx(gs,{className:"h-3 w-3 mr-1"}),"Solved by ",e.solvedBy,"!"]}),o.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-950/20 rounded-lg",children:[o.jsxs("p",{className:"text-sm font-medium text-green-800 dark:text-green-200",children:["Answer: ",e.answer]}),o.jsxs("p",{className:"text-xs text-green-600 dark:text-green-400 mt-2",children:["💡 ",e.funFact]})]})]}),!c&&a!=="Expired"&&o.jsx("div",{className:"space-y-2",children:o.jsxs("div",{className:"flex gap-2",children:[o.jsx(ut,{placeholder:"Type your guess...",value:s,onChange:h=>i(h.target.value),onKeyPress:d,className:"text-sm",autoFocus:!0}),o.jsx(D,{size:"sm",onClick:f,disabled:!s.trim(),children:"Guess"})]})}),!c&&e.guesses.length>=2&&o.jsx("div",{className:"text-center",children:o.jsxs(le,{variant:"outline",className:"text-xs",children:[o.jsx(e2,{className:"h-3 w-3 mr-1"}),"Hint: ",e.hint]})}),u.length>0&&o.jsxs("div",{className:"space-y-1",children:[o.jsx("p",{className:"text-xs font-medium text-muted-foreground",children:"Your guesses:"}),o.jsx("div",{className:"flex flex-wrap gap-1",children:u.map((h,p)=>o.jsx(le,{variant:"secondary",className:"text-xs",children:h.guess},p))})]}),e.guesses.length>0&&!c&&o.jsxs("div",{className:"space-y-1",children:[o.jsx("p",{className:"text-xs font-medium text-muted-foreground",children:"Recent guesses:"}),o.jsx("div",{className:"text-xs space-y-1 max-h-20 overflow-y-auto",children:e.guesses.slice(-3).reverse().map((h,p)=>o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("span",{className:"text-muted-foreground",children:[h.username,":"]}),o.jsx("span",{children:h.guess})]},p))})]}),!c&&e.guesses.length===0&&o.jsxs("div",{className:"text-xs text-muted-foreground bg-muted/30 rounded-lg p-3 text-center",children:[o.jsx(yr,{className:"h-4 w-4 mx-auto mb-1"}),o.jsx("p",{children:"Look at the emojis and guess what they represent!"}),o.jsx("p",{className:"mt-1",children:"Could be a movie, book, phrase, or concept."})]})]})]})},Wx=[{emojis:"🦁👑🏰",answer:"The Lion King",hint:"Disney movie about royalty",funFact:"The Lion King was the highest-grossing traditionally animated film until Frozen!"},{emojis:"🕷️👨🏠",answer:"Spider-Man",hint:"Superhero with web powers",funFact:"Spider-Man first appeared in comics in 1962 and was created by Stan Lee!"},{emojis:"⭐🛸💫",answer:"Star Wars",hint:"Space saga with lightsabers",funFact:"The first Star Wars movie was initially rejected by several studios!"},{emojis:"🍕🐢🥷",answer:"Teenage Mutant Ninja Turtles",hint:"Four reptilian heroes",funFact:"The TMNT were originally created as a parody of comic book tropes!"},{emojis:"🏃‍♀️🍫🏭",answer:"Charlie and the Chocolate Factory",hint:"Sweet adventure story",funFact:"Roald Dahl wrote this after working for a chocolate company!"},{emojis:"❄️👸🏰",answer:"Frozen",hint:"Disney movie about sisterly love",funFact:"Let It Go was originally written as a villain song!"},{emojis:"🧙‍♂️💍🌋",answer:"Lord of the Rings",hint:"Fantasy epic about destroying jewelry",funFact:"Tolkien invented entire languages for this story!"},{emojis:"🦈🏊‍♀️🩸",answer:"Jaws",hint:"Classic thriller about ocean danger",funFact:"The mechanical shark barely worked during filming!"}],nL=e=>{const{user:t}=_e(),[r,n]=m.useState([]),[s,i]=m.useState(!0),a=m.useRef(new Map),l=3e4,c=m.useCallback(async(h=!1)=>{try{i(!0);const p=`${e}-${t==null?void 0:t.id}`,g=Date.now();if(!h&&a.current.has(p)){const _=a.current.get(p);if(_&&g-_.timestamp<l)return console.log("Using cached messages for group:",e),n(_.data),i(!1),_.data}console.log("Fetching messages for group:",e);const{data:v,error:y}=await R.from("chat_messages").select(`
          id,
          content,
          message_type,
          gif_url,
          voice_audio_url,
          voice_transcription,
          created_at,
          user_id,
          profiles!inner(
            user_id,
            username,
            full_name,
            avatar_url,
            mood_emoji
          )
        `).eq("group_id",e).order("created_at",{ascending:!0}).limit(50);if(y)throw console.error("Error fetching messages:",y),y;const x=(v==null?void 0:v.map(_=>_.id))||[],{data:w,error:b}=await R.from("message_reactions").select("message_id, emoji, user_id").in("message_id",x);b&&console.warn("Error fetching reactions:",b),console.log("Messages fetched:",(v==null?void 0:v.length)||0);const j=(v==null?void 0:v.map(_=>{const S=((w==null?void 0:w.filter(M=>M.message_id===_.id))||[]).reduce((M,T)=>{const I=M.find(G=>G.emoji===T.emoji);return I?(I.count+=1,I.userIds.push(T.user_id)):M.push({emoji:T.emoji,count:1,userIds:[T.user_id]}),M},[]),k=_.profiles,E=(k==null?void 0:k.full_name)||(k==null?void 0:k.username)||"Unknown User";return{id:_.id,content:_.content,messageType:_.message_type,gifUrl:_.gif_url,voiceAudioUrl:_.voice_audio_url,voiceTranscription:_.voice_transcription,username:E,timestamp:new Date(_.created_at),userId:_.user_id,reactions:S}}))||[];console.log("Transformed messages:",j.length),n(j),a.current.set(p,{data:j,timestamp:g})}catch(p){console.error("Error fetching messages:",p),Or.error("Failed to load messages")}finally{i(!1)}},[e,t==null?void 0:t.id]),u=m.useCallback(()=>{console.log("Setting up real-time subscription for group:",e);const h=`chat-${e}-${Date.now()}`,p=R.channel(h).on("postgres_changes",{event:"INSERT",schema:"public",table:"chat_messages",filter:`group_id=eq.${e}`},async g=>{console.log("🆕 NEW MESSAGE RECEIVED:",g.new);try{const{data:v}=await R.from("profiles").select("user_id, username, full_name, avatar_url, mood_emoji").eq("user_id",g.new.user_id).single();if(v){const y=v,x=(y==null?void 0:y.full_name)||(y==null?void 0:y.username)||"Unknown User",w={id:g.new.id,content:g.new.content,messageType:g.new.message_type,gifUrl:g.new.gif_url,voiceAudioUrl:g.new.voice_audio_url,voiceTranscription:g.new.voice_transcription,username:x,timestamp:new Date(g.new.created_at),userId:g.new.user_id,reactions:[]};n(b=>[...b,w])}else setTimeout(()=>c(),100)}catch(v){console.error("Error fetching profile for new message:",v),setTimeout(()=>c(),100)}}).on("postgres_changes",{event:"INSERT",schema:"public",table:"message_reactions"},g=>{console.log("👍 NEW REACTION:",g.new),setTimeout(()=>c(),100)}).on("postgres_changes",{event:"DELETE",schema:"public",table:"message_reactions"},g=>{console.log("👎 REACTION REMOVED:",g.old),setTimeout(()=>c(),100)}).subscribe(g=>{console.log("📡 Subscription status:",g)});return()=>{console.log("🧹 Cleaning up subscription:",h),R.removeChannel(p)}},[e,c]);return m.useEffect(()=>{if(e)return console.log("🚀 Setting up chat for group:",e),c(),u()},[e,c,u]),{messages:r,loading:s,addMessage:async h=>{if(!t)return console.error("No user found when trying to send message"),!1;try{console.log("📤 SENDING MESSAGE:",h);const p={content:h.content,message_type:h.messageType,gif_url:h.gifUrl,voice_audio_url:h.voiceAudioUrl,voice_transcription:h.voiceTranscription,user_id:t.id,group_id:e};console.log("💾 Inserting into database:",p);const{data:g,error:v}=await R.from("chat_messages").insert(p).select();if(v)throw console.error("❌ Database error:",v),v;console.log("✅ Message inserted successfully:",g);try{await R.rpc("track_karma_activity",{p_user_id:t.id,p_group_id:e,p_activity_type:"message",p_points:1,p_description:"Sent a message",p_multiplier:1})}catch(y){console.warn("Failed to track karma for message:",y)}return!0}catch(p){return console.error("💥 Error adding message:",p),Or.error("Failed to send message"),!1}},addReaction:async(h,p)=>{if(!t)return!1;try{console.log("Adding reaction:",{messageId:h,emoji:p,userId:t.id});const{data:g}=await R.from("chat_messages").select("group_id").eq("id",h).single(),{data:v}=await R.from("message_reactions").select("id").eq("message_id",h).eq("user_id",t.id).eq("emoji",p).maybeSingle();if(v){const{error:y}=await R.from("message_reactions").delete().eq("id",v.id);if(y)throw y;console.log("Reaction removed")}else{const{error:y}=await R.from("message_reactions").insert({message_id:h,user_id:t.id,emoji:p});if(y)throw y;if(console.log("Reaction added"),g!=null&&g.group_id)try{await R.rpc("track_karma_activity",{p_user_id:t.id,p_group_id:g.group_id,p_activity_type:"reaction",p_points:1,p_description:"Gave a reaction",p_multiplier:1})}catch(x){console.warn("Failed to track karma for reaction:",x)}}return!0}catch(g){return console.error("Error handling reaction:",g),Or.error("Failed to add reaction"),!1}},refetch:c}},sL=(e,t)=>{const[r,n]=m.useState([]),s=m.useRef(),i=m.useRef(!1);m.useEffect(()=>{if(!e)return;const u=R.channel(`typing-${e}`).on("presence",{event:"sync"},()=>{const d=u.presenceState(),h=[];Object.keys(d).forEach(p=>{if(p!==t){const g=d[p];if(g.length>0){const v=g[0];v.typing&&Date.now()-v.timestamp<3e3&&h.push({userId:p,username:v.username,timestamp:v.timestamp})}}}),n(h)}).subscribe(),f=setInterval(()=>{n(d=>d.filter(h=>Date.now()-h.timestamp<3e3))},1e3);return()=>{R.removeChannel(u),clearInterval(f)}},[e,t]);const a=async u=>{if(i.current)return;i.current=!0,await R.channel(`typing-${e}`).track({typing:!0,username:u,timestamp:Date.now()})},l=async()=>{if(!i.current)return;i.current=!1,await R.channel(`typing-${e}`).untrack()};return{typingUsers:r,handleTyping:u=>{a(u),s.current&&clearTimeout(s.current),s.current=setTimeout(()=>{l()},2e3)},stopTyping:l}},oL=e=>{const{user:t}=_e(),{toast:r}=Le(),[n,s]=m.useState([]),[i,a]=m.useState(!0);m.useEffect(()=>{e&&(l(),c())},[e]);const l=async()=>{try{a(!0),s([])}catch(d){console.error("Error fetching pinned messages:",d)}finally{a(!1)}},c=()=>()=>{};return{pinnedMessages:n,loading:i,pinMessage:async(d,h,p,g,v,y)=>{if(!t)return!1;try{const x={id:`pinned-${Date.now()}`,messageId:d,content:h,username:p,pinnedBy:t.id,pinnedAt:new Date,messageType:g,gifUrl:v,voiceAudioUrl:y};return s(w=>[...w,x]),r({title:"Message Pinned",description:"Message has been pinned to the top of the chat."}),!0}catch(x){return console.error("Error pinning message:",x),r({title:"Pin Failed",description:"Failed to pin message. Please try again.",variant:"destructive"}),!1}},unpinMessage:async d=>{if(!t)return!1;try{return s(h=>h.filter(p=>p.id!==d)),r({title:"Message Unpinned",description:"Message has been removed from pinned messages."}),!0}catch(h){return console.error("Error unpinning message:",h),r({title:"Unpin Failed",description:"Failed to unpin message. Please try again.",variant:"destructive"}),!1}}}},iL=()=>{const{user:e}=_e(),[t,r]=m.useState({user:null,group:null,chat:[],loading:!1,error:null});m.useEffect(()=>{e&&n()},[e]);const n=async()=>{if(e){r(f=>({...f,loading:!0,error:null}));try{const[f,d]=await Promise.all([s(),i()]),h=f,p=d;let g=[];p&&(g=await a(p.id)),r({user:h,group:p,chat:g,loading:!1,error:null})}catch(f){console.error("Error loading initial data:",f),r(d=>({...d,loading:!1,error:"Failed to load app data"}))}}},s=async()=>{if(!e)return null;const{data:f,error:d}=await R.from("profiles").select("*").eq("user_id",e.id).single();if(d)throw d;return{id:f.user_id,username:f.username,personality:f.personality||[],genres:f.genres||[],mood:f.mood||5,mood_emoji:f.mood_emoji}},i=async()=>{if(!e)return null;const{data:f,error:d}=await R.from("group_members").select("group_id").eq("user_id",e.id).single();if(d||!f)return null;const{data:h,error:p}=await R.from("groups").select("*").eq("id",f.group_id).single();if(p)throw p;return{id:h.id,name:h.name,vibe_label:h.vibe_label,current_members:h.current_members,max_members:h.max_members,lifecycle_stage:h.lifecycle_stage}},a=async f=>{const{data:d,error:h}=await R.from("chat_messages").select(`
        id,
        content,
        message_type,
        gif_url,
        voice_audio_url,
        voice_transcription,
        created_at,
        user_id,
        profiles!inner(
          user_id,
          username,
          full_name,
          avatar_url,
          mood_emoji
        )
      `).eq("group_id",f).order("created_at",{ascending:!1}).limit(50);if(h)throw h;return!d||d.length===0?[]:d.map(p=>{const g=p.profiles,v=(g==null?void 0:g.full_name)||(g==null?void 0:g.username)||"Unknown User";return{id:p.id,content:p.content,messageType:p.message_type,gifUrl:p.gif_url,voiceAudioUrl:p.voice_audio_url,voiceTranscription:p.voice_transcription,username:v,timestamp:new Date(p.created_at),userId:p.user_id,reactions:[]}}).reverse()};return{...t,loadInitialData:n,updateChatMessages:f=>{r(d=>({...d,chat:f}))},appendMessage:f=>{r(d=>({...d,chat:[...d.chat,f]}))},updateGroupInfo:f=>{r(d=>({...d,group:d.group?{...d.group,...f}:null}))}}},aL=({groupId:e,onNewMessage:t,onReactionUpdate:r})=>{var i;const{toast:n}=Le(),s=m.useRef(null);return m.useEffect(()=>{if(!e)return;const a=R.channel(`chat-${e}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"chat_messages",filter:`group_id=eq.${e}`},async l=>{var u,f;const c=l.new;try{const{data:d}=await R.from("chat_messages").select(`
                id,
                content,
                message_type,
                gif_url,
                voice_audio_url,
                voice_transcription,
                created_at,
                user_id,
                profiles (
                  username
                ),
                message_reactions (
                  emoji,
                  user_id
                )
              `).eq("id",c.id).single();if(d){const p=(d.message_reactions||[]).reduce((y,x)=>{const w=y.find(b=>b.emoji===x.emoji);return w?(w.count+=1,w.userIds.push(x.user_id)):y.push({emoji:x.emoji,count:1,userIds:[x.user_id]}),y},[]),g={id:d.id,content:d.content,messageType:d.message_type,gifUrl:d.gif_url,voiceAudioUrl:d.voice_audio_url,voiceTranscription:d.voice_transcription,username:((u=d.profiles)==null?void 0:u.username)||"Unknown User",timestamp:new Date(d.created_at),userId:d.user_id,reactions:p};t(g);const v=(await R.auth.getUser()).data.user;v&&d.user_id!==v.id&&n({title:"New message",description:`${g.username}: ${g.messageType==="text"?((f=g.content)==null?void 0:f.slice(0,50))+(g.content&&g.content.length>50?"...":""):g.messageType==="gif"?"Sent a GIF":"Sent a voice message"}`,duration:3e3})}}catch(d){console.error("Error processing new message:",d)}}).on("postgres_changes",{event:"*",schema:"public",table:"message_reactions"},()=>{r()}).subscribe(l=>{l==="SUBSCRIBED"?console.log("Real-time chat subscription active"):l==="CHANNEL_ERROR"&&n({title:"Connection issue",description:"Having trouble connecting to chat. Messages may be delayed.",variant:"destructive"})});return s.current=a,()=>{s.current&&(R.removeChannel(s.current),s.current=null)}},[e,t,r]),{isConnected:((i=s.current)==null?void 0:i.state)==="joined"}},lL=()=>{const[e,t]=m.useState([]),r=m.useCallback((i,a,l)=>{const c={id:crypto.randomUUID(),question:i,options:a.map(u=>({id:crypto.randomUUID(),text:u,votes:0,voters:[]})),createdBy:l,createdAt:new Date,isActive:!0};return t(u=>[...u,c]),c},[]),n=m.useCallback((i,a,l)=>{t(c=>c.map(u=>{if(u.id!==i)return u;const f=u.options.map(d=>{const h=d.voters.includes(l),p=d.id===a;return h&&!p?{...d,voters:d.voters.filter(g=>g!==l),votes:d.votes-1}:!h&&p?{...d,voters:[...d.voters,l],votes:d.votes+1}:d});return{...u,options:f}}))},[]),s=m.useCallback(i=>{t(a=>a.map(l=>l.id===i?{...l,isActive:!1}:l))},[]);return{polls:e,createPoll:r,votePoll:n,closePoll:s}},cL=()=>{const[e,t]=m.useState([]),r=m.useCallback(i=>{const a={id:crypto.randomUUID(),name:i,songs:[],createdAt:new Date,collaborative:!0};return t(l=>[...l,a]),a},[]),n=m.useCallback((i,a,l)=>{const u=(d=>{if(d.includes("spotify.com"))return{title:"Spotify Track",artist:"Unknown Artist",spotifyUrl:d};const h=d.split(" ");if(h.length>=2){const p=h.slice(0,-1).join(" "),g=h[h.length-1];return{title:p,artist:g}}return{title:d,artist:"Unknown Artist"}})(a),f={id:crypto.randomUUID(),title:u.title,artist:u.artist,addedBy:l,addedAt:new Date,spotifyUrl:u.spotifyUrl};return t(d=>d.map(h=>h.id===i?{...h,songs:[...h.songs,f]}:h)),f},[]),s=m.useCallback(()=>e.find(i=>i.collaborative)||null,[e]);return{playlists:e,createPlaylist:r,addSongToPlaylist:n,getActivePlaylist:s}},uL=()=>{const[e,t]=m.useState([]),r=m.useCallback((s,i)=>{const a=new Date,l=new Date(a.getTime()+30*60*1e3),c={id:crypto.randomUUID(),question:s,options:i.map(u=>({id:crypto.randomUUID(),text:u,votes:0,voters:[]})),createdAt:a,expiresAt:l,isActive:!0};return t(u=>[...u,c]),c},[]),n=m.useCallback((s,i,a)=>{t(l=>l.map(c=>{if(c.id!==s)return c;const u=c.options.map(f=>{const d=f.voters.includes(a),h=f.id===i;return d&&!h?{...f,voters:f.voters.filter(p=>p!==a),votes:f.votes-1}:!d&&h?{...f,voters:[...f.voters,a],votes:f.votes+1}:f});return{...c,options:u}}))},[]);return{prompts:e,createPrompt:r,votePrompt:n}},dL=()=>{const[e,t]=m.useState([]),r=m.useCallback((s,i,a)=>{const l=new Date,c=new Date(l.getTime()+3*60*1e3),u={id:crypto.randomUUID(),createdBy:i,createdByUsername:a,statements:s.map((f,d)=>({id:crypto.randomUUID(),text:f,isLie:d===2})),guesses:[],isActive:!0,expiresAt:c};return t(f=>[...f,u]),u},[]),n=m.useCallback((s,i,a,l)=>{t(c=>c.map(u=>{if(u.id!==s||u.guesses.find(g=>g.userId===a))return u;const d={userId:a,username:l,guessedStatementId:i,timestamp:new Date},h=[...u.guesses,d],p=h.length>=3||new Date>=u.expiresAt;return{...u,guesses:h,revealedAt:p?new Date:u.revealedAt}}))},[]);return{games:e,createGame:r,makeGuess:n}},fL=()=>{const[e,t]=m.useState([]),r=m.useCallback((i,a)=>{const l=new Date,c=new Date(l.getTime()+24*60*60*1e3),u={id:crypto.randomUUID(),question:i,options:a.map(f=>({id:crypto.randomUUID(),text:f.text,emoji:f.emoji,votes:0,voters:[]})),createdAt:l,expiresAt:c,isActive:!0};return t(f=>[...f,u]),u},[]),n=m.useCallback((i,a,l)=>{t(c=>c.map(u=>{if(u.id!==i||new Date>u.expiresAt)return u;const f=u.options.map(d=>{const h=d.voters.includes(l),p=d.id===a;return h&&!p?{...d,voters:d.voters.filter(g=>g!==l),votes:d.votes-1}:!h&&p?{...d,voters:[...d.voters,l],votes:d.votes+1}:d});return{...u,options:f,isActive:new Date<u.expiresAt}}))},[]),s=m.useCallback(()=>t([]),[]);return{prompts:e,createPrompt:r,votePrompt:n,clearPrompts:s}},hL=()=>{const[e,t]=m.useState([]),r=m.useCallback((i,a,l,c)=>{const u=new Date,f=new Date(u.getTime()+2*60*1e3),d={id:crypto.randomUUID(),emojis:i,answer:a.toLowerCase(),hint:l,funFact:c,guesses:[],createdAt:u,expiresAt:f,isActive:!0};return t(h=>[...h,d]),d},[]),n=m.useCallback((i,a,l,c)=>{t(u=>u.map(f=>{if(f.id!==i||f.solvedBy||f.guesses.find(x=>x.userId===l))return f;const h=a.toLowerCase().trim(),p=f.answer.toLowerCase().trim(),g=h===p||h.includes(p)||p.includes(h),v={userId:l,username:c,guess:a,timestamp:new Date,isCorrect:g},y=[...f.guesses,v];return{...f,guesses:y,solvedBy:g?c:f.solvedBy,solvedAt:g?new Date:f.solvedAt,isActive:!g&&new Date<f.expiresAt}}))},[]),s=m.useCallback(()=>t([]),[]);return{riddles:e,createRiddle:r,makeGuess:n,clearRiddles:s}},mL=()=>{const[e,t]=m.useState([]),[r,n]=m.useState(!0);m.useEffect(()=>{s()},[]);const s=async()=>{try{const{data:a,error:l}=await R.from("daily_prompts").select("*").eq("is_active",!0).gt("expires_at",new Date().toISOString()).order("created_at",{ascending:!1});if(l){console.error("Error fetching daily prompts:",l);return}t((a==null?void 0:a.map(c=>({id:c.id,prompt_text:c.prompt_text,prompt_type:c.prompt_type,expires_at:new Date(c.expires_at),created_at:new Date(c.created_at)})))||[])}catch(a){console.error("Error fetching daily prompts:",a)}finally{n(!1)}};return{prompts:e,loading:r,getTodaysPrompt:()=>{const a=new Date;a.setHours(0,0,0,0);const l=e.filter(c=>{const u=new Date(c.created_at);return u.setHours(0,0,0,0),u.getTime()===a.getTime()});return l.length>0?l[0]:null},refresh:s}},Xi={maxMessagesPerMinute:20,maxMessagesPerHour:200,cooldownPeriod:5e3},pL=()=>{const{user:e}=_e(),[t,r]=m.useState(0),[n,s]=m.useState({minute:0,hour:0});m.useEffect(()=>{const u=setInterval(()=>{s(d=>({...d,minute:0}))},6e4),f=setInterval(()=>{s(d=>({...d,hour:0}))},36e5);return()=>{clearInterval(u),clearInterval(f)}},[]);const i=u=>{const d=c(u).trim();if(!d)return{isValid:!1,error:"Message cannot be empty"};if(d.length>2e3)return{isValid:!1,error:"Message is too long (max 2000 characters)"};const h=[/(\bunion\b|\bselect\b|\binsert\b|\bupdate\b|\bdelete\b|\bdrop\b|\bcreate\b|\balter\b|\bexec\b|\bexecute\b).*(\bfrom\b|\binto\b|\bset\b|\btable\b|\bdatabase\b)/gi,/(\-\-|\#|\/\*|\*\/|\;)/g,/(\bor\b|\band\b)\s*\d+\s*=\s*\d+/gi,/(\bxp_|\bsp_|\b@@)/gi,/(\bwaitfor\b|\bdelay\b)/gi];for(const y of h)if(y.test(d))return console.warn("Potential SQL injection attempt detected:",d),{isValid:!1,error:"Message contains suspicious content"};const p=[/<.*>/g,/javascript:/gi,/vbscript:/gi,/on\w+\s*=/gi,/data:text\/html/gi,/data:application\/javascript/gi,/expression\s*\(/gi,/url\s*\(/gi,/import\s*\(/gi,/eval\s*\(/gi,/document\./gi,/window\./gi,/alert\s*\(/gi,/confirm\s*\(/gi,/prompt\s*\(/gi,/<iframe/gi,/<script/gi,/<object/gi,/<embed/gi,/<link/gi,/<style/gi];for(const y of p)if(y.test(d))return console.warn("Potential XSS attempt detected:",d),{isValid:!1,error:"Message contains invalid content"};const g=[/\b(spam|scam|phishing|malware|virus)\b/i,/\b(fuck|shit|damn|bitch|asshole|pussy|dick|cock)\b/i,/(buy\s+now|click\s+here|free\s+money|make\s+money\s+fast)/gi,/(http[s]?:\/\/[^\s]+){3,}/g,/([A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,}){2,}/g];for(const y of g)if(y.test(d))return{isValid:!1,error:"Message contains inappropriate content"};return/(.)\1{10,}/g.test(d)?{isValid:!1,error:"Message contains too many repetitive characters"}:{isValid:!0}},a=async()=>{if(!e)return!1;const u=Date.now();if(u-t<Xi.cooldownPeriod)return Rt({title:"Please wait",description:"You're sending messages too quickly. Please slow down.",variant:"destructive"}),!1;if(n.minute>=Xi.maxMessagesPerMinute)return Rt({title:"Rate Limit Exceeded",description:"You've sent too many messages this minute. Please wait.",variant:"destructive"}),!1;if(n.hour>=Xi.maxMessagesPerHour)return Rt({title:"Rate Limit Exceeded",description:"You've sent too many messages this hour. Please wait.",variant:"destructive"}),!1;try{const{data:f,error:d}=await R.from("chat_messages").select("id").eq("user_id",e.id).gte("created_at",new Date(Date.now()-6e4).toISOString()).limit(Xi.maxMessagesPerMinute);return d?(console.error("Rate limit check failed:",d),!0):f&&f.length>=Xi.maxMessagesPerMinute?(Rt({title:"Rate Limit Exceeded",description:"You're sending messages too quickly. Please slow down.",variant:"destructive"}),!1):(s(h=>({minute:h.minute+1,hour:h.hour+1})),r(u),!0)}catch(f){return console.error("Rate limit check error:",f),!0}},l=u=>{try{const f=new URL(u),d=["malware.com","phishing.net","scam.org","virus.com","bit.ly","tinyurl.com","goo.gl","t.co"],h=["http:","https:"],p=f.hostname.toLowerCase();return h.includes(f.protocol)?d.some(v=>p.includes(v))?{isValid:!1,error:"URL is not allowed"}:/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/.test(p)?{isValid:!1,error:"IP addresses are not allowed"}:{isValid:!0}:{isValid:!1,error:"Only HTTP and HTTPS URLs are allowed"}}catch{return{isValid:!1,error:"Invalid URL format"}}},c=u=>typeof u!="string"?"":u.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,"").replace(/<iframe\b[^<]*(?:(?!<\/iframe>)<[^<]*)*<\/iframe>/gi,"").replace(/<object\b[^<]*(?:(?!<\/object>)<[^<]*)*<\/object>/gi,"").replace(/<embed\b[^<]*(?:(?!<\/embed>)<[^<]*)*<\/embed>/gi,"").replace(/<link\b[^<]*(?:(?!<\/link>)<[^<]*)*<\/link>/gi,"").replace(/<style\b[^<]*(?:(?!<\/style>)<[^<]*)*<\/style>/gi,"").replace(/<[^>]*>/g,"").replace(/javascript:/gi,"").replace(/vbscript:/gi,"").replace(/data:text\/html/gi,"").replace(/data:application\/javascript/gi,"").replace(/on\w+\s*=/gi,"").replace(/expression\s*\(/gi,"").replace(/url\s*\(/gi,"").replace(/import\s*\(/gi,"").replace(/eval\s*\(/gi,"").replace(/document\./gi,"").replace(/window\./gi,"").replace(/global\./gi,"").replace(/alert\s*\(/gi,"").replace(/confirm\s*\(/gi,"").replace(/prompt\s*\(/gi,"").replace(/\0/g,"").replace(/\s+/g," ").trim();return{validateMessageContent:i,checkRateLimit:a,validateUrl:l,sanitizeInput:c}},gL={enableMemoryMonitoring:!0,enableNetworkMonitoring:!0,enableRenderMonitoring:!0,sampleRate:.1},vL=(e={})=>{const t={...gL,...e},r=m.useRef({renderTime:0,memoryUsage:0,networkLatency:0,errorCount:0}),n=m.useRef(0),s=m.useRef(0),i=m.useCallback(()=>{t.enableRenderMonitoring&&Math.random()<t.sampleRate&&(n.current=performance.now())},[t]),a=m.useCallback(()=>{if(n.current>0){const p=performance.now()-n.current;r.current.renderTime=p,n.current=0,p>16&&console.warn(`Slow render detected: ${p.toFixed(2)}ms`)}},[]),l=m.useCallback(()=>{if(t.enableMemoryMonitoring&&"memory"in performance){const p=performance.memory;p&&(r.current.memoryUsage=p.usedJSHeapSize/1024/1024,r.current.memoryUsage>100&&console.warn(`High memory usage: ${r.current.memoryUsage.toFixed(2)}MB`))}},[t]),c=m.useCallback(()=>{t.enableNetworkMonitoring&&Math.random()<t.sampleRate&&(s.current=performance.now())},[t]),u=m.useCallback(()=>{if(s.current>0){const p=performance.now()-s.current;r.current.networkLatency=p,s.current=0,p>2e3&&console.warn(`Slow network request: ${p.toFixed(2)}ms`)}},[]),f=m.useCallback((p,g)=>{r.current.errorCount++,console.error(`Error in ${g}:`,p),typeof window<"u"&&window.gtag&&window.gtag("event","exception",{description:p.message,fatal:!1,custom_map:{context:g}})},[]),d=m.useCallback((p,g)=>{typeof window<"u"&&window.gtag&&window.gtag("event","user_action",{action:p,...g})},[]),h=m.useCallback((p,g,v)=>{typeof window<"u"&&window.gtag&&window.gtag("event","performance_metric",{metric:p,value:g,...v})},[]);return m.useEffect(()=>{if(!t.enableMemoryMonitoring)return;const p=setInterval(l,3e4);return()=>clearInterval(p)},[t.enableMemoryMonitoring,l]),m.useEffect(()=>{const p=new PerformanceObserver(g=>{for(const v of g.getEntries())v.entryType==="measure"&&h(v.name,v.duration)});return p.observe({entryTypes:["measure"]}),()=>p.disconnect()},[h]),{metrics:r.current,startRenderTimer:i,endRenderTimer:a,startNetworkTimer:c,endNetworkTimer:u,trackError:f,trackUserAction:d,trackPerformance:h,updateMemoryUsage:l}},xL=()=>{const{user:e}=_e(),{toast:t}=Le(),[r,n]=m.useState({database:!0,realtime:!0,auth:!0,storage:!0,lastChecked:new Date}),[s,i]=m.useState(navigator.onLine);m.useEffect(()=>{const l=()=>i(!0),c=()=>i(!1);return window.addEventListener("online",l),window.addEventListener("offline",c),()=>{window.removeEventListener("online",l),window.removeEventListener("offline",c)}},[]),m.useEffect(()=>{s||t({title:"Connection Lost",description:"You're currently offline. Some features may not work.",variant:"destructive"})},[s,t]);const a=async()=>{const l={database:!1,realtime:!1,auth:!1,storage:!1,lastChecked:new Date};try{const{error:c}=await R.from("profiles").select("id").limit(1);l.database=!c,l.auth=!!e||!!(await R.auth.getSession()).data.session,l.realtime=!0,l.storage=!0}catch(c){console.error("Health check failed:",c)}return n(l),l.database||t({title:"Database Connection Lost",description:"Unable to connect to the database. Please refresh the page.",variant:"destructive"}),l};return m.useEffect(()=>{a();const l=setInterval(a,3e4);return()=>clearInterval(l)},[e]),{health:r,isOnline:s,checkHealth:a}},Qh=({achievement:e,size:t="md",showDetails:r=!1})=>{const n={sm:"text-lg",md:"text-2xl",lg:"text-4xl"};return r?o.jsx(q,{className:"hover:bg-accent/50 transition-colors",children:o.jsxs(Z,{className:"p-4 flex items-center gap-3",children:[o.jsx("div",{className:`${n[t]} flex-shrink-0`,children:e.badge_icon}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h4",{className:"font-semibold text-sm",children:e.achievement_title}),o.jsx("p",{className:"text-xs text-muted-foreground",children:e.achievement_description}),o.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[o.jsxs(le,{variant:"secondary",className:"text-xs",children:[e.points," pts"]}),o.jsx("span",{className:"text-xs text-muted-foreground",children:e.unlocked_at.toLocaleDateString()})]})]})]})}):o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:n[t],children:e.badge_icon}),t!=="sm"&&o.jsxs("div",{children:[o.jsx("span",{className:"text-sm font-medium",children:e.achievement_title}),o.jsx(le,{variant:"secondary",className:"ml-2 text-xs",children:e.points})]})]})},yL=({onClose:e})=>{const{engagement:t,achievements:r,loading:n}=dn();if(n)return o.jsx(q,{className:"w-full max-w-2xl mx-auto",children:o.jsx(Z,{className:"p-6",children:o.jsx("div",{className:"text-center",children:"Loading your progress..."})})});const s=t?{messages:Math.min(t.messages_sent_today/10*100,100),reactions:Math.min(t.reactions_given_today/5*100,100),tools:Math.min(t.tools_used_today/3*100,100)}:{messages:0,reactions:0,tools:0};return o.jsx("div",{className:"fixed inset-0 bg-background/80 backdrop-blur-sm z-50",children:o.jsx("div",{className:"fixed inset-4 flex items-center justify-center",children:o.jsxs(q,{className:"w-full max-w-4xl max-h-[90vh] overflow-hidden",children:[o.jsx(ue,{className:"relative",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(gs,{className:"h-6 w-6 text-primary"}),o.jsx(de,{className:"text-2xl",children:"Your Progress"})]}),o.jsx(D,{variant:"ghost",onClick:e,children:"✕"})]})}),o.jsx(Z,{className:"p-6 overflow-y-auto",children:o.jsxs(td,{defaultValue:"overview",className:"space-y-6",children:[o.jsxs(ll,{className:"grid w-full grid-cols-3",children:[o.jsx(sr,{value:"overview",children:"Overview"}),o.jsx(sr,{value:"achievements",children:"Achievements"}),o.jsx(sr,{value:"progress",children:"Daily Progress"})]}),o.jsxs(or,{value:"overview",className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[o.jsx(q,{children:o.jsxs(Z,{className:"p-4 text-center",children:[o.jsx(oc,{className:"h-8 w-8 text-orange-500 mx-auto mb-2"}),o.jsx("div",{className:"text-2xl font-bold",children:(t==null?void 0:t.daily_streak)||0}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"Day Streak"})]})}),o.jsx(q,{children:o.jsxs(Z,{className:"p-4 text-center",children:[o.jsx(gs,{className:"h-8 w-8 text-yellow-500 mx-auto mb-2"}),o.jsx("div",{className:"text-2xl font-bold",children:(t==null?void 0:t.achievement_points)||0}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Points"})]})}),o.jsx(q,{children:o.jsxs(Z,{className:"p-4 text-center",children:[o.jsx(Dn,{className:"h-8 w-8 text-blue-500 mx-auto mb-2"}),o.jsx("div",{className:"text-2xl font-bold",children:(t==null?void 0:t.messages_sent_today)||0}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"Messages Today"})]})}),o.jsx(q,{children:o.jsxs(Z,{className:"p-4 text-center",children:[o.jsx(rl,{className:"h-8 w-8 text-pink-500 mx-auto mb-2"}),o.jsx("div",{className:"text-2xl font-bold",children:(t==null?void 0:t.reactions_given_today)||0}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"Reactions Today"})]})})]}),o.jsxs(q,{children:[o.jsx(ue,{children:o.jsxs(de,{className:"flex items-center gap-2",children:[o.jsx(rb,{className:"h-5 w-5"}),"Recent Achievements"]})}),o.jsx(Z,{children:r.length>0?o.jsx("div",{className:"space-y-2",children:r.slice(0,3).map(i=>o.jsx(Qh,{achievement:i,showDetails:!0},i.id))}):o.jsx("p",{className:"text-muted-foreground text-center py-4",children:"Start chatting to unlock your first achievement!"})})]})]}),o.jsx(or,{value:"achievements",className:"space-y-4",children:r.length>0?o.jsx("div",{className:"grid gap-3",children:r.map(i=>o.jsx(Qh,{achievement:i,showDetails:!0},i.id))}):o.jsx(q,{children:o.jsxs(Z,{className:"p-8 text-center",children:[o.jsx(gs,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),o.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No achievements yet"}),o.jsx("p",{className:"text-muted-foreground",children:"Start participating in your group to unlock achievements!"})]})})}),o.jsxs(or,{value:"progress",className:"space-y-6",children:[o.jsxs(q,{children:[o.jsx(ue,{children:o.jsxs(de,{className:"flex items-center gap-2",children:[o.jsx(Vw,{className:"h-5 w-5"}),"Today's Goals"]})}),o.jsxs(Z,{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[o.jsx("span",{children:"Messages (Goal: 10)"}),o.jsxs("span",{children:[(t==null?void 0:t.messages_sent_today)||0,"/10"]})]}),o.jsx(Yo,{value:s.messages})]}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[o.jsx("span",{children:"Reactions (Goal: 5)"}),o.jsxs("span",{children:[(t==null?void 0:t.reactions_given_today)||0,"/5"]})]}),o.jsx(Yo,{value:s.reactions})]}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[o.jsx("span",{children:"Tools Used (Goal: 3)"}),o.jsxs("span",{children:[(t==null?void 0:t.tools_used_today)||0,"/3"]})]}),o.jsx(Yo,{value:s.tools})]})]})]}),o.jsxs(q,{children:[o.jsx(ue,{children:o.jsx(de,{children:"Available Achievements"})}),o.jsx(Z,{className:"space-y-2",children:o.jsxs("div",{className:"text-sm space-y-1",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{children:"💬"}),o.jsx("span",{children:"First Steps - Send your first message (10 pts)"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{children:"🔥"}),o.jsx("span",{children:"Getting Started - 3 day streak (25 pts)"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{children:"⭐"}),o.jsx("span",{children:"Week Warrior - 7 day streak (50 pts)"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{children:"🦋"}),o.jsx("span",{children:"Social Butterfly - 10+ reactions in one day (30 pts)"})]})]})})]})]})]})})]})})})},wL=({groupId:e,groupName:t,onClose:r})=>{const[n,s]=m.useState([]),[i,a]=m.useState(!1),{user:l}=_e(),{toast:c}=Le(),u=()=>Math.random().toString(36).substring(2,8).toUpperCase(),f=async()=>{if(l){a(!0);try{const p=u(),{data:g,error:v}=await R.from("group_invites").insert({group_id:e,inviter_id:l.id,invite_code:p,max_uses:5}).select().single();if(v){c({title:"Error",description:"Failed to create invite link",variant:"destructive"});return}const y=g,x={id:y.id,invite_code:y.invite_code,max_uses:y.max_uses,current_uses:y.current_uses,expires_at:new Date(y.expires_at),is_active:y.is_active,created_at:new Date(y.created_at)};s(w=>[x,...w]),c({title:"Invite Created!",description:"Share this code with friends to join your group"})}catch(p){console.error("Error creating invite:",p),c({title:"Error",description:"Failed to create invite link",variant:"destructive"})}finally{a(!1)}}},d=async p=>{try{const g=`Join my group "${t}" on SyncChat! Use invite code: ${p}`;await navigator.clipboard.writeText(g),c({title:"Copied!",description:"Invite message copied to clipboard"})}catch{c({title:"Error",description:"Failed to copy to clipboard",variant:"destructive"})}},h=async p=>{if(navigator.share)try{await navigator.share({title:`Join ${t} on SyncChat`,text:`Use invite code: ${p}`,url:window.location.origin})}catch{}else d(p)};return o.jsx("div",{className:"fixed inset-0 bg-background/80 backdrop-blur-sm z-50",children:o.jsx("div",{className:"fixed inset-4 flex items-center justify-center",children:o.jsxs(q,{className:"w-full max-w-md",children:[o.jsxs(ue,{children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(gh,{className:"h-5 w-5 text-primary"}),o.jsx(de,{children:"Invite Friends"})]}),o.jsx(D,{variant:"ghost",size:"sm",onClick:r,children:"✕"})]}),o.jsxs("p",{className:"text-sm text-muted-foreground",children:["Share ",t," with your friends"]})]}),o.jsxs(Z,{className:"space-y-4",children:[o.jsx(D,{onClick:f,disabled:i,className:"w-full",children:i?"Creating...":"Create New Invite"}),o.jsx("div",{className:"space-y-3",children:n.length>0?n.map(p=>o.jsx(q,{className:"border",children:o.jsxs(Z,{className:"p-4 space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("div",{className:"font-mono text-lg font-bold",children:p.invite_code}),o.jsx("div",{className:"flex items-center gap-2",children:o.jsx(le,{variant:p.is_active?"default":"secondary",className:"text-xs",children:p.is_active?"Active":"Expired"})})]}),o.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(vt,{className:"h-3 w-3"}),o.jsxs("span",{children:[p.current_uses,"/",p.max_uses]})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(tl,{className:"h-3 w-3"}),o.jsxs("span",{children:[Math.ceil((p.expires_at.getTime()-new Date().getTime())/(1e3*60*60*24)),"d left"]})]})]}),p.is_active&&o.jsxs("div",{className:"flex gap-2",children:[o.jsxs(D,{variant:"outline",size:"sm",onClick:()=>d(p.invite_code),className:"flex-1",children:[o.jsx(KE,{className:"h-3 w-3 mr-1"}),"Copy"]}),o.jsxs(D,{size:"sm",onClick:()=>h(p.invite_code),className:"flex-1",children:[o.jsx(gh,{className:"h-3 w-3 mr-1"}),"Share"]})]})]})},p.id)):o.jsx("div",{className:"text-center py-4 text-muted-foreground",children:"No active invites. Create one to get started!"})})]})]})})})};class bL{constructor(){xe(this,"activeGame",null);xe(this,"timer",null);xe(this,"callbacks",null);xe(this,"storageKey","activeGameState");xe(this,"handleStorageChange",t=>{t.key===this.storageKey&&!t.newValue&&this.activeGame&&this.clearActiveGame()});xe(this,"handleVisibilityChange",()=>{document.hidden&&this.activeGame?(this.saveActiveGame(),this.clearTimer()):!document.hidden&&this.activeGame&&this.startTimer()});window.addEventListener("storage",this.handleStorageChange),document.addEventListener("visibilitychange",this.handleVisibilityChange),this.loadActiveGame()}saveActiveGame(){this.activeGame&&localStorage.setItem(this.storageKey,JSON.stringify(this.activeGame))}loadActiveGame(){try{const t=localStorage.getItem(this.storageKey);if(t){const r=JSON.parse(t);new Date(r.roundEndsAt)>new Date?this.activeGame={...r,roundEndsAt:new Date(r.roundEndsAt)}:this.clearActiveGame()}}catch(t){console.warn("Failed to load active game:",t),this.clearActiveGame()}}clearTimer(){this.timer&&(clearInterval(this.timer),this.timer=null)}startTimer(){!this.activeGame||!this.callbacks||(this.clearTimer(),this.timer=setInterval(()=>{var n,s,i;if(!this.activeGame)return;const t=new Date,r=Math.max(0,this.activeGame.roundEndsAt.getTime()-t.getTime());r<=0?((n=this.callbacks)==null||n.onTimeEnd(),this.clearActiveGame()):(i=(s=this.callbacks)==null?void 0:s.onTick)==null||i.call(s,r)},1e3))}startGame(t,r,n,s){if(this.activeGame)return!1;const i=new Date(Date.now()+n*60*1e3);return this.activeGame={gameType:t,gameId:r,roundEndsAt:i,duration:n},this.callbacks=s,this.saveActiveGame(),this.startTimer(),!0}endGame(){this.clearActiveGame()}clearActiveGame(){this.clearTimer(),this.activeGame=null,this.callbacks=null,localStorage.removeItem(this.storageKey)}getActiveGame(){return this.activeGame}getRemainingTime(){return this.activeGame?Math.max(0,this.activeGame.roundEndsAt.getTime()-Date.now()):0}cleanup(){this.clearActiveGame(),window.removeEventListener("storage",this.handleStorageChange),document.removeEventListener("visibilitychange",this.handleVisibilityChange)}}const uf=new bL,df={enabledGames:{thisOrThat:!0,emojiRiddle:!0,twoTruths:!0},gameDuration:5},jL="gamePrefs",_L=()=>{var e,t,r;try{const n=localStorage.getItem(jL);if(!n)return df;const s=JSON.parse(n);return!s||typeof s!="object"?df:{enabledGames:{thisOrThat:((e=s.enabledGames)==null?void 0:e.thisOrThat)??!0,emojiRiddle:((t=s.enabledGames)==null?void 0:t.emojiRiddle)??!0,twoTruths:((r=s.enabledGames)==null?void 0:r.twoTruths)??!0},gameDuration:Math.min(10,Math.max(1,s.gameDuration??5))}}catch(n){return console.warn("Failed to load game preferences, using defaults:",n),df}},NL=({open:e,onOpenChange:t,groupId:r})=>{const[n,s]=m.useState(""),[i,a]=m.useState([]),[l,c]=m.useState(!1),[u,f]=m.useState(null),{user:d}=_e(),{isPremium:h,loading:p}=co(),{toast:g}=Le();m.useEffect(()=>{e&&d&&r&&v()},[e,d,r]);const v=async()=>{if(!(!d||!r)){c(!0),f(null);try{const{data:w,error:b}=await R.from("group_members").select(`
          id,
          user_id,
          profiles!inner(username)
        `).eq("group_id",r).eq("status","active").neq("user_id",d.id);if(b){console.error("Database error loading group members:",b),f(`Database error: ${b.message}`);return}w&&a(w.map(j=>({id:j.id,user_id:j.user_id,username:j.profiles.username})))}catch(w){console.error("Error loading group members:",w),f(`Failed to load group members: ${w instanceof Error?w.message:"Unknown error"}`),g({title:"Error",description:"Failed to load group members.",variant:"destructive"})}finally{c(!1)}}},y=async(w,b)=>{if(!h){g({title:"Premium Required",description:"Direct messaging is available exclusively for premium subscribers.",variant:"destructive"});return}try{const{error:j}=await R.from("reconnection_requests").insert({sender_id:d==null?void 0:d.id,recipient_id:w,status:"pending",message:`Hi ${b}! I'd like to start a direct conversation with you.`});if(j)throw j;const{error:_}=await R.rpc("update_user_engagement",{p_user_id:d==null?void 0:d.id,p_activity_type:"reconnect"});_&&console.error("Error updating engagement:",_),g({title:"DM Request Sent!",description:`Request sent to ${b}. You'll be notified if they accept.`}),t(!1)}catch(j){console.error("Error starting DM:",j),g({title:"Error",description:"Failed to send DM request.",variant:"destructive"})}},x=i.filter(w=>w.username.toLowerCase().includes(n.toLowerCase()));return u?o.jsx(Ht,{open:e,onOpenChange:t,children:o.jsxs(Dt,{className:"max-w-md",children:[o.jsx(nr,{children:o.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[o.jsx(Ic,{className:"h-8 w-8 text-red-500"}),o.jsx(qt,{className:"text-xl",children:"Error Loading DMs"})]})}),o.jsxs("div",{className:"space-y-6 text-center",children:[o.jsx("p",{className:"text-red-500",children:u}),o.jsx(D,{className:"w-full",onClick:()=>{f(null),v()},children:"Retry"})]})]})}):!h&&!p?o.jsx(Ht,{open:e,onOpenChange:t,children:o.jsxs(Dt,{className:"max-w-md",children:[o.jsx(nr,{children:o.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[o.jsx(Ic,{className:"h-8 w-8 text-primary"}),o.jsx(qt,{className:"text-xl",children:"Premium Feature"})]})}),o.jsxs("div",{className:"space-y-6 text-center",children:[o.jsx("p",{className:"text-muted-foreground",children:"Direct messaging is available exclusively for premium subscribers."}),o.jsxs("div",{className:"bg-primary/10 p-4 rounded-lg",children:[o.jsxs("div",{className:"flex items-center space-x-2 mb-2 justify-center",children:[o.jsx(dt,{className:"h-5 w-5 text-primary"}),o.jsx("span",{className:"font-medium",children:"Premium Benefits"})]}),o.jsxs("ul",{className:"text-sm space-y-1 text-left",children:[o.jsx("li",{children:"• Send DM requests to group members"}),o.jsx("li",{children:"• 1-on-1 private conversations"}),o.jsx("li",{children:"• No daily limits"})]})]}),o.jsx("div",{className:"space-y-3",children:o.jsx(D,{className:"w-full",onClick:()=>window.open("/success","_blank"),children:"Upgrade to Premium"})})]})]})}):o.jsx(Ht,{open:e,onOpenChange:t,children:o.jsxs(Dt,{className:"max-w-md max-h-[80vh] overflow-hidden",children:[o.jsx(nr,{children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(Dn,{className:"h-6 w-6 text-primary"}),o.jsx(qt,{className:"text-xl",children:"Direct Messages"}),o.jsxs("div",{className:"flex items-center gap-1 text-xs text-primary",children:[o.jsx(dt,{className:"h-3 w-3"}),o.jsx("span",{children:"Premium"})]})]}),o.jsx(D,{variant:"ghost",size:"sm",onClick:()=>t(!1),children:o.jsx(ao,{className:"h-4 w-4"})})]})}),o.jsxs("div",{className:"relative",children:[o.jsx(ph,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),o.jsx(ut,{placeholder:"Search group members...",value:n,onChange:w=>s(w.target.value),className:"pl-10"})]}),o.jsx("div",{className:"flex-1 overflow-y-auto space-y-3",children:l?o.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-2"}),o.jsx("p",{children:"Loading group members..."})]}):x.length===0?o.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[o.jsx(vt,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),o.jsx("p",{children:"No group members found"}),o.jsx("p",{className:"text-sm",children:"Join a group to start sending DMs"})]}):x.map(w=>o.jsx(q,{className:"p-4 hover:shadow-md transition-shadow",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("h4",{className:"font-medium",children:w.username}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Group member"})]}),o.jsxs(D,{variant:"outline",size:"sm",onClick:()=>y(w.user_id,w.username),children:[o.jsx(Nu,{className:"h-4 w-4 mr-2"}),"Send DM"]})]})},w.id))})]})})},oS=({groupId:e,groupName:t,groupVibe:r,memberCount:n,onBack:s,onGoHome:i})=>{const{user:a}=_e(),{toast:l}=Le(),c=m.useRef(null),{messages:u,loading:f,addMessage:d,addReaction:h,refetch:p}=nL(e),{typingUsers:g}=sL(e,(a==null?void 0:a.id)||""),{pinnedMessages:v,pinMessage:y,unpinMessage:x}=oL(e);iL();const[w,b]=m.useState(null),[j,_]=m.useState(!1),[N,S]=m.useState(null),[k,E]=m.useState(!1),[M,T]=m.useState(!1),[I,G]=m.useState(n),[F,O]=m.useState(!1),[L,z]=m.useState(null),[C,P]=m.useState(new Set),[H,$]=m.useState(!1);m.useEffect(()=>{const Q=JSON.parse(localStorage.getItem("clearedMessages")||"[]");Q.length>0&&P(new Set(Q))},[]);const[W,X]=m.useState(0),{isConnected:fe}=aL({groupId:e,onNewMessage:Q=>{te.current&&clearTimeout(te.current),te.current=setTimeout(()=>{he(),Ye()},100)},onReactionUpdate:()=>{p()}}),{engagement:ye,achievements:se,trackActivity:ce,trackKarmaActivity:$e}=dn();Op();const{getTodaysPrompt:Ce}=mL(),{validateMessageContent:Fe,checkRateLimit:Ke,sanitizeInput:Ut}=pL(),{trackError:ne,trackUserAction:Et}=vL();xL(),Ce();const{polls:Te,createPoll:Ne,votePoll:xt,closePoll:it}=lL(),{playlists:Se,createPlaylist:Je,addSongToPlaylist:kr,getActivePlaylist:Ft}=cL(),{prompts:Wr,createPrompt:hn,votePrompt:ee}=uL(),{games:Re,createGame:at,makeGuess:mn}=dL(),{prompts:dr,createPrompt:ho,votePrompt:pn,clearPrompts:mo}=fL(),{riddles:Ts,createRiddle:Li,makeGuess:Rs,clearRiddles:Cr}=hL(),po=m.useCallback(async()=>{if(e)try{const{data:Q}=await R.from("group_members").select("user_id").eq("group_id",e);if(Q&&Q.length>0){const ae=Q.map(zt=>zt.user_id),{data:Qe}=await R.from("user_engagement").select("user_id, achievement_points").in("user_id",ae);if(Qe){const zt=Qe.reduce((Kr,Yr)=>Kr+(Yr.achievement_points||0),0);X(zt)}}}catch(Q){console.error("Error loading group karma:",Q),X(0)}},[e]),V=m.useRef(0),te=m.useRef(),oe=m.useRef(!1),ge=m.useRef(),he=m.useCallback((Q=!1)=>{if(!c.current)return;const ae=c.current.querySelector("[data-radix-scroll-area-viewport]");ae&&(!Q&&oe.current||ae.scrollTo({top:ae.scrollHeight,behavior:"smooth"}))},[]),Ye=m.useCallback(()=>{if(!c.current)return;const Q=c.current.querySelector("[data-radix-scroll-area-viewport]");if(!Q)return;const ae=Q.lastElementChild;ae&&!ge.current&&(ge.current=new IntersectionObserver(([Qe])=>{oe.current=!Qe.isIntersecting},{threshold:.8}),ge.current.observe(ae))},[]);m.useEffect(()=>{const Q=(u==null?void 0:u.length)||0;return Q>V.current&&(V.current=Q,te.current&&clearTimeout(te.current),te.current=setTimeout(()=>{he(),Ye()},100)),()=>{te.current&&clearTimeout(te.current)}},[u==null?void 0:u.length,he,Ye]),m.useEffect(()=>()=>{var Q;(Q=ge.current)==null||Q.disconnect()},[]);const Ze=m.useCallback(async()=>{if(a!=null&&a.id)try{const{data:Q,error:ae}=await R.from("profiles").select("username").eq("user_id",a.id).single();if(ae)throw ae;b(Q)}catch(Q){console.error("Error loading user profile:",Q)}},[a==null?void 0:a.id]),yt=m.useCallback(async()=>{if(e)try{const{data:Q,error:ae}=await R.from("group_members").select("user_id",{count:"exact"}).eq("group_id",e);if(ae)throw ae;Q&&G(Q.length)}catch(Q){console.error("Error fetching member count:",Q)}},[e]);m.useEffect(()=>{a&&(Ze(),yt(),po())},[a,e,Ze,yt,po]);const Pt=Q=>{if(!w)return;const ae=_L();if(uf.startGame(Q,crypto.randomUUID(),ae.gameDuration,{onTimeEnd:()=>{z(null),l({title:"Game Ended",description:"Round completed - results posted!"})},onTick:zt=>{const Kr=uf.getActiveGame();Kr&&z({...Kr})}})){const zt=uf.getActiveGame();switch(z(zt),Q){case"thisorthat":const Kr=Hx[Math.floor(Math.random()*Hx.length)];ho(Kr.question,Kr.options);break;case"emojiriddle":const Yr=Wx[Math.floor(Math.random()*Wx.length)];Li(Yr.emojis,Yr.answer,Yr.hint,Yr.funFact);break;case"twoTruths":at(["I have traveled to 5 different countries","I can speak 3 languages fluently","I have never been on a roller coaster"],(a==null?void 0:a.id)||"",w.username);break}ce("tool"),l({title:"Game Started",description:`${Q} round is now active for ${ae.gameDuration} minutes!`})}else l({title:"Cannot Start Game",description:"A round is already active.",variant:"destructive"})},Xt=Q=>{if(w)switch(ce("tool"),Q){case"poll":S("create-poll");break;case"playlist":const ae=Ft();S(ae?"playlist":"create-playlist");break;case"addsong":Ft()?S("playlist"):l({title:"No Active Playlist",description:"Create a playlist first using /playlist",variant:"destructive"});break;case"wouldyourather":const zt=Vx[Math.floor(Math.random()*Vx.length)];hn(zt.question,zt.options);break;case"truthslie":S("create-truthlie");break;case"start-thisorthat":Pt("thisorthat");break;case"start-emojiriddle":Pt("emojiriddle");break;case"start-truthslie":Pt("twoTruths");break;case"game":S("game-picker");break}},qr=async(Q,ae,Qe)=>{if(!a||!w)return!1;const zt=Ut(Q),Kr=Fe(zt);if(!Kr.isValid)return l({title:"Invalid Message",description:Kr.error,variant:"destructive"}),!1;if(!await Ke())return!1;_(!0);try{return await d({content:zt,messageType:ae})?(ce("message"),Et("send_text_message"),!0):!1}catch(Yr){return console.error("Error sending message:",Yr),ne(Yr,"send_text_message"),!1}finally{_(!1)}},fr=async Q=>{if(!a||!w||!await Ke())return!1;_(!0);try{return await d({messageType:"gif",gifUrl:Q})?(ce("message"),Et("send_gif"),!0):!1}catch(ae){return console.error("Error sending GIF:",ae),ne(ae,"send_gif"),!1}finally{_(!1)}},go=async Q=>{if(!a||!w)return!1;_(!0);try{const ae=URL.createObjectURL(Q);return await d({messageType:"voice",voiceAudioUrl:ae,voiceTranscription:"Voice message"})?($e(e,"voice_note",2,"Sent voice message",1),!0):!1}catch(ae){return console.error("Error processing voice message:",ae),!1}finally{_(!1)}},fl=async(Q,ae)=>{if(a)try{await h(Q,ae)&&ce("reaction")}catch(Qe){console.error("Error handling reaction:",Qe)}},uS=Q=>{P(ae=>new Set(ae).add(Q))},dS=()=>{const Q=u.map(zt=>zt.id),Qe=[...JSON.parse(localStorage.getItem("clearedMessages")||"[]"),...Q];localStorage.setItem("clearedMessages",JSON.stringify(Qe)),P(new Set(Q)),l({title:"Chat cleared",description:"All messages have been permanently removed from your view"})},fS=()=>{window.location.reload()},hS=()=>{if(!w)return null;switch(N){case"create-poll":return o.jsx(Q5,{onCreatePoll:(ae,Qe)=>{Ne(ae,Qe,w.username),S(null),l({title:"Poll Created",description:"Your poll is now live in the chat!"})},onCancel:()=>S(null)});case"create-playlist":return o.jsx(J5,{onCreatePlaylist:ae=>{Je(ae),S("playlist"),l({title:"Playlist Created",description:`${ae} is ready for songs!`})},onCancel:()=>S(null)});case"playlist":const Q=Ft();return Q?o.jsx(X5,{playlist:Q,currentUserId:(a==null?void 0:a.id)||"",onAddSong:ae=>{kr(Q.id,ae,w.username),l({title:"Song Added",description:"Added to the collaborative playlist!"})}}):null;case"create-truthlie":return o.jsx(eL,{onCreateGame:ae=>{at(ae,(a==null?void 0:a.id)||"",w.username),S(null),l({title:"Game Started",description:"Two Truths and a Lie is now active!"})},onCancel:()=>S(null)});case"game-picker":return o.jsx(Y5,{onGameSelect:ae=>{S(null),Xt(ae)},disabled:!1});default:return null}};return o.jsxs(o.Fragment,{children:[o.jsx(y5,{groupName:t}),o.jsx(sS,{open:!!N&&N!=="game-picker",onOpenChange:Q=>!Q&&S(null),title:"Chat Tools",className:"max-w-2xl",children:hS()}),k&&o.jsx(yL,{onClose:()=>E(!1)}),M&&o.jsx(wL,{groupId:e,groupName:t,onClose:()=>T(!1)}),o.jsxs("div",{className:"flex flex-col h-[calc(100vh-4rem)] max-w-6xl mx-auto bg-background rounded-lg shadow-lg overflow-hidden",children:[o.jsxs("div",{className:"flex items-center justify-between p-4 border-b bg-gradient-to-r from-background to-muted/30 backdrop-blur-sm sticky top-0 z-10",children:[o.jsx("div",{className:"flex items-center gap-2 md:hidden",children:o.jsx(D,{variant:"ghost",size:"sm",onClick:s,className:"p-2 hover:bg-muted/50",children:o.jsx(ch,{className:"w-4 h-4"})})}),o.jsx("div",{className:"flex items-center gap-3 min-w-0 flex-1",children:o.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[o.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-r from-purple-500 to-blue-500 flex items-center justify-center flex-shrink-0",children:o.jsx(vt,{className:"w-4 h-4 text-white"})}),o.jsxs("div",{className:"min-w-0 flex-1",children:[o.jsx("h2",{className:"font-semibold text-lg truncate text-foreground",children:t}),o.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[o.jsx(le,{variant:"secondary",className:"text-xs px-2 py-0.5",children:r}),W>0&&o.jsxs(le,{variant:"outline",className:"text-xs px-2 py-0.5",children:[W," ⭐"]}),!fe&&o.jsx(le,{variant:"destructive",className:"text-xs px-2 py-0.5 animate-pulse",children:"Reconnecting..."})]})]})]})}),o.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[o.jsx(D,{variant:"ghost",size:"sm",onClick:fS,className:"h-9 w-9 p-0 rounded-full hover:bg-muted/50",title:"Refresh Chat",children:o.jsx(Su,{className:"w-4 h-4"})}),o.jsx(D,{variant:"ghost",size:"sm",onClick:i,className:"h-9 w-9 p-0 rounded-full hover:bg-muted/50",title:"Go to Home",children:o.jsx(Ia,{className:"w-4 h-4"})}),o.jsx(II,{groupId:e,memberCount:I}),o.jsx(D,{variant:"ghost",size:"sm",onClick:()=>$(!0),className:"h-9 w-9 p-0 rounded-full hover:bg-muted/50",title:"Direct Messages",children:o.jsx(Dn,{className:"w-4 h-4"})}),o.jsxs(Zp,{children:[o.jsx(eg,{asChild:!0,children:o.jsx(D,{variant:"ghost",size:"sm",className:"h-9 w-9 p-0 rounded-full hover:bg-muted/50",title:"More options",children:o.jsx(QE,{className:"w-4 h-4"})})}),o.jsxs(id,{align:"end",className:"w-48",children:[o.jsxs(Pn,{onClick:dS,children:[o.jsx(XE,{className:"w-4 h-4 mr-2"}),"Clear Chat"]}),o.jsxs(Pn,{children:[o.jsx(Xm,{className:"w-4 h-4 mr-2"}),"Group Settings"]}),o.jsxs(Pn,{children:[o.jsx(gh,{className:"w-4 h-4 mr-2"}),"Share Group"]})]})]}),o.jsxs(D,{variant:"outline",size:"sm",onClick:()=>O(!0),className:"h-9 px-3 text-sm font-medium border-red-200 text-red-600 hover:bg-red-50 hover:border-red-300",children:[o.jsx(ch,{className:"w-4 h-4 mr-1"}),"Leave"]})]})]}),o.jsx(a5,{pinnedMessages:v,onUnpin:x}),o.jsx($r,{ref:c,className:"flex-1 p-4",children:o.jsxs("div",{className:"space-y-4",children:[f?o.jsx("div",{className:"text-center py-20",children:o.jsx(wi,{size:"lg",text:"Loading messages..."})}):u.length===0?o.jsx("div",{className:"text-center py-10 sm:py-20 text-muted-foreground",children:o.jsxs("div",{className:"max-w-md mx-auto space-y-4",children:[o.jsx("h3",{className:"text-lg sm:text-xl font-medium text-foreground",children:"Ready to connect?"}),o.jsx("p",{className:"text-sm leading-relaxed px-4",children:"Start the conversation! Share what's on your mind, ask a question, or just say hello. Your group is waiting to hear from you."})]})}):u.filter(Q=>!C.has(Q.id)).map(Q=>o.jsx(m5,{message:Q,onReact:fl,onPin:y,onHideMessage:uS,currentUserId:a==null?void 0:a.id},Q.id)),(dr.length>0||Ts.length>0||Re.length>0)&&o.jsxs("div",{className:"space-y-4 mt-6 pt-4 border-t",children:[Re.filter(Q=>Q.isActive).map(Q=>o.jsx(Z5,{game:Q,currentUserId:(a==null?void 0:a.id)||"",currentUsername:(w==null?void 0:w.username)||"Anonymous",onGuess:(ae,Qe)=>{a!=null&&a.id&&(mn(ae,Qe,a.id),ce("game_participation"))}},Q.id)),dr.filter(Q=>Q.isActive).map(Q=>o.jsx(tL,{prompt:Q,currentUserId:(a==null?void 0:a.id)||"",onVote:(ae,Qe)=>{a!=null&&a.id&&(pn(ae,Qe,a.id),ce("tool"))}},Q.id)),Ts.filter(Q=>Q.isActive).map(Q=>o.jsx(rL,{riddle:Q,currentUserId:(a==null?void 0:a.id)||"",currentUsername:(w==null?void 0:w.username)||"Anonymous",onGuess:(ae,Qe)=>{a!=null&&a.id&&(w!=null&&w.username)&&(Rs(ae,Qe,a.id,w.username),ce("tool"))}},Q.id))]})]})}),o.jsx(i5,{typingUsers:g}),N==="game-picker"&&o.jsxs("div",{className:"border-t border-border bg-muted/20 p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h3",{className:"text-sm font-medium text-foreground",children:"Select a Game"}),o.jsx("button",{onClick:()=>S(null),className:"text-muted-foreground hover:text-foreground text-lg",children:"✕"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[o.jsxs("button",{onClick:()=>{S(null),Xt("start-truthslie")},className:"p-4 text-left rounded-lg border border-border bg-background hover:bg-muted/50 transition-colors",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx("div",{className:"w-8 h-8 bg-blue-500/20 rounded-lg flex items-center justify-center",children:o.jsx("span",{className:"text-blue-500 text-sm",children:"🎯"})}),o.jsx("h4",{className:"font-medium text-foreground",children:"Two Truths & a Lie"})]}),o.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Share two true facts and one lie about yourself. Let others guess which is which!"}),o.jsxs("div",{className:"flex items-center text-xs text-blue-500",children:[o.jsx("span",{children:"Start Game"}),o.jsx(Ys,{className:"w-3 h-3 ml-1"})]})]}),o.jsxs("button",{onClick:()=>{S(null),Xt("start-thisorthat")},className:"p-4 text-left rounded-lg border border-border bg-background hover:bg-muted/50 transition-colors",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx("div",{className:"w-8 h-8 bg-green-500/20 rounded-lg flex items-center justify-center",children:o.jsx("span",{className:"text-green-500 text-sm",children:"⚖️"})}),o.jsx("h4",{className:"font-medium text-foreground",children:"This or That"})]}),o.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Quick choices: Pizza or Burgers? Summer or Winter? Books or Movies?"}),o.jsxs("div",{className:"flex items-center text-xs text-green-500",children:[o.jsx("span",{children:"Ask Question"}),o.jsx(Ys,{className:"w-3 h-3 ml-1"})]})]}),o.jsxs("button",{onClick:()=>{S(null),Xt("start-emojiriddle")},className:"p-4 text-left rounded-lg border border-border bg-background hover:bg-muted/50 transition-colors",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx("div",{className:"w-8 h-8 bg-purple-500/20 rounded-lg flex items-center justify-center",children:o.jsx("span",{className:"text-purple-500 text-sm",children:"🧩"})}),o.jsx("h4",{className:"font-medium text-foreground",children:"Emoji Riddle"})]}),o.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Guess what movie, song, or phrase these emojis represent! 🎬🍿"}),o.jsxs("div",{className:"flex items-center text-xs text-purple-500",children:[o.jsx("span",{children:"Create Riddle"}),o.jsx(Ys,{className:"w-3 h-3 ml-1"})]})]})]})]}),o.jsx(n5,{onSendMessage:qr,onSendGif:fr,onSendVoice:go,onToolSelect:Xt,disabled:!w||!fe,loading:j||f,groupId:e,groupName:t})]}),o.jsx(o5,{isOpen:F,onClose:()=>O(!1),groupId:e,groupName:t,onSwitchSuccess:(Q,ae)=>{i&&i()}}),o.jsx(NL,{open:H,onOpenChange:$,groupId:e})]})},SL={group_switch:{icon:o.jsx(vt,{className:"h-6 w-6"}),title:"Daily Group Switch Limit Reached",description:"You've used your free group switch for today. Premium users get unlimited group switching!",benefit:"Unlimited group switching"},reconnect:{icon:o.jsx(ku,{className:"h-6 w-6"}),title:"Premium Feature: Direct Messaging",description:"Direct messaging is available exclusively for premium subscribers. Upgrade to unlock unlimited 1-on-1 private conversations!",benefit:"Unlimited direct messaging with no daily limits"},enhanced_username_changes:{icon:o.jsx(Qw,{className:"h-6 w-6"}),title:"Monthly Username Change Limit Reached",description:"You've used all your free username changes this month. Premium users get 5 username changes per month!",benefit:"5 username changes per month"},custom_theme:{icon:o.jsx(mi,{className:"h-6 w-6"}),title:"Premium Feature: Custom Themes",description:"Custom group themes are available for premium users. Personalize your groups with unique styles!",benefit:"Unlimited custom themes and styles"}},kL=({open:e,onOpenChange:t,feature:r,currentUsage:n,limit:s})=>{const{createCheckout:i}=co(),a=SL[r],l=(c,u=!1)=>{i(c,u),t(!1)};return o.jsx(Ht,{open:e,onOpenChange:t,children:o.jsxs(Dt,{className:"max-w-md",children:[o.jsxs(nr,{children:[o.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[o.jsx("div",{className:"text-primary",children:a.icon}),o.jsx(qt,{className:"text-xl",children:a.title})]}),o.jsx(as,{className:"text-base",children:a.description}),n!==void 0&&s!==void 0&&o.jsxs("div",{className:"text-sm text-muted-foreground mt-2",children:["You've used ",n," of ",s," free uses today."]})]}),o.jsxs("div",{className:"space-y-4 mt-6",children:[o.jsxs("div",{className:"bg-primary/10 p-4 rounded-lg",children:[o.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[o.jsx(dt,{className:"h-5 w-5 text-primary"}),o.jsx("span",{className:"font-medium",children:"Premium Benefit"})]}),o.jsx("p",{className:"text-sm",children:a.benefit})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx(D,{className:"w-full",onClick:()=>l("monthly"),children:"Upgrade to Monthly ($9.99/mo)"}),o.jsx(D,{variant:"outline",className:"w-full",onClick:()=>l("yearly"),children:"Upgrade to Yearly ($79.99/yr)"}),o.jsx(D,{variant:"ghost",className:"w-full",onClick:()=>l("monthly",!0),children:"Try 3-Day Free Trial"})]}),o.jsx(D,{variant:"ghost",className:"w-full",onClick:()=>t(!1),children:"Maybe Later"})]})]})})},iS=()=>{const{user:e}=_e();return Le(),{addUserToGroup:async(a,l)=>{const c=l||(e==null?void 0:e.id);if(!c)return console.error("❌ No user ID provided for group assignment"),{success:!1,error:"No user ID provided"};const u=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;if(!u.test(a)||!u.test(c))return console.error("❌ Invalid UUID format:",{groupId:a,targetUserId:c}),{success:!1,error:"Invalid ID format provided"};try{console.log("🔄 Calling join_group_safe RPC with:",{p_group_id:a});let f=null,d=null;for(let h=1;h<=3;h++)try{const{data:p,error:g}=await R.rpc("join_group_safe",{p_group_id:a});if(console.log(`💡 join_group_safe RPC response (attempt ${h}):`,{data:p,error:g}),g){if(f=g,console.error(`❌ RPC error adding user to group (attempt ${h}):`,{error:g,code:g.code,message:g.message,details:g.details,hint:g.hint,groupId:a,userId:c}),g.code==="23505"||g.code==="23503"||g.code==="42P01")break;if(h<3){await new Promise(v=>setTimeout(v,1e3*h));continue}}else{d=p;break}}catch(p){if(f=p,console.error(`❌ Network error (attempt ${h}):`,p),h<3){await new Promise(g=>setTimeout(g,1e3*h));continue}}return f&&!d?{success:!1,error:`Failed after 3 attempts: ${f.message}`}:d!=null&&d.ok?(console.log("✅ Successfully added user to group:",d),{success:!0,groupId:d.group_id,groupName:void 0,newMemberCount:d.members}):(console.error("❌ addUserToGroup RPC returned failure:",{ok:d==null?void 0:d.ok,error:d==null?void 0:d.error,members:d==null?void 0:d.members,groupId:a,userId:c}),{success:!1,error:(d==null?void 0:d.error)||"Failed to add user to group",currentMembers:d==null?void 0:d.members,maxMembers:void 0})}catch(f){return console.error("❌ Critical error in addUserToGroup:",f),{success:!1,error:`Critical error: ${f.message}`}}},removeUserFromGroup:async(a,l)=>{const c=l||(e==null?void 0:e.id);if(!c)return{success:!1,error:"No user ID provided"};try{const{data:u,error:f}=await R.rpc("remove_user_from_group",{p_group_id:a,p_user_id:c});if(f)return console.error("Error removing user from group:",f),{success:!1,error:f.message};const d=u;return d!=null&&d.success?{success:!0,groupId:d.group_id,newMemberCount:d.new_member_count}:{success:!1,error:(d==null?void 0:d.error)||"Failed to remove user from group"}}catch(u){return console.error("Error in removeUserFromGroup:",u),{success:!1,error:u.message}}},findAvailableGroupsWithCapacity:async(a,l)=>{try{console.log("🔧 ULTIMATE: Finding available groups using RPC...");const{data:c,error:u}=await R.rpc("get_available_groups",{p_limit:50});return u?(console.error("❌ Error fetching available groups:",u),[]):c!=null&&c.length?(console.log(`📊 Found ${c.length} available groups`),c.map(f=>({...f,actual_member_count:f.current_members}))):(console.log("📊 No available groups found - will create new one"),[])}catch(c){return console.error("❌ Error in findAvailableGroupsWithCapacity:",c),[]}},createNewGroupForCategory:async(a,l)=>{if(!e)throw console.error("❌ No user found in createNewGroupForCategory"),new Error("User not authenticated");console.log("🔧 SIMPLE: Creating new group...");try{const{data:c,error:u}=await R.from("groups").insert({name:`Group-${Date.now()}`,vibe_label:"New Group",current_members:0,max_members:10,is_private:!1,lifecycle_stage:"active"}).select("id, name").single();if(u||!c)throw console.error("❌ Group creation failed:",u),new Error(`Failed to create group: ${u==null?void 0:u.message}`);return console.log("✅ Group created successfully:",c),c}catch(c){throw console.error("❌ Error in createNewGroupForCategory:",c),new Error(`Group creation failed: ${c.message}`)}},getCurrentGroupMemberCount:async a=>{try{const{data:l,error:c}=await R.from("groups").select("current_members, max_members").eq("id",a).single();return c||!l?(console.error("Error getting group member count:",c),null):{currentMembers:l.current_members,maxMembers:l.max_members,hasCapacity:l.current_members<l.max_members}}catch(l){return console.error("Error in getCurrentGroupMemberCount:",l),null}}}},CL=()=>{const{user:e}=_e(),{toast:t}=Le(),{addUserToGroup:r,removeUserFromGroup:n,findAvailableGroupsWithCapacity:s,createNewGroupForCategory:i}=iS(),[a,l]=m.useState({memory:{totalUserCount:0,groupJoinDate:null,groupExpired:!1,matchingMode:"flexible"},needsReshuffle:!1,canTransition:!1,loading:!0});m.useEffect(()=>{e&&c()},[e]);const c=async()=>{if(e)try{const{count:h}=await R.from("profiles").select("*",{count:"exact",head:!0}),{data:p}=await R.from("group_members").select("joined_at, groups!inner(lifecycle_stage)").eq("user_id",e.id).eq("groups.lifecycle_stage","active").single(),g=h||0,v=(p==null?void 0:p.joined_at)||null,y=g<100?"flexible":"strict",x=u(g,v),w=g>=100;l({memory:{totalUserCount:g,groupJoinDate:v,groupExpired:!1,matchingMode:y||"flexible"},needsReshuffle:x,canTransition:w,loading:!1})}catch(h){console.error("Error fetching lifecycle data:",h),l(p=>({...p,loading:!1}))}},u=(h,p)=>{if(h<100||!p)return!1;const g=new Date(p),v=new Date;return v.setDate(v.getDate()-30),g<=v},f=async(h,p)=>{var g,v;if(!e)return console.error("❌ No user found in findAndJoinGroupWithCapacityCheck"),null;console.log("🚨 EMERGENCY MATCH ME: Starting forced group matching...");try{const y=Date.now(),x=`match-${((g=p==null?void 0:p.genres)==null?void 0:g[0])||"general"}-${y}`,{data:w,error:b}=await R.from("groups").insert({name:x,vibe_label:`${((v=p==null?void 0:p.personality)==null?void 0:v[0])||"Match"} Connection`,current_members:0,max_members:10,is_private:!1,lifecycle_stage:"active"}).select("*").single();if(b||!w)throw console.error("❌ EMERGENCY MATCH: Group creation failed:",b),new Error(`Emergency match group creation failed: ${b==null?void 0:b.message}`);console.log("✅ EMERGENCY MATCH: Group created:",w);const{data:j,error:_}=await R.rpc("join_group_safe",{p_group_id:w.id});if(_||!(j!=null&&j.ok))throw console.error("❌ EMERGENCY MATCH: RPC failed:",_||j),new Error(`Emergency match RPC failed: ${(_==null?void 0:_.message)||(j==null?void 0:j.error)}`);return console.log("✅ EMERGENCY MATCH: User added to group successfully"),t({title:"Group Matched!",description:`Welcome to ${w.name}! Ready to chat.`}),{groupId:w.id,groupName:w.name}}catch(y){throw console.error("🚨 EMERGENCY MATCH FAILED:",y),t({title:"Match Failed",description:`Failed to match you to a group: ${y.message}`,variant:"destructive"}),y}};return{lifecycleData:a,refreshLifecycleData:c,findAndJoinGroupWithCapacityCheck:f,performReshuffle:async()=>{if(!e)return!1;try{const{data:h}=await R.from("profiles").select("*").eq("user_id",e.id).single();if(!h)return!1;const{data:p}=await R.from("group_members").select("group_id").eq("user_id",e.id).single();if(p){const v=await n(p.group_id);v.success||console.error("Failed to leave current group:",v.error)}const g=await f("strict",h);if(g)return await c(),t({title:"🎉 Welcome to Your New Group!",description:"You've been matched into a new group based on your preferences."}),{success:!0,groupId:g.groupId};throw new Error("Failed to find or create new group")}catch(h){return console.error("Error performing reshuffle:",h),t({title:"Error",description:"Failed to reshuffle into new group. Please try again.",variant:"destructive"}),{success:!1}}}}},EL=({userProfile:e,onGroupMatched:t})=>{var C,P,H;const[r,n]=m.useState(!1),[s,i]=m.useState(null),[a,l]=m.useState(!0),[c,u]=m.useState(!1),[f,d]=m.useState(!1),[h,p]=m.useState(!1),[g,v]=m.useState(!1),{user:y}=_e(),{toast:x}=Le(),{engagement:w,achievements:b,trackActivity:j}=dn(),{isPremium:_,canUseFeature:N}=co(),S=Ai(),{lifecycleData:k,refreshLifecycleData:E,findAndJoinGroupWithCapacityCheck:M,performReshuffle:T}=CL();m.useEffect(()=>{y&&(I(),G(),E())},[y]),m.useEffect(()=>{k.needsReshuffle&&k.canTransition&&s&&v(!0)},[k,s]);const I=async()=>{if(y)try{const{data:$}=await R.from("group_members").select(`
          group_id,
          groups (
            id,
            name,
            vibe_label
          )
        `).eq("user_id",y.id).single();if($!=null&&$.groups){const{data:W}=await R.from("group_members").select("user_id").eq("group_id",$.group_id),X=[];if(W)for(const ye of W){const{data:se}=await R.from("profiles").select("username").eq("user_id",ye.user_id).single();X.push((se==null?void 0:se.username)||"Unknown")}const fe={id:$.groups.id,name:$.groups.name,vibe_label:$.groups.vibe_label,members:X.map(ye=>({username:ye}))};i(fe),t(fe.id)}}catch($){console.error("Error checking existing group:",$)}},G=async()=>{if(y)try{const{data:$,error:W}=await R.rpc("can_user_switch_groups",{p_user_id:y.id});if(W){console.error("Error checking switch availability:",W),l(!1);return}l($)}catch($){console.error("Error checking switch status:",$),l(!1)}},F=async()=>{if(y)try{await R.from("profiles").upsert({user_id:y.id,username:e.username,genres:e.genres,personality:e.personality,habits:e.habits},{onConflict:"user_id"})}catch($){throw console.error("Error saving profile:",$),$}},O=async()=>{var $,W,X,fe;if(!y){console.error("❌ No user available for group matching"),x({title:"Authentication Error",description:"Please log in again to join a group.",variant:"destructive"});return}n(!0);try{try{await F()}catch(Te){throw console.error("❌ Failed to save user profile:",Te),new Error(`Profile save failed: ${Te.message}`)}const{data:ye,error:se}=await R.from("groups").select("id, name, vibe_label, current_members, max_members").lt("current_members",10).eq("lifecycle_stage","active").order("created_at",{ascending:!0}).limit(5);if(se)throw console.error("❌ Error fetching existing groups:",se),new Error(`Failed to fetch groups: ${se.message}`);let ce=null,$e=0;if(ye&&ye.length>0)for(const Te of ye){$e++;try{const{data:Ne,error:xt}=await R.rpc("join_group_safe",{p_group_id:Te.id});if(!xt&&(Ne!=null&&Ne.ok)){ce=Te.id;break}else console.warn(`⚠️ Failed to join group ${Te.name}:`,(xt==null?void 0:xt.message)||(Ne==null?void 0:Ne.error))}catch(Ne){console.warn(`⚠️ Error attempting to join group ${Te.name}:`,Ne)}}if(!ce)try{const{data:Te,error:Ne}=await R.from("groups").insert({name:`Group-${Date.now()}`,vibe_label:"New Connections",current_members:0,max_members:10,is_private:!1,lifecycle_stage:"active",created_by_user_id:y.id}).select("id, name, vibe_label").single();if(Ne||!Te)throw console.error("❌ Group creation failed:",Ne),new Error(`Group creation failed: ${(Ne==null?void 0:Ne.message)||"Unknown error"}`);let xt=!1;for(let it=1;it<=3;it++)try{const{data:Se,error:Je}=await R.rpc("join_group_safe",{p_group_id:Te.id});if(!Je&&(Se!=null&&Se.ok)){ce=Te.id,xt=!0;break}else console.error(`❌ Join attempt ${it} failed:`,(Je==null?void 0:Je.message)||(Se==null?void 0:Se.error)),it<3&&await new Promise(kr=>setTimeout(kr,1e3*it))}catch(Se){console.error(`❌ Join attempt ${it} error:`,Se),it<3&&await new Promise(Je=>setTimeout(Je,1e3*it))}if(!xt){try{await R.from("groups").delete().eq("id",Te.id)}catch{}throw new Error("Failed to join newly created group after 3 attempts")}}catch(Te){throw console.error("❌ Group creation process failed:",Te),Te}if(!ce)throw new Error("Could not join any group or create a new one");const{data:Ce,error:Fe}=await R.from("groups").select("*").eq("id",ce).single();if(Fe||!Ce)throw console.error("❌ Failed to fetch group data:",Fe),new Error("Failed to fetch group information after joining");const{data:Ke,error:Ut}=await R.from("group_members").select(`
          user_id,
          profiles!inner(username)
        `).eq("group_id",ce),ne=(Ke==null?void 0:Ke.map(Te=>{var Ne;return{username:((Ne=Te.profiles)==null?void 0:Ne.username)||"Unknown User"}}))||[{username:e.username}],Et={id:ce,name:Ce.name,vibe_label:Ce.vibe_label||"New Connections",members:ne};i(Et),t(ce),x({title:"🎉 Welcome to Your Group!",description:`You've joined ${Ce.name} with ${ne.length} members!`,variant:"default"})}catch(ye){console.error("❌ Critical error in group matching:",ye);let se="Failed to find or create group. Please try again.";($=ye.message)!=null&&$.includes("Profile save")?se="Failed to save your profile. Please check your information and try again.":(W=ye.message)!=null&&W.includes("Group creation")?se="Failed to create a new group. Please try again or contact support.":((X=ye.message)!=null&&X.includes("network")||(fe=ye.message)!=null&&fe.includes("fetch"))&&(se="Network error. Please check your connection and try again."),x({title:"Group Matching Failed",description:se,variant:"destructive"})}finally{n(!1)}},L=async()=>{if(!(!y||!s)){if(!_&&c){p(!0);return}if(!_&&w&&w.group_switches_used_today>=1){p(!0);return}try{await R.from("group_members").delete().eq("user_id",y.id).eq("group_id",s.id),await R.from("groups").update({current_members:Math.max(0,s.members.length-1)}).eq("id",s.id),await j("group_switch"),_||(await R.from("user_switches").upsert({user_id:y.id,has_used_free_switch:!0}),u(!0),l(!1)),i(null),await O()}catch($){console.error("Error switching groups:",$),x({title:"Error",description:"Failed to switch groups. Please try again.",variant:"destructive"})}}};if(f&&s)return o.jsx(oS,{groupId:s.id,groupName:s.name,groupVibe:s.vibe_label,memberCount:s.members.length,onBack:()=>d(!1)});const z=async()=>{const $=await T();$&&typeof $=="object"&&$.success&&(v(!1),i(null),window.location.reload())};return s?o.jsxs("div",{className:"max-w-2xl mx-auto p-6 space-y-6",children:[o.jsx("div",{className:"mb-4 flex justify-start",children:o.jsxs(D,{variant:"outline",onClick:()=>S("/"),className:"flex items-center gap-2",children:[o.jsx(Ia,{className:"h-4 w-4"}),"Home"]})}),g&&o.jsx(q,{className:"border-orange-200 bg-gradient-to-r from-orange-50 to-yellow-50",children:o.jsx(Z,{className:"pt-6",children:o.jsxs("div",{className:"flex items-start gap-4",children:[o.jsx("div",{className:"p-2 bg-orange-100 rounded-full",children:o.jsx(Sv,{className:"h-5 w-5 text-orange-600"})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"font-semibold text-orange-900 mb-1",children:"🎉 Your 30-day group has wrapped!"}),o.jsxs("p",{className:"text-sm text-orange-800 mb-4",children:["We've found you a new group match based on your preferences with ",k.memory.totalUserCount,"+ users in our community."]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs(D,{onClick:z,className:"bg-orange-600 hover:bg-orange-700",children:[o.jsx(Sv,{className:"h-4 w-4 mr-2"}),"Join New Group"]}),o.jsx(D,{variant:"outline",onClick:()=>v(!1),className:"border-orange-300 text-orange-700",children:"Stay Here"})]})]})]})})}),o.jsxs(q,{className:"relative overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/10 to-secondary/10"}),_&&o.jsx("div",{className:"absolute top-4 right-4",children:o.jsxs(le,{className:"bg-gradient-to-r from-yellow-400 to-orange-500 text-white",children:[o.jsx(dt,{className:"h-3 w-3 mr-1"}),"Premium"]})}),o.jsxs(ue,{className:"relative",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx(yr,{className:"h-5 w-5 text-primary"}),o.jsx(le,{variant:"secondary",children:s.vibe_label}),k.memory.matchingMode==="strict"&&o.jsx(le,{variant:"outline",className:"text-xs",children:"Curated Match"})]}),o.jsx(de,{className:"text-2xl",children:s.name})]}),o.jsxs(Z,{className:"relative space-y-4",children:[o.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[o.jsx(vt,{className:"h-4 w-4"}),o.jsxs("span",{children:[s.members.length," members"]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("h4",{className:"font-medium",children:"Group Members:"}),o.jsx("div",{className:"flex flex-wrap gap-2",children:s.members.map(($,W)=>o.jsx(le,{variant:"outline",children:$.username},W))})]}),w&&o.jsxs("div",{className:"pt-4 border-t space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm font-medium",children:"Your Progress"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(gs,{className:"h-4 w-4 text-yellow-500"}),o.jsxs("span",{className:"text-sm font-bold",children:[w.achievement_points," pts",_&&o.jsx("span",{className:"text-xs text-primary ml-1",children:"(2x rate)"})]})]})]}),b.length>0&&o.jsxs("div",{className:"space-y-2",children:[o.jsx("span",{className:"text-xs text-muted-foreground",children:"Recent Achievement"}),o.jsx(Qh,{achievement:b[0],size:"sm"})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-lg font-bold text-primary",children:w.daily_streak}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"Day Streak"})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-lg font-bold text-blue-500",children:w.messages_sent_today}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"Messages"})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-lg font-bold text-pink-500",children:w.reactions_given_today}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"Reactions"})]})]})]}),o.jsxs("div",{className:"pt-4 border-t",children:[o.jsxs("div",{className:"flex gap-3",children:[o.jsxs(D,{onClick:()=>d(!0),className:"flex items-center gap-2",children:[o.jsx(Dn,{className:"h-4 w-4"}),"Open Chat"]}),o.jsxs(D,{variant:"outline",onClick:L,disabled:!_&&!a,className:"flex items-center gap-2",children:[o.jsx(Qm,{className:"h-4 w-4"}),_?"Switch Group":a?"Switch Group (Free)":"Switch Group (Premium)"]})]}),!_&&c&&o.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"You've used your free switch. Upgrade to Premium for unlimited switches!"}),_&&o.jsxs("p",{className:"text-sm text-primary mt-2 flex items-center gap-1",children:[o.jsx(dt,{className:"h-3 w-3"}),"Unlimited group switching with Premium"]})]})]})]}),o.jsx(kL,{open:h,onOpenChange:p,feature:"group_switch",currentUsage:(w==null?void 0:w.group_switches_used_today)||0,limit:1})]}):o.jsxs("div",{className:"max-w-2xl mx-auto p-6",children:[o.jsx("div",{className:"mb-4 flex justify-start",children:o.jsxs(D,{variant:"outline",onClick:()=>S("/"),className:"flex items-center gap-2",children:[o.jsx(Ia,{className:"h-4 w-4"}),"Home"]})}),o.jsxs(q,{className:"text-center",children:[o.jsxs(ue,{children:[o.jsx(de,{className:"text-2xl",children:"Find Your Perfect Group"}),!k.loading&&o.jsxs("div",{className:"flex justify-center gap-2 mt-2",children:[o.jsx(le,{variant:k.memory.matchingMode==="flexible"?"default":"secondary",children:k.memory.matchingMode==="flexible"?"Quick Match":"Curated Match"}),o.jsxs(le,{variant:"outline",className:"text-xs",children:[k.memory.totalUserCount," users"]})]})]}),o.jsxs(Z,{className:"space-y-6",children:[o.jsxs("div",{className:"space-y-4",children:[o.jsx("p",{className:"text-muted-foreground",children:k.memory.matchingMode==="flexible"?"We'll find you an active group to join and start connecting!":"Based on your preferences, we'll match you with like-minded people in a curated group of up to 10 members."}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("h4",{className:"font-medium",children:"Your Profile Summary:"}),o.jsxs("div",{className:"text-sm text-muted-foreground space-y-1",children:[o.jsxs("p",{children:[((C=e==null?void 0:e.genres)==null?void 0:C.length)||0," favorite genres"]}),o.jsxs("p",{children:[((P=e==null?void 0:e.personality)==null?void 0:P.length)||0," personality traits"]}),o.jsxs("p",{children:[((H=e==null?void 0:e.habits)==null?void 0:H.length)||0," habits"]})]})]})]}),o.jsx(D,{onClick:O,disabled:r||k.loading,size:"lg",className:"w-full",children:r?o.jsxs(o.Fragment,{children:[o.jsx(t2,{className:"mr-2 h-4 w-4 animate-spin"}),"Finding Your Group..."]}):"Find My Group"})]})]})]})};var PL="Label",aS=m.forwardRef((e,t)=>o.jsx(ie.label,{...e,ref:t,onMouseDown:r=>{var s;r.target.closest("button, input, select, textarea")||((s=e.onMouseDown)==null||s.call(e,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));aS.displayName=PL;var lS=aS;const TL=_u("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Yn=m.forwardRef(({className:e,...t},r)=>o.jsx(lS,{ref:r,className:re(TL(),e),...t}));Yn.displayName=lS.displayName;const cS=()=>{const[e,t]=m.useState(!1),[r,n]=m.useState(!1),[s,i]=m.useState({email:"",password:""}),[a,l]=m.useState(!1),[c,u]=m.useState(""),{toast:f}=Le(),{signUp:d,signIn:h}=_e(),[p,g]=m.useState(""),[v,y]=m.useState(!1);A.useEffect(()=>{const N=localStorage.getItem("saved_username");N&&i(S=>({...S,email:N}))},[]);const x=N=>{const{name:S,value:k}=N.target;i(E=>({...E,[S]:k}))},w=async N=>{if(N.preventDefault(),!s.email||!s.password){f({title:"Missing information",description:"Please fill in all fields.",variant:"destructive"});return}if(s.password.length<6){f({title:"Password too short",description:"Password must be at least 6 characters long.",variant:"destructive"});return}t(!0);try{const{data:S,error:k}=await R.rpc("email_exists",{check_email:s.email});if(k&&console.error("Email check error:",k),S){f({title:"Email already exists",description:"An account with this email already exists. Please sign in instead.",variant:"destructive"}),t(!1);return}const E=await d(s.email,s.password);E.error?f({title:"Sign up failed",description:E.error,variant:"destructive"}):(u(s.email),l(!0),i({email:"",password:""}))}catch{f({title:"Sign up failed",description:"An unexpected error occurred. Please try again.",variant:"destructive"})}finally{t(!1)}},b=async N=>{if(N.preventDefault(),!s.email||!s.password){f({title:"Missing information",description:"Please fill in all fields.",variant:"destructive"});return}t(!0);try{const S=await h(s.email,s.password);S.error?f({title:"Sign in failed",description:S.error,variant:"destructive"}):(localStorage.setItem("saved_username",s.email),f({title:"Welcome back!",description:"Successfully signed in."}))}catch{f({title:"Sign in failed",description:"An unexpected error occurred. Please try again.",variant:"destructive"})}finally{t(!1)}},j=async N=>{if(N.preventDefault(),!p){f({title:"Email required",description:"Please enter your email address.",variant:"destructive"});return}t(!0);try{const{error:S}=await R.auth.resetPasswordForEmail(p,{redirectTo:"https://syncchatapp.com/auth/callback"});S?f({title:"Reset failed",description:S.message,variant:"destructive"}):(f({title:"Reset link sent",description:"Check your email for password reset instructions."}),y(!1),g(""))}catch{f({title:"Reset failed",description:"An unexpected error occurred. Please try again.",variant:"destructive"})}finally{t(!1)}},_=async()=>{if(c){t(!0);try{const N=await R.auth.resend({type:"signup",email:c,options:{emailRedirectTo:"https://syncchatapp.com/auth/callback"}});N.error?f({title:"Resend failed",description:N.error.message,variant:"destructive"}):f({title:"Verification email sent",description:"Please check your email for the verification link."})}catch{f({title:"Resend failed",description:"An unexpected error occurred. Please try again.",variant:"destructive"})}finally{t(!1)}}};return a?o.jsx("div",{className:"min-h-screen flex items-center justify-center p-4 bg-gradient-to-br from-purple-50 via-blue-50 to-indigo-50",children:o.jsx(q,{className:"w-full max-w-md glass-card shadow-elegant p-8 text-center",children:o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"flex justify-center",children:o.jsx("div",{className:"w-16 h-16 rounded-full bg-green-100 flex items-center justify-center",children:o.jsx(Qs,{className:"h-8 w-8 text-green-600"})})}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Check Your Email!"}),o.jsxs("p",{className:"text-muted-foreground",children:["We sent a verification link to ",o.jsx("strong",{children:c})]}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Please click the link in your email to verify your account."})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx(D,{onClick:()=>{l(!1),u("")},className:"w-full",children:"Back to Sign In"}),o.jsx(D,{variant:"outline",onClick:_,disabled:e,className:"w-full",children:e?"Sending...":"Resend Email"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Can't find the email? Check your spam folder."})]})]})})}):v?o.jsx("div",{className:"min-h-screen flex items-center justify-center p-4 bg-gradient-to-br from-purple-50 via-blue-50 to-indigo-50",children:o.jsx(q,{className:"w-full max-w-md glass-card shadow-elegant p-8",children:o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Reset Password"}),o.jsx("p",{className:"text-muted-foreground",children:"Enter your email to receive reset instructions"})]}),o.jsxs("form",{onSubmit:j,className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(Yn,{htmlFor:"forgot-email",children:"Email"}),o.jsxs("div",{className:"relative",children:[o.jsx(pa,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),o.jsx(ut,{id:"forgot-email",type:"email",placeholder:"Enter your email",value:p,onChange:N=>g(N.target.value),className:"pl-9",required:!0})]})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx(D,{type:"button",variant:"outline",onClick:()=>y(!1),className:"flex-1",children:"Cancel"}),o.jsx(D,{type:"submit",disabled:e,className:"flex-1",children:e?"Sending...":"Send Reset Link"})]})]})]})})}):o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-blue-50 to-indigo-50",children:o.jsxs("div",{className:"container mx-auto px-4 py-12",children:[o.jsxs("div",{className:"text-center space-y-8 mb-16",children:[o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-center gap-3",children:[o.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-r from-purple-500 to-blue-500 flex items-center justify-center",children:o.jsx(Dn,{className:"h-6 w-6 text-white"})}),o.jsx("h1",{className:"text-4xl md:text-5xl font-bold bg-gradient-to-r from-purple-600 to-blue-600 bg-clip-text text-transparent",children:"SyncChat"})]}),o.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:"Connect with like-minded people, join meaningful conversations, and discover your perfect chat community."})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 max-w-4xl mx-auto",children:[o.jsxs("div",{className:"flex flex-col items-center space-y-3 p-6 rounded-xl bg-white/50 backdrop-blur-sm border border-white/20",children:[o.jsx("div",{className:"w-12 h-12 rounded-full bg-purple-100 flex items-center justify-center",children:o.jsx(vt,{className:"h-6 w-6 text-purple-600"})}),o.jsx("h3",{className:"font-semibold text-gray-800",children:"Smart Matching"}),o.jsx("p",{className:"text-sm text-gray-600 text-center",children:"Get matched with people who share your interests and personality"})]}),o.jsxs("div",{className:"flex flex-col items-center space-y-3 p-6 rounded-xl bg-white/50 backdrop-blur-sm border border-white/20",children:[o.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-100 flex items-center justify-center",children:o.jsx(Dn,{className:"h-6 w-6 text-blue-600"})}),o.jsx("h3",{className:"font-semibold text-gray-800",children:"Real-time Chat"}),o.jsx("p",{className:"text-sm text-gray-600 text-center",children:"Enjoy seamless conversations with voice, text, and interactive features"})]}),o.jsxs("div",{className:"flex flex-col items-center space-y-3 p-6 rounded-xl bg-white/50 backdrop-blur-sm border border-white/20",children:[o.jsx("div",{className:"w-12 h-12 rounded-full bg-green-100 flex items-center justify-center",children:o.jsx(rl,{className:"h-6 w-6 text-green-600"})}),o.jsx("h3",{className:"font-semibold text-gray-800",children:"Meaningful Connections"}),o.jsx("p",{className:"text-sm text-gray-600 text-center",children:"Build lasting friendships through shared experiences and activities"})]})]})]}),o.jsx("div",{className:"max-w-md mx-auto",children:o.jsx(q,{className:"glass-card shadow-elegant p-8",children:o.jsxs("div",{className:"text-center space-y-6",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Welcome to SyncChat"}),o.jsx("p",{className:"text-gray-600",children:"Sign in to your account or create a new one to get started"})]}),o.jsxs(td,{defaultValue:"signin",className:"w-full",children:[o.jsxs(ll,{className:"grid w-full grid-cols-2",children:[o.jsx(sr,{value:"signin",children:"Sign In"}),o.jsx(sr,{value:"signup",children:"Sign Up"})]}),o.jsx(or,{value:"signin",className:"space-y-4 mt-6",children:o.jsxs("form",{onSubmit:b,className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(Yn,{htmlFor:"signin-email",children:"Email"}),o.jsxs("div",{className:"relative",children:[o.jsx(pa,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),o.jsx(ut,{id:"signin-email",name:"email",type:"email",placeholder:"Enter your email",value:s.email,onChange:x,className:"pl-9",required:!0})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Yn,{htmlFor:"signin-password",children:"Password"}),o.jsxs("div",{className:"relative",children:[o.jsx(Ic,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),o.jsx(ut,{id:"signin-password",name:"password",type:r?"text":"password",placeholder:"Enter your password",value:s.password,onChange:x,className:"pl-9 pr-9",required:!0}),o.jsx(D,{type:"button",variant:"ghost",size:"sm",className:"absolute right-1 top-1 h-8 w-8 p-0",onClick:()=>n(!r),children:r?o.jsx(Oc,{className:"h-4 w-4"}):o.jsx(uh,{className:"h-4 w-4"})})]})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("input",{type:"checkbox",id:"remember-me",defaultChecked:!0,className:"h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded"}),o.jsx(Yn,{htmlFor:"remember-me",className:"text-sm text-muted-foreground",children:"Remember username"})]}),o.jsx(D,{type:"button",variant:"link",onClick:()=>y(!0),className:"text-sm p-0 h-auto",children:"Forgot password?"})]}),o.jsx(D,{type:"submit",disabled:e,className:"w-full",children:e?"Signing in...":"Sign In"})]})}),o.jsx(or,{value:"signup",className:"space-y-4 mt-6",children:o.jsxs("form",{onSubmit:w,className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(Yn,{htmlFor:"signup-email",children:"Email"}),o.jsxs("div",{className:"relative",children:[o.jsx(pa,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),o.jsx(ut,{id:"signup-email",name:"email",type:"email",placeholder:"Enter your email",value:s.email,onChange:x,className:"pl-9",required:!0})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Yn,{htmlFor:"signup-password",children:"Password"}),o.jsxs("div",{className:"relative",children:[o.jsx(Ic,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),o.jsx(ut,{id:"signup-password",name:"password",type:r?"text":"password",placeholder:"Create a password",value:s.password,onChange:x,className:"pl-9 pr-9",required:!0}),o.jsx(D,{type:"button",variant:"ghost",size:"sm",className:"absolute right-1 top-1 h-8 w-8 p-0",onClick:()=>n(!r),children:r?o.jsx(Oc,{className:"h-4 w-4"}):o.jsx(uh,{className:"h-4 w-4"})})]})]}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"Password must be at least 6 characters long"}),o.jsx(D,{type:"submit",disabled:e,className:"w-full",children:e?"Creating account...":"Create Account"})]})})]}),o.jsx("div",{className:"text-center",children:o.jsx("p",{className:"text-xs text-muted-foreground",children:"By signing up, you agree to our Terms of Service and Privacy Policy"})})]})})}),o.jsxs("div",{className:"text-center mt-16 space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm text-gray-500",children:[o.jsx(mi,{className:"h-4 w-4"}),o.jsx("span",{children:"Powered by real-time technology"})]}),o.jsx("p",{className:"text-xs text-gray-400",children:"SyncChat v1.0.0 • Connect • Chat • Discover"})]})]})})},RL=()=>{const{user:e}=_e();iS();const{toast:t}=Le(),[r,n]=m.useState(!1),s=l=>!l.username||l.username.trim().length===0?{isValid:!1,error:"Username is required"}:{isValid:!0},i=async(l,c=3,u=1e3)=>{for(let f=1;f<=c;f++)try{return await l()}catch(d){if(f===c)throw d;console.warn(`Operation failed, attempt ${f}/${c}. Retrying in ${u}ms...`),await new Promise(h=>setTimeout(h,u*f))}throw new Error("All retry attempts failed")};return{completeOnboarding:async l=>{var f,d,h,p;if(!(e!=null&&e.id))return console.error("❌ No user ID available:",e),t({title:"Authentication Error",description:"User not properly authenticated. Please sign in again.",variant:"destructive"}),{success:!1};try{const{data:{session:g},error:v}=await R.auth.getSession();if(v||!g)return console.error("❌ Session validation failed:",v),t({title:"Session Expired",description:"Please log in again to continue.",variant:"destructive"}),{success:!1};console.log("✅ Session validated for user:",g.user.email)}catch(g){console.error("❌ Error checking session:",g)}if(!/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(e.id))return console.error("❌ Invalid user ID format:",e.id),t({title:"Invalid User ID",description:"User ID format is invalid. Please contact support.",variant:"destructive"}),{success:!1};console.log("✅ User authentication validated:",{userId:e.id,email:e.email,emailConfirmed:!!e.email_confirmed_at});const u=s(l);if(!u.isValid)return t({title:"Profile Validation Error",description:u.error,variant:"destructive"}),{success:!1};n(!0);try{console.log("🔄 Starting profile creation for user:",e.id),await i(async()=>{const b={user_id:e.id,username:l.username.trim(),genres:Array.isArray(l.genres)?l.genres:[],personality:Array.isArray(l.personality)?l.personality:[],habits:Array.isArray(l.habits)?l.habits:[],updated_at:new Date().toISOString()};console.log("📝 Inserting profile data:",b);const{data:j,error:_}=await R.from("profiles").upsert(b,{onConflict:"profiles_user_id_key"}).select();if(console.log("💡 Profile upsert result:",{data:j,error:_}),_){if(console.error("❌ Profile creation error details:",{code:_.code,message:_.message,details:_.details,hint:_.hint}),_.code==="42704"){console.log("🔄 Trying alternative profile creation method...");const{data:N,error:S}=await R.from("profiles").upsert(b).select();if(S)throw new Error(`Profile creation failed: ${S.message}`);return N}throw new Error(`Profile creation failed: ${_.message}`)}console.log("✅ Profile created/updated successfully")});const{data:g,error:v}=await R.from("profiles").select("id, username").eq("user_id",e.id).single();if(v||!g)return console.error("Profile verification failed:",v),t({title:"Error",description:"Profile creation could not be verified. Please try again.",variant:"destructive"}),{success:!1};console.log("🔧 ROBUST: Finding group with enhanced error handling and retry logic...");let y=null,x=0;const w=3;for(;x<w&&!y;){x++,console.log(`🔄 Group assignment attempt ${x}/${w}`);try{const{data:b,error:j}=await R.rpc("get_available_groups",{p_limit:5});if(j){if(console.error(`❌ Error finding existing groups (attempt ${x}):`,j),x<w){await new Promise(_=>setTimeout(_,1e3*x));continue}throw new Error(`Failed to find groups: ${j.message}`)}if(b&&b.length>0){console.log(`🔍 Found ${b.length} potential groups to join`);for(const _ of b){console.log(`🔄 Attempting to join: ${_.name} (${_.current_members}/${_.max_members||10})`);try{const{data:N,error:S}=await R.rpc("join_group_safe",{p_group_id:_.id});if(console.log("💡 join_group_safe RPC result for existing group:",{rpcResult:N,rpcError:S}),!S&&(N!=null&&N.ok)){y=_.id,console.log(`✅ Successfully joined existing group: ${_.name} (members: ${N.members})`);break}else console.warn(`⚠️ Failed to join ${_.name}:`,(S==null?void 0:S.message)||(N==null?void 0:N.error))}catch(N){console.warn(`⚠️ Error joining ${_.name}:`,N)}}}if(!y){console.log(`🔧 Creating new group (attempt ${x})...`);const{data:_,error:N}=await R.from("groups").insert({name:`Group-${Date.now()}-${x}`,vibe_label:"New Connections",current_members:0,max_members:10,is_private:!1,lifecycle_stage:"active",created_by_user_id:e.id}).select("id, name").single();if(N||!_){if(console.error(`❌ Group creation failed (attempt ${x}):`,N),x<w){await new Promise(k=>setTimeout(k,1e3*x));continue}throw new Error(`Group creation failed: ${N==null?void 0:N.message}`)}console.log(`✅ New group created: ${_.name}`);let S=!1;for(let k=1;k<=3;k++)try{const{data:E,error:M}=await R.rpc("join_group_safe",{p_group_id:_.id});if(console.log(`💡 join_group_safe RPC result for new group (join attempt ${k}):`,{rpcResult:E,rpcError:M}),!M&&(E!=null&&E.ok)){y=_.id,S=!0,console.log(`✅ Successfully joined new group on attempt ${k}`);break}else console.error(`❌ Join attempt ${k} failed:`,(M==null?void 0:M.message)||(E==null?void 0:E.error)),k<3&&await new Promise(T=>setTimeout(T,1e3*k))}catch(E){console.error(`❌ Join attempt ${k} error:`,E),k<3&&await new Promise(M=>setTimeout(M,1e3*k))}if(!S){try{await R.from("groups").delete().eq("id",_.id),console.log("🧹 Cleaned up unused group")}catch(k){console.error("Failed to clean up unused group:",k)}if(x<w){console.log("⏭️ Retrying entire group assignment process..."),await new Promise(k=>setTimeout(k,2e3*x));continue}throw new Error("Failed to join newly created group after multiple attempts")}}}catch(b){if(console.error(`❌ Group assignment attempt ${x} failed:`,b),x<w){console.log(`⏭️ Retrying in ${2e3*x}ms...`),await new Promise(j=>setTimeout(j,2e3*x));continue}throw b}}if(!y)throw new Error("Failed to assign user to any group after all attempts");try{const{data:b}=await R.from("group_members").select("group_id").eq("user_id",e.id).eq("group_id",y).single();if(!b)throw new Error("Group membership verification failed");try{await R.from("profiles").update({group_id:y}).eq("user_id",e.id),console.log("✅ Profile updated with group_id")}catch{console.warn("⚠️ Profile update failed, but user is in group - continuing onboarding")}console.log("✅ User successfully assigned to group:",y);const{data:j}=await R.from("profiles").select("group_id").eq("user_id",e.id).single();return(j==null?void 0:j.group_id)!==y&&console.warn("⚠️ Profile group_id mismatch after assignment - this is non-critical"),t({title:"🎉 Welcome to Your Group!",description:"You've been successfully matched with other users. Start chatting!",variant:"default"}),window.dispatchEvent(new CustomEvent("onboarding:complete",{detail:{groupId:y}})),{success:!0,groupId:y}}catch(b){return console.error("❌ Group assignment verification failed:",b),t({title:"Assignment Verification Failed",description:"Group assignment may not have completed properly. Please try signing in again.",variant:"destructive"}),{success:!1}}return localStorage.removeItem("incomplete_signup_time"),localStorage.removeItem("onboarding_skipped"),{success:!0,groupId:y||void 0}}catch(g){console.error("❌ CRITICAL ERROR in completeOnboarding:",g),console.error("❌ Error stack:",g.stack),console.error("❌ Error details:",{message:g.message,name:g.name,cause:g.cause});let v="An unexpected error occurred. Please try again.";return(f=g.message)!=null&&f.includes("profile")?v="Failed to create user profile. Please check your information and try again.":(d=g.message)!=null&&d.includes("group")?v="Failed to assign you to a group. Please try again or contact support.":((h=g.message)!=null&&h.includes("network")||(p=g.message)!=null&&p.includes("fetch"))&&(v="Network error. Please check your connection and try again."),t({title:"Onboarding Failed",description:v,variant:"destructive"}),{success:!1}}finally{n(!1)}},isProcessing:r}},AL=({onComplete:e})=>{const{user:t,loading:r,signOut:n}=_e(),{completeOnboarding:s,isProcessing:i}=RL(),{toast:a}=Le(),{theme:l,toggleTheme:c}=M1(),[u,f]=m.useState(0),[d,h]=m.useState(!1),[p,g]=m.useState(null),[v,y]=m.useState({genres:[],personality:[],habits:[],username:""}),[x,w]=m.useState(!1);if(r)return o.jsx("div",{className:"min-h-screen flex items-center justify-center",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(yr,{className:"h-6 w-6 text-primary animate-pulse"}),o.jsx("span",{className:"text-muted-foreground",children:"Loading..."})]})});if(!t)return o.jsx(cS,{});const b=async()=>{if(u===0&&!x){a({title:"Legal Consent Required",description:"Please confirm your age and accept our terms to continue.",variant:"destructive"});return}if(u<2)f(u+1);else try{const T=await s(v);T.success?(T.groupId,e()):(console.error("❌ Onboarding failed:",T.error||"Unknown error"),a({title:"Onboarding Failed",description:T.error||"Failed to complete onboarding. Please try again.",variant:"destructive"}))}catch(T){console.error("❌ Critical error in onboarding completion:",T),a({title:"Onboarding Failed",description:"Failed to complete onboarding. Please try again.",variant:"destructive"})}},j=T=>{g(T)},_=()=>{u>0&&f(u-1)},N=T=>{y(I=>({...I,...T}))},S=[{title:"Legal Requirements",subtitle:"Please confirm your age and review our policies",component:o.jsx(j3,{onConsentChange:w,isConsentGiven:x})},{title:"Tell us about yourself",subtitle:"Help us find your perfect group match",component:o.jsx(p3,{profile:v,updateProfile:N})},{title:"Your identity",subtitle:"We'll assign you a fun username",component:o.jsx(g3,{profile:v,updateProfile:N})}],k=S[u],E=u===S.length-1,M=u===0?x:u===1?v.genres.length>0||v.personality.length>0||v.habits.length>0:v.username.length>0;return d?o.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-background via-background to-muted/30",children:[o.jsx("div",{className:"sticky top-0 z-50 bg-background/80 backdrop-blur-lg border-b border-border/50",children:o.jsxs("div",{className:"max-w-4xl mx-auto px-6 py-4 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-8 h-8 bg-primary rounded-lg flex items-center justify-center",children:o.jsx(yr,{className:"w-4 h-4 text-primary-foreground"})}),o.jsx("h1",{className:"text-xl font-bold bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent",children:"SyncChat"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs(D,{variant:"ghost",size:"sm",onClick:n,className:"gap-2",children:[o.jsx(fh,{className:"w-4 h-4"}),"Sign Out"]}),o.jsx(D,{variant:"ghost",size:"icon",onClick:c,className:"rounded-full",children:l==="dark"?o.jsx(vh,{className:"w-4 h-4"}):o.jsx(hh,{className:"w-4 h-4"})})]})]})}),o.jsx(EL,{userProfile:v,onGroupMatched:j})]}):o.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-background via-background to-muted/30",children:[o.jsx("div",{className:"sticky top-0 z-50 bg-background/80 backdrop-blur-lg border-b border-border/50",children:o.jsxs("div",{className:"max-w-4xl mx-auto px-6 py-4 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-8 h-8 bg-primary rounded-lg flex items-center justify-center",children:o.jsx(yr,{className:"w-4 h-4 text-primary-foreground"})}),o.jsx("h1",{className:"text-xl font-bold bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent",children:"SyncChat"})]}),o.jsx(D,{variant:"ghost",size:"icon",onClick:c,className:"rounded-full",children:l==="dark"?o.jsx(vh,{className:"w-4 h-4"}):o.jsx(hh,{className:"w-4 h-4"})})]})}),o.jsxs("div",{className:"max-w-4xl mx-auto px-6 py-6",children:[o.jsx("div",{className:"flex items-center gap-4 mb-8",children:S.map((T,I)=>o.jsxs(A.Fragment,{children:[o.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium transition-colors ${I<=u?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground"}`,children:I+1}),I<S.length-1&&o.jsx(mr,{className:`flex-1 ${I<u?"bg-primary":"bg-border"}`})]},I))}),o.jsxs(q,{className:"p-8 border-border/50 shadow-xl backdrop-blur-sm",children:[o.jsx("div",{className:"flex justify-end mb-4",children:o.jsxs(D,{variant:"ghost",size:"sm",onClick:async()=>{try{await n(),a({title:"Account creation cancelled",description:"You've been signed out. You can create an account again anytime.",variant:"default"}),window.location.href="/"}catch(T){console.error("Error signing out:",T),window.location.href="/"}},className:"gap-2 text-muted-foreground hover:text-foreground",children:[o.jsx(fh,{className:"w-4 h-4"}),"Exit Account Creation"]})}),o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("h2",{className:"text-3xl font-bold mb-2",children:k.title}),o.jsx("p",{className:"text-muted-foreground text-lg",children:k.subtitle})]}),o.jsx("div",{className:"min-h-[400px]",children:k.component}),o.jsxs("div",{className:"flex items-center justify-between mt-8 pt-6 border-t border-border/50",children:[o.jsxs(D,{variant:"ghost",onClick:_,disabled:u===0,className:"gap-2",children:[o.jsx(GE,{className:"w-4 h-4"}),"Back"]}),o.jsxs(D,{onClick:b,disabled:!M||i,className:"gap-2",children:[i?"Processing...":E?"Complete":"Continue",o.jsx(Hw,{className:"w-4 h-4"})]})]})]})]})]})},ML=({onStartMatching:e,onViewProfile:t,onViewSettings:r,className:n})=>{const{user:s}=_e(),{currentGroup:i}=D1(),{engagement:a}=dn(),[l,c]=m.useState(null),[u,f]=m.useState(!0);m.useEffect(()=>{s&&d()},[s]);const d=async()=>{if(s)try{const{data:y}=await R.from("profiles").select("*").eq("user_id",s.id).single();y&&c(y);const{data:x}=await R.from("group_members").select(`
          group_id,
          groups!inner(
            id,
            name,
            vibe_label,
            created_at,
            lifecycle_stage
          )
        `).eq("user_id",s.id).eq("groups.lifecycle_stage","active").order("joined_at",{ascending:!1}).limit(1).maybeSingle();if(x){const w=x.groups,{data:b,error:j}=await R.from("group_members").select("user_id",{count:"exact"}).eq("group_id",w.id)}}catch(y){console.error("Error loading user data:",y)}finally{f(!1)}},h=async()=>{if(s)try{const{data:y,error:x}=await R.from("group_members").select(`
          group_id,
          groups!inner(
            id,
            name,
            vibe_label,
            current_members,
            lifecycle_stage
          )
        `).eq("user_id",s.id).eq("groups.lifecycle_stage","active").order("joined_at",{ascending:!1}).limit(1).maybeSingle();if(x)throw x;if(y&&y.groups){const w=y.groups,{data:b,error:j}=await R.from("group_members").select("user_id",{count:"exact"}).eq("group_id",w.id);if(j)throw j;e&&e(w.id,{id:w.id,name:w.name,vibe_label:w.vibe_label,actual_member_count:(b==null?void 0:b.length)||0})}else e&&e()}catch(y){console.error("Error checking user group:",y),e&&e()}},p=()=>{console.log("HomePage: Navigating to profile..."),t&&t()},g=()=>{console.log("HomePage: Navigating to settings..."),r&&r()},v=()=>{const y=new Date().getHours();return y<12||y<17,"Hi there"};return u?o.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:o.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary"})}):o.jsx("div",{className:`min-h-screen bg-gradient-to-br from-background via-background to-muted/20 ${n}`,children:o.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[o.jsxs("div",{className:"text-center space-y-6 py-12",children:[o.jsxs("h1",{className:"text-4xl md:text-6xl font-bold bg-gradient-to-r from-foreground via-primary to-primary/60 bg-clip-text text-transparent leading-tight",children:[v(),", ",(l==null?void 0:l.username)||"friend","!"]}),o.jsx("p",{className:"text-xl text-muted-foreground max-w-2xl mx-auto leading-relaxed",children:"Connect with like-minded people, share your vibe, and build meaningful conversations in real-time."})]}),i?o.jsxs(q,{className:"relative overflow-hidden border-2 border-primary/20 bg-gradient-to-r from-primary/5 via-primary/10 to-primary/5 mb-8",children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-primary/5 to-transparent"}),o.jsxs(Z,{className:"relative p-8",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-12 h-12 bg-primary/20 rounded-xl flex items-center justify-center",children:o.jsx(vt,{className:"w-6 h-6 text-primary"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-xl font-bold text-foreground",children:"Active Group"}),o.jsx("p",{className:"text-muted-foreground",children:"You're currently connected"})]})]}),o.jsx(le,{variant:"secondary",className:"px-3 py-1 text-sm font-medium",children:i.vibe_label})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("h4",{className:"text-2xl font-bold text-foreground",children:i.name}),o.jsxs("div",{className:"flex items-center gap-6 text-sm text-muted-foreground",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(vt,{className:"w-4 h-4"}),o.jsxs("span",{children:[i.actual_member_count||i.current_members||0," members"]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(oc,{className:"w-4 h-4"}),o.jsxs("span",{children:["Active since ",new Date(i.created_at).toLocaleDateString()]})]})]})]})]})]}):o.jsx(q,{className:"border-2 border-dashed border-muted/50 bg-muted/10 mb-8",children:o.jsxs(Z,{className:"p-8 text-center",children:[o.jsx("div",{className:"w-16 h-16 bg-muted/50 rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx(eb,{className:"w-8 h-8 text-muted-foreground"})}),o.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Ready to Find Your Group?"}),o.jsx("p",{className:"text-muted-foreground mb-6 max-w-md mx-auto",children:"Discover amazing people who share your interests and start meaningful conversations."}),o.jsxs(D,{onClick:h,className:"bg-primary hover:bg-primary/90 text-primary-foreground px-6 py-3",children:[o.jsx(yr,{className:"w-4 h-4 mr-2"}),"Find My Group"]})]})}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:[o.jsx(q,{className:"group hover:shadow-2xl transition-all duration-300 hover:scale-[1.02] cursor-pointer active:scale-[0.98] border-2 hover:border-primary/30 bg-gradient-to-br from-primary/5 to-primary/10",onClick:h,children:o.jsxs(Z,{className:"p-8",children:[o.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[o.jsx("div",{className:"w-16 h-16 bg-primary/20 rounded-2xl flex items-center justify-center group-hover:scale-110 transition-transform",children:i?o.jsx(Dn,{className:"w-8 h-8 text-primary"}):o.jsx(Su,{className:"w-8 h-8 text-primary"})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"text-xl font-bold text-foreground mb-1",children:i?"Continue Chatting":"Find My Group"}),o.jsx("p",{className:"text-muted-foreground",children:i?`Jump back into ${i.name}`:"Match with your perfect group"})]}),o.jsx(Ys,{className:"w-5 h-5 text-primary group-hover:translate-x-1 transition-transform"})]}),i&&o.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[o.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),o.jsxs("span",{children:["Live • ",i.actual_member_count||i.current_members||0," online"]})]})]})}),o.jsx(q,{className:"group hover:shadow-2xl transition-all duration-300 hover:scale-[1.02] cursor-pointer active:scale-[0.98] border-2 hover:border-blue-500/30 bg-gradient-to-br from-blue-500/5 to-blue-500/10",onClick:p,children:o.jsxs(Z,{className:"p-8",children:[o.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[o.jsx("div",{className:"w-16 h-16 bg-blue-500/20 rounded-2xl flex items-center justify-center group-hover:scale-110 transition-transform",children:o.jsx($c,{className:"w-8 h-8 text-blue-500"})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"text-xl font-bold text-foreground mb-1",children:"My Profile"}),o.jsx("p",{className:"text-muted-foreground",children:"View stats & achievements"})]}),o.jsx(Ys,{className:"w-5 h-5 text-blue-500 group-hover:translate-x-1 transition-transform"})]}),a&&o.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4 border-t border-muted/50",children:[o.jsxs("div",{className:"text-center",children:[o.jsxs("div",{className:"text-2xl font-bold text-blue-500 flex items-center justify-center gap-1",children:[o.jsx(gs,{className:"w-5 h-5"}),a.achievement_points||0]}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"Karma Points"})]}),o.jsxs("div",{className:"text-center",children:[o.jsxs("div",{className:"text-2xl font-bold text-blue-500 flex items-center justify-center gap-1",children:[o.jsx(oc,{className:"w-5 h-5"}),a.daily_streak||0]}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"Day Streak"})]})]})]})}),o.jsx(q,{className:"group hover:shadow-2xl transition-all duration-300 hover:scale-[1.02] cursor-pointer active:scale-[0.98] border-2 hover:border-gray-500/30 bg-gradient-to-br from-gray-500/5 to-gray-500/10",onClick:g,children:o.jsxs(Z,{className:"p-8",children:[o.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[o.jsx("div",{className:"w-16 h-16 bg-gray-500/20 rounded-2xl flex items-center justify-center group-hover:scale-110 transition-transform",children:o.jsx(Xm,{className:"w-8 h-8 text-gray-500"})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"text-xl font-bold text-foreground mb-1",children:"Settings"}),o.jsx("p",{className:"text-muted-foreground",children:"Customize your experience"})]}),o.jsx(Ys,{className:"w-5 h-5 text-gray-500 group-hover:translate-x-1 transition-transform"})]}),o.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[o.jsx(dt,{className:"w-4 h-4"}),o.jsx("span",{children:"Premium features available"})]})]})})]}),a&&o.jsxs(q,{className:"mb-8",children:[o.jsxs(ue,{children:[o.jsxs(de,{className:"flex items-center gap-2 text-xl",children:[o.jsx(mi,{className:"w-5 h-5 text-primary"}),"Today's Activity"]}),o.jsx(St,{children:"Your engagement stats for today"})]}),o.jsx(Z,{children:o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:[o.jsxs("div",{className:"text-center p-4 rounded-xl bg-primary/5 border border-primary/10",children:[o.jsx("div",{className:"text-3xl font-bold text-primary mb-1",children:a.messages_sent_today||0}),o.jsxs("div",{className:"text-sm text-muted-foreground flex items-center justify-center gap-1",children:[o.jsx(Dn,{className:"w-4 h-4"}),"Messages"]})]}),o.jsxs("div",{className:"text-center p-4 rounded-xl bg-pink-500/5 border border-pink-500/10",children:[o.jsx("div",{className:"text-3xl font-bold text-pink-500 mb-1",children:a.reactions_given_today||0}),o.jsxs("div",{className:"text-sm text-muted-foreground flex items-center justify-center gap-1",children:[o.jsx(rl,{className:"w-4 h-4"}),"Reactions"]})]}),o.jsxs("div",{className:"text-center p-4 rounded-xl bg-orange-500/5 border border-orange-500/10",children:[o.jsx("div",{className:"text-3xl font-bold text-orange-500 mb-1",children:a.daily_streak||0}),o.jsxs("div",{className:"text-sm text-muted-foreground flex items-center justify-center gap-1",children:[o.jsx(oc,{className:"w-4 h-4"}),"Day Streak"]})]}),o.jsxs("div",{className:"text-center p-4 rounded-xl bg-purple-500/5 border border-purple-500/10",children:[o.jsx("div",{className:"text-3xl font-bold text-purple-500 mb-1",children:a.tools_used_today||0}),o.jsxs("div",{className:"text-sm text-muted-foreground flex items-center justify-center gap-1",children:[o.jsx(Kw,{className:"w-4 h-4"}),"Tools Used"]})]})]})})]}),o.jsx("div",{className:"text-center py-12",children:o.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-muted/50",children:[o.jsx(yr,{className:"w-4 h-4 text-muted-foreground"}),o.jsx("span",{className:"text-sm text-muted-foreground",children:"Ready to connect and create amazing conversations!"})]})})]})})},Ji=()=>{const{user:e}=_e(),{authState:t}=F4(),{userProfile:r,currentGroup:n,isLoading:s,setCurrentGroup:i}=D1(),a=Ri(),l=Ai(),c=wp(),u=B4(),f=()=>{try{window.history.length>1?window.history.back():l("/home")}catch(b){console.error("Error in back navigation:",b),l("/home")}},d=()=>{const b=a.pathname;return b==="/profile"?"profile":b==="/settings"?"settings":b==="/chat"?"chat":"home"},[h,p]=m.useState(d());m.useEffect(()=>{const b=d();p(b)},[a.pathname]);const g=async()=>{try{await new Promise(b=>setTimeout(b,2e3)),window.location.reload()}catch{}},v=async(b,j)=>{if(j)i(j);else try{const{data:_}=await R.from("groups").select("*").eq("id",b).maybeSingle();_&&i(_)}catch{}l("/chat")},y=()=>{l("/profile")},x=()=>{l("/settings")};if(!e)return o.jsx(cS,{});if(!e.email_confirmed_at)return o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:o.jsxs("div",{className:"text-center space-y-6 max-w-md mx-auto",children:[o.jsx("div",{className:"text-6xl mb-4",children:"📧"}),o.jsx("h1",{className:"text-2xl font-bold text-foreground",children:"Verify Your Email"}),o.jsx("p",{className:"text-muted-foreground",children:"Please check your email and click the verification link to access all features. You can still use the app, but some features may be limited."}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("button",{onClick:()=>window.location.reload(),className:"w-full px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90",children:"I've Verified My Email"}),o.jsx("button",{onClick:()=>{window.location.href="/"},className:"w-full px-4 py-2 border border-input bg-background rounded-md hover:bg-accent",children:"Continue Anyway"}),o.jsx("button",{onClick:()=>R.auth.signOut(),className:"w-full px-4 py-2 text-muted-foreground hover:text-foreground",children:"Sign Out"})]})]})});if(t.isLoading)return o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:o.jsx("div",{className:"text-center space-y-6 max-w-md mx-auto",children:o.jsx(wi,{size:"lg",text:"Checking your account..."})})});if(e&&!r&&s)return o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:o.jsx("div",{className:"text-center space-y-6 max-w-md mx-auto",children:o.jsx(wi,{size:"lg",text:"Loading your profile..."})})});if(t.shouldShowOnboarding)return o.jsx(AL,{onComplete:g});const w=()=>h==="profile"?o.jsx("div",{className:"animate-fade-in",children:o.jsx(l3,{onGoHome:()=>p("home")})}):h==="settings"?o.jsx("div",{className:"animate-fade-in",children:o.jsx(d3,{onGoHome:()=>p("home")})}):h==="chat"?n?o.jsx("div",{className:"animate-fade-in",children:o.jsx(oS,{groupId:n.id,groupName:n.name,groupVibe:n.vibe||"Friendly",memberCount:n.member_count||0,onBack:f,onGoHome:()=>p("home")})}):o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:o.jsxs("div",{className:"text-center space-y-6 max-w-md mx-auto",children:[o.jsx("div",{className:"text-6xl mb-4",children:"💬"}),o.jsx("h1",{className:"text-2xl font-bold text-foreground",children:"No Active Group"}),o.jsx("p",{className:"text-muted-foreground",children:"You need to join a group before accessing the chat."}),o.jsx("button",{onClick:()=>p("home"),className:"px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90",children:"Go to Home"})]})}):o.jsx("div",{className:"animate-fade-in",children:o.jsx(ML,{onStartMatching:(b,j)=>{b&&j?v(b,j):l("/chat")},onViewProfile:y,onViewSettings:x})});return o.jsxs("div",{className:`min-h-screen bg-background ${u==="mobile"?"mobile-optimized":u==="desktop"?"laptop-optimized":""}`,children:[o.jsx(V4,{isMobile:c}),o.jsx("div",{className:"pt-14",children:w()})]})},DL=()=>{const e=Ri();return m.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",e.pathname)},[e.pathname]),o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:o.jsxs("div",{className:"text-center",children:[o.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),o.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),o.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})},OL=()=>{const e=Ai(),[t]=s1(),{checkSubscription:r}=co(),n=t.get("session_id");return m.useEffect(()=>{n&&setTimeout(()=>{r()},2e3)},[n,r]),o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background to-muted flex items-center justify-center p-4",children:o.jsxs(q,{className:"max-w-lg mx-auto text-center",children:[o.jsxs(ue,{children:[o.jsx("div",{className:"flex items-center justify-center space-x-2 mb-4",children:o.jsx("div",{className:"bg-green-100 p-3 rounded-full",children:o.jsx(Dr,{className:"h-8 w-8 text-green-600"})})}),o.jsx(de,{className:"text-2xl",children:"Welcome to Premium!"}),o.jsx(St,{className:"text-lg",children:"Your subscription has been activated successfully"})]}),o.jsxs(Z,{className:"space-y-6",children:[o.jsxs("div",{className:"bg-primary/10 p-4 rounded-lg",children:[o.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-3",children:[o.jsx(dt,{className:"h-6 w-6 text-primary"}),o.jsx("span",{className:"font-semibold text-lg",children:"Premium Features Unlocked"})]}),o.jsxs("ul",{className:"text-sm space-y-2 text-left",children:[o.jsxs("li",{className:"flex items-center space-x-2",children:[o.jsx(Dr,{className:"h-4 w-4 text-green-500"}),o.jsx("span",{children:"Create private groups with custom names"})]}),o.jsxs("li",{className:"flex items-center space-x-2",children:[o.jsx(Dr,{className:"h-4 w-4 text-green-500"}),o.jsx("span",{children:"Unlimited group switching"})]}),o.jsxs("li",{className:"flex items-center space-x-2",children:[o.jsx(Dr,{className:"h-4 w-4 text-green-500"}),o.jsx("span",{children:"Unlimited direct messaging"})]}),o.jsxs("li",{className:"flex items-center space-x-2",children:[o.jsx(Dr,{className:"h-4 w-4 text-green-500"}),o.jsx("span",{children:"Custom group themes and emoji packs"})]}),o.jsxs("li",{className:"flex items-center space-x-2",children:[o.jsx(Dr,{className:"h-4 w-4 text-green-500"}),o.jsx("span",{children:"2x Karma bonus on all achievements"})]}),o.jsxs("li",{className:"flex items-center space-x-2",children:[o.jsx(Dr,{className:"h-4 w-4 text-green-500"}),o.jsx("span",{children:"Access to exclusive monthly vibe events"})]})]})]}),o.jsx(D,{className:"w-full",onClick:()=>e("/"),size:"lg",children:"Start Chatting with Premium"})]})]})})},IL=()=>{const[e]=s1(),t=Ai(),[r,n]=m.useState(!0),[s,i]=m.useState(null),[a,l]=m.useState("");return m.useEffect(()=>{(async()=>{try{const u=e.get("access_token"),f=e.get("refresh_token"),d=e.get("error"),h=e.get("error_description");if(d){i("error"),l(h||"Authentication failed"),n(!1);return}if(!u){i("error"),l("No access token received"),n(!1);return}const{error:p}=await R.auth.setSession({access_token:u,refresh_token:f||""});if(p){i("error"),l(p.message),n(!1);return}const{data:g,error:v}=await R.auth.getSession();if(v){console.error("AuthCallback failed:",v),i("error"),l("Failed to get session data"),n(!1),setTimeout(()=>{t("/auth",{replace:!0})},2e3);return}const y=g.session;if(y&&y.user.email_confirmed_at){const{data:x}=await R.from("profiles").select("*").eq("user_id",y.user.id).single();i("success"),x?(l("Email verified successfully! Redirecting to app..."),setTimeout(()=>{t("/",{replace:!0})},2e3)):(l("Email verified! Redirecting to onboarding..."),setTimeout(()=>{t("/",{replace:!0})},2e3)),n(!1)}else i("error"),l("Email verification failed. Please try again."),n(!1)}catch(u){console.error("AuthCallback error:",u),i("error"),l(u.message||"An unexpected error occurred"),n(!1),setTimeout(()=>{t("/auth",{replace:!0})},2e3)}})()},[e,t]),r?o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:o.jsxs("div",{className:"text-center space-y-4",children:[o.jsx(wi,{size:"lg",text:"Verifying your email..."}),o.jsx("p",{className:"text-muted-foreground",children:"Please wait while we complete the verification process."})]})}):o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:o.jsxs(q,{className:"w-full max-w-md",children:[o.jsxs(ue,{className:"text-center space-y-4",children:[s==="success"?o.jsx("div",{className:"w-16 h-16 mx-auto bg-green-100 rounded-full flex items-center justify-center",children:o.jsx(Qs,{className:"w-8 h-8 text-green-600"})}):o.jsx("div",{className:"w-16 h-16 mx-auto bg-red-100 rounded-full flex items-center justify-center",children:o.jsx(WE,{className:"w-8 h-8 text-red-600"})}),o.jsx(de,{className:"text-2xl font-bold",children:s==="success"?"Email Verified!":"Verification Failed"}),o.jsx("p",{className:"text-muted-foreground",children:a})]}),o.jsx(Z,{className:"space-y-4",children:s==="success"?o.jsxs("div",{className:"text-center space-y-2",children:[o.jsxs("p",{className:"text-sm text-green-600",children:[o.jsx(Qs,{className:"w-4 h-4 inline mr-2"}),"Your account is now active"]}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"You'll be redirected to the app shortly..."})]}):o.jsxs("div",{className:"space-y-3",children:[o.jsx(D,{onClick:()=>t("/auth"),className:"w-full",children:"Go to Sign In"}),o.jsx(D,{onClick:()=>t("/"),variant:"outline",className:"w-full",children:"Go to Home"})]})})]})})},LL=()=>{const[e,t]=m.useState(""),[r,n]=m.useState(!1),[s,i]=m.useState(!1),a=Ai(),{toast:l}=Le(),{resendVerification:c}=_e(),u=async f=>{var d,h,p;if(f.preventDefault(),!e){l({title:"Email required",description:"Please enter your email address.",variant:"destructive"});return}n(!0);try{const{error:g}=await c(e);g?(d=g.message)!=null&&d.includes("already verified")||(h=g.message)!=null&&h.includes("already confirmed")||(p=g.message)!=null&&p.includes("email_confirmed_at")?(l({title:"Email Already Verified",description:"Your email is already verified. You can sign in normally.",variant:"default"}),setTimeout(()=>a("/"),2e3)):l({title:"Failed to resend",description:g.message||"Please try again later.",variant:"destructive"}):(i(!0),l({title:"Verification email sent!",description:"Check your inbox for the confirmation link."}))}catch(g){l({title:"Error",description:g.message||"Failed to resend verification email.",variant:"destructive"})}finally{n(!1)}};return s?o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:o.jsx(q,{className:"w-full max-w-md",children:o.jsxs("div",{className:"p-8 text-center space-y-6",children:[o.jsx("div",{className:"w-16 h-16 mx-auto bg-green-100 rounded-full flex items-center justify-center",children:o.jsx(Qs,{className:"w-8 h-8 text-green-600"})}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Email Sent!"}),o.jsxs("p",{className:"text-muted-foreground",children:["We've sent a verification email to ",o.jsx("strong",{children:e})]}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Please check your inbox and click the verification link."})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx(D,{onClick:()=>a("/"),className:"w-full",children:"Back to Sign In"}),o.jsx(D,{onClick:()=>{i(!1),t("")},variant:"outline",className:"w-full",children:"Send Another Email"})]})]})})}):o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:o.jsxs(q,{className:"w-full max-w-md",children:[o.jsxs(ue,{className:"text-center space-y-4",children:[o.jsx("div",{className:"w-16 h-16 mx-auto bg-blue-100 rounded-full flex items-center justify-center",children:o.jsx(pa,{className:"w-8 h-8 text-blue-600"})}),o.jsx(de,{className:"text-2xl font-bold",children:"Resend Verification Email"}),o.jsx("p",{className:"text-muted-foreground",children:"Enter your email address and we'll send you a new verification link."})]}),o.jsxs(Z,{className:"space-y-4",children:[o.jsxs("form",{onSubmit:u,className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(Yn,{htmlFor:"email",children:"Email Address"}),o.jsxs("div",{className:"relative",children:[o.jsx(pa,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),o.jsx(ut,{id:"email",type:"email",placeholder:"Enter your email",value:e,onChange:f=>t(f.target.value),className:"pl-9",required:!0})]})]}),o.jsx(D,{type:"submit",disabled:r,className:"w-full",children:r?"Sending...":"Send Verification Email"})]}),o.jsxs(D,{onClick:()=>a("/"),variant:"outline",className:"w-full",children:[o.jsx(ch,{className:"w-4 h-4 mr-2"}),"Back to Sign In"]}),o.jsxs("div",{className:"text-center text-xs text-muted-foreground space-y-1",children:[o.jsx("p",{children:"Can't find the email? Check your spam folder."}),o.jsx("p",{children:"Verification links expire after 24 hours."})]})]})]})})},$L=new mR({defaultOptions:{queries:{retry:1,refetchOnWindowFocus:!1,staleTime:5*60*1e3},mutations:{retry:1}}}),UL=()=>o.jsx(yx,{children:o.jsx(gR,{client:$L,children:o.jsx(D4,{children:o.jsx(k4,{children:o.jsx(M4,{children:o.jsxs(VT,{children:[o.jsx(z2,{}),o.jsx(gP,{}),o.jsx($4,{}),o.jsxs(cA,{children:[o.jsx(U4,{}),o.jsx(yx,{children:o.jsxs(oA,{children:[o.jsx(Xr,{path:"/",element:o.jsx(Ji,{})}),o.jsx(Xr,{path:"/home",element:o.jsx(Ji,{})}),o.jsx(Xr,{path:"/chat",element:o.jsx(Ji,{})}),o.jsx(Xr,{path:"/profile",element:o.jsx(Ji,{})}),o.jsx(Xr,{path:"/settings",element:o.jsx(Ji,{})}),o.jsx(Xr,{path:"/success",element:o.jsx(OL,{})}),o.jsx(Xr,{path:"/auth/callback",element:o.jsx(IL,{})}),o.jsx(Xr,{path:"/email-verification",element:o.jsx(LL,{})}),o.jsx(Xr,{path:"*",element:o.jsx(DL,{})})]})})]})]})})})})})});gw(document.getElementById("root")).render(o.jsx(A.StrictMode,{children:o.jsx(UL,{})}));
